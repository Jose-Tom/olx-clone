/*! For license information please see 2.d58f8055.chunk.js.LICENSE.txt */
(this.webpackJsonpolx=this.webpackJsonpolx||[]).push([[2],[function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function u(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return A})),n.d(e,"c",(function(){return N})),n.d(e,"d",(function(){return K})),n.d(e,"e",(function(){return O})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return l})),n.d(e,"i",(function(){return h})),n.d(e,"j",(function(){return Z})),n.d(e,"k",(function(){return F})),n.d(e,"l",(function(){return z})),n.d(e,"m",(function(){return d})),n.d(e,"n",(function(){return p})),n.d(e,"o",(function(){return Q})),n.d(e,"p",(function(){return tt})),n.d(e,"q",(function(){return g})),n.d(e,"r",(function(){return M})),n.d(e,"s",(function(){return b})),n.d(e,"t",(function(){return _})),n.d(e,"u",(function(){return I})),n.d(e,"v",(function(){return q})),n.d(e,"w",(function(){return T})),n.d(e,"x",(function(){return C})),n.d(e,"y",(function(){return y})),n.d(e,"z",(function(){return m})),n.d(e,"A",(function(){return S})),n.d(e,"B",(function(){return w})),n.d(e,"C",(function(){return E})),n.d(e,"D",(function(){return j})),n.d(e,"E",(function(){return x})),n.d(e,"F",(function(){return V})),n.d(e,"G",(function(){return B})),n.d(e,"H",(function(){return U})),n.d(e,"I",(function(){return J})),n.d(e,"J",(function(){return $})),n.d(e,"K",(function(){return D})),n.d(e,"L",(function(){return G})),n.d(e,"M",(function(){return Y})),n.d(e,"N",(function(){return X})),n.d(e,"O",(function(){return k}));var r=n(0),i=!1,o=!1,a="${JSCORE_VERSION}",s=function(t,e){if(!t)throw u(e)},u=function(t){return new Error("Firebase Database ("+a+") INTERNAL ASSERT FAILED: "+t)},c=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(c(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},h=function(t){var e=c(t);return l.encodeByteArray(e,!0)},f=function(t){try{return l.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function d(t){return p(void 0,t)}function p(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=p(t[n],e[n]));return t}var v=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function g(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function m(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}function b(){return"object"===typeof self&&self.self===self}function _(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function w(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function I(){return g().indexOf("Electron/")>=0}function T(){var t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function E(){return g().indexOf("MSAppHost/")>=0}function S(){return!0===i||!0===o}function C(){return"indexedDB"in self&&null!=indexedDB}function k(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function O(){return!(!navigator||!navigator.cookieEnabled)}var N=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,A.prototype.create),o}return Object(r.c)(e,t),e}(Error),A=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?P(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new N(i,s,r);return u},t}();function P(t,e){return t.replace(R,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var R=/\{\$([^}]+)}/g;function x(t){return JSON.parse(t)}function D(t){return JSON.stringify(t)}var L=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=x(f(o[0])||""),n=x(f(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:e,claims:n,data:r,signature:i}},j=function(t){var e=L(t).claims;return!!e&&"object"===typeof e&&e.hasOwnProperty("iat")},M=function(t){var e=L(t).claims;return"object"===typeof e&&!0===e.admin};function F(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function U(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function q(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function V(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function B(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var K=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function z(t,e){var n=new W(t,e);return n.subscribe.bind(n)}var W=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function H(){}var G=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Q(t,e){return t+" failed: "+e+" argument "}function Y(t,e,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Q(t,e)+"must be a valid function.")}function X(t,e,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Q(t,e)+"must be a valid context object.")}var $=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,s(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},J=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Z(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function tt(t){return t&&t._delegate?t._delegate:t}}).call(this,n(17))},function(t,e,n){"use strict";t.exports=n(33)},function(t,e,n){"use strict";var r,i,o=n(0),a=n(1),s=n(5),u=n(4),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.b("app","Firebase",c),h="@firebase/app",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(a.m)(t),this.container=new s.b(e.name),this._addComponent(new s.a("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!==typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!==typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(Object(a.k)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new s.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!Object(a.k)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return d.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&Object(a.n)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var f=h[c];e[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(a.n)(e,t)},createSubscribe:a.l,ErrorFactory:a.b,deepExtend:a.n}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(a.s)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(a.z)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),m.apply(void 0,t)};var b=v;!function(t,e){t.INTERNAL.registerComponent(new s.a("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion(h,"0.6.20",e),t.registerVersion("fire-js","")}(b),e.a=b},function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d}));var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a}));var r=n(0),i=n(1),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);if(!this.isInitialized(o)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:o})}catch(a){if(i)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),s=a[0],u=a[1],c=this.normalizeInstanceIdentifier(s);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Object(r.e)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=void 0===i?"[DEFAULT]":i,a=t.options,s=void 0===a?{}:a,u=this.normalizeInstanceIdentifier(o);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:s});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var f=Object(r.e)(h.value,2),d=f[0],p=f[1];u===this.normalizeInstanceIdentifier(d)&&p.resolve(c)}}catch(v){e={error:v}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return c},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var s=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return ec})),n.d(e,"b",(function(){return ic})),n.d(e,"c",(function(){return hc})),n.d(e,"d",(function(){return dc})),n.d(e,"e",(function(){return rc})),n.d(e,"f",(function(){return tc})),n.d(e,"g",(function(){return sc})),n.d(e,"h",(function(){return gc})),n.d(e,"i",(function(){return vc})),n.d(e,"j",(function(){return Ms})),n.d(e,"k",(function(){return bc})),n.d(e,"l",(function(){return E})),n.d(e,"m",(function(){return Fs})),n.d(e,"n",(function(){return _c})),n.d(e,"o",(function(){return oc})),n.d(e,"p",(function(){return wc})),n.d(e,"q",(function(){return mc})),n.d(e,"r",(function(){return Hs})),n.d(e,"s",(function(){return Zu})),n.d(e,"t",(function(){return fc}));var r=n(1),i=n(4),o=n(10),a=n(0),s=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();s.o=-1;var u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},c=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(a.c)(e,t),e}(Error),l=new i.b("@firebase/firestore");function h(){return l.logLevel}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=i.a.DEBUG){var r=e.map(v);l.debug.apply(l,Object(a.f)(["Firestore (8.4.2): "+t],r))}}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=i.a.ERROR){var r=e.map(v);l.error.apply(l,Object(a.f)(["Firestore (8.4.2): "+t],r))}}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=i.a.WARN){var r=e.map(v);l.warn.apply(l,Object(a.f)(["Firestore (8.4.2): "+t],r))}}function v(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function g(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.4.2) INTERNAL ASSERTION FAILED: "+t;throw d(e),new Error(e)}function y(t,e){t||g()}function m(t,e){return t}function b(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var _=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=b(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function w(t,e){return t<e?-1:t>e?1:0}function I(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function T(t){return t+"\0"}var E=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?w(this.nanoseconds,t.nanoseconds):w(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),S=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new E(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function C(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function k(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function O(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var N=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&g(),void 0===n?n=t.length-e:n>t.length-e&&g(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(N),P=/^[_a-zA-Z][_a-zA-Z0-9]*$/,R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return P.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new c(u.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new c(u.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var l=t[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new c(u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new c(u.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(N),x=function(){function t(t){this.fields=t,t.sort(R.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return I(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),D=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return w(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();D.EMPTY_BYTE_STRING=new D("");var L=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function j(t){if(y(!!t),"string"==typeof t){var e=0,n=L.exec(t);if(y(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:M(t.seconds),nanos:M(t.nanos)}}function M(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function F(t){return"string"==typeof t?D.fromBase64String(t):D.fromUint8Array(t)}function U(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function q(t){var e=j(t.mapValue.fields.__local_write_time__.timestampValue);return new E(e.seconds,e.nanos)}function V(t){return null==t}function B(t){return 0===t&&1/t==-1/0}function K(t){return"number"==typeof t&&Number.isInteger(t)&&!B(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var z=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(A.fromString(e))},t.fromName=function(e){return new t(A.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===A.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return A.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new A(e.slice()))},t}();function W(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?U(t)?4:10:g()}function H(t,e){var n=W(t);if(n!==W(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return q(t).isEqual(q(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=j(t.timestampValue),r=j(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return F(t.bytesValue).isEqual(F(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return M(t.geoPointValue.latitude)===M(e.geoPointValue.latitude)&&M(t.geoPointValue.longitude)===M(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return M(t.integerValue)===M(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=M(t.doubleValue),r=M(e.doubleValue);return n===r?B(n)===B(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return I(t.arrayValue.values||[],e.arrayValue.values||[],H);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(C(n)!==C(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!H(n[i],r[i])))return!1;return!0}(t,e);default:return g()}}function G(t,e){return void 0!==(t.values||[]).find((function(t){return H(t,e)}))}function Q(t,e){var n=W(t),r=W(e);if(n!==r)return w(n,r);switch(n){case 0:return 0;case 1:return w(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=M(t.integerValue||t.doubleValue),r=M(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Y(t.timestampValue,e.timestampValue);case 4:return Y(q(t),q(e));case 5:return w(t.stringValue,e.stringValue);case 6:return function(t,e){var n=F(t),r=F(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=w(n[i],r[i]);if(0!==o)return o}return w(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=w(M(t.latitude),M(e.latitude));return 0!==n?n:w(M(t.longitude),M(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Q(n[i],r[i]);if(o)return o}return w(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=w(r[a],o[a]);if(0!==s)return s;var u=Q(n[r[a]],i[o[a]]);if(0!==u)return u}return w(r.length,o.length)}(t.mapValue,e.mapValue);default:throw g()}}function Y(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return w(t,e);var n=j(t),r=j(e),i=w(n.seconds,r.seconds);return 0!==i?i:w(n.nanos,r.nanos)}function X(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=j(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?F(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,z.fromName(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):g();var n,r}(t)}function $(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function J(t){return!!t&&"integerValue"in t}function Z(t){return!!t&&"arrayValue"in t}function tt(t){return!!t&&"nullValue"in t}function et(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nt(t){return!!t&&"mapValue"in t}var rt=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(R.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach((function(t,n){t?e.set(n,t):e.delete(n)}))},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return H(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===W(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),a=nt(o)?Object.assign({},o.mapValue.fields):{};return n.forEach((function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(a[n]=o,i=!0)}else null!==t?(a[n]=t,i=!0):a.hasOwnProperty(n)&&(delete a[n],i=!0)})),i?{mapValue:{fields:a}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(R.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!nt(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function it(t){var e=[];return k(t.fields||{},(function(t,n){var r=new R([t]);if(nt(n)){var i=it(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new x(e)}var ot=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,S.min(),rt.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,rt.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,rt.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=rt.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=rt.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),at=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function st(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new at(t,e,n,r,i,o,a)}function ut(t){var e=m(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+X(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),V(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=wt(e.startAt)),e.endAt&&(n+="|ub:",n+=wt(e.endAt)),e.h=n}return e.h}function ct(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Tt(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!H(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!St(t.startAt,e.startAt)&&St(t.endAt,e.endAt)}function lt(t){return z.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ht=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(a.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new ft(t,n,r):"array-contains"===n?new gt(t,r):"in"===n?new yt(t,r):"not-in"===n?new mt(t,r):"array-contains-any"===n?new bt(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new dt(t,n):new pt(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Q(e,this.value)):null!==e&&W(this.value)===W(e)&&this.m(Q(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return g()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),ft=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=z.fromName(r.referenceValue),i}return Object(a.c)(e,t),e.prototype.matches=function(t){var e=z.comparator(t.key,this.key);return this.m(e)},e}(ht),dt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=vt("in",n),r}return Object(a.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ht),pt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=vt("not-in",n),r}return Object(a.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ht);function vt(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return z.fromName(t.referenceValue)}))}var gt=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(a.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Z(e)&&G(e.arrayValue,this.value)},e}(ht),yt=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(a.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&G(this.value.arrayValue,e)},e}(ht),mt=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(a.c)(e,t),e.prototype.matches=function(t){if(G(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!G(this.value.arrayValue,e)},e}(ht),bt=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(a.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Z(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return G(e.value.arrayValue,t)}))},e}(ht),_t=function(t,e){this.position=t,this.before=e};function wt(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return X(t)})).join(",")}var It=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Tt(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Et(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?z.comparator(z.fromName(a.referenceValue),n.key):Q(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function St(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!H(t.position[n],e.position[n]))return!1;return!0}var Ct=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function kt(t,e,n,r,i,o,a,s){return new Ct(t,e,n,r,i,o,a,s)}function Ot(t){return new Ct(t)}function Nt(t){return!V(t.limit)&&"F"===t.limitType}function At(t){return!V(t.limit)&&"L"===t.limitType}function Pt(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Rt(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function xt(t){return null!==t.collectionGroup}function Dt(t){var e=m(t);if(null===e.p){e.p=[];var n=Rt(e),r=Pt(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new It(n)),e.p.push(new It(R.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new It(R.keyField(),u))}}}return e.p}function Lt(t){var e=m(t);if(!e.T)if("F"===e.limitType)e.T=st(e.path,e.collectionGroup,Dt(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Dt(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new It(o.field,a))}var s=e.endAt?new _t(e.endAt.position,!e.endAt.before):null,u=e.startAt?new _t(e.startAt.position,!e.startAt.before):null;e.T=st(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function jt(t,e,n){return new Ct(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mt(t,e){return ct(Lt(t),Lt(e))&&t.limitType===e.limitType}function Ft(t){return ut(Lt(t))+"|lt:"+t.limitType}function Ut(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+X(e.value);var e})).join(", ")+"]"),V(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+wt(t.startAt)),t.endAt&&(e+=", endAt: "+wt(t.endAt)),"Target("+e+")"}(Lt(t))+"; limitType="+t.limitType+")"}function qt(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):z.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Et(t.startAt,Dt(t),e))&&(!t.endAt||!Et(t.endAt,Dt(t),e))}(t,e)}function Vt(t){return function(e,n){for(var r=!1,i=0,o=Dt(t);i<o.length;i++){var a=o[i],s=Bt(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Bt(t,e,n){var r=t.field.isKeyField()?z.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Q(r,i):g()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return g()}}function Kt(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:B(e)?"-0":e}}function zt(t){return{integerValue:""+t}}function Wt(t,e){return K(e)?zt(e):Kt(t,e)}var Ht=function(){this._=void 0};function Gt(t,e,n){return t instanceof Xt?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof $t?Jt(t,e):t instanceof Zt?te(t,e):function(t,e){var n=Yt(t,e),r=ne(n)+ne(t.A);return J(n)&&J(t.A)?zt(r):Kt(t.R,r)}(t,e)}function Qt(t,e,n){return t instanceof $t?Jt(t,e):t instanceof Zt?te(t,e):n}function Yt(t,e){return t instanceof ee?J(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),e}(Ht),$t=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(a.c)(e,t),e}(Ht);function Jt(t,e){for(var n=re(e),r=function(t){n.some((function(e){return H(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Zt=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(a.c)(e,t),e}(Ht);function te(t,e){for(var n=re(e),r=function(t){n=n.filter((function(e){return!H(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ee=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(a.c)(e,t),e}(Ht);function ne(t){return M(t.integerValue||t.doubleValue)}function re(t){return Z(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ie=function(t,e){this.field=t,this.transform=e},oe=function(t,e){this.version=t,this.transformResults=e},ae=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function se(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ue=function(){};function ce(t,e,n){t instanceof pe?function(t,e,n){var r=t.value.clone(),i=ye(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ve?function(t,e,n){if(se(t.precondition,e)){var r=ye(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ge(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function le(t,e,n){t instanceof pe?function(t,e,n){if(se(t.precondition,e)){var r=t.value.clone(),i=me(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(de(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ve?function(t,e,n){if(se(t.precondition,e)){var r=me(t.fieldTransforms,n,e),i=e.data;i.setAll(ge(t)),i.setAll(r),e.convertToFoundDocument(de(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){se(t.precondition,e)&&e.convertToNoDocument(S.min())}(t,e)}function he(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Yt(o.transform,a||null);null!=s&&(null==n&&(n=rt.empty()),n.set(o.field,s))}return n||null}function fe(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&I(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof $t&&e instanceof $t||t instanceof Zt&&e instanceof Zt?I(t.elements,e.elements,H):t instanceof ee&&e instanceof ee?H(t.A,e.A):t instanceof Xt&&e instanceof Xt}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function de(t){return t.isFoundDocument()?t.version:S.min()}var pe=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(a.c)(e,t),e}(ue),ve=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(a.c)(e,t),e}(ue);function ge(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function ye(t,e,n){var r=new Map;y(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Qt(a,s,n[i]))}return r}function me(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Gt(s,u,e))}return r}var be,_e,we=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(a.c)(e,t),e}(ue),Ie=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(a.c)(e,t),e}(ue),Te=function(t){this.count=t};function Ee(t){switch(t){case u.OK:return g();case u.CANCELLED:case u.UNKNOWN:case u.DEADLINE_EXCEEDED:case u.RESOURCE_EXHAUSTED:case u.INTERNAL:case u.UNAVAILABLE:case u.UNAUTHENTICATED:return!1;case u.INVALID_ARGUMENT:case u.NOT_FOUND:case u.ALREADY_EXISTS:case u.PERMISSION_DENIED:case u.FAILED_PRECONDITION:case u.ABORTED:case u.OUT_OF_RANGE:case u.UNIMPLEMENTED:case u.DATA_LOSS:return!0;default:return g()}}function Se(t){if(void 0===t)return d("GRPC error has no .code"),u.UNKNOWN;switch(t){case be.OK:return u.OK;case be.CANCELLED:return u.CANCELLED;case be.UNKNOWN:return u.UNKNOWN;case be.DEADLINE_EXCEEDED:return u.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return u.RESOURCE_EXHAUSTED;case be.INTERNAL:return u.INTERNAL;case be.UNAVAILABLE:return u.UNAVAILABLE;case be.UNAUTHENTICATED:return u.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return u.INVALID_ARGUMENT;case be.NOT_FOUND:return u.NOT_FOUND;case be.ALREADY_EXISTS:return u.ALREADY_EXISTS;case be.PERMISSION_DENIED:return u.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return u.FAILED_PRECONDITION;case be.ABORTED:return u.ABORTED;case be.OUT_OF_RANGE:return u.OUT_OF_RANGE;case be.UNIMPLEMENTED:return u.UNIMPLEMENTED;case be.DATA_LOSS:return u.DATA_LOSS;default:return g()}}(_e=be||(be={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";var Ce=function(){function t(t,e){this.comparator=t,this.root=e||Oe.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Oe.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oe.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ke(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ke(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ke(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ke(this.root,t,this.comparator,!0)},t}(),ke=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Oe=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g();if(this.right.isRed())throw g();var t=this.left.check();if(t!==this.right.check())throw g();return t+(this.isRed()?0:1)},t}();Oe.EMPTY=null,Oe.RED=!0,Oe.BLACK=!1,Oe.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw g()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Oe(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Ne=function(){function t(t){this.comparator=t,this.data=new Ce(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ae(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ae(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ae=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Pe=new Ce(z.comparator);function Re(){return Pe}var xe=new Ce(z.comparator);function De(){return xe}var Le=new Ce(z.comparator);function je(){return Le}var Me=new Ne(z.comparator);function Fe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Me,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ue=new Ne(w);function qe(){return Ue}var Ve=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Be.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(S.min(),r,qe(),Re(),Fe())},t}(),Be=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(D.EMPTY_BYTE_STRING,n,Fe(),Fe(),Fe())},t}(),Ke=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ze=function(t,e){this.targetId=t,this.V=e},We=function(t,e,n,r){void 0===n&&(n=D.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},He=function(){function t(){this.S=0,this.D=Ye(),this.C=D.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Fe(),e=Fe(),n=Fe();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:g()}})),new Be(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Ye()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Ge=function(){function t(t){this.W=t,this.G=new Map,this.H=Re(),this.J=Qe(),this.Y=new Ne(w)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:g()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(lt(i))if(0===n){var o=new z(i.path);this.tt(e,o,ot.newNoDocument(o,S.min()))}else y(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&lt(o.target)){var a=new z(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,ot.newNoDocument(a,t))}r.O&&(n.set(i,r.M()),r.L())}}));var r=Fe();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Ve(t,n,this.Y,this.H,r);return this.H=Re(),this.J=Qe(),this.Y=new Ne(w),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new He,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Ne(w),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||f("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new He),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Qe(){return new Ce(z.comparator)}function Ye(){return new Ce(z.comparator)}var Xe={asc:"ASCENDING",desc:"DESCENDING"},$e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Je=function(t,e){this.databaseId=t,this.I=e};function Ze(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function tn(t,e){return t.I?e.toBase64():e.toUint8Array()}function en(t,e){return Ze(t,e.toTimestamp())}function nn(t){return y(!!t),S.fromTimestamp(function(t){var e=j(t);return new E(e.seconds,e.nanos)}(t))}function rn(t,e){return function(t){return new A(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function on(t){var e=A.fromString(t);return y(On(e)),e}function an(t,e){return rn(t.databaseId,e.path)}function sn(t,e){var n=on(e);if(n.get(1)!==t.databaseId.projectId)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(hn(n))}function un(t,e){return rn(t.databaseId,e)}function cn(t){var e=on(t);return 4===e.length?A.emptyPath():hn(e)}function ln(t){return new A(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hn(t){return y(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function fn(t,e,n){return{name:an(t,e),fields:n.toProto().mapValue.fields}}function dn(t,e,n){var r=sn(t,e.name),i=nn(e.updateTime),o=new rt({mapValue:{fields:e.fields}}),a=ot.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function pn(t,e){var n;if(e instanceof pe)n={update:fn(t,e.key,e.value)};else if(e instanceof we)n={delete:an(t,e.key)};else if(e instanceof ve)n={update:fn(t,e.key,e.data),updateMask:kn(e.fieldMask)};else{if(!(e instanceof Ie))return g();n={verify:an(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Xt)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $t)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Zt)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ee)return{fieldPath:e.field.canonicalString(),increment:n.A};throw g()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:en(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:g()}(t,e.precondition)),n}function vn(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ae.updateTime(nn(t.updateTime)):void 0!==t.exists?ae.exists(t.exists):ae.none()}(e.currentDocument):ae.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)y("REQUEST_TIME"===e.setToServerValue),n=new Xt;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new $t(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Zt(i)}else"increment"in e?n=new ee(t,e.increment):g();var o=R.fromServerFormat(e.fieldPath);return new ie(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=sn(t,e.update.name),o=new rt({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new x(e.map((function(t){return R.fromServerFormat(t)})))}(e.updateMask);return new ve(i,o,a,n,r)}return new pe(i,o,n,r)}if(e.delete){var s=sn(t,e.delete);return new we(s,n)}if(e.verify){var u=sn(t,e.verify);return new Ie(u,n)}return g()}function gn(t,e){return{documents:[un(t,e.path)]}}function yn(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=un(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=un(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(et(t.value))return{unaryFilter:{field:Tn(t.field),op:"IS_NAN"}};if(tt(t.value))return{unaryFilter:{field:Tn(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(et(t.value))return{unaryFilter:{field:Tn(t.field),op:"IS_NOT_NAN"}};if(tt(t.value))return{unaryFilter:{field:Tn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tn(t.field),op:In(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Tn(t.field),direction:wn(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||V(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=bn(e.startAt)),e.endAt&&(n.structuredQuery.endAt=bn(e.endAt)),n}function mn(t){var e=cn(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){y(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=function t(e){return e?void 0!==e.unaryFilter?[Cn(e)]:void 0!==e.fieldFilter?[Sn(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):g():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new It(En(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return V(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=_n(n.startAt));var l=null;return n.endAt&&(l=_n(n.endAt)),kt(e,i,s,a,u,"F",c,l)}function bn(t){return{before:t.before,values:t.position}}function _n(t){var e=!!t.before,n=t.values||[];return new _t(n,e)}function wn(t){return Xe[t]}function In(t){return $e[t]}function Tn(t){return{fieldPath:t.canonicalString()}}function En(t){return R.fromServerFormat(t.fieldPath)}function Sn(t){return ht.create(En(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return g()}}(t.fieldFilter.op),t.fieldFilter.value)}function Cn(t){switch(t.unaryFilter.op){case"IS_NAN":var e=En(t.unaryFilter.field);return ht.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=En(t.unaryFilter.field);return ht.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=En(t.unaryFilter.field);return ht.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=En(t.unaryFilter.field);return ht.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return g()}}function kn(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function On(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Nn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Pn(e)),e=An(t.get(n),e);return Pn(e)}function An(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Pn(t){return t+"\x01\x01"}function Rn(t){var e=t.length;if(y(e>=2),2===e)return y("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),A.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&g(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:g()}o=a+2}return new A(r)}var xn=function(t,e){this.seconds=t,this.nanoseconds=e},Dn=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Dn.store="owner",Dn.key="owner";var Ln=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ln.store="mutationQueues",Ln.keyPath="userId";var jn=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};jn.store="mutations",jn.keyPath="batchId",jn.userMutationsIndex="userMutationsIndex",jn.userMutationsKeyPath=["userId","batchId"];var Mn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Nn(e)]},t.key=function(t,e,n){return[t,Nn(e),n]},t}();Mn.store="documentMutations",Mn.PLACEHOLDER=new Mn;var Fn=function(t,e){this.path=t,this.readTime=e},Un=function(t,e){this.path=t,this.version=e},qn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};qn.store="remoteDocuments",qn.readTimeIndex="readTimeIndex",qn.readTimeIndexPath="readTime",qn.collectionReadTimeIndex="collectionReadTimeIndex",qn.collectionReadTimeIndexPath=["parentPath","readTime"];var Vn=function(t){this.byteSize=t};Vn.store="remoteDocumentGlobal",Vn.key="remoteDocumentGlobalKey";var Bn=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Bn.store="targets",Bn.keyPath="targetId",Bn.queryTargetsIndexName="queryTargetsIndex",Bn.queryTargetsKeyPath=["canonicalId","targetId"];var Kn=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Kn.store="targetDocuments",Kn.keyPath=["targetId","path"],Kn.documentTargetsIndex="documentTargetsIndex",Kn.documentTargetsKeyPath=["path","targetId"];var zn=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};zn.key="targetGlobalKey",zn.store="targetGlobal";var Wn=function(t,e){this.collectionId=t,this.parent=e};Wn.store="collectionParents",Wn.keyPath=["collectionId","parent"];var Hn=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Hn.store="clientMetadata",Hn.keyPath="clientId";var Gn=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Gn.store="bundles",Gn.keyPath="bundleId";var Qn=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Qn.store="namedQueries",Qn.keyPath="name";var Yn=Object(a.f)(Object(a.f)([],Object(a.f)(Object(a.f)([],Object(a.f)(Object(a.f)([],Object(a.f)(Object(a.f)([],[Ln.store,jn.store,Mn.store,qn.store,Bn.store,Dn.store,zn.store,Kn.store]),[Hn.store])),[Vn.store])),[Wn.store])),[Gn.store,Qn.store]),Xn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$n=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Jn=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Zn=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&g(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),tr=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Jn,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new rr(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=ur(e.target.error);n.ft.reject(new rr(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new rr(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(f("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new or(e)},t}(),er=function(){function e(t,n,i){this.name=t,this.version=n,this.wt=i,12.2===e._t(Object(r.q)())&&d("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return f("SimpleDb","Removing database:",t),ar(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=Object(r.q)(),n=e._t(t),i=0<n&&n<10,o=e.Et(t),a=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||a)},e.gt=function(){var e;return"undefined"!=typeof t&&"YES"===(null===(e=Object({NODE_ENV:"production",PUBLIC_URL:"/olx-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===e?void 0:e.Tt)},e.It=function(t,e){return t.store(e)},e._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(t){return Object(a.b)(this,void 0,void 0,(function(){var e,n=this;return Object(a.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(f("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new rr(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new c(u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new rr(t,n))},i.onupgradeneeded=function(t){f("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){f("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},e.prototype.runTransaction=function(t,e,n,r){return Object(a.b)(this,void 0,void 0,(function(){var i,o,s,u,c;return Object(a.d)(this,(function(l){switch(l.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,c,l,h;return Object(a.d)(this,(function(a){switch(a.label){case 0:++o,a.label=1;case 1:return a.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=a.sent(),e=tr.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Zn.reject(t)})).toPromise(),c={},s.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(a.sent(),s),c)];case 4:return l=a.sent(),h="FirebaseError"!==l.name&&o<3,f("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),nr=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return ar(this.Pt.delete())},t}(),rr=function(t){function e(e,n){var r=this;return(r=t.call(this,u.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(a.c)(e,t),e}(c);function ir(t){return"IndexedDbTransactionError"===t.name}var or=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(f("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),ar(n)},t.prototype.add=function(t){return f("SimpleDb","ADD",this.store.name,t,t),ar(this.store.add(t))},t.prototype.get=function(t){var e=this;return ar(this.store.get(t)).next((function(n){return void 0===n&&(n=null),f("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return f("SimpleDb","DELETE",this.store.name,t),ar(this.store.delete(t))},t.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),ar(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Zn((function(n,r){e.onerror=function(t){var e=ur(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Zn((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new nr(i),a=e(i.primaryKey,i.value,o);if(a instanceof Zn){var s=a.catch((function(t){return o.done(),Zn.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Zn.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function ar(t){return new Zn((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=ur(t.target.error);n(e)}}))}var sr=!1;function ur(t){var e=er._t(Object(r.q)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var i=new c("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return sr||(sr=!0,setTimeout((function(){throw i}),0)),i}}return t}var cr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(a.c)(e,t),e}($n);function lr(t,e){var n=m(t);return er.It(n.Mt,e)}var hr=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&ce(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&le(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&le(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(S.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Fe())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&I(this.mutations,t.mutations,(function(t,e){return fe(t,e)}))&&I(this.baseMutations,t.baseMutations,(function(t,e){return fe(t,e)}))},t}(),fr=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){y(e.mutations.length===r.length);for(var i=je(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),dr=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=S.min()),void 0===o&&(o=S.min()),void 0===a&&(a=D.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),pr=function(t){this.Lt=t};function vr(t,e){if(e.document)return dn(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=z.fromSegments(e.noDocument.path),r=_r(e.noDocument.readTime),i=ot.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=z.fromSegments(e.unknownDocument.path);return r=_r(e.unknownDocument.version),ot.newUnknownDocument(o,r)}return g()}function gr(t,e,n){var r=yr(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:an(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Ze(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new qn(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=br(e.version);return a=e.hasCommittedMutations,new qn(null,new Fn(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=br(e.version);return new qn(new Un(c,l),null,null,!0,r,i)}return g()}function yr(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function mr(t){var e=new E(t[0],t[1]);return S.fromTimestamp(e)}function br(t){var e=t.toTimestamp();return new xn(e.seconds,e.nanoseconds)}function _r(t){var e=new E(t.seconds,t.nanoseconds);return S.fromTimestamp(e)}function wr(t,e){for(var n=(e.baseMutations||[]).map((function(e){return vn(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return vn(t.Lt,e)})),s=E.fromMillis(e.localWriteTimeMs);return new hr(e.batchId,s,n,a)}function Ir(t){var e,n,r=_r(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?_r(t.lastLimboFreeSnapshotVersion):S.min();return void 0!==t.query.documents?(y(1===(n=t.query).documents.length),e=Lt(Ot(cn(n.documents[0])))):e=function(t){return Lt(mn(t))}(t.query),new dr(e,t.targetId,0,t.lastListenSequenceNumber,r,i,D.fromBase64String(t.resumeToken))}function Tr(t,e){var n,r=br(e.snapshotVersion),i=br(e.lastLimboFreeSnapshotVersion);n=lt(e.target)?gn(t.Lt,e.target):yn(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Bn(e.targetId,ut(e.target),r,o,e.sequenceNumber,i,n)}function Er(t){var e=mn({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?jt(e,e.limit,"L"):e}var Sr=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Cr(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:_r(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Cr(t).put({bundleId:(n=e).id,createTime:br(nn(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return kr(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Er(e.bundledQuery),readTime:_r(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return kr(t).put(function(t){return{name:t.name,readTime:br(nn(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Cr(t){return lr(t,Gn.store)}function kr(t){return lr(t,Qn.store)}var Or=function(){function t(){this.Bt=new Nr}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Zn.resolve()},t.prototype.getCollectionParents=function(t,e){return Zn.resolve(this.Bt.getEntries(e))},t}(),Nr=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ne(A.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ne(A.comparator)).toArray()},t}(),Ar=function(){function t(){this.qt=new Nr}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Nn(i)};return Pr(t).put(o)}return Zn.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[T(e),""],!1,!0);return Pr(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Rn(o.parent))}return n}))},t}();function Pr(t){return lr(t,Wn.store)}var Rr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},xr=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Dr(t,e,n){var r=t.store(jn.store),i=t.store(Mn.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ot({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){y(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Mn.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Zn.waitFor(o).next((function(){return c}))}function Lr(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw g();e=t.noDocument}return JSON.stringify(e).length}xr.DEFAULT_COLLECTION_PERCENTILE=10,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xr.DEFAULT=new xr(41943040,xr.DEFAULT_COLLECTION_PERCENTILE,xr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xr.DISABLED=new xr(-1,0,0);var jr=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return y(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Fr(t).Ot({index:jn.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Ur(t),a=Fr(t);return a.add({}).next((function(s){y("number"==typeof s);for(var u=new hr(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return pn(t.Lt,e)})),i=n.mutations.map((function(e){return pn(t.Lt,e)}));return new jn(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Ne((function(t,e){return w(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=Mn.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,Mn.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),Zn.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Fr(t).get(e).next((function(t){return t?(y(t.userId===n.userId),wr(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Zn.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Fr(t).Ot({index:jn.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(y(e.batchId>=r),o=wr(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Fr(t).Ot({index:jn.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Fr(t).Nt(jn.userMutationsIndex,n).next((function(t){return t.map((function(t){return wr(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Mn.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Ur(t).Ot({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Rn(u);if(s===n.userId&&e.path.isEqual(l))return Fr(t).get(c).next((function(t){if(!t)throw g();y(t.userId===n.userId),o.push(wr(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ne(w),i=[];return e.forEach((function(e){var o=Mn.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Ur(t).Ot({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Rn(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Zn.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Mn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Ne(w);return Ur(t).Ot({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=Rn(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Fr(t).get(e).next((function(t){if(null===t)throw g();y(t.userId===n.userId),r.push(wr(n.R,t))})))})),Zn.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Dr(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Zn.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Zn.resolve();var r=IDBKeyRange.lowerBound(Mn.prefixForUser(e.userId)),i=[];return Ur(t).Ot({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Rn(t[1]);i.push(o)}else r.done()})).next((function(){y(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Mr(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return qr(t).get(this.userId).next((function(t){return t||new Ln(e.userId,-1,"")}))},t}();function Mr(t,e,n){var r=Mn.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Ur(t).Ot({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Fr(t){return lr(t,jn.store)}function Ur(t){return lr(t,Mn.store)}function qr(t){return lr(t,Ln.store)}var Vr=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Br=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Vr(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return S.fromTimestamp(new E(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Kr(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return y(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Kr(t).Ot((function(a,s){var u=Ir(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Zn.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Kr(t).Ot((function(t,n){var r=Ir(n);e(r)}))},t.prototype.Xt=function(t){return zr(t).get(zn.key).next((function(t){return y(null!==t),t}))},t.prototype.Zt=function(t,e){return zr(t).put(zn.key,e)},t.prototype.te=function(t,e){return Kr(t).put(Tr(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=ut(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Kr(t).Ot({range:r,index:Bn.queryTargetsIndexName},(function(t,n,r){var o=Ir(n);ct(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Wr(t);return e.forEach((function(e){var a=Nn(e.path);i.push(o.put(new Kn(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),Zn.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Wr(t);return Zn.forEach(e,(function(e){var o=Nn(e.path);return Zn.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Wr(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Wr(t),i=Fe();return r.Ot({range:n,kt:!0},(function(t,e,n){var r=Rn(t[1]),o=new z(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Nn(e.path),r=IDBKeyRange.bound([n],[T(n)],!1,!0),i=0;return Wr(t).Ot({index:Kn.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Kr(t).get(e).next((function(t){return t?Ir(t):null}))},t}();function Kr(t){return lr(t,Bn.store)}function zr(t){return lr(t,zn.store)}function Wr(t){return lr(t,Kn.store)}function Hr(t){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(e){if(t.code!==u.FAILED_PRECONDITION||t.message!==Xn)throw t;return f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Gr(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=w(n,i);return 0===a?w(r,o):a}var Qr=function(){function t(t){this.ne=t,this.buffer=new Ne(Gr),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Gr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Yr=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(a.b)(e,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ir(e=n.sent())?(f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Hr(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Xr=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Zn.resolve(s.o);var r=new Qr(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),Zn.resolve(Rr)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Rr):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,o,a,s,u,c,l=this,d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>l.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,a=Date.now(),l.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(t,n,e)})).next((function(e){return o=e,u=Date.now(),l.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),h()<=i.a.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-d)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-d)+"ms"),Zn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:t})}))},t}(),$r=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Xr(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Jr(t,n)},t.prototype.removeReference=function(t,e,n){return Jr(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Jr(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return qr(t).$t((function(r){return Mr(t,r,e).next((function(t){return t&&(n=!0),Zn.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),Wr(t).delete([0,Nn(a.path)])}))}));i.push(u)}})).next((function(){return Zn.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Jr(t,e)},t.prototype.we=function(t,e){var n,r=Wr(t),i=s.o;return r.Ot({index:Kn.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==s.o&&e(new z(Rn(n)),i),i=u,n=a):i=s.o})).next((function(){i!==s.o&&e(new z(Rn(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Jr(t,e){return Wr(t).put(function(t,e){return new Kn(0,Nn(t.path),e)}(e,t.currentSequenceNumber))}var Zr=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){k(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return O(this.inner)},t}(),ti=function(){function t(){this.changes=new Zr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:S.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:ot.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Zn.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),ei=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return ii(t).put(oi(e),n)},t.prototype.removeEntry=function(t,e){var n=ii(t),r=oi(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return ii(t).get(oi(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return ii(t).get(oi(e)).next((function(t){return{document:n.ye(e,t),size:Lr(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Re();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Re(),i=new Ce(z.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Lr(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Zn.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ii(t).Ot({range:r},(function(t,e,r){for(var a=z.fromSegments(t);o&&z.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Re(),o=e.path.length+1,a={};if(n.isEqual(S.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=yr(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=qn.collectionReadTimeIndex}return ii(t).Ot(a,(function(t,n,a){if(t.length===o){var s=vr(r.R,n);e.path.isPrefixOf(s.key.path)?qt(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new ni(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return ri(t).get(Vn.key).next((function(t){return y(!!t),t}))},t.prototype.me=function(t,e){return ri(t).put(Vn.key,e)},t.prototype.ye=function(t,e){if(e){var n=vr(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(S.min()))return n}return ot.newInvalidDocument(t)},t}(),ni=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Zr((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(a.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ne((function(t,e){return w(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=gr(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Lr(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=gr(e.Ie.R,ot.newNoDocument(o,S.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Zn.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(ti);function ri(t){return lr(t,Vn.store)}function ii(t){return lr(t,qn.store)}function oi(t){return t.path.toArray()}var ai=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;y(n<r&&n>=0&&r<=11);var o=new tr("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Dn.store)}(t),function(t){t.createObjectStore(Ln.store,{keyPath:Ln.keyPath}),t.createObjectStore(jn.store,{keyPath:jn.keyPath,autoIncrement:!0}).createIndex(jn.userMutationsIndex,jn.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Mn.store)}(t),si(t),function(t){t.createObjectStore(qn.store)}(t));var a=Zn.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Kn.store),t.deleteObjectStore(Bn.store),t.deleteObjectStore(zn.store)}(t),si(t)),a=a.next((function(){return function(t){var e=t.store(zn.store),n=new zn(0,0,S.min().toTimestamp(),0);return e.put(zn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(jn.store).Nt().next((function(n){t.deleteObjectStore(jn.store),t.createObjectStore(jn.store,{keyPath:jn.keyPath,autoIncrement:!0}).createIndex(jn.userMutationsIndex,jn.userMutationsKeyPath,{unique:!0});var r=e.store(jn.store),i=n.map((function(t){return r.put(t)}));return Zn.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Hn.store,{keyPath:Hn.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Vn.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(qn.store);e.createIndex(qn.readTimeIndex,qn.readTimeIndexPath,{unique:!1}),e.createIndex(qn.collectionReadTimeIndex,qn.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(Gn.store,{keyPath:Gn.keyPath})}(t),function(t){t.createObjectStore(Qn.store,{keyPath:Qn.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(qn.store).Ot((function(t,n){e+=Lr(n)})).next((function(){var n=new Vn(e);return t.store(Vn.store).put(Vn.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Ln.store),r=t.store(jn.store);return n.Nt().next((function(n){return Zn.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(jn.userMutationsIndex,i).next((function(r){return Zn.forEach(r,(function(r){y(r.userId===n.userId);var i=wr(e.R,r);return Dr(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Kn.store),n=t.store(qn.store);return t.store(zn.store).get(zn.key).next((function(t){var r=[];return n.Ot((function(n,i){var o=new A(n),a=function(t){return[0,Nn(t)]}(o);r.push(e.get(a).next((function(n){return n?Zn.resolve():function(n){return e.put(new Kn(0,Nn(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Zn.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Wn.store,{keyPath:Wn.keyPath});var n=e.store(Wn.store),r=new Nr,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Nn(i)})}};return e.store(qn.store).Ot({kt:!0},(function(t,e){var n=new A(t);return i(n.popLast())})).next((function(){return e.store(Mn.store).Ot({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Rn(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Bn.store);return n.Ot((function(t,r){var i=Ir(r),o=Tr(e.R,i);return n.put(o)}))},t}();function si(t){t.createObjectStore(Kn.store,{keyPath:Kn.keyPath}).createIndex(Kn.documentTargetsIndex,Kn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Bn.store,{keyPath:Bn.keyPath}).createIndex(Bn.queryTargetsIndexName,Bn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(zn.store)}var ui="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ci=function(){function t(e,n,r,i,o,a,s,l,h,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=h,this.Ce=f,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new c(u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $r(this,i),this.Le=n+"main",this.R=new pr(l),this.Be=new er(this.Le,11,new ai(this.R)),this.qe=new Br(this.referenceDelegate,this.R),this.Ut=new Ar,this.Ue=function(t,e){return new ei(t,e)}(this.R,this.Ut),this.Qe=new Sr,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===f&&d("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,ui);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new s(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(a.b)(e,void 0,void 0,(function(){return Object(a.d)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Object(a.b)(e,void 0,void 0,(function(){return Object(a.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(a.b)(e,void 0,void 0,(function(){return Object(a.d)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return hi(e).put(new Hn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ir(e))return f("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return li(t).get(Dn.key).next((function(t){return Zn.resolve(e.tn(t))}))},t.prototype.en=function(t){return hi(t).delete(this.clientId)},t.prototype.nn=function(){return Object(a.b)(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Object(a.d)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=lr(t,Hn.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Zn.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Zn.resolve(!0):li(t).get(Dn.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,ui);return!1}}return!(!e.networkEnabled||!e.inForeground)||hi(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&f("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(a.b)(this,void 0,void 0,(function(){var t=this;return Object(a.d)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Dn.store,Hn.store],(function(e){var n=new cr(e,s.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return hi(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return jr.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;f("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Yn,(function(o){return i=new cr(o,r.Ne?r.Ne.next():s.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw d("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new c(u.FAILED_PRECONDITION,Xn);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return li(t).get(Dn.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new c(u.FAILED_PRECONDITION,ui)}))},t.prototype.Ze=function(t){var e=new Dn(this.clientId,this.allowTabSynchronization,Date.now());return li(t).put(Dn.key,e)},t.yt=function(){return er.yt()},t.prototype.Xe=function(t){var e=this,n=li(t);return n.get(Dn.key).next((function(t){return e.tn(t)?(f("IndexedDbPersistence","Releasing primary lease."),n.delete(Dn.key)):Zn.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(d("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return f("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return d("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){d("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function li(t){return lr(t,Dn.store)}function hi(t){return lr(t,Hn.store)}function fi(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var di=function(t,e){this.progress=t,this.wn=e},pi=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return z.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):xt(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new z(e)).next((function(t){var e=De();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=De();return this.Ut.getCollectionParents(t,i).next((function(a){return Zn.forEach(a,(function(a){var s=function(t,e){return new Ct(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=ot.newInvalidDocument(c),r=r.insert(c,l)),le(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){qt(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Fe(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof ve&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),vi=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Fe(),i=Fe(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),gi=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var o=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(S.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(a){var s=o.Cn(e,a);return(Nt(e)||At(e))&&o.Nn(e.limitType,s,r,n)?o.Dn(t,e):(h()<=i.a.DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ut(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Ne(Vt(t));return e.forEach((function(e,r){qt(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return h()<=i.a.DEBUG&&f("QueryEngine","Using full collection scan to execute query:",Ut(e)),this.Sn.getDocumentsMatchingQuery(t,e,S.min())},t}(),yi=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Ce(w),this.kn=new Zr((function(t){return ut(t)}),ct),this.On=S.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new pi(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function mi(t,e,n,r){return new yi(t,e,n,r)}function bi(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(a.d)(this,(function(a){switch(a.label){case 0:return n=m(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new pi(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Fe(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];a=a.add(m.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function _i(t,e){var n=m(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=Zn.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);y(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function wi(t){var e=m(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Ii(t,e){var n=m(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return y(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=Re();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Ti(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(S.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return Zn.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function Ti(t,e,n,r,i){var o=Fe();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Re();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(S.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Ei(t,e){var n=m(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Si(t,e){var n=m(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Zn.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new dr(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Ci(t,e,n){return Object(a.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(a.d)(this,(function(a){switch(a.label){case 0:r=m(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ir(s=a.sent()))throw s;return f("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function ki(t,e,n){var r=m(t),i=S.min(),o=Fe();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=m(t),i=r.kn.get(n);return void 0!==i?Zn.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Lt(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:S.min(),n?o:Fe())})).next((function(t){return{documents:t,Bn:o}}))}))}function Oi(t,e){var n=m(t),r=m(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Ni(t){var e=m(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=m(t),i=Re(),o=yr(n),a=ii(e),s=IDBKeyRange.lowerBound(o,!0);return a.Ot({index:qn.readTimeIndex,range:s},(function(t,e){var n=vr(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:mr(o)}}))}(e.$n,t,e.On)})).then((function(t){var n=t.wn,r=t.readTime;return e.On=r,n}))}function Ai(t){return Object(a.b)(this,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){return[2,(e=m(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ii(t),n=S.min();return e.Ot({index:qn.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=mr(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.On=t}))]}))}))}function Pi(t,e,n,r){return Object(a.b)(this,void 0,void 0,(function(){var i,o,s,u,c,l,h,f,d,p;return Object(a.d)(this,(function(a){switch(a.label){case 0:for(i=m(t),o=Fe(),s=Re(),u=je(),c=0,l=n;c<l.length;c++)h=l[c],f=e.qn(h.metadata.name),h.document&&(o=o.add(f)),s=s.insert(f,e.Un(h)),u=u.insert(f,e.Qn(h.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Si(i,function(t){return Lt(Ot(A.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=a.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Ti(t,d,s,S.min(),u).next((function(e){return d.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Ri(t,e,n){return void 0===n&&(n=Fe()),Object(a.b)(this,void 0,void 0,(function(){var r,i;return Object(a.d)(this,(function(o){switch(o.label){case 0:return[4,Si(t,Lt(Er(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=m(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=nn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var a=r.withResumeToken(D.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)}))}))]}}))}))}var xi=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Zn.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:nn(n.createTime)}),Zn.resolve()},t.prototype.getNamedQuery=function(t,e){return Zn.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Er(t.bundledQuery),readTime:nn(t.readTime)}}(e)),Zn.resolve()},t}(),Di=function(){function t(){this.Wn=new Ne(Li.Gn),this.zn=new Ne(Li.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Li(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Li(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new z(new A([])),r=new Li(n,t),i=new Li(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new z(new A([])),n=new Li(e,t),r=new Li(e,t+1),i=Fe();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Li(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Li=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return z.comparator(t.key,e.key)||w(t.ns,e.ns)},t.Hn=function(t,e){return w(t.ns,e.ns)||z.comparator(t.key,e.key)},t}(),ji=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Ne(Li.Gn)}return t.prototype.checkEmpty=function(t){return Zn.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new hr(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Li(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Zn.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Zn.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Zn.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Zn.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Zn.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Li(e,0),i=new Li(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Zn.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ne(w);return e.forEach((function(t){var e=new Li(t,0),i=new Li(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Zn.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;z.isDocumentKey(i)||(i=i.child(""));var o=new Li(new z(i),0),a=new Ne(w);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),Zn.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;y(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Zn.forEach(e.mutations,(function(i){var o=new Li(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Li(e,0),r=this.rs.firstAfterOrEqual(n);return Zn.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Zn.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Mi=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ce(z.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Zn.resolve(n?n.document.clone():ot.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Re();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():ot.newInvalidDocument(t))})),Zn.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Re(),i=new z(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||qt(e,c)&&(r=r.insert(c.key,c.clone()))}return Zn.resolve(r)},t.prototype.fs=function(t,e){return Zn.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Fi(this)},t.prototype.getSize=function(t){return Zn.resolve(this.size)},t}(),Fi=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(a.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Zn.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ti),Ui=function(){function t(t){this.persistence=t,this.ds=new Zr((function(t){return ut(t)}),ct),this.lastRemoteSnapshotVersion=S.min(),this.highestTargetId=0,this.ws=0,this._s=new Di,this.targetCount=0,this.ys=Vr.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Zn.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Zn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Zn.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Zn.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Zn.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Vr(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Zn.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Zn.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Zn.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),Zn.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Zn.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Zn.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Zn.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Zn.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Zn.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Zn.resolve(n)},t.prototype.containsKey=function(t,e){return Zn.resolve(this._s.containsKey(e))},t}(),qi=function(){function t(t,e){var n=this;this.gs={},this.Ne=new s(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Ui(this),this.Ut=new Or,this.Ue=function(t,e){return new Mi(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new pr(e),this.Qe=new xi(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new ji(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;f("MemoryPersistence","Starting transaction:",t);var i=new Vi(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Zn.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Vi=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(a.c)(e,t),e}($n),Bi=function(){function t(t){this.persistence=t,this.As=new Di,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw g()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Zn.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Zn.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Zn.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Zn.forEach(this.vs,(function(r){var i=z.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Zn.or([function(){return Zn.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Ki=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function zi(t,e){return"firestore_clients_"+t+"_"+e}function Wi(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Hi(t,e){return"firestore_targets_"+t+"_"+e}Ki.UNAUTHENTICATED=new Ki(null),Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid"),Ki.FIRST_PARTY=new Ki("first-party-uid");var Gi=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new c(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(d("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Qi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new c(i.error.code,i.error.message)),o?new t(e,i.state,r):(d("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Yi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=qe(),a=0;i&&a<r.activeTargetIds.length;++a)i=K(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(d("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Xi=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(d("SharedClientState","Failed to parse online state: "+e),null)},t}(),$i=function(){function t(){this.activeTargetIds=qe()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ji=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Ce(w),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=zi(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new $i),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(a.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,c,l,h,f=this;return Object(a.d)(this,(function(a){switch(a.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(zi(this.persistenceKey,r)))&&(o=Yi.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,l=this.Os;c<l.length;c++)h=l[c],this.Fs(h);return this.Os=[],this.window.addEventListener("unload",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Hi(this.persistenceKey,t));if(n){var r=Qi.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Hi(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return f("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){f("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){f("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(a.b)(e,void 0,void 0,(function(){var t,e,r,i,o,u;return Object(a.d)(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(u=function(t){var e=s.o;if(null!=t)try{var n=JSON.parse(t);y("number"==typeof n),e=n}catch(t){d("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==s.o&&this.sequenceNumberHandler(u);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Gi(this.currentUser,t,e,n),i=Wi(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Wi(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Hi(this.persistenceKey,t),i=new Qi(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Yi.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Gi.Vs(new Ki(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Qi.Vs(r,e)},t.prototype.js=function(t){return Xi.Vs(t)},t.prototype.ii=function(t){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(f("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=qe();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Zi=function(){function t(){this.li=new $i,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new $i,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),to=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),eo=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),no={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ro=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),io=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(a.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,a){var s=new o.f;s.listenOnce(o.c.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case o.a.NO_ERROR:var e=s.getResponseJson();f("Connection","XHR received:",JSON.stringify(e)),i(e);break;case o.a.TIMEOUT:f("Connection",'RPC "'+t+'" timed out'),a(new c(u.DEADLINE_EXCEEDED,"Request time out"));break;case o.a.HTTP_ERROR:var n=s.getStatus();if(f("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var l=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(u).indexOf(e)>=0?e:u.UNKNOWN}(r.status);a(new c(l,r.message))}else a(new c(u.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new c(u.UNAVAILABLE,"Connection failed."));break;default:g()}}finally{f("Connection",'RPC "'+t+'" completed.')}}));var l=JSON.stringify(r);s.send(e,"POST",l,n,15)}))},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Object(o.g)(),a=Object(o.h)(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(s.initMessageHeaders,e),Object(r.y)()||Object(r.B)()||Object(r.u)()||Object(r.w)()||Object(r.C)()||Object(r.t)()||(s.httpHeadersOverwriteParam="$httpHeaders");var l=n.join("");f("Connection","Creating WebChannel: "+l,s);var h=i.createWebChannel(l,s),d=!1,v=!1,g=new ro({Ei:function(t){v?f("Connection","Not sending because WebChannel is closed:",t):(d||(f("Connection","Opening WebChannel transport."),h.open(),d=!0),f("Connection","WebChannel sending:",t),h.send(t))},Ti:function(){return h.close()}}),m=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return m(h,o.e.EventType.OPEN,(function(){v||f("Connection","WebChannel transport opened.")})),m(h,o.e.EventType.CLOSE,(function(){v||(v=!0,f("Connection","WebChannel transport closed"),g.Vi())})),m(h,o.e.EventType.ERROR,(function(t){v||(v=!0,p("Connection","WebChannel transport errored:",t),g.Vi(new c(u.UNAVAILABLE,"The operation could not be completed")))})),m(h,o.e.EventType.MESSAGE,(function(t){var e;if(!v){var n=t.data[0];y(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){f("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=be[t];if(void 0!==e)return Se(e)}(o),s=i.message;void 0===a&&(a=u.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),v=!0,g.Vi(new c(a,s)),h.close()}else f("Connection","WebChannel received:",n),g.Si(n)}})),m(a,o.b.STAT_EVENT,(function(t){t.stat===o.d.PROXY?f("Connection","Detected buffering proxy"):t.stat===o.d.NOPROXY&&f("Connection","Detected no buffering proxy")})),setTimeout((function(){g.Pi()}),0),g},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);f("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return f("RestConnection","Received: ",t),t}),(function(e){throw p("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.2",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=no[t];return this.Di+"/v1/"+e+":"+n},t}());function oo(){return"undefined"!=typeof window?window:null}function ao(){return"undefined"!=typeof document?document:null}function so(t){return new Je(t,!0)}var uo=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),co=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new uo(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===u.RESOURCE_EXHAUSTED?(d(e.toString()),d("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===u.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new c(u.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Object(a.b)(t,void 0,void 0,(function(){return Object(a.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return f("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),lo=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return Object(a.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:g()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(y(void 0===e||"string"==typeof e),D.fromBase64String(e||"")):(y(void 0===e||e instanceof Uint8Array),D.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?u.UNKNOWN:Se(t.code);return new c(e,t.message||"")}(s);n=new We(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=sn(t,r.document.name),o=nn(r.document.updateTime);var s=new rt({mapValue:{fields:r.document.fields}}),l=(a=ot.newFoundDocument(i,o,s),r.targetIds||[]),h=r.removedTargetIds||[];n=new Ke(l,h,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=sn(t,r.document),o=r.readTime?nn(r.readTime):S.min(),s=ot.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Ke([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=sn(t,r.document),o=r.removedTargetIds||[],n=new Ke([],o,i,null);else{if(!("filter"in e))return g();e.filter;var f=e.filter;f.targetId,r=f.count||0,i=new Te(r),o=f.targetId,n=new ze(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return S.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?S.min():e.readTime?nn(e.readTime):S.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=ln(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=lt(r)?{documents:gn(t,r)}:{query:yn(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=tn(t,e.resumeToken):e.snapshotVersion.compareTo(S.min())>0&&(n.readTime=Ze(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return g()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=ln(this.R),e.removeTarget=t,this.cr(e)},e}(co),ho=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return Object(a.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(y(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(y(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?nn(t.updateTime):nn(e);return n.isEqual(S.min())&&(n=nn(e)),new oe(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=nn(t.commitTime);return this.listener.Tr(n,e)}return y(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=ln(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return pn(e.R,t)}))};this.cr(n)},e}(co),fo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(a.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new c(u.UNKNOWN,t.toString())}))},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new c(u.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),po=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(d(e),this.Vr=!1):f("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),vo=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Object(a.b)(o,void 0,void 0,(function(){return Object(a.d)(this,(function(t){switch(t.label){case 0:return Eo(this)?(f("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(a.b)(this,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){switch(n.label){case 0:return(e=m(t)).$r.add(4),[4,yo(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,go(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new po(n,r)};function go(t){return Object(a.b)(this,void 0,void 0,(function(){var e,n;return Object(a.d)(this,(function(r){switch(r.label){case 0:if(!Eo(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function yo(t){return Object(a.b)(this,void 0,void 0,(function(){var e,n;return Object(a.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function mo(t,e){var n=m(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),To(n)?Io(n):Uo(n).er()&&_o(n,e))}function bo(t,e){var n=m(t),r=Uo(n);n.Or.delete(e),r.er()&&wo(n,e),0===n.Or.size&&(r.er()?r.ir():Eo(n)&&n.Br.set("Unknown"))}function _o(t,e){t.qr.U(e.targetId),Uo(t).mr(e)}function wo(t,e){t.qr.U(e),Uo(t).yr(e)}function Io(t){t.qr=new Ge({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Uo(t).start(),t.Br.Sr()}function To(t){return Eo(t)&&!Uo(t).tr()&&t.Or.size>0}function Eo(t){return 0===m(t).$r.size}function So(t){t.qr=void 0}function Co(t){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(e){return t.Or.forEach((function(e,n){_o(t,e)})),[2]}))}))}function ko(t,e){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(n){return So(t),To(t)?(t.Br.Nr(e),Io(t)):t.Br.set("Unknown"),[2]}))}))}function Oo(t,e,n){return Object(a.b)(this,void 0,void 0,(function(){var r,i,o;return Object(a.d)(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof We&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(a.d)(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.Or.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.Or.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),f("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,No(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ke?t.qr.X(e):e instanceof ze?t.qr.rt(e):t.qr.et(e),n.isEqual(S.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,wi(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(D.EMPTY_BYTE_STRING,n.snapshotVersion)),wo(t,e);var r=new dr(n.target,e,1,n.sequenceNumber);_o(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return f("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,No(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function No(t,e,n){return Object(a.b)(this,void 0,void 0,(function(){var r=this;return Object(a.d)(this,(function(i){switch(i.label){case 0:if(!ir(e))throw e;return t.$r.add(1),[4,yo(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return wi(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Object(a.b)(r,void 0,void 0,(function(){return Object(a.d)(this,(function(e){switch(e.label){case 0:return f("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,go(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Ao(t,e){return e().catch((function(n){return No(t,n,e)}))}function Po(t){return Object(a.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(a.d)(this,(function(a){switch(a.label){case 0:e=m(t),n=qo(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return Eo(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Ei(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=qo(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,No(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Ro(e)&&xo(e),[2]}}))}))}function Ro(t){return Eo(t)&&!qo(t).tr()&&t.kr.length>0}function xo(t){qo(t).start()}function Do(t){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(e){return qo(t).Ar(),[2]}))}))}function Lo(t){return Object(a.b)(this,void 0,void 0,(function(){var e,n,r,i;return Object(a.d)(this,(function(o){for(e=qo(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function jo(t,e,n){return Object(a.b)(this,void 0,void 0,(function(){var r,i;return Object(a.d)(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=fr.from(r,e,n),[4,Ao(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Po(t)];case 2:return o.sent(),[2]}}))}))}function Mo(t,e){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(n){switch(n.label){case 0:return e&&qo(t).pr?[4,function(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r;return Object(a.d)(this,(function(i){switch(i.label){case 0:return Ee(r=e.code)&&r!==u.ABORTED?(n=t.kr.shift(),qo(t).sr(),[4,Ao(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Po(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ro(t)&&xo(t),[2]}}))}))}function Fo(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n;return Object(a.d)(this,(function(r){switch(r.label){case 0:return n=m(t),e?(n.$r.delete(2),[4,go(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,yo(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Uo(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=m(t);return r.br(),new lo(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Co.bind(null,t),Ri:ko.bind(null,t),_r:Oo.bind(null,t)}),t.Mr.push((function(n){return Object(a.b)(e,void 0,void 0,(function(){return Object(a.d)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),To(t)?Io(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),So(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function qo(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=m(t);return r.br(),new ho(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Do.bind(null,t),Ri:Mo.bind(null,t),Ir:Lo.bind(null,t),Tr:jo.bind(null,t)}),t.Mr.push((function(n){return Object(a.b)(e,void 0,void 0,(function(){return Object(a.d)(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Po(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(f("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr}var Vo=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new c(u.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Bo(t,e){if(d("AsyncQueue",e+": "+t),ir(t))return new c(u.UNAVAILABLE,e+": "+t);throw t}var Ko=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||z.comparator(e.key,n.key)}:function(t,e){return z.comparator(t.key,e.key)},this.keyedMap=De(),this.sortedSet=new Ce(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),zo=function(){function t(){this.Kr=new Ce(z.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):g():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Wo=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ko.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Mt(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Ho=function(){this.Wr=void 0,this.listeners=[]},Go=function(){this.queries=new Zr((function(t){return Ft(t)}),Mt),this.onlineState="Unknown",this.Gr=new Set};function Qo(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i,o,s,u,c;return Object(a.d)(this,(function(a){switch(a.label){case 0:if(n=m(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Ho),!i)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=a.sent(),[3,4];case 3:return u=a.sent(),c=Bo(u,"Initialization of query '"+Ut(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Jo(n),[2]}}))}))}function Yo(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a.d)(this,(function(a){return n=m(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Xo(t,e){for(var n=m(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&Jo(n)}function $o(t,e,n){var r=m(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function Jo(t){t.Gr.forEach((function(t){t.next()}))}var Zo=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Wo(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Wo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),ta=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),ea=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return sn(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?dn(this.R,t.document,!1):ot.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return nn(t)},t}(),na=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=ra(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new ea(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||Fe()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(a.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(a.d)(this,(function(o){switch(o.label){case 0:return[4,Pi(this.localStore,new ea(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Ri(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new di(Object.assign({},this.progress),t))]}}))}))},t}();function ra(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var ia=function(t){this.key=t},oa=function(t){this.key=t},aa=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Fe(),this.mutatedKeys=Fe(),this.lo=Vt(t),this.fo=new Ko(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new zo,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Nt(this.query)&&i.size===this.query.limit?i.last():null,c=At(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=qt(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Nt(this.query)||At(this.query))for(;a.size>this.query.limit;){var l=Nt(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return g()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new Wo(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new zo,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Fe(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new oa(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new ia(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Fe();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Wo.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),sa=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ua=function(t){this.key=t,this.bo=!1},ca=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Zr((function(t){return Ft(t)}),Mt),this.Vo=new Map,this.So=new Set,this.Do=new Ce(z.comparator),this.Co=new Map,this.No=new Di,this.xo={},this.Fo=new Map,this.ko=Vr.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function la(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a.d)(this,(function(a){switch(a.label){case 0:return n=Ua(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Si(n.localStore,Lt(e))];case 2:return s=a.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,ha(n,e,r,"current"===u)];case 3:i=a.sent(),n.isPrimaryClient&&mo(n.remoteStore,s),a.label=4;case 4:return[2,i]}}))}))}function ha(t,e,n,r){return Object(a.b)(this,void 0,void 0,(function(){var i,o,s,u,c,l;return Object(a.d)(this,(function(h){switch(h.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(a.b)(this,void 0,void 0,(function(){var i,o,s;return Object(a.d)(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,ki(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Ea(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,ki(t.localStore,e,!0)];case 1:return i=h.sent(),o=new aa(e,i.Bn),s=o._o(i.documents),u=Be.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),Ea(t,n,c.To),l=new sa(e,n,o),[2,(t.Po.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}}))}))}function fa(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i;return Object(a.d)(this,(function(o){switch(o.label){case 0:return n=m(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Mt(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Ci(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),bo(n.remoteStore,r.targetId),Ia(n,r.targetId)})).catch(Hr)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Ia(n,r.targetId),[4,Ci(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function da(t,e,n){return Object(a.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(a.d)(this,(function(a){switch(a.label){case 0:r=qa(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=m(t),i=E.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Fe());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=he(c,n.get(c.key));null!=l&&a.push(new ve(c.key,l,it(l.toProto().mapValue),ae.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ce(w)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,ka(r,i.changes)];case 3:return a.sent(),[4,Po(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Bo(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function pa(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r;return Object(a.d)(this,(function(i){switch(i.label){case 0:n=m(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ii(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(y(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?y(r.bo):t.removedDocuments.size>0&&(y(r.bo),r.bo=!1))})),[4,ka(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Hr(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function va(t,e,n){var r=m(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=m(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Jo(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ga(t,e,n){return Object(a.b)(this,void 0,void 0,(function(){var r,i,o,s,u,c;return Object(a.d)(this,(function(a){switch(a.label){case 0:return(r=m(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Ce(z.comparator)).insert(o,ot.newNoDocument(o,S.min())),u=Fe().add(o),c=new Ve(S.min(),new Map,new Ne(w),s,u),[4,pa(r,c)]):[3,2];case 1:return a.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Ca(r),[3,4];case 2:return[4,Ci(r.localStore,e,!1).then((function(){return Ia(r,e,n)})).catch(Hr)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))}function ya(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i;return Object(a.d)(this,(function(o){switch(o.label){case 0:n=m(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,_i(n.localStore,e)];case 2:return i=o.sent(),wa(n,r,null),_a(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ka(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Hr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ma(t,e,n){return Object(a.b)(this,void 0,void 0,(function(){var r,i;return Object(a.d)(this,(function(o){switch(o.label){case 0:r=m(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return y(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),wa(r,e,n),_a(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,ka(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Hr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ba(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a.d)(this,(function(a){switch(a.label){case 0:Eo((n=m(t)).remoteStore)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=m(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Bo(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function _a(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function wa(t,e,n){var r=m(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Ia(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Ta(t,e)}))}function Ta(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(bo(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Ca(t))}function Ea(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ia?(t.No.addReference(o.key,e),Sa(t,o)):o instanceof oa?(f("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Ta(t,o.key)):g()}}function Sa(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(f("SyncEngine","New document in limbo: "+n),t.So.add(r),Ca(t))}function Ca(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new z(A.fromString(e)),r=t.ko.next();t.Co.set(r,new ua(n)),t.Do=t.Do.insert(n,r),mo(t.remoteStore,new dr(Lt(Ot(n.path)),r,2,s.o))}}function ka(t,e,n){return Object(a.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(a.d)(this,(function(u){switch(u.label){case 0:return r=m(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.$o(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=vi.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(i),[4,function(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h;return Object(a.d)(this,(function(a){switch(a.label){case 0:n=m(t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Zn.forEach(e,(function(e){return Zn.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Zn.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return a.sent(),[3,4];case 3:if(!ir(r=a.sent()))throw r;return f("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(c=n.Fn.get(u),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),n.Fn=n.Fn.insert(u,h));return[2]}}))}))}(r.localStore,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Oa(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r;return Object(a.d)(this,(function(i){switch(i.label){case 0:return(n=m(t)).currentUser.isEqual(e)?[3,3]:(f("SyncEngine","User change. New user:",e.toKey()),[4,bi(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new c(u.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,ka(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Na(t,e){var n=m(t),r=n.Co.get(e);if(r&&r.bo)return Fe().add(r.key);var i=Fe(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Aa(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i;return Object(a.d)(this,(function(o){switch(o.label){case 0:return[4,ki((n=m(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Ea(n,e.targetId,i.To),i)]}}))}))}function Pa(t){return Object(a.b)(this,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){return[2,Ni((e=m(t)).localStore).then((function(t){return ka(e,t)}))]}))}))}function Ra(t,e,n,r){return Object(a.b)(this,void 0,void 0,(function(){var i,o;return Object(a.d)(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=m(t),r=m(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Zn.resolve(null)}))}))}((i=m(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Po(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(wa(i,e,r||null),_a(i,e),function(t,e){m(m(t)._n).Gt(e)}(i.localStore,e)):g(),a.label=4;case 4:return[4,ka(i,o)];case 5:return a.sent(),[3,7];case 6:f("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function xa(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l;return Object(a.d)(this,(function(a){switch(a.label){case 0:return Ua(n=m(t)),qa(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Da(n,r.toArray())]);case 1:return i=a.sent(),n.Oo=!0,[4,Fo(n.remoteStore,!0)];case 2:for(a.sent(),o=0,s=i;o<s.length;o++)u=s[o],mo(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):l=l.then((function(){return Ia(n,e),Ci(n.localStore,e,!0)})),bo(n.remoteStore,e)})),[4,l]);case 4:return a.sent(),[4,Da(n,c)];case 5:return a.sent(),function(t){var e=m(t);e.Co.forEach((function(t,n){bo(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Ce(z.comparator)}(n),n.Oo=!1,[4,Fo(n.remoteStore,!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))}function Da(t,e,n){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h,f,d,p,v,g;return Object(a.d)(this,(function(a){switch(a.label){case 0:n=m(t),r=[],i=[],o=0,s=e,a.label=1;case 1:return o<s.length?(u=s[o],c=void 0,(l=n.Vo.get(u))&&0!==l.length?[4,Si(n.localStore,Lt(l[0]))]:[3,7]):[3,13];case 2:c=a.sent(),h=0,f=l,a.label=3;case 3:return h<f.length?(d=f[h],p=n.Po.get(d),[4,Aa(n,p)]):[3,6];case 4:(v=a.sent()).snapshot&&i.push(v.snapshot),a.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Oi(n.localStore,u)];case 8:return g=a.sent(),[4,Si(n.localStore,g)];case 9:return c=a.sent(),[4,ha(n,La(g),u,!1)];case 10:a.sent(),a.label=11;case 11:r.push(c),a.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function La(t){return kt(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ja(t){var e=m(t);return m(m(e.localStore).persistence).fn()}function Ma(t,e,n,r){return Object(a.b)(this,void 0,void 0,(function(){var i,o,s;return Object(a.d)(this,(function(a){switch(a.label){case 0:return(i=m(t)).Oo?(f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ni(i.localStore)];case 3:return o=a.sent(),s=Ve.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,ka(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Ci(i.localStore,e,!0)];case 6:return a.sent(),Ia(i,e,r),[3,8];case 7:g(),a.label=8;case 8:return[2]}}))}))}function Fa(t,e,n){return Object(a.b)(this,void 0,void 0,(function(){var r,i,o,s,u,c,l,h,d,p;return Object(a.d)(this,(function(v){switch(v.label){case 0:if(!(r=Ua(t)).Oo)return[3,10];i=0,o=e,v.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(f("SyncEngine","Adding an already active target "+s),[3,5]):[4,Oi(r.localStore,s)]):[3,6];case 2:return u=v.sent(),[4,Si(r.localStore,u)];case 3:return c=v.sent(),[4,ha(r,La(u),c.targetId,!1)];case 4:v.sent(),mo(r.remoteStore,c),v.label=5;case 5:return i++,[3,1];case 6:l=function(t){return Object(a.d)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Ci(r.localStore,t,!1).then((function(){bo(r.remoteStore,t),Ia(r,t)})).catch(Hr)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,d=n,v.label=7;case 7:return h<d.length?(p=d[h],[5,l(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ua(t){var e=m(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pa.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Na.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ga.bind(null,e),e.vo._r=Xo.bind(null,e.eventManager),e.vo.Mo=$o.bind(null,e.eventManager),e}function qa(t){var e=m(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ya.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ma.bind(null,e),e}function Va(t,e,n){var r=m(t);(function(t,e,n){return Object(a.b)(this,void 0,void 0,(function(){var r,i,o,s,u,c;return Object(a.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=a.sent(),[4,function(t,e){var n=m(t),r=nn(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Qe.getBundleMetadata(t,e.id)})).then((function(t){return!!t&&t.createTime.compareTo(r)>=0}))}(t.localStore,r)];case 2:return a.sent()?[4,e.close()]:[3,4];case 3:return[2,(a.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(ra(r)),i=new na(r,t.localStore,e.R),[4,e.Lo()];case 5:o=a.sent(),a.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(s=a.sent())&&n._updateProgress(s),[4,e.Lo()];case 8:o=a.sent(),a.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return u=a.sent(),[4,ka(t,u.wn,void 0)];case 12:return a.sent(),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Qe.saveBundleMetadata(t,e)}))}(t.localStore,r)];case 13:return a.sent(),n._completeWith(u.progress),[3,15];case 14:return p("SyncEngine","Loading bundle failed with "+(c=a.sent())),n._failWith(c),[3,15];case 15:return[2]}}))}))})(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Ba=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(e){switch(e.label){case 0:return this.R=so(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return mi(this.persistence,new gi,t.initialUser,this.R)},t.prototype.qo=function(t){return new qi(Bi.bs,this.R)},t.prototype.Bo=function(t){return new Zi},t.prototype.terminate=function(){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Ka=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(a.c)(e,t),e.prototype.initialize=function(e){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ai(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,qa(this.Ko.syncEngine)];case 4:return n.sent(),[4,Po(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return mi(this.persistence,new gi,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Yr(e,t.asyncQueue)},e.prototype.qo=function(t){var e=fi(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?xr.withCacheSize(this.cacheSizeBytes):xr.DEFAULT;return new ci(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,oo(),ao(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Zi},e}(Ba),za=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(a.c)(e,t),e.prototype.initialize=function(e){return Object(a.b)(this,void 0,void 0,(function(){var n,r=this;return Object(a.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Ji?(this.sharedClientState.syncEngine={ui:Ra.bind(null,n),ai:Ma.bind(null,n),hi:Fa.bind(null,n),fn:ja.bind(null,n),ci:Pa.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Object(a.b)(r,void 0,void 0,(function(){return Object(a.d)(this,(function(e){switch(e.label){case 0:return[4,xa(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=oo();if(!Ji.yt(e))throw new c(u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=fi(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Ji(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Ka),Wa=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n=this;return Object(a.d)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return va(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Oa.bind(null,this.syncEngine),[4,Fo(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Go},t.prototype.createDatastore=function(t){var e,n=so(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new io(e));return function(t,e,n){return new fo(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return va(a.syncEngine,t,0)},o=eo.yt()?new eo:new to,new vo(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new ca(t,e,n,r,i,o);return a&&(s.Oo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(a.b)(this,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){switch(n.label){case 0:return e=m(t),f("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,yo(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();function Ha(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(a.b)(this,void 0,void 0,(function(){var r;return Object(a.d)(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Ga=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Qa=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Jn,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return Object(a.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(a.d)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new ta(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return Object(a.b)(this,void 0,void 0,(function(){var t,e;return Object(a.d)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return Object(a.b)(this,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(a.b)(this,void 0,void 0,(function(){var t,e;return Object(a.d)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),Ya=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(a.b)(this,void 0,void 0,(function(){var e,n=this;return Object(a.d)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new c(u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a.d)(this,(function(a){switch(a.label){case 0:return n=m(t),r=ln(n.R)+"/documents",i={documents:e.map((function(t){return an(n.R,t)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){y(!!e.found),e.found.name,e.found.updateTime;var n=sn(t,e.found.name),r=nn(e.found.updateTime),i=new rt({mapValue:{fields:e.found.fields}});return ot.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){y(!!e.missing),y(!!e.readTime);var n=sn(t,e.missing),r=nn(e.readTime);return ot.newNoDocument(n,r)}(t,e):g()}(n.R,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());y(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new we(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(a.b)(this,void 0,void 0,(function(){var t,e=this;return Object(a.d)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=z.fromPath(n);e.mutations.push(new Ie(r,e.precondition(r)))})),[4,function(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i;return Object(a.d)(this,(function(o){switch(o.label){case 0:return n=m(t),r=ln(n.R)+"/documents",i={writes:e.map((function(t){return pn(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw g();e=S.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new c(u.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ae.updateTime(e):ae.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(S.min()))throw new c(u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ae.updateTime(e)}return ae.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Xa=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new uo(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Object(a.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(a.d)(this,(function(r){return t=new Ya(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!V(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ee(e)}return!1},t}(),$a=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Ki.UNAUTHENTICATED,this.clientId=_.u(),this.credentialListener=function(){},this.receivedInitialUser=new Jn,this.credentials.setChangeListener((function(t){f("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()}))}return t.prototype.getConfiguration=function(){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then((function(){return e.credentialListener(e.user)}))},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(a.b)(t,void 0,void 0,(function(){var t,n;return Object(a.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Bo(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Ja(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(a.d)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((function(){return Object(a.b)(i,void 0,void 0,(function(){return Object(a.d)(this,(function(t){switch(t.label){case 0:return[4,bi(e.localStore,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Za(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r;return Object(a.d)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,ts(t)];case 1:return n=i.sent(),f("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(n){return t.asyncQueue.enqueueRetryable((function(){return function(t,e){return Object(a.b)(this,void 0,void 0,(function(){var n,r;return Object(a.d)(this,(function(i){switch(i.label){case 0:return(n=m(t)).asyncQueue.verifyOperationInProgress(),f("RemoteStore","RemoteStore received new credentials"),r=Eo(n),n.$r.add(3),[4,yo(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,go(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,n)}))})),t.onlineComponents=e,[2]}}))}))}function ts(t){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(f("FirestoreClient","Using default OfflineComponentProvider"),[4,Ja(t,new Ba)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function es(t){return Object(a.b)(this,void 0,void 0,(function(){return Object(a.d)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(f("FirestoreClient","Using default OnlineComponentProvider"),[4,Za(t,new Wa)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function ns(t){return ts(t).then((function(t){return t.persistence}))}function rs(t){return ts(t).then((function(t){return t.localStore}))}function is(t){return es(t).then((function(t){return t.remoteStore}))}function os(t){return es(t).then((function(t){return t.syncEngine}))}function as(t){return Object(a.b)(this,void 0,void 0,(function(){var e,n;return Object(a.d)(this,(function(r){switch(r.label){case 0:return[4,es(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=la.bind(null,e.syncEngine),n.onUnlisten=fa.bind(null,e.syncEngine),n)]}}))}))}function ss(t,e,n){var r=this;void 0===n&&(n={});var i=new Jn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.b)(r,void 0,void 0,(function(){var r;return Object(a.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ga({next:function(o){e.enqueueAndForget((function(){return Yo(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new c(u.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new Zo(Ot(n.path),o,{includeMetadataChanges:!0,so:!0});return Qo(t,a)},[4,as(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function us(t,e,n){var r=this;void 0===n&&(n={});var i=new Jn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.b)(r,void 0,void 0,(function(){var r;return Object(a.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ga({next:function(n){e.enqueueAndForget((function(){return Yo(t,a)})),n.fromCache&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new Zo(n,o,{includeMetadataChanges:!0,so:!0});return Qo(t,a)},[4,as(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var cs=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},ls=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),hs=new Map,fs=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},ds=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Ki.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ps=function(){function t(t){var e=this;this.oc=null,this.currentUser=Ki.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then((function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(y("string"==typeof n.accessToken),new fs(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return y(null===t||"string"==typeof t),new Ki(t)},t}(),vs=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=Ki.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),gs=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new vs(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(Ki.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function ys(t,e,n){if(!n)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function ms(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new c(u.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function bs(t,e,n,r){if(!0===e&&!0===r)throw new c(u.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function _s(t){if(!z.isDocumentKey(t))throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function ws(t){if(z.isDocumentKey(t))throw new c(u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Is(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":g()}function Ts(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new c(u.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Is(t);throw new c(u.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Es(t,e){if(e<=0)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Ss=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new c(u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new c(u.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,bs("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Cs=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new Ss({}),this._settingsFrozen=!1,t instanceof ls?(this._databaseId=t,this._credentials=new ds):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new c(u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ls(t.options.projectId)}(t),this._credentials=new ps(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ss(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ds;switch(t.type){case"gapi":var e=t.client;return y(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new gs(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new c(u.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=hs.get(this))&&(f("ComponentProvider","Removing Datastore"),hs.delete(this),t.terminate()),Promise.resolve();var t},t}(),ks=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ns(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Os=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Ns=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ot(r))||this)._path=r,i.type="collection",i}return Object(a.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new ks(this.firestore,null,new z(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Os);function As(t,e){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(t=Object(r.p)(t),ys("collection","path",e),t instanceof Cs)return ws(n=A.fromString.apply(A,Object(a.f)([e],i))),new Ns(t,null,n);if(!(t instanceof ks||t instanceof Ns))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ws(n=A.fromString.apply(A,Object(a.f)([t.path],i)).child(A.fromString(e))),new Ns(t.firestore,null,n)}function Ps(t,e){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(t=Object(r.p)(t),1===arguments.length&&(e=_.u()),ys("doc","path",e),t instanceof Cs)return _s(n=A.fromString.apply(A,Object(a.f)([e],i))),new ks(t,null,new z(n));if(!(t instanceof ks||t instanceof Ns))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return _s(n=t._path.child(A.fromString.apply(A,Object(a.f)([e],i)))),new ks(t.firestore,t instanceof Ns?t._converter:null,new z(n))}function Rs(t,e){return t=Object(r.p)(t),e=Object(r.p)(e),(t instanceof ks||t instanceof Ns)&&(e instanceof ks||e instanceof Ns)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function xs(t,e){return t=Object(r.p)(t),e=Object(r.p)(e),t instanceof Os&&e instanceof Os&&t.firestore===e.firestore&&Mt(t._query,e._query)&&t._converter===e._converter}var Ds=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new uo(this,"async_queue_retry"),this.Ec=function(){var e=ao();e&&f("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=ao();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=ao();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise((function(t){})):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.dc.push(t),e.Ac()}))},t.prototype.Ac=function(){return Object(a.b)(this,void 0,void 0,(function(){var t,e=this;return Object(a.d)(this,(function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!ir(t=n.sent()))throw t;return f("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji((function(){return e.Ac()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ic=function(t){var e=this,n=this.fc.then((function(){return e.yc=!0,t().catch((function(t){throw e.mc=t,e.yc=!1,d("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.yc=!1,t}))}));return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=Vo.createAndSchedule(this,t,e,n,(function(t){return r.Rc(t)}));return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&g()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(a.b)(this,void 0,void 0,(function(){var t;return Object(a.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then((function(){e._c.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()}))},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function Ls(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var js=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Jn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),Ms=-1,Fs=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new Ds,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(a.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||qs(this),this._firestoreClient.terminate()},e}(Cs);function Us(t){return t._firestoreClient||qs(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function qs(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new cs(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new $a(t._credentials,t._queue,r)}function Vs(t,e,n){var r=this,i=new Jn;return t.asyncQueue.enqueue((function(){return Object(a.b)(r,void 0,void 0,(function(){var r;return Object(a.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Ja(t,n)];case 1:return o.sent(),[4,Za(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===u.FAILED_PRECONDITION||t.code===u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Bs(t){if(t._initialized||t._terminated)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ks=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new c(u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new R(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),zs=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(D.fromBase64String(e))}catch(e){throw new c(u.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(D.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Ws=function(t){this._methodName=t},Hs=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new c(u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new c(u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return w(this._lat,t._lat)||w(this._long,t._long)},t}(),Gs=/^__.*__$/,Qs=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ve(t,this.data,this.fieldMask,e,this.fieldTransforms):new pe(t,this.data,e,this.fieldTransforms)},t}(),Ys=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ve(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Xs(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw g()}}var $s=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return yu(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(Xs(this.Dc)&&Gs.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),Js=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||so(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new $s({Dc:t,methodName:e,Lc:n,path:R.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Zs(t){var e=t._freezeSettings(),n=so(t._databaseId);return new Js(t._databaseId,!!e.ignoreUndefinedProperties,n)}function tu(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);du("Data must be an object, but it was:",a,r);var s,l,h=hu(r,a);if(o.merge)s=new x(a.fieldMask),l=a.fieldTransforms;else if(o.mergeFields){for(var f=[],d=0,p=o.mergeFields;d<p.length;d++){var v=pu(e,p[d],n);if(!a.contains(v))throw new c(u.INVALID_ARGUMENT,"Field '"+v+"' is specified in your field mask but missing from your input data.");mu(f,v)||f.push(v)}s=new x(f),l=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,l=a.fieldTransforms;return new Qs(new rt(h),s,l)}var eu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw 1===t.Dc?t.$c(this._methodName+"() can only appear at the top level of your update data"):t.$c(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Ws);function nu(t,e,n){return new $s({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var ru=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),e.prototype._toFieldTransform=function(t){return new ie(t.path,new Xt)},e.prototype.isEqual=function(t){return t instanceof e},e}(Ws),iu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(a.c)(e,t),e.prototype._toFieldTransform=function(t){var e=nu(this,t,!0),n=this.qc.map((function(t){return lu(t,e)})),r=new $t(n);return new ie(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ws),ou=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(a.c)(e,t),e.prototype._toFieldTransform=function(t){var e=nu(this,t,!0),n=this.qc.map((function(t){return lu(t,e)})),r=new Zt(n);return new ie(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Ws),au=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(a.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new ee(t.R,Wt(t.R,this.Uc));return new ie(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Ws);function su(t,e,n,i){var o=t.Bc(1,e,n);du("Data must be an object, but it was:",o,i);var a=[],s=rt.empty();k(i,(function(t,i){var u=gu(e,t,n);i=Object(r.p)(i);var c=o.kc(u);if(i instanceof eu)a.push(u);else{var l=lu(i,c);null!=l&&(a.push(u),s.set(u,l))}}));var u=new x(a);return new Ys(s,u,o.fieldTransforms)}function uu(t,e,n,i,o,a){var s=t.Bc(1,e,n),l=[pu(e,i,n)],h=[o];if(a.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var f=0;f<a.length;f+=2)l.push(pu(e,a[f])),h.push(a[f+1]);for(var d=[],p=rt.empty(),v=l.length-1;v>=0;--v)if(!mu(d,l[v])){var g=l[v],y=h[v];y=Object(r.p)(y);var m=s.kc(g);if(y instanceof eu)d.push(g);else{var b=lu(y,m);null!=b&&(d.push(g),p.set(g,b))}}var _=new x(d);return new Ys(p,_,s.fieldTransforms)}function cu(t,e,n,r){return void 0===r&&(r=!1),lu(n,t.Bc(r?4:3,e))}function lu(t,e){if(fu(t=Object(r.p)(t)))return du("Unsupported field value:",e,t),hu(t,e);if(t instanceof Ws)return function(t,e){if(!Xs(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=lu(o[i],e.Oc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(r.p)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Wt(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=E.fromDate(t);return{timestampValue:Ze(e.R,n)}}if(t instanceof E)return n=new E(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ze(e.R,n)};if(t instanceof Hs)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof zs)return{bytesValue:tn(e.R,t._byteString)};if(t instanceof ks){n=e.databaseId;var i=t.firestore._databaseId;if(!i.isEqual(n))throw e.$c("Document reference is for database "+i.projectId+"/"+i.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:rn(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Is(t))}(t,e)}function hu(t,e){var n={};return O(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):k(t,(function(t,r){var i=lu(r,e.Nc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function fu(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof E||t instanceof Hs||t instanceof zs||t instanceof ks||t instanceof Ws)}function du(t,e,n){if(!fu(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Is(n);throw"an object"===r?e.$c(t+" a custom object"):e.$c(t+" "+r)}}function pu(t,e,n){if((e=Object(r.p)(e))instanceof Ks)return e._internalPath;if("string"==typeof e)return gu(t,e);throw yu("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var vu=new RegExp("[~\\*/\\[\\]]");function gu(t,e,n){if(e.search(vu)>=0)throw yu("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Ks.bind.apply(Ks,Object(a.f)([void 0],e.split(".")))))._internalPath}catch(r){throw yu("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function yu(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var l="";return(o||a)&&(l+=" (found",o&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new c(u.INVALID_ARGUMENT,(s+=". ")+t+l)}function mu(t,e){return t.some((function(t){return t.isEqual(e)}))}var bu=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ks(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new _u(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(wu("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),_u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(bu);function wu(t,e){return"string"==typeof e?gu(t,e):e instanceof Ks?e._internalPath:e._delegate._internalPath}var Iu=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Tu=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Object(a.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(wu("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(bu),Eu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Tu),Su=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Iu(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Eu(n._firestore,n._userDataWriter,r.key,r,new Iu(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new c(u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new Eu(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Iu(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Eu(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Iu(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Cu(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Cu(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return g()}}function ku(t,e){return t instanceof Tu&&e instanceof Tu?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Su&&e instanceof Su&&t._firestore===e._firestore&&xs(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Ou(t){if(At(t)&&0===t.explicitOrderBy.length)throw new c(u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Nu=function(){};function Au(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Pu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(a.c)(e,t),e.prototype._apply=function(t){var e=Zs(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new c(u.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Fu(a,o);for(var l=[],h=0,f=a;h<f.length;h++){var d=f[h];l.push(Mu(r,t,d))}s={arrayValue:{values:l}}}else s=Mu(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Fu(a,o),s=cu(n,"where",a,"in"===o||"not-in"===o);var p=ht.create(i,o,s);return function(t,e){if(e.g()){var n=Rt(t);if(null!==n&&!n.isEqual(e.field))throw new c(u.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Pt(t);null!==r&&Uu(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,p),p}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new Os(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Ct(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Nu),Ru=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(a.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new It(e,n);return function(t,e){if(null===Pt(t)){var n=Rt(t);null!==n&&Uu(t,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new Os(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Ct(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Nu),xu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(a.c)(e,t),e.prototype._apply=function(t){return new Os(t.firestore,t._converter,jt(t._query,this.Gc,this.zc))},e}(Nu),Du=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(a.c)(e,t),e.prototype._apply=function(t){var e=ju(t,this.type,this.Hc,this.Jc);return new Os(t.firestore,t._converter,function(t,e){return new Ct(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Nu),Lu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(a.c)(e,t),e.prototype._apply=function(t){var e=ju(t,this.type,this.Hc,this.Jc);return new Os(t.firestore,t._converter,function(t,e){return new Ct(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Nu);function ju(t,e,n,i){if(n[0]=Object(r.p)(n[0]),n[0]instanceof bu)return function(t,e,n,r,i){if(!r)throw new c(u.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Dt(t);a<s.length;a++){var l=s[a];if(l.field.isKeyField())o.push($(e,r.key));else{var h=r.data.field(l.field);if(U(h))throw new c(u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var f=l.field.canonicalString();throw new c(u.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(h)}}return new _t(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,i);var o=Zs(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new c(u.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],l=0;l<i.length;l++){var h=i[l];if(a[l].field.isKeyField()){if("string"!=typeof h)throw new c(u.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!xt(t)&&-1!==h.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var f=t.path.child(A.fromString(h));if(!z.isDocumentKey(f))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var d=new z(f);s.push($(e,d))}else{var p=cu(n,r,h);s.push(p)}}return new _t(s,o)}(t._query,t.firestore._databaseId,o,e,n,i)}function Mu(t,e,n){if("string"==typeof(n=Object(r.p)(n))){if(""===n)throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!xt(e)&&-1!==n.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var i=e.path.child(A.fromString(n));if(!z.isDocumentKey(i))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+i+"' is not because it has an odd number of segments ("+i.length+").");return $(t,new z(i))}if(n instanceof ks)return $(t,n._key);throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Is(n)+".")}function Fu(t,e){if(!Array.isArray(t)||0===t.length)throw new c(u.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new c(u.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Uu(t,e,n){if(!n.isEqual(e))throw new c(u.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var qu=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),W(t)){case 0:return null;case 1:return t.booleanValue;case 2:return M(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(F(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw g()}},t.prototype.convertObject=function(t,e){var n=this,r={};return k(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Hs(M(t.latitude),M(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return U(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(q(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=j(t);return new E(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=A.fromString(t);y(On(n));var r=new ls(n.get(1),n.get(3)),i=new z(n.popFirst(5));return r.isEqual(e)||d("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Vu(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Bu=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(a.c)(e,t),e.prototype.convertBytes=function(t){return new zs(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ks(this.firestore,null,e)},e}(qu),Ku=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Zs(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=zu(t,this._firestore),i=Vu(r._converter,e,n),o=tu(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,ae.none())),this},t.prototype.update=function(t,e,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];this._verifyNotCommitted();var a,s=zu(t,this._firestore);return a="string"==typeof(e=Object(r.p)(e))||e instanceof Ks?uu(this._dataReader,"WriteBatch.update",s._key,e,n,i):su(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(a.toMutation(s._key,ae.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=zu(t,this._firestore);return this._mutations=this._mutations.concat(new we(e._key,ae.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new c(u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function zu(t,e){if((t=Object(r.p)(t)).firestore!==e)throw new c(u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Wu=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(a.c)(e,t),e.prototype.convertBytes=function(t){return new zs(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ks(this.firestore,null,e)},e}(qu);function Hu(t,e,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];t=Ts(t,ks);var a=Ts(t.firestore,Fs),s=Zs(a);return Qu(a,[("string"==typeof(e=Object(r.p)(e))||e instanceof Ks?uu(s,"updateDoc",t._key,e,n,i):su(s,"updateDoc",t._key,e)).toMutation(t._key,ae.exists(!0))])}function Gu(t){for(var e,n,i,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];t=Object(r.p)(t);var u={includeMetadataChanges:!1},c=0;"object"!=typeof o[c]||Ls(o[c])||(u=o[c],c++);var l,h,f,d={includeMetadataChanges:u.includeMetadataChanges};if(Ls(o[c])){var p=o[c];o[c]=null===(e=p.next)||void 0===e?void 0:e.bind(p),o[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),o[c+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}if(t instanceof ks)h=Ts(t.firestore,Fs),f=Ot(t._key.path),l={next:function(e){o[c]&&o[c](Yu(h,t,e))},error:o[c+1],complete:o[c+2]};else{var v=Ts(t,Os);h=Ts(v.firestore,Fs),f=v._query;var g=new Wu(h);l={next:function(t){o[c]&&o[c](new Su(h,g,v,t))},error:o[c+1],complete:o[c+2]},Ou(t._query)}return function(t,e,n,r){var i=this,o=new Ga(r),s=new Zo(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Object(a.b)(i,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){switch(n.label){case 0:return e=Qo,[4,as(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(a.b)(i,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){switch(n.label){case 0:return e=Yo,[4,as(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Us(h),f,d,l)}function Qu(t,e){return function(t,e){var n=this,r=new Jn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.b)(n,void 0,void 0,(function(){var n;return Object(a.d)(this,(function(i){switch(i.label){case 0:return n=da,[4,os(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Us(t),e)}function Yu(t,e,n){var r=n.docs.get(e._key),i=new Wu(t);return new Tu(t,i,e._key,r,new Iu(n.hasPendingWrites,n.fromCache),e._converter)}var Xu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(a.c)(e,t),e.prototype.get=function(e){var n=this,r=zu(e,this._firestore),i=new Wu(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Tu(n._firestore,i,r._key,t._document,new Iu(!1,!1),r._converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Zs(t)}return t.prototype.get=function(t){var e=this,n=zu(t,this._firestore),r=new Bu(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return g();var i=t[0];if(i.isFoundDocument())return new bu(e._firestore,r,i.key,i,n._converter);if(i.isNoDocument())return new bu(e._firestore,r,n._key,null,n._converter);throw g()}))},t.prototype.set=function(t,e,n){var r=zu(t,this._firestore),i=Vu(r._converter,e,n),o=tu(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a,s=zu(t,this._firestore);return a="string"==typeof(e=Object(r.p)(e))||e instanceof Ks?uu(this._dataReader,"Transaction.update",s._key,e,n,i):su(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,a),this},t.prototype.delete=function(t){var e=zu(t,this._firestore);return this._transaction.delete(e._key),this},t}());function $u(){if("undefined"==typeof Uint8Array)throw new c(u.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ju(){if("undefined"==typeof atob)throw new c(u.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Zu=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Ju(),new t(zs.fromBase64String(e))},t.fromUint8Array=function(e){return $u(),new t(zs.fromUint8Array(e))},t.prototype.toBase64=function(){return Ju(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return $u(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),tc=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Bs(t=Ts(t,Fs));var n=Us(t),r=t._freezeSettings(),i=new Wa;return Vs(n,i,new Ka(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Bs(t=Ts(t,Fs));var e=Us(t),n=t._freezeSettings(),r=new Wa;return Vs(e,r,new za(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new c(u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Jn;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(a.b)(e,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(a.b)(this,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){switch(n.label){case 0:return er.yt()?(e=t+"main",[4,er.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(fi(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),ec=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof ls||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Ts(t,Cs))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&p("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(a.b)(e,void 0,void 0,(function(){var e,n;return Object(a.d)(this,(function(r){switch(r.label){case 0:return[4,ns(t)];case 1:return e=r.sent(),[4,is(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=m(t);return e.$r.delete(0),go(e)}(n))]}}))}))}))}(Us(Ts(this._delegate,Fs)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(a.b)(e,void 0,void 0,(function(){var e,n;return Object(a.d)(this,(function(r){switch(r.label){case 0:return[4,ns(t)];case 1:return e=r.sent(),[4,is(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(a.b)(this,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){switch(n.label){case 0:return(e=m(t)).$r.add(0),[4,yo(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Us(Ts(this._delegate,Fs)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&bs("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Jn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.b)(e,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(r){switch(r.label){case 0:return e=ba,[4,os(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Us(Ts(this._delegate,Fs)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Ga(e);return t.asyncQueue.enqueueAndForget((function(){return Object(a.b)(n,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){m(t).Gr.add(e),e.next()},[4,as(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(a.b)(n,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){m(t).Gr.delete(e)},[4,as(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Us(t=Ts(t,Fs)),Ls(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new gc(this,As(this._delegate,t))}catch(t){throw uc(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new sc(this,Ps(this._delegate,t))}catch(t){throw uc(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new dc(this,function(t,e){if(t=Ts(t,Cs),ys("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Os(t,null,function(t){return new Ct(A.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw uc(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Jn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.b)(n,void 0,void 0,(function(){var n;return Object(a.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return es(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new Xa(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Us(t),(function(n){return e(new Xu(t,n))}))}(this._delegate,(function(n){return t(new ic(e,n))}))},t.prototype.batch=function(){var t=this;return Us(this._delegate),new oc(new Ku(this._delegate,(function(e){return Qu(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new c(u.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new c(u.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),nc=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(a.c)(e,t),e.prototype.convertBytes=function(t){return new Zu(new zs(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return sc.Zc(e,this.firestore,null)},e}(qu);function rc(t){var e;e=t,l.setLogLevel(e)}var ic=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new nc(t)}return t.prototype.get=function(t){var e=this,n=yc(t);return this._delegate.get(n).then((function(t){return new hc(e._firestore,new Tu(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))}))},t.prototype.set=function(t,e,n){var r=yc(t);return n?(ms("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=yc(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(a.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=yc(t);return this._delegate.delete(e),this},t}(),oc=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=yc(t);return n?(ms("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=yc(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(a.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=yc(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),ac=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Eu(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new fc(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new nc(e),n),i.set(n,o)),o},t}();ac.eu=new WeakMap;var sc=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new nc(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new ks(n._delegate,r,new z(e)))},t.Zc=function(e,n,r){return new t(n,new ks(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new gc(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new gc(this.firestore,As(this._delegate,t))}catch(t){throw uc(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(r.p)(t))instanceof ks&&Rs(this._delegate,t)},t.prototype.set=function(t,e){e=ms("DocumentReference.set",e);try{return function(t,e,n){t=Ts(t,ks);var r=Ts(t.firestore,Fs),i=Vu(t._converter,e,n);return Qu(r,[tu(Zs(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,ae.none())])}(this._delegate,t,e)}catch(t){throw uc(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Hu(this._delegate,t):Hu.apply(void 0,Object(a.f)([this._delegate,t,e],n))}catch(t){throw uc(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Qu(Ts((t=this._delegate).firestore,Fs),[new we(t._key,ae.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=cc(e),i=lc(e,(function(e){return new hc(t.firestore,new Tu(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}));return Gu(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ts(t,ks);var e=Ts(t.firestore,Fs),n=Us(e),r=new Wu(e);return function(t,e){var n=this,r=new Jn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.b)(n,void 0,void 0,(function(){var n;return Object(a.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(a.b)(this,void 0,void 0,(function(){var r,i;return Object(a.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new c(u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Bo(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,rs(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Tu(e,r,t._key,n,new Iu(null!==n&&n.hasLocalMutations,!0),t._converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ts(t,ks);var e=Ts(t.firestore,Fs);return ss(Us(e),t._key,{source:"server"}).then((function(n){return Yu(e,t,n)}))}(this._delegate):function(t){t=Ts(t,ks);var e=Ts(t.firestore,Fs);return ss(Us(e),t._key).then((function(n){return Yu(e,t,n)}))}(this._delegate)).then((function(t){return new hc(e.firestore,new Tu(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(ac.tu(this.firestore,e)):this._delegate.withConverter(null))},t}();function uc(t,e,n){return t.message=t.message.replace(e,n),t}function cc(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Ls(r))return r}return{}}function lc(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Ls(t[0])?t[0]:Ls(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var hc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new sc(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return ku(this._delegate,t._delegate)},t}(),fc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(hc),dc=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new nc(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Au(this._delegate,function(t,e,n){var r=e,i=wu("where",t);return new Pu(i,r,n)}(e,n,r)))}catch(e){throw uc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Au(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=wu("orderBy",t);return new Ru(r,n)}(e,n)))}catch(e){throw uc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Au(this._delegate,function(t){return Es("limit",t),new xu("limit",t,"F")}(e)))}catch(e){throw uc(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Au(this._delegate,function(t){return Es("limitToLast",t),new xu("limitToLast",t,"L")}(e)))}catch(e){throw uc(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Au(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Du("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw uc(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Au(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Du("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw uc(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Au(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lu("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw uc(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Au(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lu("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw uc(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return xs(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ts(t,Os);var e=Ts(t.firestore,Fs),n=Us(e),r=new Wu(e);return function(t,e){var n=this,r=new Jn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.b)(n,void 0,void 0,(function(){var n;return Object(a.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(a.b)(this,void 0,void 0,(function(){var r,i,o,s,u;return Object(a.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,ki(t,e,!0)];case 1:return u=a.sent(),r=new aa(e,u.Bn),i=r._o(u.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=Bo(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,rs(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Su(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ts(t,Os);var e=Ts(t.firestore,Fs),n=Us(e),r=new Wu(e);return us(n,t._query,{source:"server"}).then((function(n){return new Su(e,r,t,n)}))}(this._delegate):function(t){t=Ts(t,Os);var e=Ts(t.firestore,Fs),n=Us(e),r=new Wu(e);return Ou(t._query),us(n,t._query).then((function(n){return new Su(e,r,t,n)}))}(this._delegate)).then((function(t){return new vc(e.firestore,new Su(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=cc(e),i=lc(e,(function(e){return new vc(t.firestore,new Su(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Gu(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(ac.tu(this.firestore,e)):this._delegate.withConverter(null))},t}(),pc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new fc(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),vc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new dc(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new fc(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new pc(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new fc(n._firestore,r))}))},t.prototype.isEqual=function(t){return ku(this._delegate,t._delegate)},t}(),gc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(a.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new sc(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new sc(this.firestore,void 0===t?Ps(this._delegate):Ps(this._delegate,t))}catch(t){throw uc(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ts(t.firestore,Fs),r=Ps(t),i=Vu(t._converter,e);return Qu(n,[tu(Zs(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,ae.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new sc(e.firestore,t)}))},e.prototype.isEqual=function(t){return Rs(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(ac.tu(this.firestore,t)):this._delegate.withConverter(null))},e}(dc);function yc(t){return Ts(t,ks)}var mc=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Ks.bind.apply(Ks,Object(a.f)([void 0],t)))}return t.documentId=function(){return new t(R.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(r.p)(t))instanceof Ks&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),bc=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new ru("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new eu("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new iu("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ou("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new au("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();function _c(t){return function(t,e){var n=Us(t=Ts(t,Fs)),r=new js;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new Qa(t,e)}(function(t,e){if(t instanceof Uint8Array)return Ha(t,e);if(t instanceof ArrayBuffer)return Ha(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,so(e));t.asyncQueue.enqueueAndForget((function(){return Object(a.b)(i,void 0,void 0,(function(){var e;return Object(a.d)(this,(function(n){switch(n.label){case 0:return e=Va,[4,os(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,t._databaseId,e,r),r}(this._delegate,t)}function wc(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return Object(a.b)(n,void 0,void 0,(function(){var n;return Object(a.d)(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=m(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Qe.getNamedQuery(t,e)}))},[4,rs(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(Us(e=Ts(e,Fs)),n).then((function(t){return t?new Os(e,null,t.query):null}))).then((function(t){return t?new dc(r,t):null}))}}).call(this,n(21))},function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return v})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return m})),n.d(e,"e",(function(){return C}));var r=n(12),i=n(2),o=n.n(i),a=(n(18),n(13)),s=n(22),u=n(11),c=n(9),l=n(23),h=n.n(l),f=(n(26),n(16)),d=(n(30),function(t){var e=Object(s.a)();return e.displayName=t,e}("Router-History")),p=function(t){var e=Object(s.a)();return e.displayName=t,e}("Router"),v=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={location:e.history.location},n._isMounted=!1,n._pendingLocation=null,e.staticContext||(n.unlisten=e.history.listen((function(t){n._isMounted?n.setState({location:t}):n._pendingLocation=t}))),n}Object(r.a)(e,t),e.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}};var n=e.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return o.a.createElement(p.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.a.createElement(d.Provider,{children:this.props.children||null,value:this.props.history}))},e}(o.a.Component);o.a.Component;o.a.Component;var g={},y=0;function m(t,e){void 0===e&&(e={}),("string"===typeof e||Array.isArray(e))&&(e={path:e});var n=e,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(e,n){if(!n&&""!==n)return null;if(e)return e;var r=function(t,e){var n=""+e.end+e.strict+e.sensitive,r=g[n]||(g[n]={});if(r[t])return r[t];var i=[],o={regexp:h()(t,i,e),keys:i};return y<1e4&&(r[t]=o,y++),o}(n,{end:o,strict:s,sensitive:c}),i=r.regexp,a=r.keys,u=i.exec(t);if(!u)return null;var l=u[0],f=u.slice(1),d=t===l;return o&&!d?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:d,params:a.reduce((function(t,e,n){return t[e.name]=f[n],t}),{})}}),null)}var b=function(t){function e(){return t.apply(this,arguments)||this}return Object(r.a)(e,t),e.prototype.render=function(){var t=this;return o.a.createElement(p.Consumer,null,(function(e){e||Object(u.a)(!1);var n=t.props.location||e.location,r=t.props.computedMatch?t.props.computedMatch:t.props.path?m(n.pathname,t.props):e.match,i=Object(c.a)({},e,{location:n,match:r}),a=t.props,s=a.children,l=a.component,h=a.render;return Array.isArray(s)&&0===s.length&&(s=null),o.a.createElement(p.Provider,{value:i},i.match?s?"function"===typeof s?s(i):s:l?o.a.createElement(l,i):h?h(i):null:"function"===typeof s?s(i):null)}))},e}(o.a.Component);function _(t){return"/"===t.charAt(0)?t:"/"+t}function w(t,e){if(!t)return e;var n=_(t);return 0!==e.pathname.indexOf(n)?e:Object(c.a)({},e,{pathname:e.pathname.substr(n.length)})}function I(t){return"string"===typeof t?t:Object(a.e)(t)}function T(t){return function(){Object(u.a)(!1)}}function E(){}o.a.Component;o.a.Component;var S=o.a.useContext;function C(){return S(d)}},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return nr})),n.d(e,"b",(function(){return ir})),n.d(e,"c",(function(){return rr})),n.d(e,"d",(function(){return or})),n.d(e,"e",(function(){return ar})),n.d(e,"f",(function(){return sr})),n.d(e,"g",(function(){return tr})),n.d(e,"h",(function(){return er}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,a="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},s=s||{},u=a||self;function c(){}function l(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var f="closure_uid_"+(1e9*Math.random()>>>0),d=0;function p(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:v).apply(null,arguments)}function y(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function m(){return Date.now()}function b(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function _(){this.j=this.j,this.i=this.i}_.prototype.j=!1,_.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,f)&&t[f]||(t[f]=++d)})(this)},_.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var w=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},I=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function E(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function S(t){return/^[\s\xa0]*$/.test(t)}var C,k=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function O(t,e){return-1!=t.indexOf(e)}function N(t,e){return t<e?-1:t>e?1:0}t:{var A=u.navigator;if(A){var P=A.userAgent;if(P){C=P;break t}}C=""}function R(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function x(t){var e={};for(var n in t)e[n]=t[n];return e}var D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<D.length;o++)n=D[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function j(t){return j[" "](t),t}j[" "]=c;var M,F=O(C,"Opera"),U=O(C,"Trident")||O(C,"MSIE"),q=O(C,"Edge"),V=q||U,B=O(C,"Gecko")&&!(O(C.toLowerCase(),"webkit")&&!O(C,"Edge"))&&!(O(C,"Trident")||O(C,"MSIE"))&&!O(C,"Edge"),K=O(C.toLowerCase(),"webkit")&&!O(C,"Edge");function z(){var t=u.document;return t?t.documentMode:void 0}t:{var W="",H=function(){var t=C;return B?/rv:([^\);]+)(\)|;)/.exec(t):q?/Edge\/([\d\.]+)/.exec(t):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):K?/WebKit\/(\S+)/.exec(t):F?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(H&&(W=H?H[1]:""),U){var G=z();if(null!=G&&G>parseFloat(W)){M=String(G);break t}}M=W}var Q,Y={};function X(t){return function(t,e){var n=Y;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=k(String(M)).split("."),r=k(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=N(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||N(0==a[2].length,0==s[2].length)||N(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(u.document&&U){var $=z();Q=$||(parseInt(M,10)||void 0)}else Q=void 0;var J=Q,Z=!U||9<=Number(J),tt=U&&!X("9"),et=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",c,e),u.removeEventListener("test",c,e)}catch(n){}return t}();function nt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function rt(t,e){if(nt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(B){t:{try{j(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:it[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}nt.prototype.b=function(){this.defaultPrevented=!0},b(rt,nt);var it={2:"touch",3:"pen",4:"mouse"};rt.prototype.b=function(){rt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,tt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ot="closure_listenable_"+(1e6*Math.random()|0),at=0;function st(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++at,this.Y=this.Z=!1}function ut(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ct(t){this.src=t,this.a={},this.b=0}function lt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=w(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ut(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ht(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ct.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ht(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new st(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ft="closure_lm_"+(1e6*Math.random()|0),dt={};function pt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=It(r),e&&e[ot]?e.wa(n,r,h(i)?!!i.capture:!!i,o):vt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)pt(t,e[o],n,r,i);return null}return n=It(n),t&&t[ot]?t.va(e,n,h(r)?!!r.capture:!!r,i):vt(t,e,n,!1,r,i)}function vt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=h(i)?!!i.capture:!!i;if(a&&!Z)return null;var s=_t(t);if(s||(t[ft]=s=new ct(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=bt,e=Z?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)et||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(yt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function gt(t){if("number"!==typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ot])lt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(yt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_t(e))?(lt(n,t),0==n.b&&(n.src=null,e[ft]=null)):ut(t)}}}function yt(t){return t in dt?dt[t]:dt[t]="on"+t}function mt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&gt(t),n.call(r,e)}function bt(t,e){if(t.Y)return!0;if(!Z){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return mt(t,e=new rt(e,this))}return mt(t,new rt(e,this))}function _t(t){return(t=t[ft])instanceof ct?t:null}var wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function It(t){return"function"===typeof t?t:(t[wt]||(t[wt]=function(e){return t.handleEvent(e)}),t[wt])}function Tt(){_.call(this),this.c=new ct(this),this.J=this,this.C=null}function Et(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"===typeof e)e=new nt(e,t);else if(e instanceof nt)e.target=e.target||t;else{var i=e;L(e=new nt(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=St(a,r,!0,e)&&i}if(i=St(a=e.a=t,r,!0,e)&&i,i=St(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=St(a=e.a=n[o],r,!1,e)&&i}function St(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&lt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}b(Tt,_),Tt.prototype[ot]=!0,(o=Tt.prototype).addEventListener=function(t,e,n,r){pt(this,t,e,n,r)},o.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=h(i)?!!i.capture:!!i,r=It(r),e&&e[ot]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=ht(a=e.a[n],r,i,o))&&(ut(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--)))):e&&(e=_t(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ht(n,r,i,o)),(r=-1<e?n[e]:null)&&gt(r))}(this,t,e,n,r)},o.G=function(){if(Tt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ut(n[r]);delete e.a[t],e.b--}}this.C=null},o.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},o.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ct=u.JSON.stringify;function kt(){this.b=this.a=null}var Ot,Nt=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Pt}),(function(t){t.reset()}));function At(){var t=Lt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Pt(){this.next=this.b=this.a=null}function Rt(t){u.setTimeout((function(){throw t}),0)}function xt(t,e){Ot||function(){var t=u.Promise.resolve(void 0);Ot=function(){t.then(jt)}}(),Dt||(Ot(),Dt=!0),Lt.add(t,e)}kt.prototype.add=function(t,e){var n=Nt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Pt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Pt.prototype.reset=function(){this.next=this.b=this.a=null};var Dt=!1,Lt=new kt;function jt(){for(var t;t=At();){try{t.a.call(t.b)}catch(n){Rt(n)}var e=Nt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Dt=!1}function Mt(t,e){Tt.call(this),this.b=t||1,this.a=e||u,this.f=g(this.Za,this),this.g=m()}function Ft(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ut(t,e,n){if("function"===typeof t)n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function qt(t){t.a=Ut((function(){t.a=null,t.c&&(t.c=!1,qt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}b(Mt,Tt),(o=Mt.prototype).aa=!1,o.M=null,o.Za=function(){if(this.aa){var t=m()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Et(this,"tick"),this.aa&&(Ft(this),this.start()))}},o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=m())},o.G=function(){Mt.X.G.call(this),Ft(this),delete this.a};var Vt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:qt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(u.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(_);function Bt(t){_.call(this),this.b=t,this.a={}}b(Bt,_);var Kt=[];function zt(t,e,n,r){Array.isArray(n)||(n&&(Kt[0]=n.toString()),n=Kt);for(var i=0;i<n.length;i++){var o=pt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Wt(t){R(t.a,(function(t,e){this.a.hasOwnProperty(e)&&gt(t)}),t),t.a={}}function Ht(){this.a=!0}function Gt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Ct(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}Bt.prototype.G=function(){Bt.X.G.call(this),Wt(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ht.prototype.info=function(){};var Qt={},Yt=null;function Xt(){return Yt=Yt||new Tt}function $t(t){nt.call(this,Qt.Fa,t)}function Jt(t){var e=Xt();Et(e,new $t(e,t))}function Zt(t,e){nt.call(this,Qt.STAT_EVENT,t),this.stat=e}function te(t){var e=Xt();Et(e,new Zt(e,t))}function ee(t){nt.call(this,Qt.Ga,t)}function ne(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){t()}),e)}Qt.Fa="serverreachability",b($t,nt),Qt.STAT_EVENT="statevent",b(Zt,nt),Qt.Ga="timingevent",b(ee,nt);var re={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ie={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function oe(){}function ae(t){var e;return(e=t.a)||(e=t.a={}),e}function se(){}oe.prototype.a=null;var ue,ce={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function le(){nt.call(this,"d")}function he(){nt.call(this,"c")}function fe(){}function de(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Bt(this),this.P=pe,t=V?125:void 0,this.R=new Mt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}b(le,nt),b(he,nt),b(fe,oe),ue=new fe;var pe=45e3,ve={},ge={};function ye(t,e,n){t.H=1,t.i=Ue(xe(e)),t.j=n,t.I=!0,me(t,null)}function me(t,e){t.u=m(),we(t),t.l=xe(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Je(n.b,"t",r),t.D=0,t.a=Gn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Vt(g(t.Ca,t,t.a),t.O)),zt(t.J,t.a,"readystatechange",t.Xa),e=t.B?x(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Jt(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function be(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=_e(t,n);if(i==ge){4==e&&(t.h=4,te(14),r=!1),Gt(t.c,t.f,null,"[Incomplete Response]");break}if(i==ve){t.h=4,te(15),Gt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Gt(t.c,t.f,i,null),Ce(t,i)}4==e&&0==n.length&&(t.h=1,te(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Un(e),e.F=!0,te(11))):(Gt(t.c,t.f,n,"[Invalid Chunked Response]"),Se(t),Ee(t))}function _e(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ge:(n=Number(e.substring(n,r)),isNaN(n)?ve:(r+=1)+n>e.length?ge:(e=e.substr(r,n),t.D=r+n,e))}function we(t){t.T=m()+t.P,Ie(t,t.P)}function Ie(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ne(g(t.Va,t),e)}function Te(t){t.o&&(u.clearTimeout(t.o),t.o=null)}function Ee(t){0==t.g.v||t.A||Bn(t.g,t)}function Se(t){Te(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ft(t.R),Wt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ce(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||an(n.b,t)))if(n.I=t.N,!t.C&&an(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Vn(n),An(n)}Fn(n),te(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ne(g(n.Sa,n),6e3));if(1>=on(n.b)&&n.ea){try{n.ea()}catch(y){}n.ea=void 0}}else zn(n,11)}else if((t.C||n.a==t)&&Vn(n),!S(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"===typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(O(l,"spdy")||O(l,"quic")||O(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(sn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Fe(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=m()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Hn(u,u.C?u.ga:null,u.fa),d.C){un(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(Te(p),we(p)),u.a=d}else Mn(u);0<n.g.length&&xn(n)}else"stop"!=i[0]&&"close"!=i[0]||zn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?zn(n,7):Nn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Jt(4)}catch(y){}}function ke(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||"string"===typeof t)I(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(l(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"===typeof t)return t.split("");if(l(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Oe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Oe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ne(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ae(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ae(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ae(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(o=de.prototype).setTimeout=function(t){this.P=t},o.Xa=function(t){t=t.target;var e=this.F;e&&3==Sn(t)?e.f():this.Ca(t)},o.Ca=function(t){try{if(t==this.a)t:{var e=Sn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!V&&!this.a.$())){this.A||4!=e||7==n||Jt(8==n||0>=r?3:2),Te(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,te(12),Se(this),Ee(this);break t}Gt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ce(this,u)}this.I?(be(this,e,o),V&&this.b&&3==e&&(zt(this.J,this.R,"tick",this.Wa),this.R.start())):(Gt(this.c,this.f,o,null),Ce(this,o)),4==e&&Se(this),this.b&&!this.A&&(4==e?Bn(this.g,this):(this.b=!1,we(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,te(12)):(this.h=0,te(13)),Se(this),Ee(this)}}}catch(c){}},o.Wa=function(){if(this.a){var t=Sn(this.a),e=this.a.$();this.D<e.length&&(Te(this),be(this,t,e),this.b&&4!=t&&we(this))}},o.cancel=function(){this.A=!0,Se(this)},o.Va=function(){this.o=null;var t=m();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Jt(3),te(17)),Se(this),this.h=2,Ee(this)):Ie(this,this.T-t)},(o=Oe.prototype).K=function(){Ne(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},o.L=function(){return Ne(this),this.a.concat()},o.get=function(t,e){return Ae(this.b,t)?this.b[t]:e},o.set=function(t,e){Ae(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},o.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Re(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Re){this.a=void 0!==e?e:t.a,De(this,t.f),this.j=t.j,Le(this,t.c),je(this,t.h),this.g=t.g,e=t.b;var n=new Qe;n.c=e.c,e.a&&(n.a=new Oe(e.a),n.b=e.b),Me(this,n),this.i=t.i}else t&&(n=String(t).match(Pe))?(this.a=!!e,De(this,n[1]||"",!0),this.j=qe(n[2]||""),Le(this,n[3]||"",!0),je(this,n[4]),this.g=qe(n[5]||"",!0),Me(this,n[6]||"",!0),this.i=qe(n[7]||"")):(this.a=!!e,this.b=new Qe(null,this.a))}function xe(t){return new Re(t)}function De(t,e,n){t.f=n?qe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Le(t,e,n){t.c=n?qe(e,!0):e}function je(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Me(t,e,n){e instanceof Qe?(t.b=e,function(t,e){e&&!t.f&&(Ye(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xe(this,e),Je(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Ve(e,He)),t.b=new Qe(e,t.a))}function Fe(t,e,n){t.b.set(e,n)}function Ue(t){return Fe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^m()).toString(36)),t}function qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ve(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Be),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Be(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Re.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ve(e,Ke,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ve(e,Ke,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ve(n,"/"==n.charAt(0)?We:ze,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ve(n,Ge)),t.join("")};var Ke=/[#\/\?@]/g,ze=/[#\?:]/g,We=/[#\?]/g,He=/[#\?@]/g,Ge=/#/g;function Qe(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ye(t){t.a||(t.a=new Oe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xe(t,e){Ye(t),e=Ze(t,e),Ae(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ae((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ne(t)))}function $e(t,e){return Ye(t),e=Ze(t,e),Ae(t.a.b,e)}function Je(t,e,n){Xe(t,e),0<n.length&&(t.c=null,t.a.set(Ze(t,e),E(n)),t.b+=n.length)}function Ze(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(o=Qe.prototype).add=function(t,e){Ye(this),this.c=null,t=Ze(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},o.forEach=function(t,e){Ye(this),this.a.forEach((function(n,r){I(n,(function(n){t.call(e,n,r,this)}),this)}),this)},o.L=function(){Ye(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},o.K=function(t){Ye(this);var e=[];if("string"===typeof t)$e(this,t)&&(e=T(e,this.a.get(Ze(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},o.set=function(t,e){return Ye(this),this.c=null,$e(this,t=Ze(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},o.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var tn=function(t,e){this.b=t,this.a=e};function en(t){this.g=t||nn,u.PerformanceNavigationTiming?t=0<(t=u.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(u.ia&&u.ia.ya&&u.ia.ya()&&u.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var nn=10;function rn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function on(t){return t.b?1:t.a?t.a.size:0}function an(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function sn(t,e){t.a?t.a.add(e):t.b=e}function un(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function cn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var o=i(t.a.values()),a=o.next();!a.done;a=o.next()){var s=a.value;r=r.concat(s.s)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return E(t.c)}function ln(){}function hn(){this.a=new ln}function fn(t,e,n){var r=n||"";try{ke(t,(function(t,n){var i=t;h(t)&&(i=Ct(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function dn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}en.prototype.cancel=function(){var t,e;if(this.c=cn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ln.prototype.stringify=function(t){return u.JSON.stringify(t,void 0)},ln.prototype.parse=function(t){return u.JSON.parse(t,void 0)};var pn=u.JSON.parse;function vn(t){Tt.call(this),this.headers=new Oe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=gn,this.D=this.F=!1}b(vn,Tt);var gn="",yn=/^https?$/i,mn=["POST","PUT"];function bn(t){return"content-type"==t.toLowerCase()}function _n(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,wn(t),Tn(t)}function wn(t){t.u||(t.u=!0,Et(t,"complete"),Et(t,"error"))}function In(t){if(t.b&&"undefined"!=typeof s&&(!t.s[1]||4!=Sn(t)||2!=t.W()))if(t.l&&4==Sn(t))Ut(t.za,0,t);else if(Et(t,"readystatechange"),4==Sn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Pe)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!yn.test(o?o.toLowerCase():"")}e=i}if(e)Et(t,"complete"),Et(t,"success");else{t.h=6;try{var c=2<Sn(t)?t.a.statusText:""}catch(n){c=""}t.f=c+" ["+t.W()+"]",wn(t)}}finally{Tn(t)}}}function Tn(t,e){if(t.a){En(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||Et(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function En(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(u.clearTimeout(t.m),t.m=null)}function Sn(t){return t.a?t.a.readyState:0}function Cn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return R(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Fe(t,e,n))}function kn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function On(t){this.pa=0,this.g=[],this.c=new Ht,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=kn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=kn("baseRetryDelayMs",5e3,t),this.Ra=kn("retryDelaySeedMs",1e4,t),this.Ma=kn("forwardChannelMaxRetries",2,t),this.ma=kn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new en(t&&t.concurrentRequestLimit),this.ka=new hn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Nn(t){if(Pn(t),3==t.v){var e=t.R++,n=xe(t.B);Fe(n,"SID",t.J),Fe(n,"RID",e),Fe(n,"TYPE","terminate"),Ln(t,n),(e=new de(t,t.c,e,void 0)).H=2,e.i=Ue(xe(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(e.i.toString(),"")),!n&&u.Image&&((new Image).src=e.i,n=!0),n||(e.a=Gn(e.g,null),e.a.ba(e.i)),e.u=m(),we(e)}Wn(t)}function An(t){t.a&&(Un(t),t.a.cancel(),t.a=null)}function Pn(t){An(t),t.j&&(u.clearTimeout(t.j),t.j=null),Vn(t),t.b.cancel(),t.h&&("number"===typeof t.h&&u.clearTimeout(t.h),t.h=null)}function Rn(t,e){t.g.push(new tn(t.Oa++,e)),3==t.v&&xn(t)}function xn(t){rn(t.b)||t.h||(t.h=!0,xt(t.Ba,t),t.u=0)}function Dn(t,e){var n;n=e?e.f:t.R++;var r=xe(t.B);Fe(r,"SID",t.J),Fe(r,"RID",n),Fe(r,"AID",t.P),Ln(t,r),t.i&&t.l&&Cn(r,t.i,t.l),n=new de(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=jn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),sn(t.b,n),ye(n,r,e)}function Ln(t,e){t.f&&ke({},(function(t,n){Fe(e,n,t)}))}function jn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?g(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{fn(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Mn(t){t.a||t.j||(t.T=1,xt(t.Aa,t),t.o=0)}function Fn(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=ne(g(t.Aa,t),Kn(t,t.o)),t.o++,!0)}function Un(t){null!=t.s&&(u.clearTimeout(t.s),t.s=null)}function qn(t){t.a=new de(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=xe(t.la);Fe(e,"RID","rpc"),Fe(e,"SID",t.J),Fe(e,"CI",t.H?"0":"1"),Fe(e,"AID",t.P),Ln(t,e),Fe(e,"TYPE","xmlhttp"),t.i&&t.l&&Cn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ue(xe(e)),n.j=null,n.I=!0,me(n,t)}function Vn(t){null!=t.m&&(u.clearTimeout(t.m),t.m=null)}function Bn(t,e){var n=null;if(t.a==e){Vn(t),Un(t),t.a=null;var r=2}else{if(!an(t.b,e))return;n=e.s,un(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=m()-e.u;var i=t.u;Et(r=Xt(),new ee(r,n,e,i)),xn(t)}else Mn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(on(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma))&&(t.h=ne(g(t.Ba,t,e),Kn(t,t.u)),t.u++,!0))}(t,e)||2==r&&Fn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:zn(t,5);break;case 4:zn(t,10);break;case 3:zn(t,6);break;default:zn(t,2)}}function Kn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function zn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=g(t.Ya,t);n||(n=new Re("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||De(n,"https"),Ue(n)),function(t,e){var n=new Ht;if(u.Image){var r=new Image;r.onload=y(dn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=y(dn,n,r,"TestLoadImage: error",!1,e),r.onabort=y(dn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=y(dn,n,r,"TestLoadImage: timeout",!1,e),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else te(2);t.v=0,t.f&&t.f.ra(e),Wn(t),Pn(t)}function Wn(t){t.v=0,t.I=-1,t.f&&(0==cn(t.b).length&&0==t.g.length||(t.b.c.length=0,E(t.g),t.g.length=0),t.f.qa())}function Hn(t,e,n){var r=function(t){return t instanceof Re?xe(t):new Re(t,void 0)}(n);if(""!=r.c)e&&Le(r,e+"."+r.c),je(r,r.h);else{var i=u.location;r=function(t,e,n,r){var i=new Re(null,void 0);return t&&De(i,t),e&&Le(i,e),n&&je(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&R(t.V,(function(t,e){Fe(r,e,t)})),e=t.A,n=t.na,e&&n&&Fe(r,e,n),Fe(r,"VER",t.ha),Ln(t,r),r}function Gn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vn(t.Na)).F=t.C,e}function Qn(){}function Yn(){if(U&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function Xn(t,e){Tt.call(this),this.a=new On(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!S(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!S(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Zn(this)}function $n(t){le.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Jn(){he.call(this),this.status=1}function Zn(t){this.a=t}(o=vn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ae(this.H):ae(ue),this.a.onreadystatechange=g(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void _n(this,o)}t=n||"";var i=new Oe(this.headers);r&&ke(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=bn,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.L()),n=u.FormData&&t instanceof u.FormData,!(0<=w(mn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{En(this),0<this.o&&((this.D=function(t){return U&&X(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=g(this.xa,this)):this.m=Ut(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){_n(this,o)}},o.xa=function(){"undefined"!=typeof s&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Et(this,"timeout"),this.abort(8))},o.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Et(this,"complete"),Et(this,"abort"),Tn(this))},o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Tn(this,!0)),vn.X.G.call(this)},o.za=function(){this.j||(this.A||this.l||this.g?In(this):this.Ua())},o.Ua=function(){In(this)},o.W=function(){try{return 2<Sn(this)?this.a.status:-1}catch(t){return-1}},o.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},o.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),pn(e)}},o.ua=function(){return this.h},o.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},(o=On.prototype).ha=8,o.v=1,o.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new de(this,this.c,t,void 0),r=this.l;if(this.O&&(r?L(r=x(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"===typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=jn(this,n,e),Fe(i=xe(this.B),"RID",t),Fe(i,"CVER",22),this.A&&Fe(i,"X-HTTP-Session-Id",this.A),Ln(this,i),this.i&&r&&Cn(i,this.i,r),sn(this.b,n),this.Ia&&Fe(i,"TYPE","init"),this.da?(Fe(i,"$req",e),Fe(i,"SID","null"),n.U=!0,ye(n,i,null)):ye(n,i,e),this.v=2}}else 3==this.v&&(t?Dn(this,t):0==this.g.length||rn(this.b)||Dn(this))},o.Aa=function(){if(this.j=null,qn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ne(g(this.Ta,this),t)}},o.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,te(10),An(this),qn(this))},o.Sa=function(){null!=this.m&&(this.m=null,An(this),Fn(this),te(19))},o.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),te(2)):(this.c.info("Failed to ping google.com"),te(1))},(o=Qn.prototype).ta=function(){},o.sa=function(){},o.ra=function(){},o.qa=function(){},o.Ja=function(){},Yn.prototype.a=function(t,e){return new Xn(t,e)},b(Xn,Tt),Xn.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;te(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Hn(t,null,t.fa),xn(t)},Xn.prototype.close=function(){Nn(this.a)},Xn.prototype.h=function(t){if("string"===typeof t){var e={};e.__data__=t,Rn(this.a,e)}else this.l?((e={}).__data__=Ct(t),Rn(this.a,e)):Rn(this.a,t)},Xn.prototype.G=function(){this.a.f=null,delete this.f,Nn(this.a),delete this.a,Xn.X.G.call(this)},b($n,le),b(Jn,he),b(Zn,Qn),Zn.prototype.ta=function(){Et(this.a,"a")},Zn.prototype.sa=function(t){Et(this.a,new $n(t))},Zn.prototype.ra=function(t){Et(this.a,new Jn(t))},Zn.prototype.qa=function(){Et(this.a,"b")},Yn.prototype.createWebChannel=Yn.prototype.a,Xn.prototype.send=Xn.prototype.h,Xn.prototype.open=Xn.prototype.g,Xn.prototype.close=Xn.prototype.close,re.NO_ERROR=0,re.TIMEOUT=8,re.HTTP_ERROR=6,ie.COMPLETE="complete",se.EventType=ce,ce.OPEN="a",ce.CLOSE="b",ce.ERROR="c",ce.MESSAGE="d",Tt.prototype.listen=Tt.prototype.va,vn.prototype.listenOnce=vn.prototype.wa,vn.prototype.getLastError=vn.prototype.Qa,vn.prototype.getLastErrorCode=vn.prototype.ua,vn.prototype.getStatus=vn.prototype.W,vn.prototype.getResponseJson=vn.prototype.Pa,vn.prototype.getResponseText=vn.prototype.$,vn.prototype.send=vn.prototype.ba;var tr=function(){return new Yn},er=function(){return Xt()},nr=re,rr=ie,ir=Qt,or={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},ar=se,sr=vn}).call(this,n(17))},function(t,e,n){"use strict";e.a=function(t,e){if(!t)throw new Error("Invariant failed")}},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return w})),n.d(e,"b",(function(){return C})),n.d(e,"d",(function(){return O})),n.d(e,"c",(function(){return v})),n.d(e,"f",(function(){return g})),n.d(e,"e",(function(){return p}));var r=n(9);function i(t){return"/"===t.charAt(0)}function o(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}var a=function(t,e){void 0===e&&(e="");var n,r=t&&t.split("/")||[],a=e&&e.split("/")||[],s=t&&i(t),u=e&&i(e),c=s||u;if(t&&i(t)?a=r:r.length&&(a.pop(),a=a.concat(r)),!a.length)return"/";if(a.length){var l=a[a.length-1];n="."===l||".."===l||""===l}else n=!1;for(var h=0,f=a.length;f>=0;f--){var d=a[f];"."===d?o(a,f):".."===d?(o(a,f),h++):h&&(o(a,f),h--)}if(!c)for(;h--;h)a.unshift("..");!c||""===a[0]||a[0]&&i(a[0])||a.unshift("");var p=a.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function s(t){return t.valueOf?t.valueOf():Object.prototype.valueOf.call(t)}var u=function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every((function(e,r){return t(e,n[r])}));if("object"===typeof e||"object"===typeof n){var r=s(e),i=s(n);return r!==e||i!==n?t(r,i):Object.keys(Object.assign({},e,n)).every((function(r){return t(e[r],n[r])}))}return!1},c=n(11);function l(t){return"/"===t.charAt(0)?t:"/"+t}function h(t){return"/"===t.charAt(0)?t.substr(1):t}function f(t,e){return function(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}(t,e)?t.substr(e.length):t}function d(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function p(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function v(t,e,n,i){var o;"string"===typeof t?(o=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}(t)).state=e:(void 0===(o=Object(r.a)({},t)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=a(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function g(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&u(t.state,e.state)}function y(){var t=null;var e=[];return{setPrompt:function(e){return t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,r,i){if(null!=t){var o="function"===typeof t?t(e,n):t;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(t){var n=!0;function r(){n&&t.apply(void 0,arguments)}return e.push(r),function(){n=!1,e=e.filter((function(t){return t!==r}))}},notifyListeners:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach((function(t){return t.apply(void 0,n)}))}}}var m=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(t,e){e(window.confirm(t))}function _(){try{return window.history.state||{}}catch(t){return{}}}function w(t){void 0===t&&(t={}),m||Object(c.a)(!1);var e=window.history,n=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=t,a=o.forceRefresh,s=void 0!==a&&a,u=o.getUserConfirmation,h=void 0===u?b:u,g=o.keyLength,w=void 0===g?6:g,I=t.basename?d(l(t.basename)):"";function T(t){var e=t||{},n=e.key,r=e.state,i=window.location,o=i.pathname+i.search+i.hash;return I&&(o=f(o,I)),v(o,r,n)}function E(){return Math.random().toString(36).substr(2,w)}var S=y();function C(t){Object(r.a)(F,t),F.length=e.length,S.notifyListeners(F.location,F.action)}function k(t){(function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")})(t)||A(T(t.state))}function O(){A(T(_()))}var N=!1;function A(t){if(N)N=!1,C();else{S.confirmTransitionTo(t,"POP",h,(function(e){e?C({action:"POP",location:t}):function(t){var e=F.location,n=R.indexOf(e.key);-1===n&&(n=0);var r=R.indexOf(t.key);-1===r&&(r=0);var i=n-r;i&&(N=!0,D(i))}(t)}))}}var P=T(_()),R=[P.key];function x(t){return I+p(t)}function D(t){e.go(t)}var L=0;function j(t){1===(L+=t)&&1===t?(window.addEventListener("popstate",k),i&&window.addEventListener("hashchange",O)):0===L&&(window.removeEventListener("popstate",k),i&&window.removeEventListener("hashchange",O))}var M=!1;var F={length:e.length,action:"POP",location:P,createHref:x,push:function(t,r){var i=v(t,r,E(),F.location);S.confirmTransitionTo(i,"PUSH",h,(function(t){if(t){var r=x(i),o=i.key,a=i.state;if(n)if(e.pushState({key:o,state:a},null,r),s)window.location.href=r;else{var u=R.indexOf(F.location.key),c=R.slice(0,u+1);c.push(i.key),R=c,C({action:"PUSH",location:i})}else window.location.href=r}}))},replace:function(t,r){var i=v(t,r,E(),F.location);S.confirmTransitionTo(i,"REPLACE",h,(function(t){if(t){var r=x(i),o=i.key,a=i.state;if(n)if(e.replaceState({key:o,state:a},null,r),s)window.location.replace(r);else{var u=R.indexOf(F.location.key);-1!==u&&(R[u]=i.key),C({action:"REPLACE",location:i})}else window.location.replace(r)}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(t){void 0===t&&(t=!1);var e=S.setPrompt(t);return M||(j(1),M=!0),function(){return M&&(M=!1,j(-1)),e()}},listen:function(t){var e=S.appendListener(t);return j(1),function(){j(-1),e()}}};return F}var I={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+h(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:h,decodePath:l},slash:{encodePath:l,decodePath:l}};function T(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function E(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function S(t){window.location.replace(T(window.location.href)+"#"+t)}function C(t){void 0===t&&(t={}),m||Object(c.a)(!1);var e=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),t),i=n.getUserConfirmation,o=void 0===i?b:i,a=n.hashType,s=void 0===a?"slash":a,u=t.basename?d(l(t.basename)):"",h=I[s],g=h.encodePath,_=h.decodePath;function w(){var t=_(E());return u&&(t=f(t,u)),v(t)}var C=y();function k(t){Object(r.a)(U,t),U.length=e.length,C.notifyListeners(U.location,U.action)}var O=!1,N=null;function A(){var t,e,n=E(),r=g(n);if(n!==r)S(r);else{var i=w(),a=U.location;if(!O&&(e=i,(t=a).pathname===e.pathname&&t.search===e.search&&t.hash===e.hash))return;if(N===p(i))return;N=null,function(t){if(O)O=!1,k();else{C.confirmTransitionTo(t,"POP",o,(function(e){e?k({action:"POP",location:t}):function(t){var e=U.location,n=D.lastIndexOf(p(e));-1===n&&(n=0);var r=D.lastIndexOf(p(t));-1===r&&(r=0);var i=n-r;i&&(O=!0,L(i))}(t)}))}}(i)}}var P=E(),R=g(P);P!==R&&S(R);var x=w(),D=[p(x)];function L(t){e.go(t)}var j=0;function M(t){1===(j+=t)&&1===t?window.addEventListener("hashchange",A):0===j&&window.removeEventListener("hashchange",A)}var F=!1;var U={length:e.length,action:"POP",location:x,createHref:function(t){var e=document.querySelector("base"),n="";return e&&e.getAttribute("href")&&(n=T(window.location.href)),n+"#"+g(u+p(t))},push:function(t,e){var n=v(t,void 0,void 0,U.location);C.confirmTransitionTo(n,"PUSH",o,(function(t){if(t){var e=p(n),r=g(u+e);if(E()!==r){N=e,function(t){window.location.hash=t}(r);var i=D.lastIndexOf(p(U.location)),o=D.slice(0,i+1);o.push(e),D=o,k({action:"PUSH",location:n})}else k()}}))},replace:function(t,e){var n=v(t,void 0,void 0,U.location);C.confirmTransitionTo(n,"REPLACE",o,(function(t){if(t){var e=p(n),r=g(u+e);E()!==r&&(N=e,S(r));var i=D.indexOf(p(U.location));-1!==i&&(D[i]=e),k({action:"REPLACE",location:n})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(t){void 0===t&&(t=!1);var e=C.setPrompt(t);return F||(M(1),F=!0),function(){return F&&(F=!1,M(-1)),e()}},listen:function(t){var e=C.appendListener(t);return M(1),function(){M(-1),e()}}};return U}function k(t,e,n){return Math.min(Math.max(t,e),n)}function O(t){void 0===t&&(t={});var e=t,n=e.getUserConfirmation,i=e.initialEntries,o=void 0===i?["/"]:i,a=e.initialIndex,s=void 0===a?0:a,u=e.keyLength,c=void 0===u?6:u,l=y();function h(t){Object(r.a)(_,t),_.length=_.entries.length,l.notifyListeners(_.location,_.action)}function f(){return Math.random().toString(36).substr(2,c)}var d=k(s,0,o.length-1),g=o.map((function(t){return v(t,void 0,"string"===typeof t?f():t.key||f())})),m=p;function b(t){var e=k(_.index+t,0,_.entries.length-1),r=_.entries[e];l.confirmTransitionTo(r,"POP",n,(function(t){t?h({action:"POP",location:r,index:e}):h()}))}var _={length:g.length,action:"POP",location:g[d],index:d,entries:g,createHref:m,push:function(t,e){var r=v(t,e,f(),_.location);l.confirmTransitionTo(r,"PUSH",n,(function(t){if(t){var e=_.index+1,n=_.entries.slice(0);n.length>e?n.splice(e,n.length-e,r):n.push(r),h({action:"PUSH",location:r,index:e,entries:n})}}))},replace:function(t,e){var r=v(t,e,f(),_.location);l.confirmTransitionTo(r,"REPLACE",n,(function(t){t&&(_.entries[_.index]=r,h({action:"REPLACE",location:r}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(t){var e=_.index+t;return e>=0&&e<_.entries.length},block:function(t){return void 0===t&&(t=!1),l.setPrompt(t)},listen:function(t){return l.appendListener(t)}};return _}},function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){n(i=t[e].apply(t,r)).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function p(t){this._db=t}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=function(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new d(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new p(t)}))},t.deleteDb=function(t){return r(indexedDB,"deleteDatabase",[t])},Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n(7),i=n(12),o=n(2),a=n.n(o),s=n(13),u=(n(18),n(9)),c=n(16),l=n(11),h=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).history=Object(s.a)(e.props),e}return Object(i.a)(e,t),e.prototype.render=function(){return a.a.createElement(r.b,{history:this.history,children:this.props.children})},e}(a.a.Component);a.a.Component;var f=function(t,e){return"function"===typeof t?t(e):t},d=function(t,e){return"string"===typeof t?Object(s.c)(t,null,null,e):t},p=function(t){return t},v=a.a.forwardRef;"undefined"===typeof v&&(v=p);var g=v((function(t,e){var n=t.innerRef,r=t.navigate,i=t.onClick,o=Object(c.a)(t,["innerRef","navigate","onClick"]),s=o.target,l=Object(u.a)({},o,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||s&&"_self"!==s||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||(t.preventDefault(),r())}});return l.ref=p!==v&&e||n,a.a.createElement("a",l)}));var y=v((function(t,e){var n=t.component,i=void 0===n?g:n,o=t.replace,s=t.to,h=t.innerRef,y=Object(c.a)(t,["component","replace","to","innerRef"]);return a.a.createElement(r.c.Consumer,null,(function(t){t||Object(l.a)(!1);var n=t.history,r=d(f(s,t.location),t.location),c=r?n.createHref(r):"",g=Object(u.a)({},y,{href:c,navigate:function(){var e=f(s,t.location);(o?n.replace:n.push)(e)}});return p!==v?g.ref=e||h:g.innerRef=h,a.a.createElement(i,g)}))})),m=function(t){return t},b=a.a.forwardRef;"undefined"===typeof b&&(b=m);b((function(t,e){var n=t["aria-current"],i=void 0===n?"page":n,o=t.activeClassName,s=void 0===o?"active":o,h=t.activeStyle,p=t.className,v=t.exact,g=t.isActive,_=t.location,w=t.sensitive,I=t.strict,T=t.style,E=t.to,S=t.innerRef,C=Object(c.a)(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return a.a.createElement(r.c.Consumer,null,(function(t){t||Object(l.a)(!1);var n=_||t.location,o=d(f(E,n),n),c=o.pathname,k=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),O=k?Object(r.d)(n.pathname,{path:k,exact:v,sensitive:w,strict:I}):null,N=!!(g?g(O,n):O),A=N?function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return t})).join(" ")}(p,s):p,P=N?Object(u.a)({},T,{},h):T,R=Object(u.a)({"aria-current":N&&i||null,className:A,style:P,to:o},C);return m!==b?R.ref=e||S:R.innerRef=S,a.a.createElement(y,R)}))}))},function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,"a",(function(){return r}))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){t.exports=n(39)()},,,function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";(function(t){var r=n(2),i=n.n(r),o=n(12),a=n(18),s=n.n(a),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{};function c(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter((function(e){return e!==t}))},get:function(){return t},set:function(n,r){t=n,e.forEach((function(e){return e(t,r)}))}}}var l=i.a.createContext||function(t,e){var n,i,a="__create-react-context-"+function(){var t="__global_unique_id__";return u[t]=(u[t]||0)+1}()+"__",l=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).emitter=c(e.props.value),e}Object(o.a)(n,t);var r=n.prototype;return r.getChildContext=function(){var t;return(t={})[a]=this.emitter,t},r.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var n,r=this.props.value,i=t.value;((o=r)===(a=i)?0!==o||1/o===1/a:o!==o&&a!==a)?n=0:(n="function"===typeof e?e(r,i):1073741823,0!==(n|=0)&&this.emitter.set(t.value,n))}var o,a},r.render=function(){return this.props.children},n}(r.Component);l.childContextTypes=((n={})[a]=s.a.object.isRequired,n);var h=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).state={value:t.getValue()},t.onUpdate=function(e,n){0!==((0|t.observedBits)&n)&&t.setState({value:t.getValue()})},t}Object(o.a)(n,e);var r=n.prototype;return r.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=void 0===e||null===e?1073741823:e},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=void 0===t||null===t?1073741823:t},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():t},r.render=function(){return(t=this.props.children,Array.isArray(t)?t[0]:t)(this.state.value);var t},n}(r.Component);return h.contextTypes=((i={})[a]=s.a.object,i),{Provider:l,Consumer:h}};e.a=l}).call(this,n(17))},function(t,e,n){var r=n(41);t.exports=d,t.exports.parse=o,t.exports.compile=function(t,e){return s(o(t,e),e)},t.exports.tokensToFunction=s,t.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(t,e){for(var n,r=[],o=0,a=0,s="",l=e&&e.delimiter||"/";null!=(n=i.exec(t));){var h=n[0],f=n[1],d=n.index;if(s+=t.slice(a,d),a=d+h.length,f)s+=f[1];else{var p=t[a],v=n[2],g=n[3],y=n[4],m=n[5],b=n[6],_=n[7];s&&(r.push(s),s="");var w=null!=v&&null!=p&&p!==v,I="+"===b||"*"===b,T="?"===b||"*"===b,E=n[2]||l,S=y||m;r.push({name:g||o++,prefix:v||"",delimiter:E,optional:T,repeat:I,partial:w,asterisk:!!_,pattern:S?c(S):_?".*":"[^"+u(E)+"]+?"})}}return a<t.length&&(s+=t.substr(a)),s&&r.push(s),r}function a(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function s(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"===typeof t[i]&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",h(e)));return function(e,i){for(var o="",s=e||{},u=(i||{}).pretty?a:encodeURIComponent,c=0;c<t.length;c++){var l=t[c];if("string"!==typeof l){var h,f=s[l.name];if(null==f){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(f)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<f.length;d++){if(h=u(f[d]),!n[c].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===d?l.prefix:l.delimiter)+h}}else{if(h=l.asterisk?encodeURI(f).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})):u(f),!n[c].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+h+'"');o+=l.prefix+h}}else o+=l}return o}}function u(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function l(t,e){return t.keys=e,t}function h(t){return t&&t.sensitive?"":"i"}function f(t,e,n){r(e)||(n=e||n,e=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<t.length;s++){var c=t[s];if("string"===typeof c)a+=u(c);else{var f=u(c.prefix),d="(?:"+c.pattern+")";e.push(c),c.repeat&&(d+="(?:"+f+d+")*"),a+=d=c.optional?c.partial?f+"("+d+")?":"(?:"+f+"("+d+"))?":f+"("+d+")"}}var p=u(n.delimiter||"/"),v=a.slice(-p.length)===p;return i||(a=(v?a.slice(0,-p.length):a)+"(?:"+p+"(?=$))?"),a+=o?"$":i&&v?"":"(?="+p+"|$)",l(new RegExp("^"+a,h(n)),e)}function d(t,e,n){return r(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(t,e)}(t,e):r(t)?function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(d(t[i],e,n).source);return l(new RegExp("(?:"+r.join("|")+")",h(n)),e)}(t,e,n):function(t,e,n){return f(o(t,n),e,n)}(t,e,n)}},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,s,u=a(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e,n){"use strict";t.exports=n(42)},function(t,e,n){"use strict";(function(t){var e=n(3);(function(){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var i=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,e];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,e){if(e){var n=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in n||(n[a]={}),n=n[a]}(e=e(o=n[t=t[t.length-1]]))!=o&&null!=e&&r(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=a(t),o=i.next();!o.done;o=i.next())r(o.value).Qa(e,n)}))},e.all=function(t){var n=a(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Qa(o(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var s=s||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function f(){}function d(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==d(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function y(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++b)}var m="closure_uid_"+(1e9*Math.random()>>>0),b=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function I(t,e,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:w).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function S(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function C(t){return t}function k(t,e,n){this.code=A+t,this.message=e||P[t]||"",this.a=n||null}function O(t){var e=t&&t.code;return e?new k(e.substring(A.length),t.message,t.serverResponse):null}S(k,Error),k.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},k.prototype.toJSON=function(){return this.w()};var N,A="auth/",P={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},R={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function x(t){for(var e in R)if(R[e].id===t)return{firebaseEndpoint:(t=R[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function D(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function L(t){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function j(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");L.call(this,n+t[r])}function M(t,e){throw new j("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function U(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function q(){this.b=this.a=null}N=x("__EID__")?"__EID__":void 0,S(L,Error),L.prototype.name="CustomError",S(j,L),j.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new F((function(){return new K}),(function(t){t.reset()}));function B(){var t=_e,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function K(){this.next=this.b=this.a=null}q.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},K.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},K.prototype.reset=function(){this.next=this.b=this.a=null};var z=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},W=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},G=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},Q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Y(t,e){return 0<=z(t,e)}function X(t,e){var n;return(n=0<=(e=z(t,e)))&&Array.prototype.splice.call(t,e,1),n}function $(t,e){!function(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function J(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,at=/'/g,st=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function lt(t,e){return t<e?-1:t>e?1:0}t:{var ht=u.navigator;if(ht){var ft=ht.userAgent;if(ft){tt=ft;break t}}tt=""}function dt(t){return ct(tt,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var yt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<yt.length;o++)n=yt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function _t(t,e){this.a=t===Et&&e||"",this.b=Tt}function wt(t){return t instanceof _t&&t.constructor===_t&&t.b===Tt?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}_t.prototype.sa=!0,_t.prototype.ra=function(){return this.a},_t.prototype.toString=function(){return"Const{"+this.a+"}"};var It,Tt={},Et={};function St(){if(void 0===It){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:C,createScript:C,createScriptURL:C})}catch(n){u.console&&u.console.error(n.message)}It=t}else It=t}return It}function Ct(t,e){this.a=e===Pt?t:""}function kt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function Ot(t,e){var n=wt(t);if(!At.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=St();return new Ct(t=e?e.createScriptURL(t):t,Pt)}(t=n.replace(Nt,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof _t?wt(t):encodeURIComponent(String(t))})))}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Nt=/%{(\w+)}/g,At=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Pt={};function Rt(t,e){this.a=e===Ut?t:""}function xt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}Rt.prototype.sa=!0,Rt.prototype.ra=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Dt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,jt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mt(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.sa?t.ra():String(t),jt.test(t))t=new Rt(t,Ut);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=e&&Dt.test(e[1])?new Rt(t,Ut):null}return t}function Ft(t){return t instanceof Rt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),jt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,Ut))}var Ut={},qt=new Rt("about:invalid#zClosurez",Ut);function Vt(t,e,n){this.a=n===Bt?t:""}Vt.prototype.sa=!0,Vt.prototype.ra=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Bt={};function Kt(t,e,n,r){return t=t instanceof Rt?t:Ft(t),e=e||u,n=n instanceof _t?wt(n):n||"",e.open(xt(t),n,r,void 0)}function zt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Wt(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(at,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Ht(t){return Ht[" "](t),t}Ht[" "]=f;var Gt,Qt=dt("Opera"),Yt=dt("Trident")||dt("MSIE"),Xt=dt("Edge"),$t=Xt||Yt,Jt=dt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!dt("Edge"))&&!(dt("Trident")||dt("MSIE"))&&!dt("Edge"),Zt=ct(tt.toLowerCase(),"webkit")&&!dt("Edge");function te(){var t=u.document;return t?t.documentMode:void 0}t:{var ee="",ne=function(){var t=tt;return Jt?/rv:([^\);]+)(\)|;)/.exec(t):Xt?/Edge\/([\d\.]+)/.exec(t):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Zt?/WebKit\/(\S+)/.exec(t):Qt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ne&&(ee=ne?ne[1]:""),Yt){var re=te();if(null!=re&&re>parseFloat(ee)){Gt=String(re);break t}}Gt=ee}var ie,oe={};function ae(t){return function(t,e){var n=oe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=et(String(Gt)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=lt(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||lt(0==a[2].length,0==s[2].length)||lt(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(u.document&&Yt){var se=te();ie=se||(parseInt(Gt,10)||void 0)}else ie=void 0;var ue=ie;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(ua){}var ce=!Yt||9<=Number(ue);function le(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function he(t,e){pt(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:pe.hasOwnProperty(n)?t.setAttribute(pe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,de,pe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){a="function"==typeof o.item;break t}}a=!1}W(a?Z(o):o,r)}}}function ge(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ye(t){u.setTimeout((function(){throw t}),0)}function me(t,e){de||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);de=function(){t.then(we)}}else de=function(){var t=we;!v(u.setImmediate)||u.Window&&u.Window.prototype&&!dt("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(fe||(fe=function(){var t=u.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!dt("Presto")&&(t=function(){var t=ge(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=I((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!dt("Trident")&&!dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Gb;n.Gb=null,t()}},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),fe(t)):u.setImmediate(t)}}(),be||(de(),be=!0),_e.add(t,e)}var be=!1,_e=new q;function we(){for(var t;t=B();){try{t.a.call(t.b)}catch(e){ye(e)}U(V,t)}be=!1}function Ie(t,e){if(this.a=Te,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){Le(n,Ee,t)}),(function(t){if(!(t instanceof Be))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}Le(n,Se,t)}))}catch(r){Le(this,Se,r)}}var Te=0,Ee=2,Se=3;function Ce(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ce.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ke=new F((function(){return new Ce}),(function(t){t.reset()}));function Oe(t,e,n){var r=ke.get();return r.g=t,r.b=e,r.f=n,r}function Ne(t){if(t instanceof Ie)return t;var e=new Ie(f);return Le(e,Ee,t),e}function Ae(t){return new Ie((function(e,n){n(t)}))}function Pe(t,e,n){je(t,e,n,null)||me(T(e,t))}function Re(t){return new Ie((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Pe(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function xe(t,e){t.b||t.a!=Ee&&t.a!=Se||Me(t),t.f?t.f.next=e:t.b=e,t.f=e}function De(t,e,n,r){var i=Oe(null,null,null);return i.a=new Ie((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(a){o(a)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Be?o(e):t(i)}catch(a){o(a)}}:o})),i.a.c=t,xe(t,i),i.a}function Le(t,e,n){t.a==Te&&(t===n&&(e=Se,n=new TypeError("Promise cannot resolve to itself")),t.a=1,je(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Me(t),e!=Se||n instanceof Be||function(t,e){t.g=!0,me((function(){t.g&&Ve.call(null,e)}))}(t,n)))}function je(t,e,n,r){if(t instanceof Ie)return xe(t,Oe(e||f,n||null,r)),!0;if(D(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(s){o(s)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Me(t){t.h||(t.h=!0,me(t.gc,t))}function Fe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==Se&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(i){Ve.call(null,i)}U(ke,e)}function qe(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}Ie.prototype.then=function(t,e,n){return De(this,v(t)?t:null,v(e)?e:null,n)},Ie.prototype.$goog_Thenable=!0,(n=Ie.prototype).oa=function(t,e){return(t=Oe(t,t,e)).c=!0,xe(this,t),this},n.o=function(t,e){return De(this,null,t,e)},n.cancel=function(t){if(this.a==Te){var e=new Be(t);me((function(){!function t(e,n){if(e.a==Te)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==Te&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Fe(r),Ue(r,o,Se,n)))}e.c=null}else Le(e,Se,n)}(this,e)}),this)}},n.$c=function(t){this.a=Te,Le(this,Ee,t)},n.ad=function(t){this.a=Te,Le(this,Se,t)},n.gc=function(){for(var t;t=Fe(this);)Ue(this,t,this.a,this.i);this.h=!1};var Ve=ye;function Be(t){L.call(this,t)}function Ke(){0!=ze&&(We[y(this)]=this),this.xa=this.xa,this.pa=this.pa}S(Be,L),Be.prototype.name="cancel";var ze=0,We={};function He(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=ze)){var e=y(t);if(0!=ze&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete We[e]}}Ke.prototype.xa=!1,Ke.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Ge=Object.freeze||function(t){return t},Qe=!Yt||9<=Number(ue),Ye=Yt&&!ae("9"),Xe=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",f,e),u.removeEventListener("test",f,e)}catch(n){}return t}();function $e(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Je(t,e){if($e.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Jt){t:{try{Ht(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:Ze[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}$e.prototype.preventDefault=function(){this.defaultPrevented=!0},S(Je,$e);var Ze=Ge({2:"touch",3:"pen",4:"mouse"});Je.prototype.preventDefault=function(){Je.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ye)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Je.prototype.g=function(){return this.a};var tn="closure_listenable_"+(1e6*Math.random()|0),en=0;function nn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++en,this.va=this.Pa=!1}function rn(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function on(t){this.src=t,this.a={},this.b=0}function an(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(rn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function sn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}on.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=sn(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new nn(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var un="closure_lm_"+(1e6*Math.random()|0),cn={};function ln(t,e,n,r,i){if(r&&r.once)fn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=wn(n),t&&t[tn]?Tn(t,e,n,g(r)?!!r.capture:!!r,i):hn(t,e,n,!1,r,i)}function hn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=g(i)?!!i.capture:!!i,s=bn(t);if(s||(t[un]=s=new on(t)),!(n=s.add(e,n,r,a,o)).proxy){if(r=function(){var t=mn,e=Qe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Xe||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(vn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function fn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=wn(n),t&&t[tn]?En(t,e,n,g(r)?!!r.capture:!!r,i):hn(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=wn(n),t&&t[tn]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=sn(o=t.a[e],n,r,i))&&(rn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=bn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=sn(e,n,r,i)),(n=-1<t?e[t]:null)&&pn(n))}function pn(t){if("number"!==typeof t&&t&&!t.va){var e=t.src;if(e&&e[tn])an(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(vn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bn(e))?(an(n,t),0==n.b&&(n.src=null,e[un]=null)):rn(t)}}}function vn(t){return t in cn?cn[t]:cn[t]="on"+t}function gn(t,e,n,r){var i=!0;if((t=bn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=yn(o,r),i=i&&!1!==o)}return i}function yn(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&pn(t),n.call(r,e)}function mn(t,e){if(t.va)return!0;if(!Qe){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Je(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=gn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=gn(r[i],t,!1,e),n=n&&o}return n}return yn(t,new Je(e,this))}function bn(t){return(t=t[un])instanceof on?t:null}var _n="__closure_events_fn_"+(1e9*Math.random()>>>0);function wn(t){return v(t)?t:(t[_n]||(t[_n]=function(e){return t.handleEvent(e)}),t[_n])}function In(){Ke.call(this),this.v=new on(this),this.ac=this,this.gb=null}function Tn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function En(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Sn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&an(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Cn(t,e,n){if(v(t))n&&(t=I(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=I(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function kn(t){var e=null;return new Ie((function(n,r){-1==(e=Cn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw u.clearTimeout(e),t}))}function On(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"===typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Nn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(p(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function An(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof An)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Rn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Rn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Rn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(In,Ke),In.prototype[tn]=!0,In.prototype.addEventListener=function(t,e,n,r){ln(this,t,e,n,r)},In.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},In.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"===typeof t)t=new $e(t,n);else if(t instanceof $e)t.target=t.target||n;else{var i=t;mt(t=new $e(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Sn(a,r,!0,t)&&i}if(i=Sn(a=t.b=n,r,!0,t)&&i,i=Sn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Sn(a=t.b=e[o],r,!1,t)&&i;return i},In.prototype.Da=function(){if(In.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)rn(n[r]);delete e.a[t],e.b--}}this.gb=null},(n=An.prototype).W=function(){Pn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},n.Y=function(){return Pn(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0},n.get=function(t,e){return Rn(this.b,t)?this.b[t]:e},n.set=function(t,e){Rn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},n.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var xn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Dn?(this.i=void 0!==e?e:t.i,Ln(this,t.c),this.l=t.l,this.a=t.a,jn(this,t.g),this.f=t.f,Mn(this,nr(t.b)),this.h=t.h):t&&(n=String(t).match(xn))?(this.i=!!e,Ln(this,n[1]||"",!0),this.l=Bn(n[2]||""),this.a=Bn(n[3]||"",!0),jn(this,n[4]),this.f=Bn(n[5]||"",!0),Mn(this,n[6]||"",!0),this.h=Bn(n[7]||"")):(this.i=!!e,this.b=new Xn(null,this.i))}function Ln(t,e,n){t.c=n?Bn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function jn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Mn(t,e,n){e instanceof Xn?(t.b=e,function(t,e){e&&!t.f&&($n(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Zn(this,e),er(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Kn(e,Qn)),t.b=new Xn(e,t.i))}function Fn(t,e,n){t.b.set(e,n)}function Un(t,e){return t.b.get(e)}function qn(t){return t instanceof Dn?new Dn(t):new Dn(t,void 0)}function Vn(t,e,n,r){var i=new Dn(null,void 0);return t&&Ln(i,t),e&&(i.a=e),n&&jn(i,n),r&&(i.f=r),i}function Bn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Kn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,zn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function zn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Dn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Kn(e,Wn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Kn(e,Wn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Kn(n,"/"==n.charAt(0)?Gn:Hn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Kn(n,Yn)),t.join("")},Dn.prototype.resolve=function(t){var e=new Dn(this),n=!!t.c;n?Ln(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)jn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Mn(e,nr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Wn=/[#\/\?@]/g,Hn=/[#\?:]/g,Gn=/[#\?]/g,Qn=/[#\?@]/g,Yn=/#/g;function Xn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function $n(t){t.a||(t.a=new An,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Jn(t){var e=Nn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new Xn(null,void 0);t=On(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?er(n,i,o):n.add(i,o)}return n}function Zn(t,e){$n(t),e=rr(t,e),Rn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Rn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Pn(t)))}function tr(t,e){return $n(t),e=rr(t,e),Rn(t.a.b,e)}function er(t,e,n){Zn(t,e),0<n.length&&(t.c=null,t.a.set(rr(t,e),Z(n)),t.b+=n.length)}function nr(t){var e=new Xn;return e.c=t.c,t.a&&(e.a=new An(t.a),e.b=t.b),e}function rr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ir(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(a=n[i])&&(r.push(o),ur(i,r),r.push(":"),t(e,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":ur(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new or,t,e),e.join("")}function or(){}(n=Xn.prototype).add=function(t,e){$n(this),this.c=null,t=rr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},n.clear=function(){this.a=this.c=null,this.b=0},n.forEach=function(t,e){$n(this),this.a.forEach((function(n,r){W(n,(function(n){t.call(e,n,r,this)}),this)}),this)},n.Y=function(){$n(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},n.W=function(t){$n(this);var e=[];if("string"===typeof t)tr(this,t)&&(e=J(e,this.a.get(rr(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=J(e,t[n])}return e},n.set=function(t,e){return $n(this),this.c=null,tr(this,t=rr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},n.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ar={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ur(t,e){e.push('"',t.replace(sr,(function(t){var e=ar[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ar[t]=e),e})),'"')}function cr(){var t=Or();return Yt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function lr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||u.window;var n="about:blank";t&&(n=xt(Mt(t)||qt)),e.location.href=n}function fr(t){return!!((t=(t||Or()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function dr(t){t=t||u.window;try{t.close()}catch(e){}}function pr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Or().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Sr(Or())==Tr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Mt("undefined"!=typeof n.href?n.href:String(n))||qt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((dt("iPhone")&&!dt("iPod")&&!dt("iPad")||dt("iPad")||dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(a=ge(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:Ft(e),a.href=xt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Kt("",r,n,a),t=xt(e),a&&($t&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Wt(t)+'">',t=new Vt(t=(r=St())?r.createHTML(t):t,null,Bt),r=a.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Kt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gr=/^[^@]+@[^@]+$/;function yr(){var t=null;return new Ie((function(e){"complete"==u.document.readyState?e():(t=function(){e()},fn(window,"load",t))})).o((function(e){throw dn(window,"load",t),e}))}function mr(t){return t=t||Or(),!("file:"!==xr()&&"ionic:"!==xr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=u.window;try{return!(!t||t==t.top)}catch(e){return!1}}function _r(){return"undefined"!==typeof u.WorkerGlobalScope&&"function"===typeof u.importScripts}function wr(){return e.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.a.INTERNAL.hasOwnProperty("node")?"Node":_r()?"Worker":"Browser"}function Ir(){var t=wr();return"ReactNative"===t||"Node"===t}var Tr="Firefox",Er="Chrome";function Sr(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?Tr:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Er:"Safari"}var Cr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function kr(t,e){e=e||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=wr())?r=Sr(i=Or()):"Worker"===r&&(r=Sr(i=Or())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Or(){return u.navigator&&u.navigator.userAgent||""}function Nr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Ar(){try{var t=u.localStorage,e=Fr();if(t)return t.setItem(e,"1"),t.removeItem(e),!cr()||!!u.indexedDB}catch(n){return _r()&&!!u.indexedDB}return!1}function Pr(){return(Rr()||"chrome-extension:"===xr()||mr())&&!Ir()&&Ar()&&!_r()}function Rr(){return"http:"===xr()||"https:"===xr()}function xr(){return u.location&&u.location.protocol||null}function Dr(t){return!fr(t=t||Or())&&Sr(t)!=Tr}function Lr(t){return"undefined"===typeof t?null:ir(t)}function jr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Mr(t){if(null!==t)return JSON.parse(t)}function Fr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ur(t){return"Safari"!=Sr(t=t||Or())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function qr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Vr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Or(),e=wr(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=u.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function Kr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function zr(){return!(!Nr("fireauth.oauthhelper",u)&&!Nr("fireauth.iframe",u))}Vr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!==typeof t.onLine||!Rr()&&"chrome-extension:"!==xr()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Hr={};function Gr(t){Hr[t]||(Hr[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Qr={};Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Qr.abcd}catch(ua){Wr=!1}function Yr(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Yr(t,n,e[n])}function $r(t){var e={};return Xr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Yr(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");Yr(this,"uid",t[ri]),Yr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Yr(this,"enrollmentTime",n),Yr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(n){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),Yr(this,"phoneNumber",t[ii])}function ai(t){var e={},n=t[li],r=t[fi],i=t[di];if(t=ti(t[hi]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==si&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[yi]=n||null,e[pi]=r):(e[vi]=r||null,e[yi]=r||null,e[pi]=n||null),e[gi]=t||null,Yr(this,bi,i),Yr(this,mi,Jr(e))}S(oi,Zr),oi.prototype.w=function(){var t=oi.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var si="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",li="email",hi="mfaInfo",fi="newEmail",di="requestType",pi="email",vi="fromEmail",gi="multiFactorInfo",yi="previousEmail",mi="data",bi="operation";function _i(t){var e=Un(t=qn(t),wi)||null,n=Un(t,Ii)||null,r=Un(t,Si)||null;if(r=r&&ki[r]||null,!e||!n||!r)throw new k("argument-error",wi+", "+Ii+"and "+Si+" are required in a valid action code URL.");Xr(this,{apiKey:e,operation:r,code:n,continueUrl:Un(t,Ti)||null,languageCode:Un(t,Ei)||null,tenantId:Un(t,Ci)||null})}var wi="apiKey",Ii="oobCode",Ti="continueUrl",Ei="languageCode",Si="mode",Ci="tenantId",ki={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:si,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function Oi(t){try{return new _i(t)}catch(e){return null}}function Ni(t){var e=t[Di];if("undefined"===typeof e)throw new k("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new k("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ai];if(n&&"object"===typeof n){e=n[Mi];var r=n[Li];if(n=n[ji],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new k("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new k("argument-error",ji+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new k("argument-error",Mi+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new k("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new k("argument-error",Ai+" property must be a non null object when specified.");if(this.f=null,(e=t[xi])&&"object"===typeof e){if("string"===typeof(e=e[Fi])&&e.length)this.f=e;else if("undefined"!==typeof e)throw new k("argument-error",Fi+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new k("argument-error",xi+" property must be a non null object when specified.");if("undefined"!==typeof(e=t[Ri])&&"boolean"!==typeof e)throw new k("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,"undefined"!==typeof(t=t[Pi])&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new k("argument-error",Pi+" property must be a non empty string when specified.");this.i=t||null}var Ai="android",Pi="dynamicLinkDomain",Ri="handleCodeInApp",xi="iOS",Di="url",Li="installApp",ji="minimumVersion",Mi="packageName",Fi="bundleId";function Ui(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var qi=null;function Vi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=qi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!qi){qi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===qi[o]&&(qi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Bi(t){var e=zi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Ki(t){try{return new Bi(t)}catch(e){return null}}function zi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Vi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(u){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Hi=["client_id","response_type","scope","redirect_uri","state"],Gi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Hi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Hi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Hi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Wi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Qi(t){for(var e in Gi)if(Gi[e].fa==t)return Gi[e];return null}function Yi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[$i];try{if(n)return e[n]?new e[n](t):new Zi(t);if("undefined"!==typeof t[Xi])return new Ji(t)}catch(r){}return null}var Xi="idToken",$i="providerId";function Ji(t){var e=t[$i];if(!e&&t[Xi]){var n=Ki(t[Xi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Yr(this,"providerId",e),Yr(this,"isNewUser",n)}function Zi(t){Ji.call(this,t),Yr(this,"profile",Jr((t=Mr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Yr(this,"username",t.screenName||null)}function io(t){var e=qn(t),n=Un(e,"link"),r=Un(qn(n),"link");return e=Un(e,"deep_link_id"),Un(qn(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new k("internal-error","Internal assert: no raw session string available");if(t&&e)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ao:so}S(Zi,Ji),S(to,Zi),S(eo,Zi),S(no,Zi),S(ro,Zi);var ao="enroll",so="signin";function uo(){}function co(t,e){return t.then((function(t){if(t[Ja]){var n=Ki(t[Ja]);if(!n||e!=n.i)throw new k("user-mismatch");return t}throw new k("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==A+"user-not-found"?new k("user-mismatch"):t}))}function lo(t,e){if(!e)throw new k("internal-error","failed to construct a credential");this.a=e,Yr(this,"providerId",t),Yr(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(e){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Yr(this,"idToken",e.idToken),e.accessToken&&Yr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Yr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");Yr(this,"accessToken",e.oauthToken),Yr(this,"secret",e.oauthTokenSecret)}Yr(this,"providerId",t),Yr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Jn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(n){}}return null}function yo(t,e){this.Qc=e||[],Xr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Qi(t)||{}).Ja||null,this.ob=null}function mo(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');yo.call(this,t,[])}function bo(t){yo.call(this,t,Hi),this.a=[]}function _o(){bo.call(this,"facebook.com")}function wo(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function Io(){bo.call(this,"github.com")}function To(t){if(!t)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function Eo(){bo.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new Eo).credential({idToken:n,accessToken:e})}function Co(){yo.call(this,"twitter.com",Wi)}function ko(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function Oo(t,e,n){this.a=t,this.f=e,Yr(this,"providerId","password"),Yr(this,"signInMethod",n===Ao.EMAIL_LINK_SIGN_IN_METHOD?Ao.EMAIL_LINK_SIGN_IN_METHOD:Ao.EMAIL_PASSWORD_SIGN_IN_METHOD)}function No(t){return t&&t.email&&t.password?new Oo(t.email,t.password,t.signInMethod):null}function Ao(){Xr(this,{providerId:"password",isOAuthProvider:!1})}function Po(t,e){if(!(e=Ro(e)))throw new k("argument-error","Invalid email link!");return new Oo(t,e.code,Ao.EMAIL_LINK_SIGN_IN_METHOD)}function Ro(t){return(t=Oi(t=io(t)))&&t.operation===ui?t:null}function xo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new k("internal-error");this.a=t,Yr(this,"providerId","phone"),this.fa="phone",Yr(this,"signInMethod","phone")}function Do(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return W(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new xo(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function jo(t){try{this.a=t||e.a.auth()}catch(n){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xr(this,{providerId:"phone",isOAuthProvider:!1})}function Mo(t,e){if(!t)throw new k("missing-verification-id");if(!e)throw new k("missing-verification-code");return new xo({eb:t,cb:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new xo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return wo(n);case"github.com":return To(n);case"twitter.com":return ko(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new lo(e,a):new po(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Uo(t){if(!t.isOAuthProvider)throw new k("invalid-oauth-provider")}function qo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new qo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&O(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?Ne(this.a):Ne(this.b)},oo.prototype.w=function(){return this.type==ao?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},lo.prototype.ka=function(t){return _s(t,ho(this))},lo.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,ws(t,n)},lo.prototype.c=function(t,e){return co(Is(t,ho(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return _s(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,ws(t,n)},po.prototype.c=function(t,e){return co(Is(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},yo.prototype.Ka=function(t){return this.Ib=gt(t),this},S(mo,yo),S(bo,yo),bo.prototype.Ca=function(t){return Y(this.a,t)||this.a.push(t),this},bo.prototype.Qb=function(){return Z(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},S(_o,bo),Yr(_o,"PROVIDER_ID","facebook.com"),Yr(_o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(Io,bo),Yr(Io,"PROVIDER_ID","github.com"),Yr(Io,"GITHUB_SIGN_IN_METHOD","github.com"),S(Eo,bo),Yr(Eo,"PROVIDER_ID","google.com"),Yr(Eo,"GOOGLE_SIGN_IN_METHOD","google.com"),S(Co,yo),Yr(Co,"PROVIDER_ID","twitter.com"),Yr(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),Oo.prototype.ka=function(t){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?ru(t,As,{email:this.a,oobCode:this.f}):ru(t,Js,{email:this.a,password:this.f})},Oo.prototype.b=function(t,e){return this.signInMethod==Ao.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ps,{idToken:e,email:this.a,oobCode:this.f}):ru(t,zs,{idToken:e,email:this.a,password:this.f})},Oo.prototype.c=function(t,e){return co(this.ka(t),e)},Oo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xr(Ao,{PROVIDER_ID:"password"}),Xr(Ao,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xr(Ao,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),xo.prototype.ka=function(t){return t.fb(Lo(this))},xo.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,ru(t,tu,n)},xo.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",co(t=ru(t,eu,n),e)},xo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},jo.prototype.fb=function(t,e){var n=this.a.a;return Ne(e.verify()).then((function(r){if("string"!==typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=g(t)?t.session:null,o=g(t)?t.phoneNumber:t;return(i&&i.type==ao?i.Ha().then((function(t){return function(t,e){return ru(t,Hs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==so?i.Ha().then((function(e){return function(t,e){return ru(t,Gs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Bs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}));default:throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Xr(jo,{PROVIDER_ID:"phone"}),Xr(jo,{PHONE_SIGN_IN_METHOD:"phone"}),qo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},qo.prototype.T=function(){return this.h},qo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ko,zo=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=qn(t);t=r.a,"chrome-extension"==(r=r.c)?n=zt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=zt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",k.call(this,e,n)}function Ho(t,e,n){k.call(this,t,n),(t=e||{}).Jb&&Yr(this,"email",t.Jb),t.ea&&Yr(this,"phoneNumber",t.ea),t.credential&&Yr(this,"credential",t.credential),t.Zb&&Yr(this,"tenantId",t.Zb)}function Go(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Fo(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new k(e,t.message||void 0);return new Ho(e,n,t.message)}return null}function Qo(){}function Yo(t){return t.c||(t.c=t.b())}function Xo(){}function $o(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=I(this.qc,this),this.a.onerror=I(this.Sb,this),this.a.onprogress=I(this.rc,this),this.a.ontimeout=I(this.vc,this)}function ta(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ea(t,e,n){this.reset(t,e,n,void 0,void 0)}S(Wo,k),S(Ho,k),Ho.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&mt(t,e),t},Ho.prototype.toJSON=function(){return this.w()},Qo.prototype.c=null,S(Xo,Qo),Xo.prototype.a=function(){var t=$o(this);return t?new ActiveXObject(t):new XMLHttpRequest},Xo.prototype.b=function(){var t={};return $o(this)&&(t[0]=!0,t[1]=!0),t},Ko=new Xo,S(Jo,Qo),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(n=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},n.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},n.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ta(this,4)},n.Sb=function(){this.status=500,this.response=this.responseText="",ta(this,4)},n.vc=function(){this.Sb()},n.rc=function(){this.status=200,ta(this,1)},n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ea.prototype.a=null;function na(t){this.f=t,this.b=this.c=this.a=null}function ra(t,e){this.name=t,this.value=e}ea.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||E(),delete this.a},ra.prototype.toString=function(){return this.name};var ia=new ra("SEVERE",1e3),oa=new ra("WARNING",900),aa=new ra("CONFIG",700),sa=new ra("FINE",500);na.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(M("Root logger has no level set."),null)}(this).value)for(v(e)&&(e=e()),t=new ea(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ua,ca={},la=null;function ha(t){var e;if(la||(la=new na(""),ca[""]=la,la.c=aa),!(e=ca[t])){e=new na(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ha(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ca[t]=e}return e}function fa(t,e){t&&t.log(sa,e,void 0)}function da(t){this.f=t}function pa(t){In.call(this),this.u=t,this.h=void 0,this.readyState=va,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ha("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(da,Qo),da.prototype.a=function(){return new pa(this.f)},da.prototype.b=(ua={},function(){return ua}),S(pa,In);var va=0;function ga(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ya(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ma(t)}function ma(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ba(t){In.call(this),this.headers=new An,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=_a,this.u=this.S=!1}(n=pa.prototype).open=function(t,e){if(this.readyState!=va)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ma(this)},n.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ya(this)),this.readyState=va},n.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ma(this)),this.a&&(this.readyState=3,ma(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):"undefined"!==typeof u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ga(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},n.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ya(this):ma(this),3==this.readyState&&ga(this)}},n.tc=function(t){this.a&&(this.response=this.responseText=t,ya(this))},n.sc=function(t){this.a&&(this.response=t,ya(this))},n.Ua=function(t){var e=this.i;e&&e.log(oa,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ya(this)},n.setRequestHeader=function(t,e){this.l.append(t,e)},n.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(oa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(oa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(pa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),S(ba,In);var _a="";ba.prototype.b=ha("goog.net.XhrIo");var wa=/^https?$/i,Ia=["POST","PUT"];function Ta(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ko.a(),t.C=t.D?Yo(t.D):Yo(Ko),t.a.onreadystatechange=I(t.Vb,t);try{fa(t.b,Ra(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(a){return fa(t.b,Ra(t,"Error opening Xhr: "+a.message)),void Sa(t,a)}e=r||"";var o=new An(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"===typeof t)W(t,e,void 0);else for(var n=Nn(t),r=On(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ea,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!Y(Ia,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Na(t),0<t.g&&(t.u=function(t){return Yt&&ae(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(t.a),fa(t.b,Ra(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=I(t.Ma,t)):t.s=Cn(t.Ma,t.g,t)),fa(t.b,Ra(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){fa(t.b,Ra(t,"Send error: "+a.message)),Sa(t,a)}}function Ea(t){return"content-type"==t.toLowerCase()}function Sa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ca(t),Oa(t)}function Ca(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ka(t){if(t.c&&"undefined"!=typeof s)if(t.C[1]&&4==Aa(t)&&2==Pa(t))fa(t.b,Ra(t,"Local request error detected and ignored"));else if(t.i&&4==Aa(t))Cn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==Aa(t)){fa(t.b,Ra(t,"Request complete")),t.c=!1;try{var e,n=Pa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(xn)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!wa.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Aa(t)?t.a.statusText:""}catch(l){fa(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+Pa(t)+"]",Ca(t)}}finally{Oa(t)}}}function Oa(t,e){if(t.a){Na(t);var n=t.a,r=t.C[0]?f:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(ia,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Na(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function Aa(t){return t.a?t.a.readyState:0}function Pa(t){try{return 2<Aa(t)?t.a.status:-1}catch(e){return-1}}function Ra(t,e){return e+" ["+t.R+" "+t.l+" "+Pa(t)+"]"}function xa(t){var e=za;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Da(t,e,n){t.a=!0,t.c=n,t.f=!e,Fa(t)}function La(t){if(t.a){if(!t.v)throw new Ua(t);t.v=!1}}function ja(t,e,n,r){t.g.push([e,n,r]),t.a&&Fa(t)}function Ma(t){return Q(t.g,(function(t){return v(t[1])}))}function Fa(t){if(t.h&&t.a&&Ma(t)){var e=t.h,n=Ba[e];n&&(u.clearTimeout(n.a),delete Ba[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.s,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(D(e)||"function"===typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Ma(t)||(n=!0)}}t.c=e,r&&(s=I(t.m,t,!0),r=I(t.m,t,!1),e instanceof xa?(ja(e,s,r),e.C=!0):e.then(s,r)),n&&(e=new Va(e),Ba[e.a]=e,t.h=e.a)}function Ua(){L.call(this)}function qa(){L.call(this)}function Va(t){this.a=u.setTimeout(I(this.c,this),0),this.b=t}(n=ba.prototype).Ma=function(){"undefined"!=typeof s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fa(this.b,Ra(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},n.abort=function(){this.a&&this.c&&(fa(this.b,Ra(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Oa(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Oa(this,!0)),ba.ab.Da.call(this)},n.Vb=function(){this.xa||(this.O||this.i||this.f?ka(this):this.Jc())},n.Jc=function(){ka(this)},n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case _a:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ia,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return fa(this.b,"Can not get response: "+e.message),null}},xa.prototype.cancel=function(t){if(this.a)this.c instanceof xa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new qa(this),La(this),Da(this,!1,t))}},xa.prototype.m=function(t,e){this.i=!1,Da(this,t,e)},xa.prototype.then=function(t,e,n){var r,i,o=new Ie((function(t,e){r=t,i=e}));return ja(this,r,(function(t){t instanceof qa?o.cancel():i(t)})),o.then(t,e,n)},xa.prototype.$goog_Thenable=!0,S(Ua,L),Ua.prototype.message="Deferred has already fired",Ua.prototype.name="AlreadyCalledError",S(qa,L),qa.prototype.message="Deferred was canceled",qa.prototype.name="CanceledError",Va.prototype.c=function(){throw delete Ba[this.a],this.b};var Ba={};function Ka(t){var e={},n=e.document||document,r=kt(t).toString(),i=ge(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new xa(o),s=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){Wa(i,!0);var t=new Qa(Ga,"Timeout reached for loading script "+r);La(a),Da(a,!1,t)}),c),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Wa(i,e.xd||!1,s),La(a),Da(a,!0,null))},i.onerror=function(){Wa(i,!0,s);var t=new Qa(Ha,"Error while loading script "+r);La(a),Da(a,!1,t)},mt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),he(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=kt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=u?e=h(e.document):(null===l&&(l=h(u.document)),e=l),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function za(){if(this&&this.Wb){var t=this.Wb;t&&"SCRIPT"==t.tagName&&Wa(t,!0,this.Ma)}}function Wa(t,e,n){null!=n&&u.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ha=0,Ga=1;function Qa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),L.call(this,n),this.code=t}function Ya(t){this.f=t}function Xa(t,n,r){if(this.c=t,t=n||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Za,this.g=gt(t.secureTokenHeaders||ts),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||es,this.a=gt(t.firebaseHeaders||ns),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==wr(),!(r=u.XMLHttpRequest||r&&e.a.INTERNAL.node&&e.a.INTERNAL.node.XMLHttpRequest)&&!_r())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,_r()?this.f=new da(self):Ir()?this.f=new Ya(r):this.f=new Jo,this.b=null}S(Qa,L),S(Ya,Qo),Ya.prototype.a=function(){return new this.f},Ya.prototype.b=function(){return{}};var $a,Ja="idToken",Za=new Vr(3e4,6e4),ts={"Content-Type":"application/x-www-form-urlencoded"},es=new Vr(3e4,6e4),ns={"Content-Type":"application/json"};function rs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function is(t,e){e&&(t.l=os("https://securetoken.googleapis.com/v1/token",e),t.h=os("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=os("https://identitytoolkit.googleapis.com/v2/",e))}function os(t,e){return t=qn(t),e=qn(e.url),t.f=t.a+t.f,Ln(t,e.c),t.a=e.a,jn(t,e.g),t.toString()}function as(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ss(t,e,n,r,i,o,a){(function(){var t=Or();return!((t=Sr(t)!=Er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Yt||!ue||9<ue)})()||_r()?t=I(t.u,t):($a||($a=new Ie((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{u[cs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){ja(t,null,e,void 0)}(Ka(Ot(us,{onload:cs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=I(t.s,t)),t(e,n,r,i,o,a)}Xa.prototype.T=function(){return this.b},Xa.prototype.u=function(t,e,n,r,i,o){if(_r()&&("undefined"===typeof u.fetch||"undefined"===typeof u.Headers||"undefined"===typeof u.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ba(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Tn(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),En(a,"ready",(function(){s&&clearTimeout(s),He(this)})),En(a,"timeout",(function(){s&&clearTimeout(s),He(this),e&&e(null)})),Ta(a,t,n,r,i)};var us=new _t(Et,"https://apis.google.com/js/client.js?onload=%{onload}"),cs="__fcb"+Math.floor(1e6*Math.random()).toString();function ls(t,e,n,r,i,o,a){var s=qn(e+n);Fn(s,"key",t.c),a&&Fn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Fn(s,c,i[c]);return new Ie((function(e,n){ss(t,s.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new k("network-request-failed"))}),r,u?void 0:ir(jr(i)),t.a,t.v.get())}))}function hs(t){if("string"!==typeof(t=t.email)||!gr.test(t))throw new k("invalid-email")}function fs(t){"email"in t&&hs(t)}function ds(t){if(!t[Ja]){if(t.mfaPendingCredential)throw new k("multi-factor-auth-required",null,gt(t));throw new k("internal-error")}}function ps(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new k("internal-error")}else{if(!t.sessionInfo)throw new k("missing-verification-id");if(!t.code)throw new k("missing-verification-code")}}Xa.prototype.s=function(t,e,n,r,i){var o=this;$a.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xa.prototype.zb=function(){return ru(this,Ws,{})},Xa.prototype.Bb=function(t,e){return ru(this,Ks,{idToken:t,email:e})},Xa.prototype.Cb=function(t,e){return ru(this,zs,{idToken:t,password:e})};var vs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function gs(t){if(!t.phoneVerificationInfo)throw new k("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new k("missing-verification-code")}function ys(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new k("internal-error")}function ms(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(tr(t=new Xn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function bs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Go(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Go(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Go(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;ds(t)}function _s(t,e){return e.returnIdpCredential=!0,ru(t,Qs,e)}function ws(t,e){return e.returnIdpCredential=!0,ru(t,Xs,e)}function Is(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Ys,e)}function Ts(t){if(!t.oobCode)throw new k("invalid-action-code")}(n=Xa.prototype).Db=function(t,e){var n={idToken:t},r=[];return pt(vs,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ks,n)},n.vb=function(t,e){return mt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Fs,t)},n.wb=function(t,e){return mt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,Ls,t)},n.ub=function(t,e){return mt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,js,t)},n.Eb=function(t,e,n){return mt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Ms,t)},n.fb=function(t){return ru(this,Zs,t)},n.nb=function(t,e){return ru(this,Vs,{oobCode:t,newPassword:e})},n.Ra=function(t){return ru(this,Ss,{oobCode:t})},n.jb=function(t){return ru(this,Es,{oobCode:t})};var Es={endpoint:"setAccountInfo",A:Ts,Z:"email",B:!0},Ss={endpoint:"resetPassword",A:Ts,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new k("internal-error")},B:!0},Cs={endpoint:"signupNewUser",A:function(t){if(hs(t),!t.password)throw new k("weak-password")},G:ds,V:!0,B:!0},ks={endpoint:"createAuthUri",B:!0},Os={endpoint:"deleteAccount",N:["idToken"]},Ns={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new k("internal-error")}},As={endpoint:"emailLinkSignin",N:["email","oobCode"],A:hs,G:ds,V:!0,B:!0},Ps={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:hs,G:ds,V:!0},Rs={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:gs,G:ds,B:!0,Na:!0},xs={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:gs,G:ds,B:!0,Na:!0},Ds={endpoint:"getAccountInfo"},Ls={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new k("internal-error");hs(t)},Z:"email",B:!0},js={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Ms={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new k("internal-error")},Z:"email",B:!0},Fs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new k("internal-error");hs(t)},Z:"email",B:!0},Us={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},qs={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new k("internal-error")}},Vs={endpoint:"resetPassword",A:Ts,Z:"email",B:!0},Bs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ks={endpoint:"setAccountInfo",N:["idToken"],A:fs,V:!0},zs={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(fs(t),!t.password)throw new k("weak-password")},G:ds,V:!0},Ws={endpoint:"signupNewUser",G:ds,V:!0,B:!0},Hs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new k("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Gs={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Qs={endpoint:"verifyAssertion",A:ys,Ya:ms,G:bs,V:!0,B:!0},Ys={endpoint:"verifyAssertion",A:ys,Ya:ms,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new k("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);ds(t)},V:!0,B:!0},Xs={endpoint:"verifyAssertion",A:function(t){if(ys(t),!t.idToken)throw new k("internal-error")},Ya:ms,G:bs,V:!0},$s={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new k("invalid-custom-token")},G:ds,V:!0,B:!0},Js={endpoint:"verifyPassword",A:function(t){if(hs(t),!t.password)throw new k("wrong-password")},G:ds,V:!0,B:!0},Zs={endpoint:"verifyPhoneNumber",A:ps,G:ds,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new k("internal-error");ps(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Go(t);ds(t)}},eu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ps,G:ds,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ja]^!!t.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.N))return Ae(new k("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return Ne(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),ls(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new k("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",mt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],e);return!e&&t&&(e=Lr(t)),new k("internal-error",e)}function au(t){this.b=t,this.a=null,this.rb=function(t){return(lu||(lu=new Ie((function(t,e){function n(){qr(),Nr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){qr(),e(Error("Network Error"))},timeout:uu.get()})}if(Nr("gapi.iframes.Iframe"))t();else if(Nr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Nr("gapi.load")?n():e(Error("Network Error"))},Ne(Ka(r=Ot(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw lu=null,t})))).then((function(){return new Ie((function(e,n){Nr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new _t(Et,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Vr(3e4,6e4),cu=new Vr(5e3,15e3),lu=null;function hu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Vn((t=qn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Vn("https",this.l,null,"/__/auth/iframe"),this.a=t,Fn(this.a,"apiKey",this.h),Fn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function du(t){try{return e.a.app(t).auth().Ga()}catch(n){return[]}}function pu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=lr();return function(t){return ru(t,Us,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=qn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=qn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:vr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Wo(lr())}))}function gu(t){return t.m||(t.m=yr().then((function(){if(!t.u){var e=t.c,n=t.i,r=du(t.b),i=new hu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.v=new au(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Vo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ne(n)}return n.status="ERROR",Ne(n)}))}(t)}))),t.m}function yu(t){return t.l||(t.C=t.c?kr(t.c,du(t.b)):null,t.l=new Xa(t.g,x(t.i),t.C),t.f&&is(t.l,t.f)),t.l}function mu(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new fu(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=gt(u||null),t.f=c,t.yb(l).toString()}function bu(t){if(this.a=t||e.a.INTERNAL.reactNative&&e.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function _u(t){this.b=t,this.a={},this.f=I(this.c,this)}hu.prototype.toString=function(){return this.f?Fn(this.a,"v",this.f):Zn(this.a.b,"v"),this.b?Fn(this.a,"eid",this.b):Zn(this.a.b,"eid"),this.c.length?Fn(this.a,"fw",this.c.join(",")):Zn(this.a.b,"fw"),this.a.toString()},fu.prototype.yb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=qn(this.v.url);t=Vn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Vn("https",this.u,null,"/__/auth/handler");if(Fn(t,"apiKey",this.s),Fn(t,"appName",this.c),Fn(t,"authType",this.m),this.a.isOAuthProvider){var n=this.a;try{var r=e.a.app(this.c).auth().la()}catch(u){r=null}for(var i in n.ob=r,Fn(t,"providerId",this.a.providerId),n=jr((r=this.a).Ib))n[i]=n[i].toString();i=r.Qc,n=gt(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}r.pb&&r.ob&&!n[r.pb]&&(n[r.pb]=r.ob),vt(n)||Fn(t,"customParameters",Lr(n))}if("function"===typeof this.a.Qb&&((r=this.a.Qb()).length&&Fn(t,"scopes",r.join(","))),this.l?Fn(t,"redirectUrl",this.l):Zn(t.b,"redirectUrl"),this.g?Fn(t,"eventId",this.g):Zn(t.b,"eventId"),this.i?Fn(t,"v",this.i):Zn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Un(t,s)&&Fn(t,s,this.b[s]);return this.h?Fn(t,"tid",this.h):Zn(t.b,"tid"),this.f?Fn(t,"eid",this.f):Zn(t.b,"eid"),(s=du(this.c)).length&&Fn(t,"fw",s.join(",")),t.toString()},(n=pu.prototype).Ob=function(t,e,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.rb.then((function(){return new Ie((function(n){t.a.send(e.type,e,n,Nr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&dr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new Ie((function(e){return function n(){kn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return kn(n).then((function(){e(r)}))}))},n.Xb=function(){var t=Or();return!Dr(t)&&!Ur(t)},n.Tb=function(){return!1},n.Mb=function(t,e,n,r,i,o,a,s){if(!t)return Ae(new k("popup-blocked"));if(a&&!Dr())return this.ma().o((function(e){dr(t),i(e)})),r(),Ne();this.a||(this.a=vu(yu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw dr(t),i(e),e}));return r(),e})).then((function(){(Uo(n),a)||hr(mu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},n.Nb=function(t,e,n,r){this.a||(this.a=vu(yu(this)));var i=this;return this.a.then((function(){Uo(e),hr(mu(i.s,i.g,i.b,t,e,lr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},n.ma=function(){var t=this;return gu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new k("network-request-failed")}))},n.$b=function(){return!0},n.Ea=function(t){this.h.push(t)},n.Sa=function(t){$(this.h,(function(e){return e==t}))},(n=bu.prototype).get=function(t){return Ne(this.a.getItem(t)).then((function(t){return t&&Mr(t)}))},n.set=function(t,e){return Ne(this.a.setItem(t,Lr(e)))},n.U=function(t){return Ne(this.a.removeItem(t))},n.ca=function(){},n.ia=function(){};var wu,Iu=[];function Tu(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Eu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Cu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Ae(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Ie((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return ku(t,c),e})).o((function(e){throw ku(t,c),e}))}function ku(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),$(t.a,(function(t){return t==e}))}}function Ou(){if(!Ru())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;_r()&&self?(this.v=function(){var t=_r()?self:null;if(W(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new _u(t);Iu.push(e)}return e}(),Tu(this.v,"keyChanged",(function(e,n){return Mu(t).then((function(e){return 0<e.length&&W(t.a,(function(t){t(e)})),{keyProcessed:Y(e,n.key)}}))})),Tu(this.v,"ping",(function(){return Ne(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?Ne().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ne(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Eu(e)),Cu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Y(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Nu(t){return new Ie((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new Ie((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Nu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Au(t){return t.i||(t.i=Nu(t)),t.i}function Pu(t,e){var n=0;return new Ie((function r(i,o){Au(t).then(e).then(i).o((function(e){if(!(3<++n))return Au(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ru(){try{return!!u.indexedDB}catch(ua){return!1}}function xu(t){return t.objectStore("firebaseLocalStorage")}function Du(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new Ie((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function ju(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Cu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ne()}function Mu(t){return Au(t).then((function(t){var e=xu(Du(t,!1));return e.getAll?Lu(e.getAll()):new Ie((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function Fu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Uu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ne().then((function(){if(Ru()){var t=Fr(),r="__sak"+t;return wu||(wu=new Ou),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){W(e.a,(function(e){e(t)}))})),t}))}function qu(){this.a={},this.type="inMemory"}function Vu(){if(!function(){var t="Node"==wr();if(!(t=Bu()||t&&e.a.INTERNAL.node&&e.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==wr())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Bu()||e.a.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=u.localStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Ku(){this.type="nullStorage"}function zu(){if(!function(){var t="Node"==wr();if(!(t=Wu()||t&&e.a.INTERNAL.node&&e.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==wr())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Wu()||e.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Wu(){try{var t=u.sessionStorage,e=Fr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Hu(){var t={};t.Browser=Yu,t.Node=Xu,t.ReactNative=$u,t.Worker=Ju,this.a=t[wr()]}_u.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];W(r,(function(e){i.push(Ne().then((function(){return e(t.origin,t.data.data)})))})),Re(i).then((function(r){var i=[];W(r,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),W(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Eu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)ku(this,this.a[0]);this.b=!0},(n=Ou.prototype).set=function(t,e){var n=this,r=!1;return Pu(this,(function(e){return Lu((e=xu(Du(e,!0))).get(t))})).then((function(i){return Pu(n,(function(o){if(o=xu(Du(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Lu(o.add(a))}))})).then((function(){return n.c[t]=e,ju(n,t)})).oa((function(){r&&n.b--}))},n.get=function(t){return Pu(this,(function(e){return Lu(xu(Du(e,!1)).get(t))})).then((function(t){return t&&t.value}))},n.U=function(t){var e=this,n=!1;return Pu(this,(function(r){return n=!0,e.b++,Lu(xu(Du(r,!0)).delete(t))})).then((function(){return delete e.c[t],ju(e,t)})).oa((function(){n&&e.b--}))},n.ca=function(t){0==this.a.length&&function(t){Fu(t),function e(){t.f=setTimeout((function(){t.l=Mu(t).then((function(e){0<e.length&&W(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},n.ia=function(t){$(this.a,(function(e){return e==t})),0==this.a.length&&Fu(this)},(n=Uu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},n.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},n.U=function(t){return this.b.then((function(e){return e.U(t)}))},n.ca=function(t){this.a.push(t)},n.ia=function(t){$(this.a,(function(e){return e==t}))},(n=qu.prototype).get=function(t){return Ne(this.a[t])},n.set=function(t,e){return this.a[t]=e,Ne()},n.U=function(t){return delete this.a[t],Ne()},n.ca=function(){},n.ia=function(){},(n=Vu.prototype).get=function(t){var e=this;return Ne().then((function(){return Mr(e.a.getItem(t))}))},n.set=function(t,e){var n=this;return Ne().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},n.U=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},n.ca=function(t){u.window&&ln(u.window,"storage",t)},n.ia=function(t){u.window&&dn(u.window,"storage",t)},(n=Ku.prototype).get=function(){return Ne(null)},n.set=function(){return Ne()},n.U=function(){return Ne()},n.ca=function(){},n.ia=function(){},(n=zu.prototype).get=function(t){var e=this;return Ne().then((function(){return Mr(e.a.getItem(t))}))},n.set=function(t,e){var n=this;return Ne().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},n.U=function(t){var e=this;return Ne().then((function(){e.a.removeItem(t)}))},n.ca=function(){},n.ia=function(){};var Gu,Qu,Yu={F:Vu,bb:zu},Xu={F:Vu,bb:zu},$u={F:bu,bb:Ku},Ju={F:Vu,bb:Ku},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Ur(Or())||!br()),e=Dr(),n=Ar();this.m=t,this.h=e,this.l=n,this.a={},Gu||(Gu=new Hu),t=Gu;try{this.g=!cr()&&zr()||!u.indexedDB?new t.a.F:new Uu(_r()?new qu:new t.a.F)}catch(r){this.g=new qu,this.h=!0}try{this.i=new t.a.bb}catch(r){this.i=new qu}this.v=new qu,this.f=I(this.Yb,this),this.b={}}function ec(){return Qu||(Qu=new tc),Qu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function ac(t){this.a=t,this.b=ec()}(n=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},n.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},n.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),vt(this.a)&&(nc(this,"local").ca(this.f),this.h||(cr()||!zr())&&u.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Je({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Yb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},n.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&($(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},n.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.mb(e))},Yt&&ue&&10==ue&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else W(t,I(this.mb,this))},n.mb=function(t){this.a[t]&&W(this.a[t],(function(t){t()}))};var sc,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function lc(t,e){this.b=hc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=u.Int32Array?new Int32Array(mc):mc),this.reset()}S(lc,(function(){this.b=-1}));for(var hc=64,fc=hc-1,dc=[],pc=0;pc<fc;pc++)dc[pc]=0;var vc=J(128,dc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|sc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function yc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}lc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Z(this.h)};var mc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){lc.call(this,8,_c)}S(bc,lc);var _c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new ac(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new k("invalid-cordova-configuration",t)}function Tc(t){var e=new bc;yc(e,t),t=[];var n=8*e.g;56>e.c?yc(e,vc,56-e.c):yc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return G(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Ec(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Sc(t){return t.f||(t.f=t.ma().then((function(){return new Ie((function(e){t.Ea((function n(r){return e(r),t.Sa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Cc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Mr(Un(o=qn(i),"firebaseError")||null))?O(o):null)?new qo(r.c,r.b,null,null,o,null,r.T()):new qo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ec(t,i)}))}var n=new qo("unknown",null,null,null,new k("no-auth-event")),r=!1,i=kn(500).then((function(){return Cc(t).then((function(){r||Ec(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Nr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},zo||(zo=new Bo),function(t){var e=zo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"===typeof(t=Nr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Cc(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return Vo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function kc(t){this.a=t,this.b=ec()}(n=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(mr(void 0)?yr().then((function(){return new Ie((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ae(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof Nr("universalLinks.subscribe",u))throw Ic("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Nr("BuildInfo.packageName",u))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!==typeof Nr("cordova.plugins.browsertab.openUrl",u))throw Ic("cordova-plugin-browsertab is not installed");if("function"!==typeof Nr("cordova.InAppBrowser.open",u))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new k("cordova-not-ready")}))},n.Ob=function(t,e){return e(new k("operation-not-supported-in-this-environment")),Ne()},n.Mb=function(){return Ae(new k("operation-not-supported-in-this-environment"))},n.$b=function(){return!1},n.Xb=function(){return!0},n.Tb=function(){return!0},n.Nb=function(t,e,n,r){if(this.c)return Ae(new k("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,c=null,l=null;return this.c=Ne().then((function(){return Uo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new qo(e,r,null,o,new k("no-auth-event"),null,i),s=Nr("BuildInfo.packageName",u);if("string"!==typeof s)throw new k("invalid-cordova-configuration");var c=Nr("BuildInfo.displayName",u),l={};if(Or().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!Or().toLowerCase().match(/android/))return Ae(new k("operation-not-supported-in-this-environment"));l.apn=s}c&&(l.appDisplayName=c),o=Tc(o),l.sessionId=o;var h=mu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Nr("cordova.plugins.browsertab.isAvailable",u);if("function"!==typeof e)throw new k("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!==typeof(n=Nr("cordova.plugins.browsertab.openUrl",u)))throw new k("invalid-cordova-configuration");n(h)}else{if("function"!==typeof(n=Nr("cordova.InAppBrowser.open",u)))throw new k("invalid-cordova-configuration");e=Or(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new Ie((function(t,e){s=function(){var e=Nr("cordova.plugins.browsertab.close",u);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){a||(a=kn(2e3).then((function(){e(new k("redirect-cancelled-by-user"))})))},l=function(){Br()&&c()},o.addEventListener("resume",c,!1),Or().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return Cc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),s&&i.Sa(s),i.c=null}))},n.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new qo("unknown",null,null,null,new k("no-auth-event")),t(e))}))},n.Sa=function(t){$(this.b,(function(e){return e==t}))};var Oc={name:"pendingRedirect",F:"session"};function Nc(t){return ic(t.b,Oc,t.a)}function Ac(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=I(this.s,this),this.b=new Wc,this.C=new Xc,this.g=new kc(Kc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Pc(this.D,this.v,this.m,N,this.J)}function Pc(t,n,r,i,o){var a=e.a.SDK_VERSION||null;return mr()?new wc(t,n,r,a,i,o):new pu(t,n,r,a,i,o)}function Rc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function xc(t){t.a.Xb()&&Rc(t).o((function(e){var n=new qo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)})),t.a.Tb()||Hc(t.b)}function Dc(t,e){Y(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Oc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Nc(t.g).then((function(){Rc(t).o((function(e){var n=new qo("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Uc(e)&&t.s(n)}))})):xc(t)})).o((function(){xc(t)}))}function Lc(t,e){$(t.h,(function(t){return t==e}))}Ac.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Pc(this.D,this.v,this.m,null,this.J),this.i={}},Ac.prototype.s=function(t){if(!t)throw new k("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Hc(this.b),e};var jc=new Vr(2e3,1e4),Mc=new Vr(3e4,6e4);function Fc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Uc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function qc(t,e,n,r,i){var o;return function(t){return t.b.set(Oc,"pending",t.a)}(t.g).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Uc(e))throw new k("operation-not-supported-in-this-environment");return o=e,Nc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new Ie((function(){})):Nc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function Vc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),jc.get())}Ac.prototype.qa=function(){return this.b.qa()};var Bc={};function Kc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function zc(t,e,n,r){var i=Kc(e,n,r);return Bc[i]||(Bc[i]=new Ac(t,e,n,r)),Bc[i]}function Wc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Hc(t){t.g||(t.g=!0,Yc(t,!1,null,null))}function Gc(t){t.g&&!t.i&&Yc(t,!1,null,null)}function Qc(t,e){if(t.b=function(){return Ne(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Yc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ae(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Qc(t,n):Qc(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function $c(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Jc(t,e){this.a=e,Yr(this,"verificationId",t)}function Zc(t,e,n,r){return new jo(t).fb(e,n).then((function(t){return new Jc(t,r)}))}function tl(t){var e=zi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xr(this,{token:t,expirationTime:Kr(1e3*e.exp),authTime:Kr(1e3*e.auth_time),issuedAtTime:Kr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function el(t,e,n){var r=e&&e[rl];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;W(e[nl]||[],(function(t){(t=ti(t))&&i.b.push(t)})),Yr(this,"auth",this.a),Yr(this,"session",this.c),Yr(this,"hints",this.b)}Wc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Wc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Yc(this,!0,null,t.a),Ne()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Yc(t,s,e,null)})).o((function(e){Yc(t,s,null,e)}))}(this,t,e):Ae(new k("invalid-auth-event")):(Yc(this,!1,null,null),Ne())}else Ae(new k("invalid-auth-event"))},Wc.prototype.qa=function(){var t=this;return new Ie((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new k("timeout");t.a&&t.a.cancel(),t.a=kn(Mc.get()).then((function(){t.b||(t.g=!0,Yc(t,!0,null,e))}))}(t))}))},Xc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ne()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ae(new k("invalid-auth-event"))}else Ae(new k("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Mo(this.verificationId,t),this.a(t)};var nl="mfaInfo",rl="mfaPendingCredential";function il(t,e,n,r){k.call(this,"multi-factor-auth-required",r,e),this.b=new el(t,e,n),Yr(this,"resolver",this.b)}function ol(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new il(e,t.serverResponse,n,t.message)}catch(r){}return null}function al(){}function sl(t){Yr(this,"factorId",t.fa),this.a=t}function ul(t){if(sl.call(this,t),this.a.fa!=jo.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function cl(t,e){for(var n in $e.call(this,t),e)this[n]=e[n]}function ll(t,e){this.a=t,this.b=[],this.c=I(this.yc,this),ln(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&W(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),hl(this,n)}function hl(t,e){t.b=e,Yr(t,"enrolledFactors",e)}function fl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function dl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function pl(t,e){"undefined"===typeof e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function vl(t,e){t.b=Ki(e[Ja]||""),t.a=e.refreshToken,pl(t,"undefined"!==typeof(e=e.expiresIn)?Number(e):void 0)}function gl(t,e){return function(t,e){return new Ie((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ss(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new k("internal-error")):r(new k("network-request-failed"))}),"POST",Jn(e).toString(),t.g,t.m.get()):r(new k("internal-error"))}))}(t.f,e).then((function(e){return t.b=Ki(e.access_token),t.a=e.refresh_token,pl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function yl(t,e){this.a=t||null,this.b=e||null,Xr(this,{lastSignInTime:Kr(e||null),creationTime:Kr(t||null)})}function ml(t,e,n,r,i,o){Xr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function bl(t,n,r){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=e.a.SDK_VERSION?kr(e.a.SDK_VERSION):null;this.a=new Xa(this.l,x(N),i),t.emulatorConfig&&is(this.a,t.emulatorConfig),this.b=new dl(this.a),kl(this,n[Ja]),vl(this.b,n),Yr(this,"refreshToken",this.b.a),Al(this,r||{}),In.call(this),this.R=!1,this.s&&Pr()&&(this.i=zc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(t){return new fl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.aa=I(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){is(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){Il(o,t.f)},this.ba=null,this.O=new ll(this,r),Yr(this,"multiFactor",this.O)}function _l(t,e){t.ja&&dn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&ln(e,"languageCodeChanged",t.Oa)}function wl(t,e){t.X&&dn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&ln(e,"emulatorConfigChanged",t.Aa)}function Il(t,n){t.$=n,as(t.a,e.a.SDK_VERSION?kr(e.a.SDK_VERSION,t.$):null)}function Tl(t,e){t.ba&&dn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&ln(e,"frameworkChanged",t.Ba)}function El(t){try{return e.a.app(t.m).auth()}catch(n){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Sl(t){t.D||t.u.b||(t.u.start(),dn(t,"tokenChanged",t.aa),ln(t,"tokenChanged",t.aa))}function Cl(t){dn(t,"tokenChanged",t.aa),t.u.stop()}function kl(t,e){t.za=e,Yr(t,"_lat",e)}function Ol(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Re(e).then((function(){return t}))}function Nl(t){t.i&&!t.R&&(t.R=!0,Dc(t.i,t))}function Al(t,e){Xr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new yl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Pl(){}function Rl(t){return Ne().then((function(){if(t.D)throw new k("app-deleted")}))}function xl(t){return G(t.providerData,(function(t){return t.providerId}))}function Dl(t,e){e&&(Ll(t,e.providerId),t.providerData.push(e))}function Ll(t,e){$(t.providerData,(function(t){return t.providerId==e}))}function jl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Yr(t,e,n)}function Ml(t,e){t!=e&&(Xr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Yr(t,"metadata",function(t){return new yl(t.a,t.b)}(e.metadata)):Yr(t,"metadata",new yl),W(e.providerData,(function(e){Dl(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Yr(t,"refreshToken",t.b.a),hl(t.O,e.O.b))}function Fl(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Ds,{idToken:e}).then(I(t.Kc,t))}(t,e).then((function(){return n||jl(t,"isAnonymous",!1),e}))}))}function Ul(t,e){e[Ja]&&t.za!=e[Ja]&&(vl(t.b,e),t.dispatchEvent(new cl("tokenChanged")),kl(t,e[Ja]),jl(t,"refreshToken",t.b.a))}function ql(t,e){return Fl(t).then((function(){if(Y(xl(t),e))return Ol(t).then((function(){throw new k("provider-already-linked")}))}))}function Vl(t,e,n){return $r({user:t,credential:Fo(e),additionalUserInfo:e=Yi(e),operationType:n})}function Bl(t,e){return Ul(t,e),t.reload().then((function(){return t}))}function Kl(t,n,r,i,o){if(!Pr())return Ae(new k("operation-not-supported-in-this-environment"));if(t.h&&!o)return Ae(t.h);var a=Qi(r.providerId),s=Fr(t.uid+":::"),u=null;(!Dr()||br())&&t.s&&r.isOAuthProvider&&(u=mu(t.s,t.l,t.m,n,r,null,s,e.a.SDK_VERSION||null,null,null,t.tenantId));var c=pr(u,a&&a.ua,a&&a.ta);return i=i().then((function(){if(Wl(t),!o)return t.I().then((function(){}))})).then((function(){return Fc(t.i,c,n,r,s,!!u,t.tenantId)})).then((function(){return new Ie((function(e,r){t.na(n,null,new k("cancelled-popup-request"),t.g||null),t.f=e,t.C=r,t.g=s,t.c=Vc(t.i,t,n,c,s)}))})).then((function(t){return c&&dr(c),t?$r(t):null})).o((function(t){throw c&&dr(c),t})),Hl(t,i,o)}function zl(t,e,n,r,i){if(!Pr())return Ae(new k("operation-not-supported-in-this-environment"));if(t.h&&!i)return Ae(t.h);var o=null,a=Fr(t.uid+":::");return r=r().then((function(){if(Wl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Ol(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Yl,t.w(),e.a)),e})).then((function(){return qc(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Xl(t.ha);throw o})).then((function(){if(o)throw o})),Hl(t,r,i)}function Wl(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new k("internal-error");throw new k("auth-domain-config-required")}}function Hl(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Ae(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new cl("userInvalidated")),t.h=e),e}))}(t,e,n);return t.J.push(r),r.oa((function(){X(t.J,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ol(e.w(),El(t),I(t.jc,t))),n||e}))}function Gl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ja]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new bl(e,n,t);return t.providerData&&W(t.providerData,(function(t){t&&Dl(i,$r(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Ql(t){this.a=t,this.b=ec()}el.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=gt(e.f);return delete n[nl],delete n[rl],mt(n,t),e.g(n)}))},S(il,k),al.prototype.sb=function(t,e,n){return e.type==ao?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),mt(n,{phoneVerificationInfo:Lo(t.a)}),ru(e,Rs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return mt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),ru(e,xs,n)}))}(this,t,e)},S(sl,al),S(ul,sl),S(cl,$e),(n=ll.prototype).yc=function(t){hl(this,function(t){var e=[];return W(t.mfaInfo||[],(function(t){(t=ti(t))&&e.push(t)})),e}(t.hd))},n.Rb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},n.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return Ul(n.a,t),n.a.reload()}))},n.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return hl(e,r),Ul(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},n.w=function(){return{multiFactor:{enrolledFactors:G(this.b,(function(t){return t.w()}))}}},fl.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=kn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=u.document,e=null;return Br()||!t?Ne():new Ie((function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},fl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ae(new k("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?gl(this,{grant_type:"refresh_token",refresh_token:this.a}):Ne(null):Ne({accessToken:this.b.toString(),refreshToken:this.a})},yl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(bl,In),bl.prototype.wa=function(t){this.ya=t,rs(this.a,t)},bl.prototype.la=function(){return this.ya},bl.prototype.Ga=function(){return Z(this.$)},bl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Yr(bl.prototype,"providerId","firebase"),(n=bl.prototype).reload=function(){var t=this;return Hl(this,Rl(this).then((function(){return Fl(t).then((function(){return Ol(t)})).then(Pl)})))},n.oc=function(t){return this.I(t).then((function(t){return new tl(t)}))},n.I=function(t){var e=this;return Hl(this,Rl(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new k("internal-error");return t.accessToken!=e.za&&(kl(e,t.accessToken),e.dispatchEvent(new cl("tokenChanged"))),jl(e,"refreshToken",t.refreshToken),t.accessToken})))},n.Kc=function(t){if(!(t=t.users)||!t.length)throw new k("internal-error");Al(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?G(t,(function(t){return new ml(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Dl(this,e[n]);jl(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new cl("userReloaded",{hd:t}))},n.Lc=function(t){return Gr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},n.tb=function(t){var e=this,n=null;return Hl(this,t.c(this.a,this.uid).then((function(t){return Ul(e,t),n=Vl(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},n.Cc=function(t){return Gr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},n.qb=function(t){var e=this,n=null;return Hl(this,ql(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Vl(e,t,"link"),Bl(e,t)})).then((function(){return n})))},n.Dc=function(t,e){var n=this;return Hl(this,ql(this,"phone").then((function(){return Zc(El(n),t,e,I(n.qb,n))})))},n.Mc=function(t,e){var n=this;return Hl(this,Ne().then((function(){return Zc(El(n),t,e,I(n.tb,n))})),!0)},n.Bb=function(t){var e=this;return Hl(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Ul(e,t),e.reload()})))},n.ed=function(t){var e=this;return Hl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Ul(e,t),e.reload()})))},n.Cb=function(t){var e=this;return Hl(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Ul(e,t),e.reload()})))},n.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Rl(this);var e=this;return Hl(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Ul(e,t),jl(e,"displayName",t.displayName||null),jl(e,"photoURL",t.photoUrl||null),W(e.providerData,(function(t){"password"===t.providerId&&(Yr(t,"displayName",e.displayName),Yr(t,"photoURL",e.photoURL))})),Ol(e)})).then(Pl))},n.cd=function(t){var e=this;return Hl(this,Fl(this).then((function(n){return Y(xl(e),t)?function(t,e,n){return ru(t,Ns,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return W(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),W(xl(e),(function(t){n[t]||Ll(e,t)})),n[jo.PROVIDER_ID]||Yr(e,"phoneNumber",null),Ol(e)})):Ol(e).then((function(){throw new k("no-such-provider")}))})))},n.delete=function(){var t=this;return Hl(this,this.I().then((function(e){return ru(t.a,Os,{idToken:e})})).then((function(){t.dispatchEvent(new cl("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");_l(t,null),wl(t,null),Tl(t,null),t.J=[],t.D=!0,Cl(t),Yr(t,"refreshToken",null),t.i&&Lc(t.i,t)}))},n.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},n.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?I(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?I(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?I(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?I(this.Lb,this):null},n.Ec=function(t){var e=this;return Kl(this,"linkViaPopup",t,(function(){return ql(e,t.providerId).then((function(){return Ol(e)}))}),!1)},n.Nc=function(t){return Kl(this,"reauthViaPopup",t,(function(){return Ne()}),!0)},n.Fc=function(t){var e=this;return zl(this,"linkViaRedirect",t,(function(){return ql(e,t.providerId)}),!1)},n.Oc=function(t){return zl(this,"reauthViaRedirect",t,(function(){return Ne()}),!0)},n.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Hl(this,this.I().then((function(n){return ws(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Vl(i,t,"link"),Bl(i,t)})).then((function(){return o})))},n.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Hl(this,Ne().then((function(){return co(Is(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Vl(i,t,"reauthenticate"),Ul(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},n.ub=function(t){var e=this,n=null;return Hl(this,this.I().then((function(e){return n=e,"undefined"===typeof t||vt(t)?{}:Ui(new Ni(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},n.Eb=function(t,e){var n=this,r=null;return Hl(this,this.I().then((function(t){return r=t,"undefined"===typeof e||vt(e)?{}:Ui(new Ni(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},n.jc=function(t){var e=null,n=this;return Hl(this,t=co(Ne(t),n.uid).then((function(t){return e=Vl(n,t,"reauthenticate"),Ul(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},n.toJSON=function(){return this.w()},n.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&mt(t,this.metadata.w()),W(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),mt(t,this.O.w()),t};var Yl={name:"redirectUser",F:"session"};function Xl(t){return ic(t.b,Yl,t.a)}function $l(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=th("local"),n=th("session"),r=th("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Mr(u.localStorage.getItem(r))}catch(s){}if(a&&!o)return u.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Zl,t.a).then((function(t){return t?th(t):e}))}))}))})).then((function(e){return t.c=e,Jl(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(th("local"),this.a,I(this.g,this))}function Jl(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,th(Zu[n]),t.a));return r.push(ic(t.b,Zl,t.a)),function(t){return new Ie((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Pe(t[s],T(o,s),a);else e(i)}))}(r)}$l.prototype.g=function(){var t=this,e=th("local");ih(this,(function(){return Ne().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Jl(t,"local").then((function(){t.c=e}))}))}))};var Zl={name:"persistence",F:"session"};function th(t){return{name:"authUser",F:t}}function eh(t,e){return ih(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function nh(t){return ih(t,(function(){return ic(t.b,t.c,t.a)}))}function rh(t,e,n){return ih(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Gl(t||{})}))}))}function ih(t,e){return t.f=t.f.then(e,e),t.f}function oh(t){if(this.l=!1,Yr(this,"settings",new $c),Yr(this,"app",t),!ph(this).options||!ph(this).options.apiKey)throw new k("invalid-api-key");t=e.a.SDK_VERSION?kr(e.a.SDK_VERSION):null,this.a=new Xa(ph(this).options&&ph(this).options.apiKey,x(N),t),this.R=[],this.s=[],this.O=[],this.hb=e.a.INTERNAL.createSubscribe(I(this.zc,this)),this.X=void 0,this.bc=e.a.INTERNAL.createSubscribe(I(this.Ac,this)),fh(this,null),this.i=new $l(ph(this).options.apiKey+":"+ph(this).name),this.D=new Ql(ph(this).options.apiKey+":"+ph(this).name),this.$=mh(this,function(t){var e=ph(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Yl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Gl(t||{})}))}(t.D,ph(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Xl(t.D)}));return mh(t,e)}(t).then((function(){return rh(t.i,e,t.P)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return eh(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:nh(t.i)}))):null})).then((function(e){fh(t,e||null)}));return mh(t,n)}(this)),this.h=mh(this,function(t){return t.$.then((function(){return lh(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(th("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=I(this.Zc,this),this.Ba=I(this.da,this),this.ya=I(this.mc,this),this.za=I(this.wc,this),this.Aa=I(this.xc,this),this.b=null,function(t){var e=ph(t).options.authDomain,n=ph(t).options.apiKey;e&&Pr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=zc(e,n,ph(t).name,t.P),Dc(t.b,t),vh(t)&&Nl(vh(t)),t.m){Nl(t.m);var r=t.m;r.wa(t.la()),_l(r,t),Il(r=t.m,t.J),Tl(r,t),is((r=t.m).a,t.P),wl(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=I(this.delete,this),this.INTERNAL.logFramework=I(this.Gc,this),this.u=0,In.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.P){var t=qn(this.P.url);t=$r({protocol:t.c,host:t.a,port:t.g,options:$r({disableWarnings:this.P.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.P=null}function ah(t){$e.call(this,"languageCodeChanged"),this.h=t}function sh(t){$e.call(this,"emulatorConfigChanged"),this.c=t}function uh(t){$e.call(this,"frameworkChanged"),this.f=t}function ch(t){return t.Oa||Ae(new k("auth-domain-config-required"))}function lh(t){if(!Pr())return Ae(new k("operation-not-supported-in-this-environment"));var e=ch(t).then((function(){return t.b.qa()})).then((function(t){return t?$r(t):null}));return mh(t,e)}function hh(t,e){var n={};return n.apiKey=ph(t).options.apiKey,n.authDomain=ph(t).options.authDomain,n.appName=ph(t).name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return function(t,e,n,r){var i=new bl(t,e);return n&&(i.ha=n),r&&Il(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return vh(t)&&e.uid==vh(t).uid?(Ml(vh(t),e),t.da(e)):(fh(t,e),Nl(e),t.da(e))})).then((function(){yh(t)}))}function fh(t,e){vh(t)&&(function(t,e){$(t.S,(function(t){return t==e}))}(vh(t),t.Ba),dn(vh(t),"tokenChanged",t.ya),dn(vh(t),"userDeleted",t.za),dn(vh(t),"userInvalidated",t.Aa),Cl(vh(t))),e&&(e.S.push(t.Ba),ln(e,"tokenChanged",t.ya),ln(e,"userDeleted",t.za),ln(e,"userInvalidated",t.Aa),0<t.u&&Sl(e)),Yr(t,"currentUser",e),e&&(e.wa(t.la()),_l(e,t),Il(e,t.J),Tl(e,t),is(e.a,t.P),wl(e,t))}function dh(t,e){var n=null,r=null;return mh(t,e.then((function(e){return n=Fo(e),r=Yi(e),hh(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ol(e.w(),t,I(t.kc,t))),n||e})).then((function(){return $r({user:vh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function ph(t){return t.app}function vh(t){return t.currentUser}function gh(t){return vh(t)&&vh(t)._lat||null}function yh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](gh(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](gh(t))}}function mh(t,e){return t.R.push(e),e.oa((function(){X(t.R,e)})),e}function bh(){}function _h(){this.a={},this.b=1e12}$l.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(wr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ru()&&"none"!==t)throw n;break;default:if(!Ar()&&"none"!==t)throw n}}(t),ih(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Jl(n,t)})).then((function(){if(n.c=th(t),e)return n.b.set(n.c,e,n.a)})):Ne()}))},S(oh,In),S(ah,$e),S(sh,$e),S(uh,$e),(n=oh.prototype).xb=function(t){return mh(this,t=this.i.xb(t))},n.wa=function(t){this.aa===t||this.l||(this.aa=t,rs(this.a,this.aa),this.dispatchEvent(new ah(this.la())))},n.la=function(){return this.aa},n.fd=function(){var t=u.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},n.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!t&&yr().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.P={url:t,ec:e},this.settings.ib=!0,is(this.a,this.P),this.dispatchEvent(new sh(this.P))}},n.Gc=function(t){this.J.push(t),as(this.a,e.a.SDK_VERSION?kr(e.a.SDK_VERSION,this.J):null),this.dispatchEvent(new uh(this.J))},n.Ga=function(){return Z(this.J)},n.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},n.T=function(){return this.S},n.toJSON=function(){return{apiKey:ph(this).options.apiKey,authDomain:ph(this).options.authDomain,appName:ph(this).name,currentUser:vh(this)&&vh(this).w()}},n.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},n.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?I(this.ic,this):null},n.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return dh(i,_s(i.a,o))}))},n.Xc=function(t){if(!Pr())return Ae(new k("operation-not-supported-in-this-environment"));var n=this,r=Qi(t.providerId),i=Fr(),o=null;(!Dr()||br())&&ph(this).options.authDomain&&t.isOAuthProvider&&(o=mu(ph(this).options.authDomain,ph(this).options.apiKey,ph(this).name,"signInViaPopup",t,null,i,e.a.SDK_VERSION||null,null,null,this.T(),this.P));var a=pr(o,r&&r.ua,r&&r.ta);return mh(this,r=ch(this).then((function(e){return Fc(e,a,"signInViaPopup",t,i,!!o,n.T())})).then((function(){return new Ie((function(t,e){n.na("signInViaPopup",null,new k("cancelled-popup-request"),n.g),n.f=t,n.C=e,n.g=i,n.c=Vc(n.b,n,"signInViaPopup",a,i)}))})).then((function(t){return a&&dr(a),t?$r(t):null})).o((function(t){throw a&&dr(a),t})))},n.Yc=function(t){if(!Pr())return Ae(new k("operation-not-supported-in-this-environment"));var e=this;return mh(this,ch(this).then((function(){return function(t){return ih(t,(function(){return t.b.set(Zl,t.c.F,t.a)}))}(e.i)})).then((function(){return qc(e.b,"signInViaRedirect",t,void 0,e.T())})))},n.qa=function(){var t=this;return lh(this).then((function(e){return t.b&&Gc(t.b.b),e})).o((function(e){throw t.b&&Gc(t.b.b),e}))},n.dd=function(t){if(!t)return Ae(new k("null-user"));if(this.S!=t.tenantId)return Ae(new k("tenant-id-mismatch"));var e=this,n={};n.apiKey=ph(this).options.apiKey,n.authDomain=ph(this).options.authDomain,n.appName=ph(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Ja]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new bl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Il(e,r),Ml(e,t),e}(t,n,e.D,e.Ga());return mh(this,this.h.then((function(){if(ph(e).options.apiKey!=t.l)return r.reload()})).then((function(){return vh(e)&&t.uid==vh(e).uid?(Ml(vh(e),t),e.da(t)):(fh(e,r),Nl(r),e.da(r))})).then((function(){yh(e)})))},n.Ab=function(){var t=this;return mh(this,this.h.then((function(){return t.b&&Gc(t.b.b),vh(t)?(fh(t,null),nh(t.i).then((function(){yh(t)}))):Ne()})))},n.Zc=function(){var t=this;return rh(this.i,ph(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=vh(t)&&e){n=vh(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Ml(vh(t),e),vh(t).I();(vh(t)||e)&&(fh(t,e),e&&(Nl(e),e.ha=t.D),t.b&&Dc(t.b,t),yh(t))}}))},n.da=function(t){return eh(this.i,t)},n.mc=function(){yh(this),this.da(vh(this))},n.wc=function(){this.Ab()},n.xc=function(){this.Ab()},n.kc=function(t){var e=this;return this.h.then((function(){return dh(e,Ne(t))}))},n.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(vh(e))}))},n.Ac=function(t){var e=this;!function(t,e){t.O.push(e),mh(t,t.h.then((function(){!t.l&&Y(t.O,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(gh(t)))})))}(this,(function(){t.next(vh(e))}))},n.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(vh(r)):"function"===typeof t.next&&t.next(vh(r))})),this.hb(t,e,n)},n.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"===typeof t?t(vh(r)):"function"===typeof t.next&&t.next(vh(r))})),this.bc(t,e,n)},n.nc=function(t){var e=this;return mh(this,this.h.then((function(){return vh(e)?vh(e).I(t).then((function(t){return{accessToken:t}})):null})))},n.Tc=function(t){var e=this;return this.h.then((function(){return dh(e,ru(e.a,$s,{token:t}))})).then((function(t){var n=t.user;return jl(n,"isAnonymous",!1),e.da(n),t}))},n.Uc=function(t,e){var n=this;return this.h.then((function(){return dh(n,ru(n.a,Js,{email:t,password:e}))}))},n.dc=function(t,e){var n=this;return this.h.then((function(){return dh(n,ru(n.a,Cs,{email:t,password:e}))}))},n.$a=function(t){var e=this;return this.h.then((function(){return dh(e,t.ka(e.a))}))},n.Sc=function(t){return Gr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},n.zb=function(){var t=this;return this.h.then((function(){var e=vh(t);if(e&&e.isAnonymous){var n=$r({providerId:null,isNewUser:!1});return $r({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return dh(t,t.a.zb()).then((function(e){var n=e.user;return jl(n,"isAnonymous",!0),t.da(n),e}))}))},n.getUid=function(){return vh(this)&&vh(this).uid||null},n.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&vh(this)&&Sl(vh(this))},n.Pc=function(t){var e=this;W(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&vh(this)&&Cl(vh(this)),this.removeAuthTokenListener(t)},n.addAuthTokenListener=function(t){var e=this;this.s.push(t),mh(this,this.h.then((function(){e.l||Y(e.s,t)&&t(gh(e))})))},n.removeAuthTokenListener=function(t){$(this.s,(function(e){return e==t}))},n.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(th("local"),t.a,this.ja),this.b&&(Lc(this.b,this),Gc(this.b.b)),Promise.resolve()},n.hc=function(t){return mh(this,function(t,e){return ru(t,ks,{identifier:e,continueUri:Rr()?lr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},n.Bc=function(t){return!!Ro(t)},n.wb=function(t,e){var n=this;return mh(this,Ne().then((function(){var t=new Ni(e);if(!t.c)throw new k("argument-error",Ri+" must be true when sending sign in link to email");return Ui(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},n.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},n.nb=function(t,e){return mh(this,this.a.nb(t,e).then((function(){})))},n.Ra=function(t){return mh(this,this.a.Ra(t).then((function(t){return new ai(t)})))},n.jb=function(t){return mh(this,this.a.jb(t).then((function(){})))},n.vb=function(t,e){var n=this;return mh(this,Ne().then((function(){return"undefined"===typeof e||vt(e)?{}:Ui(new Ni(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},n.Wc=function(t,e){return mh(this,Zc(this,t,e,I(this.$a,this)))},n.Vc=function(t,e){var n=this;return mh(this,Ne().then((function(){var r=e||lr(),i=Po(t,r);if(!(r=Ro(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.$a(i)})))},bh.prototype.render=function(){},bh.prototype.reset=function(){},bh.prototype.getResponse=function(){},bh.prototype.execute=function(){};var wh=null;function Ih(t,e){return(e=Th(e))&&t.a[e]||null}function Th(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function Eh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=le(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ln(this.f,"click",this.i)}function Sh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Ch(){}function kh(){}_h.prototype.render=function(t,e){return this.a[this.b.toString()]=new Eh(t,e),this.b++},_h.prototype.reset=function(t){var e=Ih(this,t);t=Th(t),e&&t&&(e.delete(),delete this.a[t])},_h.prototype.getResponse=function(t){return(t=Ih(this,t))?t.getResponse():null},_h.prototype.execute=function(t){(t=Ih(this,t))&&t.execute()},Eh.prototype.getResponse=function(){return Sh(this),this.b},Eh.prototype.execute=function(){Sh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Eh.prototype.delete=function(){Sh(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},Yr(Ch,"FACTOR_ID","phone"),kh.prototype.g=function(){return wh||(wh=new _h),Ne(wh)},kh.prototype.c=function(){};var Oh=null;function Nh(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ah=new _t(Et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ph=new Vr(3e4,6e4);Nh.prototype.g=function(t){var e=this;return new Ie((function(n,r){var i=setTimeout((function(){r(new k("network-request-failed"))}),Ph.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete u[e.a]},Ne(Ka(Ot(Ah,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Nh.prototype.c=function(){this.b--};var Rh=null;function xh(t,e,n,r,i,o,a){if(Yr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,a?(Oh||(Oh=new kh),a=Oh):(Rh||(Rh=new Nh),a=Rh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[jh])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Mh],!u.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!le(e)||!this.i&&le(e).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xa(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[Dh];this.a[Dh]=function(t){if(Fh(s,t),"function"===typeof c)c(t);else if("string"===typeof c){var e=Nr(c,u);"function"===typeof e&&e(t)}};var l=this.a[Lh];this.a[Lh]=function(){if(Fh(s,null),"function"===typeof l)l();else if("string"===typeof l){var t=Nr(l,u);"function"===typeof t&&t()}}}var Dh="callback",Lh="expired-callback",jh="sitekey",Mh="size";function Fh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Uh(t,e){return t.h.push(e),e.oa((function(){X(t.h,e)})),e}function qh(t){if(t.D)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function Vh(t,n,r){var i=!1;try{this.b=r||e.a.app()}catch(s){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");r=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(s){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=e.a.SDK_VERSION?kr(e.a.SDK_VERSION,a):null,xh.call(this,r,t,n,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),a,x(N),i)}function Bh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Kh.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=Kh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new k("argument-error",t+" failed: "+r)}(n=xh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Uh(this,Ne().then((function(){if(Rr()&&!_r())return yr();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,qs,{})})).then((function(e){t.a[jh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},n.render=function(){qh(this);var t=this;return Uh(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=le(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ce&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Wt(a.name),'"'),a.type){o.push(' type="',Wt(a.type),'"');var s={};mt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ge(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):he(o,a)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},n.verify=function(){qh(this);var t=this;return Uh(this,this.render().then((function(e){return new Ie((function(n){var r=t.g.getResponse(e);if(r)n(r);else{t.l.push((function e(r){r&&(function(t,e){$(t.l,(function(t){return t==e}))}(t,e),n(r))})),t.i&&t.g.execute(t.c)}}))})))},n.reset=function(){qh(this),null!==this.c&&this.g.reset(this.c)},n.clear=function(){qh(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=le(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},S(Vh,xh);var Kh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function zh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function Wh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function Hh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function Gh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function Qh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Yh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Xh(t,e){return g(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function $h(t){return g(t)&&"string"===typeof t.uid}function Jh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Zh(t,e){for(var n in e){var r=e[n].name;t[r]=nf(r,t[n],e[n].j)}}function tf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){Bh(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function ef(t,e,n,r){t[e]=nf(e,n,r)}function nf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Bh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Zh(oh.prototype,{jb:{name:"applyActionCode",j:[zh("code")]},Ra:{name:"checkActionCode",j:[zh("code")]},nb:{name:"confirmPasswordReset",j:[zh("code"),zh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[zh("email"),zh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[zh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[zh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Jh(Hh(),Gh(),"nextOrObserver"),Gh("opt_error",!0),Gh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Jh(Hh(),Gh(),"nextOrObserver"),Gh("opt_error",!0),Gh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[zh("email"),Jh(Hh("opt_actionCodeSettings",!0),Qh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[zh("email"),Hh("actionCodeSettings")]},xb:{name:"setPersistence",j:[zh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Yh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Yh()]},Tc:{name:"signInWithCustomToken",j:[zh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[zh("email"),zh("password")]},Vc:{name:"signInWithEmailLink",j:[zh("email"),zh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Jh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof bl)}},Qh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[zh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[zh("url"),Hh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[zh("code")]}}),tf(oh.prototype,{lc:{name:"languageCode",kb:Jh(zh(),Qh(),"languageCode")},ti:{name:"tenantId",kb:Jh(zh(),Qh(),"tenantId")}}),oh.Persistence=Zu,oh.Persistence.LOCAL="local",oh.Persistence.SESSION="session",oh.Persistence.NONE="none",Zh(bl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Wh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Wh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Yh()]},qb:{name:"linkWithCredential",j:[Yh()]},Dc:{name:"linkWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Yh()]},tb:{name:"reauthenticateWithCredential",j:[Yh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Jh(Hh("opt_actionCodeSettings",!0),Qh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[zh(null,!0)]},cd:{name:"unlink",j:[zh("provider")]},Bb:{name:"updateEmail",j:[zh("email")]},Cb:{name:"updatePassword",j:[zh("password")]},ed:{name:"updatePhoneNumber",j:[Yh("phone")]},Db:{name:"updateProfile",j:[Hh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[zh("email"),Jh(Hh("opt_actionCodeSettings",!0),Qh(null,!0),"opt_actionCodeSettings",!0)]}}),Zh(_h.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Zh(bh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Zh(Ie.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),tf($c.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Wh("appVerificationDisabledForTesting")}}),Zh(Jc.prototype,{confirm:{name:"confirm",j:[zh("verificationCode")]}}),ef(uo,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[go,No,Do,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Jh(zh(),Hh(),"json")]),ef(Ao,"credential",(function(t,e){return new Oo(t,e)}),[zh("email"),zh("password")]),Zh(Oo.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),Zh(_o.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),ef(_o,"credential",wo,[Jh(zh(),Hh(),"token")]),ef(Ao,"credentialWithLink",Po,[zh("email"),zh("emailLink")]),Zh(Io.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),ef(Io,"credential",To,[Jh(zh(),Hh(),"token")]),Zh(Eo.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),ef(Eo,"credential",So,[Jh(zh(),Jh(Hh(),Qh()),"idToken"),Jh(zh(),Qh(),"accessToken",!0)]),Zh(Co.prototype,{Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),ef(Co,"credential",ko,[Jh(zh(),Hh(),"token"),zh("secret",!0)]),Zh(bo.prototype,{Ca:{name:"addScope",j:[zh("scope")]},credential:{name:"credential",j:[Jh(zh(),Jh(Hh(),Qh()),"optionsOrIdToken"),Jh(zh(),Qh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Hh("customOAuthParameters")]}}),Zh(po.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),Zh(lo.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),ef(jo,"credential",Mo,[zh("verificationId"),zh("verificationCode")]),Zh(jo.prototype,{fb:{name:"verifyPhoneNumber",j:[Jh(zh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Xh(t.session,ao)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?Xh(t.session,so)&&$h(t.multiFactorHint):t.session&&t.multiFactorUid?Xh(t.session,so)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]}}),Zh(xo.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),Zh(k.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),Zh(Ho.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),Zh(Wo.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),Zh(il.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),Zh(el.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Zh(ll.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},zh("displayName",!0)]},bd:{name:"unenroll",j:[Jh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:$h},zh(),"multiFactorInfoIdentifier")]}}),Zh(Vh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ef(_i,"parseLink",Oi,[zh("link")]),ef(Ch,"assertion",(function(t){return new ul(t)}),[Yh("phone")]),function(){if("undefined"===typeof e.a||!e.a.INTERNAL||!e.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:si,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:oh,AuthCredential:uo,Error:k};ef(t,"EmailAuthProvider",Ao,[]),ef(t,"FacebookAuthProvider",_o,[]),ef(t,"GithubAuthProvider",Io,[]),ef(t,"GoogleAuthProvider",Eo,[]),ef(t,"TwitterAuthProvider",Co,[]),ef(t,"OAuthProvider",bo,[zh("providerId")]),ef(t,"SAMLAuthProvider",mo,[zh("providerId")]),ef(t,"PhoneAuthProvider",jo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof oh)}}]),ef(t,"RecaptchaVerifier",Vh,[Jh(zh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Hh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof e.a.app.App)}}]),ef(t,"ActionCodeURL",_i,[]),ef(t,"PhoneMultiFactorGenerator",Ch,[]),e.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new oh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),e.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:I((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:I(t.nc,t),addAuthTokenListener:I(t.cc,t),removeAuthTokenListener:I(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),e.a.registerVersion("@firebase/auth","0.16.5"),e.a.INTERNAL.extendNamespace({User:bl})}()}).apply("undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(this,n(17))},function(t,e,n){"use strict";var r=n(3),i=n(0),o=n(1),a=n(5),s=function(t){function e(n,r){var i=t.call(this,u(n),"Firebase Storage: "+r+" ("+u(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(i.c)(e,t),e.prototype._codeEquals=function(t){return u(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(o.c);function u(t){return"storage/"+t}function c(){return new s("unknown","An unknown error occurred, please check the error payload for server response.")}function l(){return new s("canceled","User canceled the upload/download.")}function h(){return new s("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function f(t){return new s("invalid-argument",t)}function d(){return new s("app-deleted","The Firebase app was deleted.")}function p(t){return new s("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function v(t,e){return new s("invalid-format","String does not match format '"+t+"': "+e)}function g(t){throw new s("internal-error","Internal error: "+t)}var y={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},m=function(t,e){this.data=t,this.contentType=e||null};function b(t,e){switch(t){case y.RAW:return new m(_(e));case y.BASE64:case y.BASE64URL:return new m(w(t,e));case y.DATA_URL:return new m(function(t){var e=new I(t);return e.base64?w(y.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw v(y.DATA_URL,"Malformed data URL.")}return _(e)}(e.rest)}(e),new I(e).contentType)}throw c()}function _(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<t.length-1&&56320===(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function w(t,e){switch(t){case y.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw v(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case y.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw v(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(c){throw v(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var I=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw v(y.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i};var T,E={STATE_CHANGED:"state_changed"},S={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function C(t){switch(t){case"running":case"pausing":case"canceling":return S.RUNNING;case"paused":return S.PAUSED;case"success":return S.SUCCESS;case"canceled":return S.CANCELED;case"error":default:return S.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(T||(T={}));var k=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=T.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=T.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=T.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw g("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw g("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw g("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw g("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),O=function(){function t(){}return t.prototype.createXhrIo=function(){return new k},t}(),N=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(i){return new t(e,"")}if(""===r.path)return r;throw new s("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null;var i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new t(f,d),l.postModify(r);break}}if(null==r)throw function(t){return new s("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),A=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function P(t){return"string"===typeof t||t instanceof String}function R(t){return x()&&t instanceof Blob}function x(){return"undefined"!==typeof Blob}function D(t,e,n,r){if(r<e)throw f("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw f("Invalid value for '"+t+"'. Expected "+n+" or less.")}function L(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null===n||void 0===n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function j(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}var M=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var u=t.callback_(a,a.getResponseText());void 0!==u?i(u):i()}catch(h){o(h)}else null!==a?((r=c()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?d():l()):o(r=new s("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new F(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];c||(c=!0,e.apply(null,t))}function h(e){o=setTimeout((function(){o=null,t(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(i.f)([null,t],e));else{var o,f=u()||a;if(f)l.call.apply(l,Object(i.f)([null,t],e));else r<64&&(r*=2),1===s?(s=2,o=0):o=1e3*(r+Math.random()),h(o)}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(s=2),clearTimeout(o),h(0)):t||(s=1)))}return h(0),setTimeout((function(){a=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new F(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===T.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new F(a,n))}else{var s=n.getErrorCode()===T.ABORT;e(!1,new F(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),F=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function U(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=U();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(x())return new Blob(t);throw new s("unsupported-environment","This browser doesn't seem to support creating Blobs")}var V=function(){function t(t,e){var n=0,r="";R(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(R(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(x()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(q.apply(null,r))}var i=e.map((function(t){return P(t)?b(y.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function B(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!==typeof(n=e)||Array.isArray(n)?null:e}function K(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function z(t,e){return e}var W=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||z},H=null;function G(){if(H)return H;var t=[];t.push(new W("bucket")),t.push(new W("generation")),t.push(new W("metageneration")),t.push(new W("name","fullPath",!0));var e=new W("name");e.xform=function(t,e){return function(t){return!P(t)||t.length<2?t:K(t)}(e)},t.push(e);var n=new W("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new W("timeCreated")),t.push(new W("updated")),t.push(new W("md5Hash",null,!0)),t.push(new W("cacheControl",null,!0)),t.push(new W("contentDisposition",null,!0)),t.push(new W("contentEncoding",null,!0)),t.push(new W("contentLanguage",null,!0)),t.push(new W("contentType",null,!0)),t.push(new W("metadata","customMetadata",!0)),H=t}function Q(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new N(n,r);return e._makeStorageReference(i)}})}(r,t),r}function Y(t,e,n){var r=B(e);return null===r?null:Q(t,r,n)}function X(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function $(t,e,n){var r=B(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new N(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=t._makeStorageReference(new N(e,l.name));r.items.push(s)}return r}(t,e,r)}var J=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Z(t){if(!t)throw c()}function tt(t,e){return function(n,r){var i=Y(t,r,e);return Z(null!==i),i}}function et(t,e){return function(n,r){var i=Y(t,r,e);return Z(null!==i),function(t,e,n){var r=B(e);if(null===r)return null;if(!P(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return L("/b/"+o(r)+"/o/"+o(i),n)+j({alt:"media",token:e})}))[0]}(i,r,t.host)}}function nt(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=new s("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new s("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new s("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function rt(t){var e=nt(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new s("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function it(t,e,n){var r=L(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new J(r,"GET",tt(t,n),i);return o.errorHandler=rt(e),o}function ot(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=L(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new J(a,"GET",function(t,e){return function(n,r){var i=$(t,e,r);return Z(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=nt(e),u}function at(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var st=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function ut(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){Z(!1)}return Z(!!n&&-1!==(e||["active"]).indexOf(n)),n}function ct(t,e,n,r,i,o,a,u){var c=new st(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new s("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var l=c.total-c.current,f=l;i>0&&(f=Math.min(f,i));var d=c.current,p=d+f,v={"X-Goog-Upload-Command":f===l?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},g=r.slice(d,p);if(null===g)throw h();var y=e.maxUploadRetryTime,m=new J(n,"POST",(function(t,n){var i,a=ut(t,["active","final"]),s=c.current+f,u=r.size();return i="final"===a?tt(e,o)(t,n):null,new st(s,u,"final"===a,i)}),y);return m.headers=v,m.body=g.uploadData(),m.progressCallback=u||null,m.errorHandler=nt(t),m}var lt=function(t,e,n){if("function"===typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function ht(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var ft=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=G(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=at(e,r,i),s={name:a.fullPath},u=L(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=X(a,n),h=t.maxUploadRetryTime,f=new J(u,"POST",(function(t){var e;ut(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){Z(!1)}return Z(P(e)),e}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=nt(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new J(n,"POST",(function(t){var e=ut(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){Z(!1)}n||Z(!1);var i=Number(n);return Z(!isNaN(i)),new st(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=nt(e),o}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new st(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=ct(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(s){return t._error=s,void t._transition("error")}var a=t._ref.storage._makeRequest(o,i);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=it(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=at(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+X(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",f=V.getBlob(c,r,l);if(null===f)throw h();var d={name:u.fullPath},p=L(o,t.host),v=t.maxUploadRetryTime,g=new J(p,"POST",tt(t,n),v);return g.urlParams=d,g.headers=a,g.body=f.uploadData(),g.errorHandler=nt(e),g}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=l(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=C(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new lt(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(C(this._state)){case S.SUCCESS:ht(this._resolve.bind(null,this.snapshot))();break;case S.CANCELED:case S.ERROR:ht(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(C(this._state)){case S.RUNNING:case S.PAUSED:t.next&&ht(t.next.bind(t,this.snapshot))();break;case S.SUCCESS:t.complete&&ht(t.complete.bind(t))();break;case S.CANCELED:case S.ERROR:t.error&&ht(t.error.bind(t,this._error))();break;default:t.error&&ht(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),dt=function(){function t(t,e){this._service=t,this._location=e instanceof N?e:N.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new N(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return K(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new N(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw p(t)},t}();function pt(t){var e={prefixes:[],items:[]};return function t(e,n,r){return Object(i.b)(this,void 0,void 0,(function(){var o,a,s;return Object(i.d)(this,(function(i){switch(i.label){case 0:return[4,vt(e,{pageToken:r})];case 1:return o=i.sent(),(a=n.prefixes).push.apply(a,o.prefixes),(s=n.items).push.apply(s,o.items),null==o.nextPageToken?[3,3]:[4,t(e,n,o.nextPageToken)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))}function vt(t,e){return Object(i.b)(this,void 0,void 0,(function(){var n,r,o;return Object(i.d)(this,(function(i){switch(i.label){case 0:return null!=e&&"number"===typeof e.maxResults&&D("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=e||{},o=ot(t.storage,t._location,"/",r.pageToken,r.maxResults),[2,t.storage._makeRequest(o,n).getPromise()]}}))}))}function gt(t,e){return Object(i.b)(this,void 0,void 0,(function(){var n,r;return Object(i.d)(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=L(e.fullServerUrl(),t.host),o=X(n,r),a=t.maxOperationRetryTime,s=new J(i,"PATCH",tt(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=rt(e),s}(t.storage,t._location,e,G()),[2,t.storage._makeRequest(r,n).getPromise()]}}))}))}function yt(t){return Object(i.b)(this,void 0,void 0,(function(){var e,n;return Object(i.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=L(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new J(r,"GET",et(t,n),i);return o.errorHandler=rt(e),o}(t.storage,t._location,G()),[2,t.storage._makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new s("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function mt(t){return Object(i.b)(this,void 0,void 0,(function(){var e,n;return Object(i.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=L(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new J(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=rt(e),i}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}function bt(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new N(t._location.bucket,n);return new dt(t.storage,r)}function _t(t){return/^[A-Za-z]+:\/\//.test(t)}function wt(t,e){if(t instanceof Et){var n=t;if(null==n._bucket)throw new s("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new dt(n,n._bucket);return null!=e?wt(r,e):r}if(void 0!==e){if(e.includes(".."))throw f('`path` param cannot contain ".."');return bt(t,e)}return t}function It(t,e){if(e&&_t(e)){if(t instanceof Et)return new dt(t,e);throw f("To use ref(service, url), the first argument must be a Storage instance.")}return wt(t,e)}function Tt(t,e){var n=null===e||void 0===e?void 0:e.storageBucket;return null==n?null:N.makeFromBucketSpec(n,t)}var Et=function(){function t(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?N.makeFromBucketSpec(r,this._host):Tt(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=N.makeFromBucketSpec(this._url,t):this._bucket=Tt(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){D("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){D("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(i.b)(this,void 0,void 0,(function(){var t,e;return Object(i.d)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new dt(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new A(d());var r=function(t,e,n,r,i){var o=j(t.urlParams),a=t.url+o,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(s,i),new M(a,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}();function St(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new ft(t,new V(e),n)}(t=Object(o.p)(t),e,n)}function Ct(t){return function(t){return Object(i.b)(this,void 0,void 0,(function(){var e,n;return Object(i.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=it(t.storage,t._location,G()),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(t=Object(o.p)(t))}function kt(t,e){return It(t=Object(o.p)(t),e)}var Ot=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Nt=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Ot(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Ot(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new Ot(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Ot(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),At=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Pt(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Pt(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Pt=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return bt(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Nt(St(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=y.RAW),this._throwIfRoot("putString");var r=b(e,t),o=Object(i.a)({},n);return null==o.contentType&&null!=r.contentType&&(o.contentType=r.contentType),new Nt(new ft(this._delegate,new V(r.data,!0),o),this)},t.prototype.listAll=function(){var t=this;return function(t){return pt(t=Object(o.p)(t))}(this._delegate).then((function(e){return new At(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return vt(t=Object(o.p)(t),e)}(this._delegate,t||void 0).then((function(t){return new At(t,e.storage)}))},t.prototype.getMetadata=function(){return Ct(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return gt(t=Object(o.p)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return yt(t=Object(o.p)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return mt(t=Object(o.p)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw p(t)},t}(),Rt=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(_t(t))throw f("ref() expected a child path but got a URL, use refFromURL instead.");return new Pt(kt(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!_t(t))throw f("refFromURL() expected a full URL but got a child path, use ref() instead.");try{N.makeFromUrl(t,this._delegate.host)}catch(e){throw f("refFromUrl() expected a valid full URL but got an invalid one.")}return new Pt(kt(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function xt(t,e){var n=e.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal");return new Rt(i,new Et(i,o,new O,n,r.a.SDK_VERSION))}!function(t){var e={TaskState:S,TaskEvent:E,StringFormat:y,Storage:Et,Reference:Pt};t.INTERNAL.registerComponent(new a.a("storage",xt,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.1")}(r.a)},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}}(),t.exports=n(34)},function(t,e,n){"use strict";var r=n(26),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&t(e,i,r)}var a=l(n);h&&(a=a.concat(h(n)));for(var s=u(e),v=u(n),g=0;g<a.length;++g){var y=a[g];if(!o[y]&&(!r||!r[y])&&(!v||!v[y])&&(!s||!s[y])){var m=f(n,y);try{c(e,y,m)}catch(b){}}}}return e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o.a}));var r,i,o=n(3),a=(n(27),n(50),n(1)),s=n(4),u=(n(10),n(6)),c=n(5),l={Firestore:u.a,GeoPoint:u.r,Timestamp:u.l,Blob:u.s,Transaction:u.b,WriteBatch:u.o,DocumentReference:u.g,DocumentSnapshot:u.c,Query:u.d,QueryDocumentSnapshot:u.t,QuerySnapshot:u.i,CollectionReference:u.h,FieldPath:u.q,FieldValue:u.k,setLogLevel:u.e,CACHE_SIZE_UNLIMITED:u.j};(function(t,e){t.INTERNAL.registerComponent(new c.a("firestore",(function(t){return function(t,e){return new u.a(t,new u.m(t,e),new u.f)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},l)))})(r=o.a),r.registerVersion("@firebase/firestore","2.2.5"),(i=u.a).prototype.loadBundle=u.n,i.prototype.namedQuery=u.p;var h=n(0),f={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},d=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(h.c)(e,t),e}(Error);var p=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return Object(h.b)(this,void 0,void 0,(function(){var t;return Object(h.d)(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(r){return[2,void 0]}return[2]}))}))},t.prototype.getContext=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function v(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var g=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"===typeof t||"object"===typeof t)return v(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"===typeof t||"object"===typeof t?v(t,(function(t){return e.decode(t)})):t},t}();var y=function(){function t(t,e,n,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.fetchImpl=o,this.serializer=new g,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new p(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(r){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},t.prototype.call=function(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,p,v,g,y;return Object(h.d)(this,(function(h){switch(h.label){case 0:return i=this._url(t),e=this.serializer.encode(e),o={data:e},a={},[4,this.contextProvider.getContext()];case 1:return(s=h.sent()).authToken&&(a.Authorization="Bearer "+s.authToken),s.instanceIdToken&&(a["Firebase-Instance-ID-Token"]=s.instanceIdToken),u=n.timeout||7e4,c=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new d("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(u),l=c.timer,p=c.promise,[4,Promise.race([m(l,this.postJSON(i,o,a)),p,m(l,this.cancelAllRequests)])];case 2:if(!(v=h.sent()))throw new d("cancelled","Firebase Functions instance was deleted.");if(g=function(t,e,n){var i=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),o=i,a=void 0;try{var s=e&&e.error;if(s){var u=s.status;if("string"===typeof u){if(!f[u])return new d("internal","internal");i=f[u],o=u}var c=s.message;"string"===typeof c&&(o=c),void 0!==(a=s.details)&&(a=n.decode(a))}}catch(r){}return"ok"===i?null:new d(i,o,a)}(v.status,v.json,this.serializer))throw g;if(!v.json)throw new d("internal","Response is not valid JSON object.");if("undefined"===typeof(y=v.json.data)&&(y=v.json.result),"undefined"===typeof y)throw new d("internal","Response is missing data field.");return[2,{data:this.serializer.decode(y)}]}}))}))},t}();function m(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}!function(t,e){var n={Functions:y};t.INTERNAL.registerComponent(new c.a("functions",(function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("messaging");return new y(i,o,a,r,e)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(o.a,fetch.bind(self)),o.a.registerVersion("@firebase/functions","0.6.7");var b,_=n(14),w=((b={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',b["not-registered"]="Firebase Installation is not registered.",b["installation-not-found"]="Firebase Installation not found.",b["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',b["app-offline"]="Could not process request. Application offline.",b["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",b),I=new a.b("installations","Installations",w);function T(t){return t instanceof a.c&&t.code.includes("request-failed")}function E(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function S(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function C(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,I.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function k(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function O(t,e){var n=e.refreshToken,r=k(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function N(t){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function A(t,e){var n=e.fid;return Object(h.b)(this,void 0,void 0,(function(){var e,r,i,o,a,s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return e=E(t),r=k(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.4.25"},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,N((function(){return fetch(e,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:S(s.authToken)}];case 3:return[4,C("Create Installation",a)];case 4:throw u.sent()}}))}))}function P(t){return new Promise((function(e){setTimeout(e,t)}))}var R=/^[cdef][\w-]{21}$/;function x(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,Object(h.f)([],Object(h.e)(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}(t);return R.test(e)?e:""}catch(n){return""}}function D(t){return t.appName+"!"+t.appId}var L=new Map;function j(t,e){var n=D(t);M(n,e),function(t,e){var n=U();n&&n.postMessage({key:t,fid:e});q()}(n,e)}function M(t,e){var n,r,i=L.get(t);if(i)try{for(var o=Object(h.g)(i),a=o.next();!a.done;a=o.next()){(0,a.value)(e)}}catch(s){n={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var F=null;function U(){return!F&&"BroadcastChannel"in self&&((F=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){M(t.data.key,t.data.fid)}),F}function q(){0===L.size&&F&&(F.close(),F=null)}var V,B,K="firebase-installations-store",z=null;function W(){return z||(z=Object(_.openDb)("firebase-installations-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore(K)}}))),z}function H(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(h.d)(this,(function(s){switch(s.label){case 0:return n=D(t),[4,W()];case 1:return r=s.sent(),i=r.transaction(K,"readwrite"),[4,(o=i.objectStore(K)).get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||j(t,e.fid),[2,e]}}))}))}function G(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return e=D(t),[4,W()];case 1:return n=i.sent(),[4,(r=n.transaction(K,"readwrite")).objectStore(K).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Q(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return n=D(t),[4,W()];case 1:return r=u.sent(),i=r.transaction(K,"readwrite"),[4,(o=i.objectStore(K)).get(n)];case 2:return a=u.sent(),void 0!==(s=e(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||j(t,s.fid),[2,s]}}))}))}function Y(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,Q(t,(function(n){var r=function(t){return J(t||{fid:x(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){var n=Promise.reject(I.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,A(t,e)];case 1:return n=i.sent(),[2,H(t,n)];case 2:return T(r=i.sent())&&409===r.customData.serverCode?[4,G(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,H(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,r);return{installationEntry:r,registrationPromise:i}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:X(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function X(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n,r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return[4,$(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,P(100)];case 3:return o.sent(),[4,$(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,Y(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function $(t){return Q(t,(function(t){if(!t)throw I.create("installation-not-found");return J(t)}))}function J(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Z(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Object(h.b)(this,void 0,void 0,(function(){var t,i,o,a,s,u,c;return Object(h.d)(this,(function(l){switch(l.label){case 0:return t=function(t,e){var n=e.fid;return E(t)+"/"+n+"/authTokens:generate"}(n,e),i=O(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:"w:0.4.25"}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,N((function(){return fetch(t,s)}))];case 1:return(u=l.sent()).ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),[2,S(c)];case 3:return[4,C("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function tt(t,e){return void 0===e&&(e=!1),Object(h.b)(this,void 0,void 0,(function(){var n,r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return[4,Q(t.appConfig,(function(r){if(!nt(r))throw I.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,et(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,P(100)];case 3:return i.sent(),[4,et(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,tt(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw I.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return Object(h.a)(Object(h.a)({},t),{authToken:e})}(r);return n=function(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Z(t,e)];case 1:return n=o.sent(),i=Object(h.a)(Object(h.a)({},e),{authToken:n}),[4,H(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!T(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,G(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(h.a)(Object(h.a)({},e),{authToken:{requestStatus:0}}),[4,H(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function et(t){return Q(t,(function(t){if(!nt(t))throw I.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+1e4<Date.now()?Object(h.a)(Object(h.a)({},t),{authToken:{requestStatus:0}}):t}))}function nt(t){return void 0!==t&&2===t.registrationStatus}function rt(t){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return[4,Y(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function it(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(h.d)(this,(function(a){switch(a.label){case 0:return n=function(t,e){var n=e.fid;return E(t)+"/"+n}(t,e),r=O(t,e),i={method:"DELETE",headers:r},[4,N((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,C("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function ot(t,e){var n=t.appConfig;return function(t,e){U();var n=D(t),r=L.get(n);r||(r=new Set,L.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=D(t),r=L.get(n);r&&(r.delete(e),0===r.size&&L.delete(n),q())}(n,e)}}function at(t){return I.create("missing-app-config-values",{valueName:t})}(V=o.a).INTERNAL.registerComponent(new c.a("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw at("App Configuration");if(!t.name)throw at("App Name");try{for(var r=Object(h.g)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw at(o)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,Y(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):tt(t).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(n){switch(n.label){case 0:return[4,rt(t.appConfig)];case 1:return n.sent(),[4,tt(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,Q(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw I.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw I.create("app-offline");case 3:return[4,it(e,n)];case 4:return r.sent(),[4,G(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return ot(n,t)}}}),"PUBLIC")),V.registerVersion("@firebase/installations","0.4.25");var st,ut=((B={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',B["only-available-in-window"]="This method is available in a Window context.",B["only-available-in-sw"]="This method is available in a service worker context.",B["permission-default"]="The notification permission was not granted and dismissed instead.",B["permission-blocked"]="The notification permission was not granted and blocked instead.",B["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",B["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",B["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",B["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",B["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",B["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",B["token-update-no-token"]="FCM returned no token when updating the user to push.",B["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",B["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",B["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",B["invalid-vapid-key"]="The public VAPID key must be a string.",B["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",B),ct=new a.b("messaging","Messaging",ut),lt="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";function ht(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Object(h.f)([],Object(h.e)(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ft(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(st||(st={}));function dt(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n,r=this;return Object(h.d)(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=i.sent(),!e.map((function(t){return t.name})).includes("fcm_token_details_db"))return[2,null];i.label=2;case 2:return n=null,[4,Object(_.openDb)("fcm_token_details_db",5,(function(e){return Object(h.b)(r,void 0,void 0,(function(){var r,i,o,a;return Object(h.d)(this,(function(s){switch(s.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains("fcm_token_object_Store")?[4,(r=e.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(t)]:[2];case 1:return i=s.sent(),[4,r.clear()];case 2:if(s.sent(),!i)return[2];if(2===e.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:ht(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:ht(o.auth),p256dh:ht(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:ht(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,Object(_.deleteDb)("fcm_token_details_db")];case 4:return i.sent(),[4,Object(_.deleteDb)("fcm_vapid_details_db")];case 5:return i.sent(),[4,Object(_.deleteDb)("undefined")];case 6:return i.sent(),[2,pt(n)?n:null]}}))}))}function pt(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"===typeof t.createTime&&t.createTime>0&&"string"===typeof t.token&&t.token.length>0&&"string"===typeof e.auth&&e.auth.length>0&&"string"===typeof e.p256dh&&e.p256dh.length>0&&"string"===typeof e.endpoint&&e.endpoint.length>0&&"string"===typeof e.swScope&&e.swScope.length>0&&"string"===typeof e.vapidKey&&e.vapidKey.length>0}var vt=null;function gt(){return vt||(vt=Object(_.openDb)("firebase-messaging-database",1,(function(t){switch(t.oldVersion){case 0:t.createObjectStore("firebase-messaging-store")}}))),vt}function yt(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return e=_t(t),[4,gt()];case 1:return[4,i.sent().transaction("firebase-messaging-store").objectStore("firebase-messaging-store").get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,dt(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,mt(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function mt(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return n=_t(t),[4,gt()];case 1:return r=o.sent(),[4,(i=r.transaction("firebase-messaging-store","readwrite")).objectStore("firebase-messaging-store").put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function bt(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return e=_t(t),[4,gt()];case 1:return n=i.sent(),[4,(r=n.transaction("firebase-messaging-store","readwrite")).objectStore("firebase-messaging-store").delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function _t(t){return t.appConfig.appId}function wt(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return[4,St(t)];case 1:n=u.sent(),r=Ct(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Et(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),ct.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,ct.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw ct.create("token-subscribe-no-token");return[2,o.token]}}))}))}function It(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return[4,St(t)];case 1:n=u.sent(),r=Ct(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Et(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),ct.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,ct.create("token-update-failed",{errorInfo:s});if(!o.token)throw ct.create("token-update-no-token");return[2,o.token]}}))}))}function Tt(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(h.d)(this,(function(s){switch(s.label){case 0:return[4,St(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(Et(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,ct.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),ct.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function Et(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function St(t){var e=t.appConfig,n=t.installations;return Object(h.b)(this,void 0,void 0,(function(){var t;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function Ct(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==lt&&(o.web.applicationPubKey=i),o}function kt(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i,o,a;return Object(h.d)(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw ct.create("permission-blocked");return[4,Pt(e,n)];case 1:return r=s.sent(),[4,yt(t)];case 2:return i=s.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:ht(r.getKey("auth")),p256dh:ht(r.getKey("p256dh"))},i?[3,3]:[2,At(t,o)];case 3:if(function(t,e){var n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}(i.subscriptionOptions,o))return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,Tt(t,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,At(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,Nt({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}}))}))}function Ot(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,yt(t)];case 1:return(n=i.sent())?[4,Tt(t,n.token)]:[3,4];case 2:return i.sent(),[4,bt(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function Nt(t,e,n){return Object(h.b)(this,void 0,void 0,(function(){var r,i,o;return Object(h.d)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,It(e,t)];case 1:return r=a.sent(),i=Object(h.a)(Object(h.a)({},t),{token:r,createTime:Date.now()}),[4,mt(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,Ot(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function At(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,wt(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,mt(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function Pt(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ft(e)})]}}))}))}function Rt(t){return"object"===typeof t&&!!t&&"google.c.a.c_id"in t}function xt(t){return new Promise((function(e){setTimeout(e,t)}))}var Dt=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!==typeof t)throw ct.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return Object(h.b)(this,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,yt(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:lt,r.label=2;case 2:return[2,kt(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return Ot(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw ct.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw ct.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw ct.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw ct.create("only-available-in-window")},t.prototype.onMessage=function(){throw ct.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw ct.create("only-available-in-window")},t.prototype.onPush=function(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n,r,i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t))?[4,Ft()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,Mt(n,e)]:(r=!1,e.notification?[4,Ut(Lt(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(!e.notification)return;t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}(e,t),e}(e),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,xt(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return Object(h.b)(this,void 0,void 0,(function(){var r;return Object(h.d)(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,Ot(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,yt(this.firebaseDependencies)];case 3:return r=i.sent(),[4,Ot(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,kt(this.firebaseDependencies,self.registration,null!==(n=null===(e=null===r||void 0===r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:lt)];case 5:return i.sent(),[2]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return Object(h.b)(this,void 0,void 0,(function(){var r,i,o,a,s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return Rt(t.data)?self.location.origin:null}(r))?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,jt(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,xt(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=st.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},t}();function Lt(t){var e,n=Object(h.a)({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function jt(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return[4,Ft()];case 1:e=u.sent();try{for(n=Object(h.g)(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){a={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function Mt(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=st.PUSH_RECEIVED;try{for(var i=Object(h.g)(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Ft(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Ut(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var qt=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===st.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),Rt(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw ct.create("permission-blocked");return[4,this.updateVapidKey(null===t||void 0===t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null===t||void 0===t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,kt(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=lt),[2]}))}))},t.prototype.updateSwReg=function(t){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw ct.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),ct.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Ot(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return Object(h.b)(this,void 0,void 0,(function(){var t;return Object(h.d)(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?ct.create("permission-blocked"):ct.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw ct.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw ct.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw ct.create("invalid-sw-registration");if(this.swRegistration)throw ct.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw ct.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw ct.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case st.NOTIFICATION_CLICKED:return"notification_open";case st.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function Vt(t){return ct.create("missing-app-config-values",{valueName:t})}var Bt={isSupported:Kt};function Kt(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}o.a.INTERNAL.registerComponent(new c.a("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw Vt("App Configuration Object");if(!t.name)throw Vt("App Name");var r=t.options;try{for(var i=Object(h.g)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw Vt(a)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!Kt())throw ct.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Dt(n):new qt(n)}),"PUBLIC").setServiceProps(Bt));n(28);var zt,Wt,Ht,Gt=((zt={})["trace started"]="Trace {$traceName} was started before.",zt["trace stopped"]="Trace {$traceName} is not running.",zt["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",zt["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",zt["no window"]="Window is not available.",zt["no app id"]="App id is not available.",zt["no project id"]="Project id is not available.",zt["no api key"]="Api key is not available.",zt["invalid cc log"]="Attempted to queue invalid cc event",zt["FB not default"]="Performance can only start when Firebase app instance is the default one.",zt["RC response not ok"]="RC response is not ok",zt["invalid attribute name"]="Attribute name {$attributeName} is invalid.",zt["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",zt["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",zt["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",zt),Qt=new a.b("performance","Performance",Gt),Yt=new s.b("Performance");Yt.logLevel=s.a.INFO;var Xt,$t=function(){function t(t){if(this.window=t,!t)throw Qt.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(a.x)()||(Yt.info("IndexedDB is not supported by current browswer"),!1):(Yt.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===Wt&&(Wt=new t(Ht)),Wt},t}();function Jt(t,e){var n=t.length-e.length;if(n<0||n>1)throw Qt.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Zt,te,ee=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Jt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Jt("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw Qt.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw Qt.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw Qt.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===Xt&&(Xt=new t),Xt},t}();function ne(){return Zt}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(te||(te={}));var re=["firebase_","google_","ga_"],ie=new RegExp("^[a-zA-Z]\\w*$");function oe(){var t=$t.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function ae(){switch($t.getInstance().document.visibilityState){case"visible":return te.VISIBLE;case"hidden":return te.HIDDEN;default:return te.UNKNOWN}}function se(){var t=$t.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var ue=!0;function ce(t){var e=function(){var t=$t.getInstance().localStorage;if(!t)return;var e=t.getItem("@firebase/performance/configexpire");if(!e||(n=e,!(Number(n)>Date.now())))return;var n;var r=t.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(i){return}}();return e?(le(e),Promise.resolve()):function(t){return function(){var t=ee.getInstance().installationsService.getToken();return t.then((function(t){})),t}().then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+ee.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+ee.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:ee.getInstance().getAppId(),app_version:"0.4.11",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw Qt.create("RC response not ok")}))})).catch((function(){Yt.info("Could not fetch config, will use default configs")}))}(t).then(le).then((function(t){return function(t){var e=$t.getInstance().localStorage;if(!t||!e)return;e.setItem("@firebase/performance/config",JSON.stringify(t)),e.setItem("@firebase/performance/configexpire",String(Date.now()+60*ee.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}function le(t){if(!t)return t;var e=ee.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=ue,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=he(e.tracesSamplingRate),e.logNetworkAfterSampling=he(e.networkRequestsSamplingRate),t}function he(t){return Math.random()<=t}var fe,de=1;function pe(){return de=2,fe=fe||function(){var t=$t.getInstance().document;return new Promise((function(e){t&&"complete"!==t.readyState?t.addEventListener("readystatechange",(function n(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())})):e()}))}().then((function(){return function(){var t=ee.getInstance().installationsService.getId();return t.then((function(t){Zt=t})),t}()})).then((function(t){return ce(t)})).then((function(){return ve()}),(function(){return ve()}))}function ve(){de=3}var ge,ye=3,me=[],be=!1;function _e(t){setTimeout((function(){if(0!==ye)return me.length?void function(){var t=me.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}));(function(t,e){return function(t){var e=ee.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||Yt.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(me=Object(h.f)(Object(h.f)([],e),me),Yt.info("Retry transport request later.")),ye=3,_e(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:ee.getInstance().logSource,log_event:e},t).catch((function(){me=Object(h.f)(Object(h.f)([],t),me),ye--,Yt.info("Tries left: "+ye+"."),_e(1e4)}))}():_e(1e4)}),t)}function we(t){if(!t.eventTime||!t.message)throw Qt.create("invalid cc log");me=Object(h.f)(Object(h.f)([],me),[t])}function Ie(t,e){ge||(ge=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(void 0,e);we({message:r,eventTime:Date.now()})}}(Se)),ge(t,e)}function Te(t){var e=ee.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&$t.getInstance().requiredApisAvailable()&&(t.isAuto&&ae()!==te.VISIBLE||(3===de?Ee(t):pe().then((function(){return Ee(t)}),(function(){return Ee(t)}))))}function Ee(t){if(ne()){var e=ee.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return Ie(t,1)}),0)}}function Se(t,e){return 0===e?function(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:Ce(),network_request_metric:e};return JSON.stringify(n)}(t):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:Ce(),trace_metric:e};return JSON.stringify(r)}(t)}function Ce(){return{google_app_id:ee.getInstance().getAppId(),app_instance_id:ne(),web_app_info:{sdk_version:"0.4.11",page_url:$t.getInstance().getUrl(),service_worker_status:oe(),visibility_state:ae(),effective_connection_type:se()},application_process_state:0}}var ke=["_fp","_fcp","_fid"];var Oe=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=$t.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw Qt.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw Qt.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Te(this)},t.prototype.record=function(t,e,n){if(t<=0)throw Qt.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw Qt.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(h.a)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Te(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||n.length>100||!(r&&r.startsWith("_wt_")&&ke.indexOf(n)>-1)&&n.startsWith("_"))throw Qt.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=function(t){var e=Math.floor(t);return e<t&&Yt.info("Metric value should be an Integer, setting the value as : "+e+"."),e}(e)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40)&&!re.some((function(t){return n.startsWith(t)}))&&!!n.match(ie),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw Qt.create("invalid attribute name",{attributeName:t});if(!i)throw Qt.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(h.a)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=$t.getInstance().getUrl();if(i){var o=new t("_wt_"+i,!0),a=Math.floor(1e3*$t.getInstance().getTimeOrigin());o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var s=n.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}Te(o)}},t.createUserTimingTrace=function(e){Te(new t(e,!1,e))},t}();function Ne(t){var e=t;if(e&&void 0!==e.responseStart){var n=$t.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=ee.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return Ie(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function Ae(){ne()&&(setTimeout((function(){return function(){var t=$t.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){Oe.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),Oe.createOobTrace(e,n,t))}))}else Oe.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=$t.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){Ne(r[n])}t.setupObserver("resource",Ne)}()}),0),setTimeout((function(){return function(){for(var t=$t.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){Pe(r[n])}t.setupObserver("measure",Pe)}()}),0))}function Pe(t){var e=t.name;"FB-PERF-TRACE-MEASURE"!==e.substring(0,"FB-PERF-TRACE-MEASURE".length)&&Oe.createUserTimingTrace(e)}var Re=function(){function t(t){this.app=t,$t.getInstance().requiredApisAvailable()&&Object(a.O)().then((function(t){t&&(be||(_e(5500),be=!0),pe().then(Ae,Ae))})).catch((function(t){Yt.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new Oe(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return ee.getInstance().instrumentationEnabled},set:function(t){ee.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return ee.getInstance().dataCollectionEnabled},set:function(t){ee.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw Qt.create("FB not default");if("undefined"===typeof window)throw Qt.create("no window");return function(t){Ht=t}(window),ee.getInstance().firebaseAppInstance=t,ee.getInstance().installationsService=e,new Re(t)};t.INTERNAL.registerComponent(new c.a("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance","0.4.11")}(o.a);var xe,De,Le="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(xe||(xe={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(De||(De={}));var je,Me=new s.b("@firebase/analytics");function Fe(t,e,n,r,i,o){return Object(h.b)(this,void 0,void 0,(function(){var a,s,u,c;return Object(h.d)(this,(function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),(u=s.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),Me.error(c),[3,8];case 8:return t(xe.CONFIG,i,o),[2]}}))}))}function Ue(t,e,n,r,i){return Object(h.b)(this,void 0,void 0,(function(){var o,a,s,u,c,l,f,d;return Object(h.d)(this,(function(h){switch(h.label){case 0:return h.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=h.sent(),u=function(t){var n=s.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length&&(f=l[c],"break"!==u(f));c++);h.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return h.sent(),t(xe.EVENT,r,i||{}),[3,5];case 4:return d=h.sent(),Me.error(d),[3,5];case 5:return[2]}}))}))}function qe(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,a){return Object(h.b)(this,void 0,void 0,(function(){var s;return Object(h.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==xe.EVENT?[3,2]:[4,Ue(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==xe.CONFIG?[3,4]:[4,Fe(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(xe.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),Me.error(s),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}var Ve=((je={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",je["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",je["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",je["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",je["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",je["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",je["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",je["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',je["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',je),Be=new a.b("analytics","Analytics",Ve),Ke=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function ze(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function We(t){var e;return Object(h.b)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Object(h.d)(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:ze(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=c.sent()).status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw Be.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function He(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=Ke),Object(h.b)(this,void 0,void 0,(function(){var e,s,u,c,l,f,d;return Object(h.d)(this,(function(h){switch(h.label){case 0:e=t.appId,s=t.measurementId,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Ge(n,i)];case 2:return h.sent(),[3,4];case 3:if(u=h.sent(),s)return Me.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:e,measurementId:s}];throw u;case 4:return h.trys.push([4,6,,7]),[4,We(t)];case 5:return c=h.sent(),r.deleteThrottleMetadata(e),[2,c];case 6:if(!function(t){if(!(t instanceof a.c)||!t.customData)return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(l=h.sent())){if(r.deleteThrottleMetadata(e),s)return Me.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]"),[2,{appId:e,measurementId:s}];throw l}return f=503===Number(l.customData.httpStatus)?Object(a.j)(o,r.intervalMillis,30):Object(a.j)(o,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+f,backoffCount:o+1},r.setThrottleMetadata(e,d),Me.debug("Calling attemptFetch again in "+f+" millis"),[2,He(t,d,n,r)];case 7:return[2]}}))}))}function Ge(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Be.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var Qe=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();function Ye(t,e,n,r,i,o){return Object(h.b)(this,void 0,void 0,(function(){var s,u,c,l,f,d,p;return Object(h.d)(this,(function(v){switch(v.label){case 0:return(s=function(t,e,n){return void 0===e&&(e=Ke),Object(h.b)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c=this;return Object(h.d)(this,(function(l){if(r=t.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw Be.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw Be.create("no-api-key")}return s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Qe,setTimeout((function(){return Object(h.b)(c,void 0,void 0,(function(){return Object(h.d)(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,He({appId:i,apiKey:o,measurementId:a},s,u,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Me.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return Me.error(t)})),e.push(s),u=function(){return Object(h.b)(this,void 0,void 0,(function(){var t;return Object(h.d)(this,(function(e){switch(e.label){case 0:return Object(a.x)()?[3,1]:(Me.warn(Be.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(a.O)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),Me.warn(Be.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([s,u])];case 1:return c=v.sent(),l=c[0],f=c[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Le))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=Le+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,l.measurementId),i("js",new Date),(p={}).origin="firebase",p.update=!0,d=p,null!=f&&(d.firebase_id=f),i(xe.CONFIG,l.measurementId,d),[2,l.measurementId]}}))}))}var Xe,$e,Je={},Ze=[],tn={},en="dataLayer",nn="gtag",rn=!1;function on(t){if(rn)throw Be.create("already-initialized");t.dataLayerName&&(en=t.dataLayerName),t.gtagName&&(nn=t.gtagName)}function an(t,e){!function(){var t=[];if(Object(a.t)()&&t.push("This is a browser extension environment."),Object(a.e)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=Be.create("invalid-analytics-context",{errorInfo:e});Me.warn(n.message)}}();var n=t.options.appId;if(!n)throw Be.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Be.create("no-api-key");Me.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Je[n])throw Be.create("already-exists",{id:n});if(!rn){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(en);var r=qe(Je,Ze,tn,en,nn),i=r.wrappedGtag,o=r.gtagCore;$e=i,Xe=o,rn=!0}return Je[n]=Ye(t,Ze,tn,e,Xe,en),{app:t,logEvent:function(t,e,r){(function(t,e,n,r,i){return Object(h.b)(this,void 0,void 0,(function(){var o,a;return Object(h.d)(this,(function(s){switch(s.label){case 0:return i&&i.global?(t(xe.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=s.sent(),a=Object(h.a)(Object(h.a)({},r),{send_to:o}),t(xe.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})($e,Je[n],t,e,r).catch((function(t){return Me.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(h.b)(this,void 0,void 0,(function(){var i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(xe.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(xe.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})($e,Je[n],t,e).catch((function(t){return Me.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return Object(h.b)(this,void 0,void 0,(function(){var i;return Object(h.d)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(xe.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(xe.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})($e,Je[n],t,e).catch((function(t){return Me.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return Object(h.b)(this,void 0,void 0,(function(){var i,o,a,s,u;return Object(h.d)(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return t(xe.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(xe.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})($e,Je[n],t,e).catch((function(t){return Me.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(Je[n],t).catch((function(t){return Me.error(t)}))},INTERNAL:{delete:function(){return delete Je[n],Promise.resolve()}}}}function sn(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){switch(t.label){case 0:if(Object(a.t)())return[2,!1];if(!Object(a.e)())return[2,!1];if(!Object(a.x)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(a.O)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new c.a("analytics",(function(t){return an(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:on,EventName:De,isSupported:sn})),t.INTERNAL.registerComponent(new c.a("analytics-internal",(function(t){try{return{logEvent:t.getProvider("analytics").getImmediate().logEvent}}catch(r){throw Be.create("interop-component-reg-failed",{reason:r})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.9")}(o.a);var un,cn=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(h.d)(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},t}(),ln=((un={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",un["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",un["registration-api-key"]="Undefined API key. Check Firebase app initialization.",un["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",un["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",un["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",un["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",un["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",un["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",un["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',un["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',un["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",un["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",un),hn=new a.b("remoteconfig","Remote Config",ln);var fn=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,f,d,p,v,g,y,m,b,_;return Object(h.d)(this,(function(h){switch(h.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=h.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),h.label=2;case 2:return h.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return h.sent(),[4,c];case 4:return f=h.sent(),[3,6];case 5:throw d=h.sent(),p="fetch-client-network","AbortError"===d.name&&(p="fetch-timeout"),hn.create(p,{originalErrorMessage:d.message});case 6:if(v=f.status,g=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];b=void 0,h.label=7;case 7:return h.trys.push([7,9,,10]),[4,f.json()];case 8:return b=h.sent(),[3,10];case 9:throw _=h.sent(),hn.create("fetch-client-parse",{originalErrorMessage:_.message});case 10:y=b.entries,m=b.state,h.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?v=500:"NO_CHANGE"===m?v=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(y={}),304!==v&&200!==v)throw hn.create("fetch-status",{httpStatus:v});return[2,{status:v,eTag:g,config:y}]}var w}))}))},t}(),dn=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),pn=["1","true","t","yes","y","on"],vn=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&pn.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),gn=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=s.a.DEBUG;break;case"silent":this._logger.logLevel=s.a.SILENT;break;default:this._logger.logLevel=s.a.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e,n;return Object(h.d)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(h.d)(this,(function(i){switch(i.label){case 0:t=new dn,setTimeout((function(){return Object(h.b)(r,void 0,void 0,(function(){return Object(h.d)(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof a.c&&-1!==t.code.indexOf(e)}(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return Object(h.b)(this,void 0,void 0,(function(){return Object(h.d)(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(Object(h.a)(Object(h.a)({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new vn("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new vn("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new vn("static"))},t}();function yn(t,e){var n=t.target.error||void 0;return hn.create(e,{originalErrorMessage:n&&n.message})}var mn=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(yn(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n=this;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return e=i.sent(),[2,new Promise((function(i,o){var a=e.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),s=n.createCompositeKey(t);try{var u=a.get(s);u.onerror=function(t){o(yn(t,"storage-get"))},u.onsuccess=function(t){var e=t.target.result;i(e?e.value:void 0)}}catch(r){o(hn.create("storage-get",{originalErrorMessage:r&&r.message}))}}))]}}))}))},t.prototype.set=function(t,e){return Object(h.b)(this,void 0,void 0,(function(){var n,i=this;return Object(h.d)(this,(function(o){switch(o.label){case 0:return[4,this.openDbPromise];case 1:return n=o.sent(),[2,new Promise((function(o,a){var s=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),u=i.createCompositeKey(t);try{var c=s.put({compositeKey:u,value:e});c.onerror=function(t){a(yn(t,"storage-set"))},c.onsuccess=function(){o()}}catch(r){a(hn.create("storage-set",{originalErrorMessage:r&&r.message}))}}))]}}))}))},t.prototype.delete=function(t){return Object(h.b)(this,void 0,void 0,(function(){var e,n=this;return Object(h.d)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return e=i.sent(),[2,new Promise((function(i,o){var a=e.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=n.createCompositeKey(t);try{var u=a.delete(s);u.onerror=function(t){o(yn(t,"storage-delete"))},u.onsuccess=function(){i()}}catch(r){o(hn.create("storage-delete",{originalErrorMessage:r&&r.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),bn=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(h.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o;return Object(h.d)(this,(function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function _n(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(hn.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var wn,In=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(h.b)(this,void 0,void 0,(function(){var e;return Object(h.d)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(h.b)(this,void 0,void 0,(function(){var e,i,o;return Object(h.d)(this,(function(s){switch(s.label){case 0:return[4,_n(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof a.c)||!t.customData)return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Object(a.j)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}();(wn=o.a).INTERNAL.registerComponent(new c.a("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"===typeof window)throw hn.create("registration-window");var o=r.options,a=o.projectId,u=o.apiKey,c=o.appId;if(!a)throw hn.create("registration-project-id");if(!u)throw hn.create("registration-api-key");if(!c)throw hn.create("registration-app-id");n=n||"firebase";var l=new mn(c,r.name,n),h=new bn(l),f=new s.b("@firebase/remote-config");f.logLevel=s.a.ERROR;var d=new fn(i,wn.SDK_VERSION,n,a,u,c),p=new In(d,l),v=new cn(p,l,h,f),g=new gn(r,v,h,l,f);return g.ensureInitialized(),g}),"PUBLIC").setMultipleInstances(!0)),wn.registerVersion("@firebase/remote-config","0.1.36");o.a.registerVersion("firebase","8.4.3","app");console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),o.a.registerVersion("firebase","8.4.3")},,function(t,e,n){"use strict";var r=n(25),i=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var a=60109,s=60110,u=60112;e.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;i=h("react.element"),o=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),e.Suspense=h("react.suspense"),c=h("react.memo"),l=h("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function g(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||p}function y(){}function m(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(d(85));this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=g.prototype;var b=m.prototype=new y;b.constructor=m,r(b,g.prototype),b.isPureReactComponent=!0;var _={current:null},w=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,n){var r,o={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)w.call(e,r)&&!I.hasOwnProperty(r)&&(o[r]=e[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:t,key:a,ref:s,props:o,_owner:_.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var S=/\/+/g;function C(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function k(t,e,n,r,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case i:case o:u=!0}}if(u)return a=a(u=t),t=""===r?"."+C(u,0):r,Array.isArray(a)?(n="",null!=t&&(n=t.replace(S,"$&/")+"/"),k(a,e,n,"",(function(t){return t}))):null!=a&&(E(a)&&(a=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+t)),e.push(a)),1;if(u=0,r=""===r?".":r+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=r+C(s=t[c],c);u+=k(s,e,n,l,a)}else if("function"===typeof(l=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t)))for(t=l.call(t),c=0;!(s=t.next()).done;)u+=k(s=s.value,e,n,l=r+C(s,c++),a);else if("object"===s)throw e=""+t,Error(d(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return u}function O(t,e,n){if(null==t)return t;var r=[],i=0;return k(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function N(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var A={current:null};function P(){var t=A.current;if(null===t)throw Error(d(321));return t}var R={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:_,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:O,forEach:function(t,e,n){O(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return O(t,(function(){e++})),e},toArray:function(t){return O(t,(function(t){return t}))||[]},only:function(t){if(!E(t))throw Error(d(143));return t}},e.Component=g,e.PureComponent=m,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(d(267,t));var o=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=_.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)w.call(e,l)&&!I.hasOwnProperty(l)&&(o[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];o.children=c}return{$$typeof:i,type:t.type,key:a,ref:s,props:o,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:s,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=T,e.createFactory=function(t){var e=T.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:l,_payload:{_status:-1,_result:t},_init:N}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return P().useCallback(t,e)},e.useContext=function(t,e){return P().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return P().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return P().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return P().useLayoutEffect(t,e)},e.useMemo=function(t,e){return P().useMemo(t,e)},e.useReducer=function(t,e,n){return P().useReducer(t,e,n)},e.useRef=function(t){return P().useRef(t)},e.useState=function(t){return P().useState(t)},e.version="17.0.2"},function(t,e,n){"use strict";var r=n(2),i=n(25),o=n(35);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));var s=new Set,u={};function c(t,e){l(t,e),l(t+"Capture",e)}function l(t,e){for(u[t]=e,t=0;t<e.length;t++)s.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function g(t,e,n,r,i,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){y[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];y[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){y[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){y[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){y[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){y[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){y[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){y[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){y[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function b(t){return t[1].toUpperCase()}function _(t,e,n,r){var i=y.hasOwnProperty(e)?y[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!d.call(v,t)||!d.call(p,t)&&(f.test(t)?v[t]=!0:(p[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(m,b);y[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(m,b);y[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(m,b);y[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){y[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){y[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=60103,T=60106,E=60107,S=60108,C=60114,k=60109,O=60110,N=60112,A=60113,P=60120,R=60115,x=60116,D=60121,L=60128,j=60129,M=60130,F=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;I=U("react.element"),T=U("react.portal"),E=U("react.fragment"),S=U("react.strict_mode"),C=U("react.profiler"),k=U("react.provider"),O=U("react.context"),N=U("react.forward_ref"),A=U("react.suspense"),P=U("react.suspense_list"),R=U("react.memo"),x=U("react.lazy"),D=U("react.block"),U("react.scope"),L=U("react.opaque.id"),j=U("react.debug_trace_mode"),M=U("react.offscreen"),F=U("react.legacy_hidden")}var q,V="function"===typeof Symbol&&Symbol.iterator;function B(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=V&&t[V]||t["@@iterator"])?t:null}function K(t){if(void 0===q)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);q=e&&e[1]||""}return"\n"+q+t}var z=!1;function W(t,e){if(!t||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?K(t):""}function H(t){switch(t.tag){case 5:return K(t.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return t=W(t.type,!1);case 11:return t=W(t.type.render,!1);case 22:return t=W(t.type._render,!1);case 1:return t=W(t.type,!0);default:return""}}function G(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case E:return"Fragment";case T:return"Portal";case C:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case O:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case N:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case R:return G(t.type);case D:return G(t._render);case x:e=t._payload,t=t._init;try{return G(t(e))}catch(n){}}return null}function Q(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function Y(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function X(t){t._valueTracker||(t._valueTracker=function(t){var e=Y(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function $(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Y(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function J(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Z(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=Q(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&_(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=Q(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?it(t,e.type,n):e.hasOwnProperty("defaultValue")&&it(t,e.type,Q(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function rt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function it(t,e,n){"number"===e&&J(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function ot(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function at(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Q(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function st(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ut(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:Q(n)}}function ct(t,e){var n=Q(e.value),r=Q(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function lt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",ft="http://www.w3.org/2000/svg";function dt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?dt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var vt,gt=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==ft||"innerHTML"in t)t.innerHTML=e;else{for((vt=vt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function yt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var mt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];function _t(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||mt.hasOwnProperty(t)&&mt[t]?(""+e).trim():e+"px"}function wt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=_t(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(mt).forEach((function(t){bt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mt[e]=mt[t]}))}));var It=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tt(t,e){if(e){if(It[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62))}}function Et(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function St(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Ct=null,kt=null,Ot=null;function Nt(t){if(t=Jr(t)){if("function"!==typeof Ct)throw Error(a(280));var e=t.stateNode;e&&(e=ti(e),Ct(t.stateNode,t.type,e))}}function At(t){kt?Ot?Ot.push(t):Ot=[t]:kt=t}function Pt(){if(kt){var t=kt,e=Ot;if(Ot=kt=null,Nt(t),e)for(t=0;t<e.length;t++)Nt(e[t])}}function Rt(t,e){return t(e)}function xt(t,e,n,r,i){return t(e,n,r,i)}function Dt(){}var Lt=Rt,jt=!1,Mt=!1;function Ft(){null===kt&&null===Ot||(Dt(),Pt())}function Ut(t,e){var n=t.stateNode;if(null===n)return null;var r=ti(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}var qt=!1;if(h)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){qt=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(oc){qt=!1}function Bt(t,e,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(l){this.onError(l)}}var Kt=!1,zt=null,Wt=!1,Ht=null,Gt={onError:function(t){Kt=!0,zt=t}};function Qt(t,e,n,r,i,o,a,s,u){Kt=!1,zt=null,Bt.apply(Gt,arguments)}function Yt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Xt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function $t(t){if(Yt(t)!==t)throw Error(a(188))}function Jt(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Yt(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return $t(i),t;if(o===r)return $t(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Zt(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var te,ee,ne,re,ie=!1,oe=[],ae=null,se=null,ue=null,ce=new Map,le=new Map,he=[],fe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function de(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pe(t,e){switch(t){case"focusin":case"focusout":ae=null;break;case"dragenter":case"dragleave":se=null;break;case"mouseover":case"mouseout":ue=null;break;case"pointerover":case"pointerout":ce.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":le.delete(e.pointerId)}}function ve(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=de(e,n,r,i,o),null!==e&&(null!==(e=Jr(e))&&ee(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function ge(t){var e=$r(t.target);if(null!==e){var n=Yt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Xt(n)))return t.blockedOn=e,void re(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){ne(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ye(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Je(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=Jr(n))&&ee(e),t.blockedOn=n,!1;e.shift()}return!0}function me(t,e,n){ye(t)&&n.delete(e)}function be(){for(ie=!1;0<oe.length;){var t=oe[0];if(null!==t.blockedOn){null!==(t=Jr(t.blockedOn))&&te(t);break}for(var e=t.targetContainers;0<e.length;){var n=Je(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&oe.shift()}null!==ae&&ye(ae)&&(ae=null),null!==se&&ye(se)&&(se=null),null!==ue&&ye(ue)&&(ue=null),ce.forEach(me),le.forEach(me)}function _e(t,e){t.blockedOn===e&&(t.blockedOn=null,ie||(ie=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,be)))}function we(t){function e(e){return _e(e,t)}if(0<oe.length){_e(oe[0],t);for(var n=1;n<oe.length;n++){var r=oe[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==ae&&_e(ae,t),null!==se&&_e(se,t),null!==ue&&_e(ue,t),ce.forEach(e),le.forEach(e),n=0;n<he.length;n++)(r=he[n]).blockedOn===t&&(r.blockedOn=null);for(;0<he.length&&null===(n=he[0]).blockedOn;)ge(n),null===n.blockedOn&&he.shift()}function Ie(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Te={animationend:Ie("Animation","AnimationEnd"),animationiteration:Ie("Animation","AnimationIteration"),animationstart:Ie("Animation","AnimationStart"),transitionend:Ie("Transition","TransitionEnd")},Ee={},Se={};function Ce(t){if(Ee[t])return Ee[t];if(!Te[t])return t;var e,n=Te[t];for(e in n)if(n.hasOwnProperty(e)&&e in Se)return Ee[t]=n[e];return t}h&&(Se=document.createElement("div").style,"AnimationEvent"in window||(delete Te.animationend.animation,delete Te.animationiteration.animation,delete Te.animationstart.animation),"TransitionEvent"in window||delete Te.transitionend.transition);var ke=Ce("animationend"),Oe=Ce("animationiteration"),Ne=Ce("animationstart"),Ae=Ce("transitionend"),Pe=new Map,Re=new Map,xe=["abort","abort",ke,"animationEnd",Oe,"animationIteration",Ne,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ae,"transitionEnd","waiting","waiting"];function De(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Re.set(r,e),Pe.set(r,i),c(i,[r])}}(0,o.unstable_now)();var Le=8;function je(t){if(0!==(1&t))return Le=15,1;if(0!==(2&t))return Le=14,2;if(0!==(4&t))return Le=13,4;var e=24&t;return 0!==e?(Le=12,e):0!==(32&t)?(Le=11,32):0!==(e=192&t)?(Le=10,e):0!==(256&t)?(Le=9,256):0!==(e=3584&t)?(Le=8,e):0!==(4096&t)?(Le=7,4096):0!==(e=4186112&t)?(Le=6,e):0!==(e=62914560&t)?(Le=5,e):67108864&t?(Le=4,67108864):0!==(134217728&t)?(Le=3,134217728):0!==(e=805306368&t)?(Le=2,e):0!==(1073741824&t)?(Le=1,1073741824):(Le=8,t)}function Me(t,e){var n=t.pendingLanes;if(0===n)return Le=0;var r=0,i=0,o=t.expiredLanes,a=t.suspendedLanes,s=t.pingedLanes;if(0!==o)r=o,i=Le=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=je(u),i=Le):0!==(s&=o)&&(r=je(s),i=Le)}else 0!==(o=n&~a)?(r=je(o),i=Le):0!==s&&(r=je(s),i=Le);if(0===r)return 0;if(r=n&((0>(r=31-Ke(r))?0:1<<r)<<1)-1,0!==e&&e!==r&&0===(e&a)){if(je(e),i<=Le)return e;Le=i}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-Ke(e)),r|=t[n],e&=~i;return r}function Fe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Ue(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=qe(24&~e))?Ue(10,e):t;case 10:return 0===(t=qe(192&~e))?Ue(8,e):t;case 8:return 0===(t=qe(3584&~e))&&(0===(t=qe(4186112&~e))&&(t=512)),t;case 2:return 0===(e=qe(805306368&~e))&&(e=268435456),e}throw Error(a(358,t))}function qe(t){return t&-t}function Ve(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Be(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,(t=t.eventTimes)[e=31-Ke(e)]=n}var Ke=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(ze(t)/We|0)|0},ze=Math.log,We=Math.LN2;var He=o.unstable_UserBlockingPriority,Ge=o.unstable_runWithPriority,Qe=!0;function Ye(t,e,n,r){jt||Dt();var i=$e,o=jt;jt=!0;try{xt(i,t,e,n,r)}finally{(jt=o)||Ft()}}function Xe(t,e,n,r){Ge(He,$e.bind(null,t,e,n,r))}function $e(t,e,n,r){var i;if(Qe)if((i=0===(4&e))&&0<oe.length&&-1<fe.indexOf(t))t=de(null,t,e,n,r),oe.push(t);else{var o=Je(t,e,n,r);if(null===o)i&&pe(t,r);else{if(i){if(-1<fe.indexOf(t))return t=de(o,t,e,n,r),void oe.push(t);if(function(t,e,n,r,i){switch(e){case"focusin":return ae=ve(ae,t,e,n,r,i),!0;case"dragenter":return se=ve(se,t,e,n,r,i),!0;case"mouseover":return ue=ve(ue,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ce.set(o,ve(ce.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,le.set(o,ve(le.get(o)||null,t,e,n,r,i)),!0}return!1}(o,t,e,n,r))return;pe(t,r)}Ar(t,e,r,null,n)}}}function Je(t,e,n,r){var i=St(r);if(null!==(i=$r(i))){var o=Yt(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=Xt(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Ar(t,e,r,i,n),null}var Ze=null,tn=null,en=null;function nn(){if(en)return en;var t,e,n=tn,r=n.length,i="value"in Ze?Ze.value:Ze.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return en=i.slice(t,1<e?1-e:void 0)}function rn(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function on(){return!0}function an(){return!1}function sn(t){function e(e,n,r,i,o){for(var a in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?on:an,this.isPropagationStopped=an,this}return i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),e}var un,cn,ln,hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fn=sn(hn),dn=i({},hn,{view:0,detail:0}),pn=sn(dn),vn=i({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(un=t.screenX-ln.screenX,cn=t.screenY-ln.screenY):cn=un=0,ln=t),un)},movementY:function(t){return"movementY"in t?t.movementY:cn}}),gn=sn(vn),yn=sn(i({},vn,{dataTransfer:0})),mn=sn(i({},dn,{relatedTarget:0})),bn=sn(i({},hn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=sn(i({},hn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),wn=sn(i({},hn,{data:0})),In={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=En[t])&&!!e[t]}function Cn(){return Sn}var kn=sn(i({},dn,{key:function(t){if(t.key){var e=In[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=rn(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Tn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(t){return"keypress"===t.type?rn(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?rn(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),On=sn(i({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(i({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),An=sn(i({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=sn(i({},vn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),Rn=[9,13,27,32],xn=h&&"CompositionEvent"in window,Dn=null;h&&"documentMode"in document&&(Dn=document.documentMode);var Ln=h&&"TextEvent"in window&&!Dn,jn=h&&(!xn||Dn&&8<Dn&&11>=Dn),Mn=String.fromCharCode(32),Fn=!1;function Un(t,e){switch(t){case"keyup":return-1!==Rn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Vn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Bn[t.type]:"textarea"===e}function zn(t,e,n,r){At(r),0<(e=Rr(e,"onChange")).length&&(n=new fn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wn=null,Hn=null;function Gn(t){Er(t,0)}function Qn(t){if($(Zr(t)))return t}function Yn(t,e){if("change"===t)return e}var Xn=!1;if(h){var $n;if(h){var Jn="oninput"in document;if(!Jn){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),Jn="function"===typeof Zn.oninput}$n=Jn}else $n=!1;Xn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",er),Hn=Wn=null)}function er(t){if("value"===t.propertyName&&Qn(Hn)){var e=[];if(zn(e,Hn,t,St(t)),t=Gn,jt)t(e);else{jt=!0;try{Rt(t,e)}finally{jt=!1,Ft()}}}}function nr(t,e,n){"focusin"===t?(tr(),Hn=n,(Wn=e).attachEvent("onpropertychange",er)):"focusout"===t&&tr()}function rr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Qn(Hn)}function ir(t,e){if("click"===t)return Qn(e)}function or(t,e){if("input"===t||"change"===t)return Qn(e)}var ar="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},sr=Object.prototype.hasOwnProperty;function ur(t,e){if(ar(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!sr.call(e,n[r])||!ar(t[n[r]],e[n[r]]))return!1;return!0}function cr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lr(t,e){var n,r=cr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=cr(r)}}function hr(){for(var t=window,e=J();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=J((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var dr=h&&"documentMode"in document&&11>=document.documentMode,pr=null,vr=null,gr=null,yr=!1;function mr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==pr||pr!==J(r)||("selectionStart"in(r=pr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Rr(vr,"onSelect")).length&&(e=new fn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pr)))}De("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),De("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),De(xe,2);for(var br="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),_r=0;_r<br.length;_r++)Re.set(br[_r],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(wr));function Tr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,s,u,c){if(Qt.apply(this,arguments),Kt){if(!Kt)throw Error(a(198));var l=zt;Kt=!1,zt=null,Wt||(Wt=!0,Ht=l)}}(r,e,void 0,t),t.currentTarget=null}function Er(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break t;Tr(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break t;Tr(i,s,c),o=u}}}if(Wt)throw t=Ht,Wt=!1,Ht=null,t}function Sr(t,e){var n=ei(e),r=t+"__bubble";n.has(r)||(Nr(e,t,2,!1),n.add(r))}var Cr="_reactListening"+Math.random().toString(36).slice(2);function kr(t){t[Cr]||(t[Cr]=!0,s.forEach((function(e){Ir.has(e)||Or(e,!1,t,null),Or(e,!0,t,null)})))}function Or(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===t&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!e&&Ir.has(t)){if("scroll"!==t)return;i|=2,o=r}var a=ei(o),s=t+"__"+(e?"capture":"bubble");a.has(s)||(e&&(i|=4),Nr(o,t,i,e),a.add(s))}function Nr(t,e,n,r){var i=Re.get(e);switch(void 0===i?2:i){case 0:i=Ye;break;case 1:i=Xe;break;default:i=$e}n=i.bind(null,e,n,t),i=void 0,!qt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Ar(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=$r(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue t}s=s.parentNode}}r=r.return}!function(t,e,n){if(Mt)return t(e,n);Mt=!0;try{Lt(t,e,n)}finally{Mt=!1,Ft()}}((function(){var r=o,i=St(n),a=[];t:{var s=Pe.get(t);if(void 0!==s){var u=fn,c=t;switch(t){case"keypress":if(0===rn(n))break t;case"keydown":case"keyup":u=kn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Nn;break;case ke:case Oe:case Ne:u=bn;break;case Ae:u=An;break;case"scroll":u=pn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=On}var l=0!==(4&e),h=!l&&"scroll"===t,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ut(p,f))&&l.push(Pr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(c=n.relatedTarget||n.fromElement)||!$r(c)&&!c[Yr])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?$r(c):null)&&(c!==(h=Yt(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=gn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(l=On,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:Zr(u),d=null==c?s:Zr(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,$r(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)t:{for(f=c,p=0,d=l=u;d;d=xr(d))p++;for(d=0,v=f;v;v=xr(v))d++;for(;0<p-d;)l=xr(l),p--;for(;0<d-p;)f=xr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break t;l=xr(l),f=xr(f)}l=null}else l=null;null!==u&&Dr(a,s,u,l,!1),null!==c&&null!==h&&Dr(a,h,c,l,!0)}if("select"===(u=(s=r?Zr(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Yn;else if(Kn(s))if(Xn)g=or;else{g=rr;var y=nr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ir);switch(g&&(g=g(t,r))?zn(a,g,n,i):(y&&y(t,s,r),"focusout"===t&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&it(s,"number",s.value)),y=r?Zr(r):window,t){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(pr=y,vr=r,gr=null);break;case"focusout":gr=vr=pr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,mr(a,n,i);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":mr(a,n,i)}var m;if(xn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Vn?Un(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(m=nn()):(tn="value"in(Ze=i)?Ze.value:Ze.textContent,Vn=!0)),0<(y=Rr(r,b)).length&&(b=new wn(b,t,null,n,i),a.push({event:b,listeners:y}),m?b.data=m:null!==(m=qn(n))&&(b.data=m))),(m=Ln?function(t,e){switch(t){case"compositionend":return qn(e);case"keypress":return 32!==e.which?null:(Fn=!0,Mn);case"textInput":return(t=e.data)===Mn&&Fn?null:t;default:return null}}(t,n):function(t,e){if(Vn)return"compositionend"===t||!xn&&Un(t,e)?(t=nn(),en=tn=Ze=null,Vn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jn&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))&&(0<(r=Rr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=m))}Er(a,e)}))}function Pr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ut(t,n))&&r.unshift(Pr(t,o,i)),null!=(o=Ut(t,e))&&r.push(Pr(t,o,i))),t=t.return}return r}function xr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Dr(t,e,n,r,i){for(var o=e._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ut(n,o))&&a.unshift(Pr(n,u,s)):i||null!=(u=Ut(n,o))&&a.push(Pr(n,u,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}function Lr(){}var jr=null,Mr=null;function Fr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Ur(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var qr="function"===typeof setTimeout?setTimeout:void 0,Vr="function"===typeof clearTimeout?clearTimeout:void 0;function Br(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function Kr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function zr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Wr=0;var Hr=Math.random().toString(36).slice(2),Gr="__reactFiber$"+Hr,Qr="__reactProps$"+Hr,Yr="__reactContainer$"+Hr,Xr="__reactEvents$"+Hr;function $r(t){var e=t[Gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Yr]||n[Gr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=zr(t);null!==t;){if(n=t[Gr])return n;t=zr(t)}return e}n=(t=n).parentNode}return null}function Jr(t){return!(t=t[Gr]||t[Yr])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Zr(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function ti(t){return t[Qr]||null}function ei(t){var e=t[Xr];return void 0===e&&(e=t[Xr]=new Set),e}var ni=[],ri=-1;function ii(t){return{current:t}}function oi(t){0>ri||(t.current=ni[ri],ni[ri]=null,ri--)}function ai(t,e){ri++,ni[ri]=t.current,t.current=e}var si={},ui=ii(si),ci=ii(!1),li=si;function hi(t,e){var n=t.type.contextTypes;if(!n)return si;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function fi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function di(){oi(ci),oi(ui)}function pi(t,e,n){if(ui.current!==si)throw Error(a(168));ai(ui,e),ai(ci,n)}function vi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,G(e)||"Unknown",o));return i({},n,r)}function gi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||si,li=ui.current,ai(ui,t),ai(ci,ci.current),!0}function yi(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=vi(t,e,li),r.__reactInternalMemoizedMergedChildContext=t,oi(ci),oi(ui),ai(ui,t)):oi(ci),ai(ci,n)}var mi=null,bi=null,_i=o.unstable_runWithPriority,wi=o.unstable_scheduleCallback,Ii=o.unstable_cancelCallback,Ti=o.unstable_shouldYield,Ei=o.unstable_requestPaint,Si=o.unstable_now,Ci=o.unstable_getCurrentPriorityLevel,ki=o.unstable_ImmediatePriority,Oi=o.unstable_UserBlockingPriority,Ni=o.unstable_NormalPriority,Ai=o.unstable_LowPriority,Pi=o.unstable_IdlePriority,Ri={},xi=void 0!==Ei?Ei:function(){},Di=null,Li=null,ji=!1,Mi=Si(),Fi=1e4>Mi?Si:function(){return Si()-Mi};function Ui(){switch(Ci()){case ki:return 99;case Oi:return 98;case Ni:return 97;case Ai:return 96;case Pi:return 95;default:throw Error(a(332))}}function qi(t){switch(t){case 99:return ki;case 98:return Oi;case 97:return Ni;case 96:return Ai;case 95:return Pi;default:throw Error(a(332))}}function Vi(t,e){return t=qi(t),_i(t,e)}function Bi(t,e,n){return t=qi(t),wi(t,e,n)}function Ki(){if(null!==Li){var t=Li;Li=null,Ii(t)}zi()}function zi(){if(!ji&&null!==Di){ji=!0;var t=0;try{var e=Di;Vi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Di=null}catch(n){throw null!==Di&&(Di=Di.slice(t+1)),wi(ki,Ki),n}finally{ji=!1}}}var Wi=w.ReactCurrentBatchConfig;function Hi(t,e){if(t&&t.defaultProps){for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Gi=ii(null),Qi=null,Yi=null,Xi=null;function $i(){Xi=Yi=Qi=null}function Ji(t){var e=Gi.current;oi(Gi),t.type._context._currentValue=e}function Zi(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function to(t,e){Qi=t,Xi=Yi=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Ra=!0),t.firstContext=null)}function eo(t,e){if(Xi!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Xi=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Yi){if(null===Qi)throw Error(a(308));Yi=e,Qi.dependencies={lanes:0,firstContext:e,responders:null}}else Yi=Yi.next=e;return t._currentValue}var no=!1;function ro(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function io(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function oo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ao(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function so(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uo(t,e,n,r){var o=t.updateQueue;no=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?a=l:s.next=l,s=c;var h=t.alternate;if(null!==h){var f=(h=h.updateQueue).lastBaseUpdate;f!==s&&(null===f?h.firstBaseUpdate=l:f.next=l,h.lastBaseUpdate=c)}}if(null!==a){for(f=o.baseState,s=0,h=l=c=null;;){u=a.lane;var d=a.eventTime;if((r&u)===u){null!==h&&(h=h.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,v=a;switch(u=e,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break t}f=p;break t;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break t;f=i({},f,u);break t;case 2:no=!0}}null!==a.callback&&(t.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else d={eventTime:d,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(l=h=d,c=f):h=h.next=d,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===h&&(c=f),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=h,Ds|=s,t.lanes=s,t.memoizedState=f}}function co(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var lo=(new r.Component).refs;function ho(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var fo={isMounted:function(t){return!!(t=t._reactInternals)&&Yt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ou(),i=au(t),o=oo(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),ao(t,o),su(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ou(),i=au(t),o=oo(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),ao(t,o),su(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ou(),r=au(t),i=oo(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),ao(t,i),su(t,r,n)}};function po(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function vo(t,e,n){var r=!1,i=si,o=e.contextType;return"object"===typeof o&&null!==o?o=eo(o):(i=fi(e)?li:ui.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?hi(t,i):si),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=fo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function go(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fo.enqueueReplaceState(e,e.state,null)}function yo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=lo,ro(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=eo(o):(o=fi(e)?li:ui.current,i.context=hi(t,o)),uo(t,n,i,r),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(ho(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&fo.enqueueReplaceState(i,i.state,null),uo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4)}var mo=Array.isArray;function bo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===lo&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function _o(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function wo(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Uu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags=2,n):r:(e.flags=2,n):n}function s(e){return t&&null===e.alternate&&(e.flags=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=Ku(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=bo(t,e,n),r.return=t,r):((r=qu(n.type,n.key,n.props,null,t.mode,r)).ref=bo(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=zu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Vu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Ku(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case I:return(n=qu(e.type,e.key,e.props,null,t.mode,n)).ref=bo(t,null,e),n.return=t,n;case T:return(e=zu(e,t.mode,n)).return=t,e}if(mo(e)||B(e))return(e=Vu(e,t.mode,n,null)).return=t,e;_o(t,e)}return null}function d(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case I:return n.key===i?n.type===E?h(t,e,n.props.children,r,i):c(t,e,n,r):null;case T:return n.key===i?l(t,e,n,r):null}if(mo(n)||B(n))return null!==i?null:h(t,e,n,r,null);_o(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case I:return t=t.get(null===r.key?n:r.key)||null,r.type===E?h(e,t,r.props.children,i,r.key):c(e,t,r,i);case T:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(mo(r)||B(r))return h(e,t=t.get(n)||null,r,i,null);_o(e,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,g=null;null!==h&&v<s.length;v++){h.index>v?(g=h,h=null):g=h.sibling;var y=d(i,h,s[v],u);if(null===y){null===h&&(h=g);break}t&&h&&null===y.alternate&&e(i,h),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,h=g}if(v===s.length)return n(i,h),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);v<s.length;v++)null!==(g=p(h,i,v,s[v],u))&&(t&&null!==g.alternate&&h.delete(null===g.key?v:g.key),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g);return t&&h.forEach((function(t){return e(i,t)})),c}function g(i,s,u,c){var l=B(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,g=s=0,y=null,m=u.next();null!==v&&!m.done;g++,m=u.next()){v.index>g?(y=v,v=null):y=v.sibling;var b=d(i,v,m.value,c);if(null===b){null===v&&(v=y);break}t&&v&&null===b.alternate&&e(i,v),s=o(b,s,g),null===h?l=b:h.sibling=b,h=b,v=y}if(m.done)return n(i,v),l;if(null===v){for(;!m.done;g++,m=u.next())null!==(m=f(i,m.value,c))&&(s=o(m,s,g),null===h?l=m:h.sibling=m,h=m);return l}for(v=r(i,v);!m.done;g++,m=u.next())null!==(m=p(v,i,g,m.value,c))&&(t&&null!==m.alternate&&v.delete(null===m.key?g:m.key),s=o(m,s,g),null===h?l=m:h.sibling=m,h=m);return t&&v.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"===typeof o&&null!==o&&o.type===E&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case I:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===E){n(t,c.sibling),(r=i(c,o.props.children)).return=t,t=r;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),(r=i(c,o.props)).ref=bo(t,c,o),r.return=t,t=r;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===E?((r=Vu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=qu(o.type,o.key,o.props,null,t.mode,u)).ref=bo(t,r,o),u.return=t,t=u)}return s(t);case T:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=zu(o,t.mode,u)).return=t,t=r}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=Ku(o,t.mode,u)).return=t,t=r),s(t);if(mo(o))return v(t,r,o,u);if(B(o))return g(t,r,o,u);if(l&&_o(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,G(t.type)||"Component"))}return n(t,r)}}var Io=wo(!0),To=wo(!1),Eo={},So=ii(Eo),Co=ii(Eo),ko=ii(Eo);function Oo(t){if(t===Eo)throw Error(a(174));return t}function No(t,e){switch(ai(ko,e),ai(Co,t),ai(So,Eo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pt(null,"");break;default:e=pt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}oi(So),ai(So,e)}function Ao(){oi(So),oi(Co),oi(ko)}function Po(t){Oo(ko.current);var e=Oo(So.current),n=pt(e,t.type);e!==n&&(ai(Co,t),ai(So,n))}function Ro(t){Co.current===t&&(oi(So),oi(Co))}var xo=ii(0);function Do(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lo=null,jo=null,Mo=!1;function Fo(t,e){var n=Mu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Uo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function qo(t){if(Mo){var e=jo;if(e){var n=e;if(!Uo(t,e)){if(!(e=Kr(n.nextSibling))||!Uo(t,e))return t.flags=-1025&t.flags|2,Mo=!1,void(Lo=t);Fo(Lo,n)}Lo=t,jo=Kr(e.firstChild)}else t.flags=-1025&t.flags|2,Mo=!1,Lo=t}}function Vo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Lo=t}function Bo(t){if(t!==Lo)return!1;if(!Mo)return Vo(t),Mo=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Ur(e,t.memoizedProps))for(e=jo;e;)Fo(t,e),e=Kr(e.nextSibling);if(Vo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){jo=Kr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}jo=null}}else jo=Lo?Kr(t.stateNode.nextSibling):null;return!0}function Ko(){jo=Lo=null,Mo=!1}var zo=[];function Wo(){for(var t=0;t<zo.length;t++)zo[t]._workInProgressVersionPrimary=null;zo.length=0}var Ho=w.ReactCurrentDispatcher,Go=w.ReactCurrentBatchConfig,Qo=0,Yo=null,Xo=null,$o=null,Jo=!1,Zo=!1;function ta(){throw Error(a(321))}function ea(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function na(t,e,n,r,i,o){if(Qo=o,Yo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ho.current=null===t||null===t.memoizedState?Oa:Na,t=n(r,i),Zo){o=0;do{if(Zo=!1,!(25>o))throw Error(a(301));o+=1,$o=Xo=null,e.updateQueue=null,Ho.current=Aa,t=n(r,i)}while(Zo)}if(Ho.current=ka,e=null!==Xo&&null!==Xo.next,Qo=0,$o=Xo=Yo=null,Jo=!1,e)throw Error(a(300));return t}function ra(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$o?Yo.memoizedState=$o=t:$o=$o.next=t,$o}function ia(){if(null===Xo){var t=Yo.alternate;t=null!==t?t.memoizedState:null}else t=Xo.next;var e=null===$o?Yo.memoizedState:$o.next;if(null!==e)$o=e,Xo=t;else{if(null===t)throw Error(a(310));t={memoizedState:(Xo=t).memoizedState,baseState:Xo.baseState,baseQueue:Xo.baseQueue,queue:Xo.queue,next:null},null===$o?Yo.memoizedState=$o=t:$o=$o.next=t}return $o}function oa(t,e){return"function"===typeof e?e(t):e}function aa(t){var e=ia(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=Xo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.lane;if((Qo&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===t?c.eagerState:t(r,c.action);else{var h={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,Yo.lanes|=l,Ds|=l}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,ar(r,e.memoizedState)||(Ra=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function sa(t){var e=ia(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);ar(o,e.memoizedState)||(Ra=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ua(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(null!==i?t=i===r:(t=t.mutableReadLanes,(t=(Qo&t)===t)&&(e._workInProgressVersionPrimary=r,zo.push(e))),t)return n(e._source);throw zo.push(e),Error(a(350))}function ca(t,e,n,r){var i=Cs;if(null===i)throw Error(a(349));var o=e._getVersion,s=o(e._source),u=Ho.current,c=u.useState((function(){return ua(i,e,n)})),l=c[1],h=c[0];c=$o;var f=t.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var g=Yo;return t.memoizedState={refs:d,source:e,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var t=o(e._source);if(!ar(s,t)){t=n(e._source),ar(h,t)||(l(t),t=au(g),i.mutableReadLanes|=t&i.pendingLanes),t=i.mutableReadLanes,i.entangledLanes|=t;for(var r=i.entanglements,a=t;0<a;){var u=31-Ke(a),c=1<<u;r[u]|=t,a&=~c}}}),[n,e,r]),u.useEffect((function(){return r(e._source,(function(){var t=d.getSnapshot,n=d.setSnapshot;try{n(t(e._source));var r=au(g);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[e,r]),ar(p,n)&&ar(v,e)&&ar(f,r)||((t={pending:null,dispatch:null,lastRenderedReducer:oa,lastRenderedState:h}).dispatch=l=Ca.bind(null,Yo,t),c.queue=t,c.baseQueue=null,h=ua(i,e,n),c.memoizedState=c.baseState=h),h}function la(t,e,n){return ca(ia(),t,e,n)}function ha(t){var e=ra();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t}).dispatch=Ca.bind(null,Yo,t),[e.memoizedState,t]}function fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Yo.updateQueue)?(e={lastEffect:null},Yo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function da(t){return t={current:t},ra().memoizedState=t}function pa(){return ia().memoizedState}function va(t,e,n,r){var i=ra();Yo.flags|=t,i.memoizedState=fa(1|e,n,void 0,void 0===r?null:r)}function ga(t,e,n,r){var i=ia();r=void 0===r?null:r;var o=void 0;if(null!==Xo){var a=Xo.memoizedState;if(o=a.destroy,null!==r&&ea(r,a.deps))return void fa(e,n,o,r)}Yo.flags|=t,i.memoizedState=fa(1|e,n,o,r)}function ya(t,e){return va(516,4,t,e)}function ma(t,e){return ga(516,4,t,e)}function ba(t,e){return ga(4,2,t,e)}function _a(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function wa(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ga(4,2,_a.bind(null,e,t),n)}function Ia(){}function Ta(t,e){var n=ia();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ea(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ea(t,e){var n=ia();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ea(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Sa(t,e){var n=Ui();Vi(98>n?98:n,(function(){t(!0)})),Vi(97<n?97:n,(function(){var n=Go.transition;Go.transition=1;try{t(!1),e()}finally{Go.transition=n}}))}function Ca(t,e,n){var r=ou(),i=au(t),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),e.pending=o,a=t.alternate,t===Yo||null!==a&&a===Yo)Zo=Jo=!0;else{if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,ar(u,s))return}catch(c){}su(t,i,r)}}var ka={readContext:eo,useCallback:ta,useContext:ta,useEffect:ta,useImperativeHandle:ta,useLayoutEffect:ta,useMemo:ta,useReducer:ta,useRef:ta,useState:ta,useDebugValue:ta,useDeferredValue:ta,useTransition:ta,useMutableSource:ta,useOpaqueIdentifier:ta,unstable_isNewReconciler:!1},Oa={readContext:eo,useCallback:function(t,e){return ra().memoizedState=[t,void 0===e?null:e],t},useContext:eo,useEffect:ya,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,va(4,2,_a.bind(null,e,t),n)},useLayoutEffect:function(t,e){return va(4,2,t,e)},useMemo:function(t,e){var n=ra();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ra();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Ca.bind(null,Yo,t),[r.memoizedState,t]},useRef:da,useState:ha,useDebugValue:Ia,useDeferredValue:function(t){var e=ha(t),n=e[0],r=e[1];return ya((function(){var e=Go.transition;Go.transition=1;try{r(t)}finally{Go.transition=e}}),[t]),n},useTransition:function(){var t=ha(!1),e=t[0];return da(t=Sa.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var r=ra();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},ca(r,t,e,n)},useOpaqueIdentifier:function(){if(Mo){var t=!1,e=function(t){return{$$typeof:L,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+(Wr++).toString(36))),Error(a(355))})),n=ha(e)[1];return 0===(2&Yo.mode)&&(Yo.flags|=516,fa(5,(function(){n("r:"+(Wr++).toString(36))}),void 0,null)),e}return ha(e="r:"+(Wr++).toString(36)),e},unstable_isNewReconciler:!1},Na={readContext:eo,useCallback:Ta,useContext:eo,useEffect:ma,useImperativeHandle:wa,useLayoutEffect:ba,useMemo:Ea,useReducer:aa,useRef:pa,useState:function(){return aa(oa)},useDebugValue:Ia,useDeferredValue:function(t){var e=aa(oa),n=e[0],r=e[1];return ma((function(){var e=Go.transition;Go.transition=1;try{r(t)}finally{Go.transition=e}}),[t]),n},useTransition:function(){var t=aa(oa)[0];return[pa().current,t]},useMutableSource:la,useOpaqueIdentifier:function(){return aa(oa)[0]},unstable_isNewReconciler:!1},Aa={readContext:eo,useCallback:Ta,useContext:eo,useEffect:ma,useImperativeHandle:wa,useLayoutEffect:ba,useMemo:Ea,useReducer:sa,useRef:pa,useState:function(){return sa(oa)},useDebugValue:Ia,useDeferredValue:function(t){var e=sa(oa),n=e[0],r=e[1];return ma((function(){var e=Go.transition;Go.transition=1;try{r(t)}finally{Go.transition=e}}),[t]),n},useTransition:function(){var t=sa(oa)[0];return[pa().current,t]},useMutableSource:la,useOpaqueIdentifier:function(){return sa(oa)[0]},unstable_isNewReconciler:!1},Pa=w.ReactCurrentOwner,Ra=!1;function xa(t,e,n,r){e.child=null===t?To(e,null,n,r):Io(e,t.child,n,r)}function Da(t,e,n,r,i){n=n.render;var o=e.ref;return to(e,i),r=na(t,e,n,r,o,i),null===t||Ra?(e.flags|=1,xa(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,ts(t,e,i))}function La(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!==typeof a||Fu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=qu(n.type,null,r,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,ja(t,e,a,r,i,o))}return a=t.child,0===(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:ur)(i,r)&&t.ref===e.ref)?ts(t,e,o):(e.flags|=1,(t=Uu(a,r)).ref=e.ref,t.return=e,e.child=t)}function ja(t,e,n,r,i,o){if(null!==t&&ur(t.memoizedProps,r)&&t.ref===e.ref){if(Ra=!1,0===(o&i))return e.lanes=t.lanes,ts(t,e,o);0!==(16384&t.flags)&&(Ra=!0)}return Ua(t,e,n,r,o)}function Ma(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},vu(e,n);else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},vu(e,t),null;e.memoizedState={baseLanes:0},vu(e,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,vu(e,r);return xa(t,e,i,n),e.child}function Fa(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function Ua(t,e,n,r,i){var o=fi(n)?li:ui.current;return o=hi(e,o),to(e,i),n=na(t,e,n,r,o,i),null===t||Ra?(e.flags|=1,xa(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,ts(t,e,i))}function qa(t,e,n,r,i){if(fi(n)){var o=!0;gi(e)}else o=!1;if(to(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),vo(e,n,r),yo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=eo(c):c=hi(e,c=fi(n)?li:ui.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&go(e,a,r,c),no=!1;var f=e.memoizedState;a.state=f,uo(e,r,a,i),u=e.memoizedState,s!==r||f!==u||ci.current||no?("function"===typeof l&&(ho(e,n,l,r),u=e.memoizedState),(s=no||po(e,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4)):("function"===typeof a.componentDidMount&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(e.flags|=4),r=!1)}else{a=e.stateNode,io(t,e),s=e.memoizedProps,c=e.type===e.elementType?s:Hi(e.type,s),a.props=c,h=e.pendingProps,f=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=eo(u):u=hi(e,u=fi(n)?li:ui.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||f!==u)&&go(e,a,r,u),no=!1,f=e.memoizedState,a.state=f,uo(e,r,a,i);var p=e.memoizedState;s!==h||f!==p||ci.current||no?("function"===typeof d&&(ho(e,n,d,r),p=e.memoizedState),(c=no||po(e,n,c,r,f,p,u))?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=p),a.props=r,a.state=p,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),r=!1)}return Va(t,e,n,r,o,i)}function Va(t,e,n,r,i,o){Fa(t,e);var a=0!==(64&e.flags);if(!r&&!a)return i&&yi(e,n,!1),ts(t,e,o);r=e.stateNode,Pa.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&a?(e.child=Io(e,t.child,null,o),e.child=Io(e,null,s,o)):xa(t,e,s,o),e.memoizedState=r.state,i&&yi(e,n,!0),e.child}function Ba(t){var e=t.stateNode;e.pendingContext?pi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&pi(0,e.context,!1),No(t,e.containerInfo)}var Ka,za,Wa,Ha={dehydrated:null,retryLane:0};function Ga(t,e,n){var r,i=e.pendingProps,o=xo.current,a=!1;return(r=0!==(64&e.flags))||(r=(null===t||null!==t.memoizedState)&&0!==(2&o)),r?(a=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),ai(xo,1&o),null===t?(void 0!==i.fallback&&qo(e),t=i.children,o=i.fallback,a?(t=Qa(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ha,t):"number"===typeof i.unstable_expectedLoadTime?(t=Qa(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ha,e.lanes=33554432,t):((n=Bu({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,a?(i=Xa(t,e,i.children,i.fallback,n),a=e.child,o=t.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=t.childLanes&~n,e.memoizedState=Ha,i):(n=Ya(t,e,i.children,n),e.memoizedState=null,n))}function Qa(t,e,n,r){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=Bu(e,i,0,null),n=Vu(n,i,r,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n}function Ya(t,e,n,r){var i=t.child;return t=i.sibling,n=Uu(i,{mode:"visible",children:n}),0===(2&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function Xa(t,e,n,r,i){var o=e.mode,a=t.child;t=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&e.child!==a?((n=e.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):n=Uu(a,s),null!==t?r=Uu(t,r):(r=Vu(r,o,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function $a(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),Zi(t.return,e)}function Ja(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function Za(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(xa(t,e,r.children,n),0!==(2&(r=xo.current)))r=1&r|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&$a(t,n);else if(19===t.tag)$a(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ai(xo,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Do(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ja(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Do(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ja(e,!0,n,null,o,e.lastEffect);break;case"together":Ja(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function ts(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Ds|=e.lanes,0!==(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Uu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Uu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function es(t,e){if(!Mo)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ns(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fi(e.type)&&di(),null;case 3:return Ao(),oi(ci),oi(ui),Wo(),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(Bo(e)?e.flags|=4:r.hydrate||(e.flags|=256)),null;case 5:Ro(e);var o=Oo(ko.current);if(n=e.type,null!==t&&null!=e.stateNode)za(t,e,n,r),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=Oo(So.current),Bo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Gr]=e,r[Qr]=s,n){case"dialog":Sr("cancel",r),Sr("close",r);break;case"iframe":case"object":case"embed":Sr("load",r);break;case"video":case"audio":for(t=0;t<wr.length;t++)Sr(wr[t],r);break;case"source":Sr("error",r);break;case"img":case"image":case"link":Sr("error",r),Sr("load",r);break;case"details":Sr("toggle",r);break;case"input":tt(r,s),Sr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Sr("invalid",r);break;case"textarea":ut(r,s),Sr("invalid",r)}for(var c in Tt(n,s),t=null,s)s.hasOwnProperty(c)&&(o=s[c],"children"===c?"string"===typeof o?r.textContent!==o&&(t=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(t=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Sr("scroll",r));switch(n){case"input":X(r),rt(r,s,!0);break;case"textarea":X(r),lt(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Lr)}r=t,e.updateQueue=r,null!==r&&(e.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,t===ht&&(t=dt(n)),t===ht?"script"===n?((t=c.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),"select"===n&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[Gr]=e,t[Qr]=r,Ka(t,e),e.stateNode=t,c=Et(n,r),n){case"dialog":Sr("cancel",t),Sr("close",t),o=r;break;case"iframe":case"object":case"embed":Sr("load",t),o=r;break;case"video":case"audio":for(o=0;o<wr.length;o++)Sr(wr[o],t);o=r;break;case"source":Sr("error",t),o=r;break;case"img":case"image":case"link":Sr("error",t),Sr("load",t),o=r;break;case"details":Sr("toggle",t),o=r;break;case"input":tt(t,r),o=Z(t,r),Sr("invalid",t);break;case"option":o=ot(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Sr("invalid",t);break;case"textarea":ut(t,r),o=st(t,r),Sr("invalid",t);break;default:o=r}Tt(n,o);var l=o;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?wt(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&gt(t,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&yt(t,h):"number"===typeof h&&yt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Sr("scroll",t):null!=h&&_(t,s,h,c))}switch(n){case"input":X(t),rt(t,r,!1);break;case"textarea":X(t),lt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+Q(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?at(t,!!r.multiple,s,!1):null!=r.defaultValue&&at(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=Lr)}Fr(n,r)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Wa(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));n=Oo(ko.current),Oo(So.current),Bo(e)?(r=e.stateNode,n=e.memoizedProps,r[Gr]=e,r.nodeValue!==n&&(e.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Gr]=e,e.stateNode=r)}return null;case 13:return oi(xo),r=e.memoizedState,0!==(64&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?void 0!==e.memoizedProps.fallback&&Bo(e):n=null!==t.memoizedState,r&&!n&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&xo.current)?0===Ps&&(Ps=3):(0!==Ps&&3!==Ps||(Ps=4),null===Cs||0===(134217727&Ds)&&0===(134217727&Ls)||hu(Cs,Os))),(r||n)&&(e.flags|=4),null);case 4:return Ao(),null===t&&kr(e.stateNode.containerInfo),null;case 10:return Ji(e),null;case 17:return fi(e.type)&&di(),null;case 19:if(oi(xo),null===(r=e.memoizedState))return null;if(s=0!==(64&e.flags),null===(c=r.rendering))if(s)es(r,!1);else{if(0!==Ps||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(c=Do(t))){for(e.flags|=64,es(r,!1),null!==(s=c.updateQueue)&&(e.updateQueue=s,e.flags|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,t=c.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ai(xo,1&xo.current|2),e.child}t=t.sibling}null!==r.tail&&Fi()>Us&&(e.flags|=64,s=!0,es(r,!1),e.lanes=33554432)}else{if(!s)if(null!==(t=Do(c))){if(e.flags|=64,s=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),es(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Mo)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Fi()-r.renderingStartTime>Us&&1073741824!==n&&(e.flags|=64,s=!0,es(r,!1),e.lanes=33554432);r.isBackwards?(c.sibling=e.child,e.child=c):(null!==(n=r.last)?n.sibling=c:e.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Fi(),n.sibling=null,e=xo.current,ai(xo,s?1&e|2:1&e),n):null;case 23:case 24:return gu(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(e.flags|=4),null}throw Error(a(156,e.tag))}function rs(t){switch(t.tag){case 1:fi(t.type)&&di();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Ao(),oi(ci),oi(ui),Wo(),0!==(64&(e=t.flags)))throw Error(a(285));return t.flags=-4097&e|64,t;case 5:return Ro(t),null;case 13:return oi(xo),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return oi(xo),null;case 4:return Ao(),null;case 10:return Ji(t),null;case 23:case 24:return gu(),null;default:return null}}function is(t,e){try{var n="",r=e;do{n+=H(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i}}function os(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}Ka=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},za=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Oo(So.current);var a,s=null;switch(n){case"input":o=Z(t,o),r=Z(t,r),s=[];break;case"option":o=ot(t,o),r=ot(t,r),s=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),s=[];break;case"textarea":o=st(t,o),r=st(t,r),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(t.onclick=Lr)}for(h in Tt(n,r),n=null,o)if(!r.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var c=o[h];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var l=r[h];if(c=null!=o?o[h]:void 0,r.hasOwnProperty(h)&&l!==c&&(null!=l||null!=c))if("style"===h)if(c){for(a in c)!c.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in l)l.hasOwnProperty(a)&&c[a]!==l[a]&&(n||(n={}),n[a]=l[a])}else n||(s||(s=[]),s.push(h,n)),n=l;else"dangerouslySetInnerHTML"===h?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(h,l)):"children"===h?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(h,""+l):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=l&&"onScroll"===h&&Sr("scroll",t),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(s=s||[]).push(h,l))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}},Wa=function(t,e,n,r){n!==r&&(e.flags|=4)};var as="function"===typeof WeakMap?WeakMap:Map;function ss(t,e,n){(n=oo(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ks||(Ks=!0,zs=r),os(0,e)},n}function us(t,e,n){(n=oo(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return os(0,e),r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this),os(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var cs="function"===typeof WeakSet?WeakSet:Set;function ls(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){xu(t,n)}else e.current=null}function hs(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Hi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Br(e.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function fs(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var i=t;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Au(n,t),Nu(n,t)),t=r}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Hi(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&co(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}co(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&Fr(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&we(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function ds(t,e){for(var n=t;;){if(5===n.tag){var r=n.stateNode;if(e)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=_t("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ps(t,e){if(bi&&"function"===typeof bi.onCommitFiberUnmount)try{bi.onCommitFiberUnmount(mi,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Au(e,n);else{r=e;try{i()}catch(o){xu(r,o)}}n=n.next}while(n!==t)}break;case 1:if(ls(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){xu(e,o)}break;case 5:ls(e);break;case 4:ms(t,e)}}function vs(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function gs(t){return 5===t.tag||3===t.tag||4===t.tag}function ys(t){t:{for(var e=t.return;null!==e;){if(gs(e))break t;e=e.return}throw Error(a(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.flags&&(yt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||gs(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}r?function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(8===r.nodeType?(n=r.parentNode).insertBefore(e,r):(n=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=Lr));else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e):function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?r.insertBefore(e,n):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e)}function ms(t,e){for(var n,r,i=e,o=!1;;){if(!o){o=i.return;t:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break t;case 3:case 4:n=n.containerInfo,r=!0;break t}o=o.return}o=!0}if(5===i.tag||6===i.tag){t:for(var s=t,u=i,c=u;;)if(ps(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break t;for(;null===c.sibling;){if(null===c.return||c.return===u)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=i.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ps(t,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function bs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(t=r.destroy,r.destroy=void 0,void 0!==t&&t()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=e.stateNode)){r=e.memoizedProps;var i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Qr]=r,"input"===t&&"radio"===r.type&&null!=r.name&&et(n,r),Et(t,i),e=Et(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?wt(n,u):"dangerouslySetInnerHTML"===s?gt(n,u):"children"===s?yt(n,u):_(n,s,u,e)}switch(t){case"input":nt(n,r);break;case"textarea":ct(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?at(n,!!r.multiple,o,!1):t!==!!r.multiple&&(null!=r.defaultValue?at(n,!!r.multiple,r.defaultValue,!0):at(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,we(n.containerInfo)));case 12:return;case 13:return null!==e.memoizedState&&(Fs=Fi(),ds(e.child,!0)),void _s(e);case 19:return void _s(e);case 17:return;case 23:case 24:return void ds(e,null!==e.memoizedState)}throw Error(a(163))}function _s(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new cs),e.forEach((function(e){var r=Lu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function ws(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Is=Math.ceil,Ts=w.ReactCurrentDispatcher,Es=w.ReactCurrentOwner,Ss=0,Cs=null,ks=null,Os=0,Ns=0,As=ii(0),Ps=0,Rs=null,xs=0,Ds=0,Ls=0,js=0,Ms=null,Fs=0,Us=1/0;function qs(){Us=Fi()+500}var Vs,Bs=null,Ks=!1,zs=null,Ws=null,Hs=!1,Gs=null,Qs=90,Ys=[],Xs=[],$s=null,Js=0,Zs=null,tu=-1,eu=0,nu=0,ru=null,iu=!1;function ou(){return 0!==(48&Ss)?Fi():-1!==tu?tu:tu=Fi()}function au(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===Ui()?1:2;if(0===eu&&(eu=xs),0!==Wi.transition){0!==nu&&(nu=null!==Ms?Ms.pendingLanes:0),t=eu;var e=4186112&~nu;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=Ui(),0!==(4&Ss)&&98===t?t=Ue(12,eu):t=Ue(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),eu),t}function su(t,e,n){if(50<Js)throw Js=0,Zs=null,Error(a(185));if(null===(t=uu(t,e)))return null;Be(t,e,n),t===Cs&&(Ls|=e,4===Ps&&hu(t,Os));var r=Ui();1===e?0!==(8&Ss)&&0===(48&Ss)?fu(t):(cu(t,n),0===Ss&&(qs(),Ki())):(0===(4&Ss)||98!==r&&99!==r||(null===$s?$s=new Set([t]):$s.add(t)),cu(t,n)),Ms=t}function uu(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function cu(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var u=31-Ke(s),c=1<<u,l=o[u];if(-1===l){if(0===(c&r)||0!==(c&i)){l=e,je(c);var h=Le;o[u]=10<=h?l+250:6<=h?l+5e3:-1}}else l<=e&&(t.expiredLanes|=c);s&=~c}if(r=Me(t,t===Cs?Os:0),e=Le,0===r)null!==n&&(n!==Ri&&Ii(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==Ri&&Ii(n)}15===e?(n=fu.bind(null,t),null===Di?(Di=[n],Li=wi(ki,zi)):Di.push(n),n=Ri):14===e?n=Bi(99,fu.bind(null,t)):n=Bi(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,t))}}(e),lu.bind(null,t)),t.callbackPriority=e,t.callbackNode=n}}function lu(t){if(tu=-1,nu=eu=0,0!==(48&Ss))throw Error(a(327));var e=t.callbackNode;if(Ou()&&t.callbackNode!==e)return null;var n=Me(t,t===Cs?Os:0);if(0===n)return null;var r=n,i=Ss;Ss|=16;var o=bu();for(Cs===t&&Os===r||(qs(),yu(t,r));;)try{Iu();break}catch(u){mu(t,u)}if($i(),Ts.current=o,Ss=i,null!==ks?r=0:(Cs=null,Os=0,r=Ps),0!==(xs&Ls))yu(t,0);else if(0!==r){if(2===r&&(Ss|=64,t.hydrate&&(t.hydrate=!1,Br(t.containerInfo)),0!==(n=Fe(t))&&(r=_u(t,n))),1===r)throw e=Rs,yu(t,0),hu(t,n),cu(t,Fi()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(a(345));case 2:Su(t);break;case 3:if(hu(t,n),(62914560&n)===n&&10<(r=Fs+500-Fi())){if(0!==Me(t,0))break;if(((i=t.suspendedLanes)&n)!==n){ou(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qr(Su.bind(null,t),r);break}Su(t);break;case 4:if(hu(t,n),(4186112&n)===n)break;for(r=t.eventTimes,i=-1;0<n;){var s=31-Ke(n);o=1<<s,(s=r[s])>i&&(i=s),n&=~o}if(n=i,10<(n=(120>(n=Fi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Is(n/1960))-n)){t.timeoutHandle=qr(Su.bind(null,t),n);break}Su(t);break;case 5:Su(t);break;default:throw Error(a(329))}}return cu(t,Fi()),t.callbackNode===e?lu.bind(null,t):null}function hu(t,e){for(e&=~js,e&=~Ls,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ke(e),r=1<<n;t[n]=-1,e&=~r}}function fu(t){if(0!==(48&Ss))throw Error(a(327));if(Ou(),t===Cs&&0!==(t.expiredLanes&Os)){var e=Os,n=_u(t,e);0!==(xs&Ls)&&(n=_u(t,e=Me(t,e)))}else n=_u(t,e=Me(t,0));if(0!==t.tag&&2===n&&(Ss|=64,t.hydrate&&(t.hydrate=!1,Br(t.containerInfo)),0!==(e=Fe(t))&&(n=_u(t,e))),1===n)throw n=Rs,yu(t,0),hu(t,e),cu(t,Fi()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Su(t),cu(t,Fi()),null}function du(t,e){var n=Ss;Ss|=1;try{return t(e)}finally{0===(Ss=n)&&(qs(),Ki())}}function pu(t,e){var n=Ss;Ss&=-2,Ss|=8;try{return t(e)}finally{0===(Ss=n)&&(qs(),Ki())}}function vu(t,e){ai(As,Ns),Ns|=e,xs|=e}function gu(){Ns=As.current,oi(As)}function yu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Vr(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&di();break;case 3:Ao(),oi(ci),oi(ui),Wo();break;case 5:Ro(r);break;case 4:Ao();break;case 13:case 19:oi(xo);break;case 10:Ji(r);break;case 23:case 24:gu()}n=n.return}Cs=t,ks=Uu(t.current,null),Os=Ns=xs=e,Ps=0,Rs=null,js=Ls=Ds=0}function mu(t,e){for(;;){var n=ks;try{if($i(),Ho.current=ka,Jo){for(var r=Yo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Jo=!1}if(Qo=0,$o=Xo=Yo=null,Zo=!1,Es.current=null,null===n||null===n.return){Ps=1,Rs=e,ks=null;break}t:{var o=t,a=n.return,s=n,u=e;if(e=Os,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&xo.current),f=a;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(d){var g=f.updateQueue;if(null===g){var y=new Set;y.add(c),f.updateQueue=y}else g.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var m=oo(-1,1);m.tag=2,ao(s,m)}s.lanes|=1;break t}u=void 0,s=e;var b=o.pingCache;if(null===b?(b=o.pingCache=new as,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var _=Du.bind(null,o,c,s);c.then(_,_)}f.flags|=4096,f.lanes=e;break t}f=f.return}while(null!==f);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ps&&(Ps=2),u=is(u,s),f=a;do{switch(f.tag){case 3:o=u,f.flags|=4096,e&=-e,f.lanes|=e,so(f,ss(0,o,e));break t;case 1:o=u;var w=f.type,I=f.stateNode;if(0===(64&f.flags)&&("function"===typeof w.getDerivedStateFromError||null!==I&&"function"===typeof I.componentDidCatch&&(null===Ws||!Ws.has(I)))){f.flags|=4096,e&=-e,f.lanes|=e,so(f,us(f,o,e));break t}}f=f.return}while(null!==f)}Eu(n)}catch(T){e=T,ks===n&&null!==n&&(ks=n=n.return);continue}break}}function bu(){var t=Ts.current;return Ts.current=ka,null===t?ka:t}function _u(t,e){var n=Ss;Ss|=16;var r=bu();for(Cs===t&&Os===e||yu(t,e);;)try{wu();break}catch(i){mu(t,i)}if($i(),Ss=n,Ts.current=r,null!==ks)throw Error(a(261));return Cs=null,Os=0,Ps}function wu(){for(;null!==ks;)Tu(ks)}function Iu(){for(;null!==ks&&!Ti();)Tu(ks)}function Tu(t){var e=Vs(t.alternate,t,Ns);t.memoizedProps=t.pendingProps,null===e?Eu(t):ks=e,Es.current=null}function Eu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(n=ns(n,e,Ns)))return void(ks=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ns)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=rs(e)))return n.flags&=2047,void(ks=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(ks=e);ks=e=t}while(null!==e);0===Ps&&(Ps=5)}function Su(t){var e=Ui();return Vi(99,Cu.bind(null,t,e)),null}function Cu(t,e){do{Ou()}while(null!==Gs);if(0!==(48&Ss))throw Error(a(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var s=t.eventTimes,u=t.expirationTimes;0<o;){var c=31-Ke(o),l=1<<c;i[c]=0,s[c]=-1,u[c]=-1,o&=~l}if(null!==$s&&0===(24&r)&&$s.has(t)&&$s.delete(t),t===Cs&&(ks=Cs=null,Os=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ss,Ss|=32,Es.current=null,jr=Qe,fr(s=hr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else t:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,o=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(C){u=null;break t}var h=0,f=-1,d=-1,p=0,v=0,g=s,y=null;e:for(;;){for(var m;g!==u||0!==o&&3!==g.nodeType||(f=h+o),g!==c||0!==l&&3!==g.nodeType||(d=h+l),3===g.nodeType&&(h+=g.nodeValue.length),null!==(m=g.firstChild);)y=g,g=m;for(;;){if(g===s)break e;if(y===u&&++p===o&&(f=h),y===c&&++v===l&&(d=h),null!==(m=g.nextSibling))break;y=(g=y).parentNode}g=m}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;Mr={focusedElem:s,selectionRange:u},Qe=!1,ru=null,iu=!1,Bs=r;do{try{ku()}catch(C){if(null===Bs)throw Error(a(330));xu(Bs,C),Bs=Bs.nextEffect}}while(null!==Bs);ru=null,Bs=r;do{try{for(s=t;null!==Bs;){var b=Bs.flags;if(16&b&&yt(Bs.stateNode,""),128&b){var _=Bs.alternate;if(null!==_){var w=_.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&b){case 2:ys(Bs),Bs.flags&=-3;break;case 6:ys(Bs),Bs.flags&=-3,bs(Bs.alternate,Bs);break;case 1024:Bs.flags&=-1025;break;case 1028:Bs.flags&=-1025,bs(Bs.alternate,Bs);break;case 4:bs(Bs.alternate,Bs);break;case 8:ms(s,u=Bs);var I=u.alternate;vs(u),null!==I&&vs(I)}Bs=Bs.nextEffect}}catch(C){if(null===Bs)throw Error(a(330));xu(Bs,C),Bs=Bs.nextEffect}}while(null!==Bs);if(w=Mr,_=hr(),b=w.focusedElem,s=w.selectionRange,_!==b&&b&&b.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==s&&fr(b)&&(_=s.start,void 0===(w=s.end)&&(w=_),"selectionStart"in b?(b.selectionStart=_,b.selectionEnd=Math.min(w,b.value.length)):(w=(_=b.ownerDocument||document)&&_.defaultView||window).getSelection&&(w=w.getSelection(),u=b.textContent.length,I=Math.min(s.start,u),s=void 0===s.end?I:Math.min(s.end,u),!w.extend&&I>s&&(u=s,s=I,I=u),u=lr(b,I),o=lr(b,s),u&&o&&(1!==w.rangeCount||w.anchorNode!==u.node||w.anchorOffset!==u.offset||w.focusNode!==o.node||w.focusOffset!==o.offset)&&((_=_.createRange()).setStart(u.node,u.offset),w.removeAllRanges(),I>s?(w.addRange(_),w.extend(o.node,o.offset)):(_.setEnd(o.node,o.offset),w.addRange(_))))),_=[];for(w=b;w=w.parentNode;)1===w.nodeType&&_.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<_.length;b++)(w=_[b]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Qe=!!jr,Mr=jr=null,t.current=n,Bs=r;do{try{for(b=t;null!==Bs;){var T=Bs.flags;if(36&T&&fs(b,Bs.alternate,Bs),128&T){_=void 0;var E=Bs.ref;if(null!==E){var S=Bs.stateNode;switch(Bs.tag){case 5:_=S;break;default:_=S}"function"===typeof E?E(_):E.current=_}}Bs=Bs.nextEffect}}catch(C){if(null===Bs)throw Error(a(330));xu(Bs,C),Bs=Bs.nextEffect}}while(null!==Bs);Bs=null,xi(),Ss=i}else t.current=n;if(Hs)Hs=!1,Gs=t,Qs=e;else for(Bs=r;null!==Bs;)e=Bs.nextEffect,Bs.nextEffect=null,8&Bs.flags&&((T=Bs).sibling=null,T.stateNode=null),Bs=e;if(0===(r=t.pendingLanes)&&(Ws=null),1===r?t===Zs?Js++:(Js=0,Zs=t):Js=0,n=n.stateNode,bi&&"function"===typeof bi.onCommitFiberRoot)try{bi.onCommitFiberRoot(mi,n,void 0,64===(64&n.current.flags))}catch(C){}if(cu(t,Fi()),Ks)throw Ks=!1,t=zs,zs=null,t;return 0!==(8&Ss)||Ki(),null}function ku(){for(;null!==Bs;){var t=Bs.alternate;iu||null===ru||(0!==(8&Bs.flags)?Zt(Bs,ru)&&(iu=!0):13===Bs.tag&&ws(t,Bs)&&Zt(Bs,ru)&&(iu=!0));var e=Bs.flags;0!==(256&e)&&hs(t,Bs),0===(512&e)||Hs||(Hs=!0,Bi(97,(function(){return Ou(),null}))),Bs=Bs.nextEffect}}function Ou(){if(90!==Qs){var t=97<Qs?97:Qs;return Qs=90,Vi(t,Pu)}return!1}function Nu(t,e){Ys.push(e,t),Hs||(Hs=!0,Bi(97,(function(){return Ou(),null})))}function Au(t,e){Xs.push(e,t),Hs||(Hs=!0,Bi(97,(function(){return Ou(),null})))}function Pu(){if(null===Gs)return!1;var t=Gs;if(Gs=null,0!==(48&Ss))throw Error(a(331));var e=Ss;Ss|=32;var n=Xs;Xs=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],s=i.destroy;if(i.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===o)throw Error(a(330));xu(o,c)}}for(n=Ys,Ys=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===o)throw Error(a(330));xu(o,c)}}for(u=t.current.firstEffect;null!==u;)t=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=t;return Ss=e,Ki(),!0}function Ru(t,e,n){ao(t,e=ss(0,e=is(n,e),1)),e=ou(),null!==(t=uu(t,1))&&(Be(t,1,e),cu(t,e))}function xu(t,e){if(3===t.tag)Ru(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Ru(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){var i=us(n,t=is(e,t),1);if(ao(n,i),i=ou(),null!==(n=uu(n,1)))Be(n,1,i),cu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r)))try{r.componentDidCatch(e,t)}catch(o){}break}}n=n.return}}function Du(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=ou(),t.pingedLanes|=t.suspendedLanes&n,Cs===t&&(Os&n)===n&&(4===Ps||3===Ps&&(62914560&Os)===Os&&500>Fi()-Fs?yu(t,0):js|=n),cu(t,e)}function Lu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===Ui()?1:2:(0===eu&&(eu=xs),0===(e=qe(62914560&~eu))&&(e=4194304))),n=ou(),null!==(t=uu(t,e))&&(Be(t,e,n),cu(t,n))}function ju(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(t,e,n,r){return new ju(t,e,n,r)}function Fu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Uu(t,e){var n=t.alternate;return null===n?((n=Mu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function qu(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)Fu(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case E:return Vu(n.children,i,o,e);case j:s=8,i|=16;break;case S:s=8,i|=1;break;case C:return(t=Mu(12,n,e,8|i)).elementType=C,t.type=C,t.lanes=o,t;case A:return(t=Mu(13,n,e,i)).type=A,t.elementType=A,t.lanes=o,t;case P:return(t=Mu(19,n,e,i)).elementType=P,t.lanes=o,t;case M:return Bu(n,i,o,e);case F:return(t=Mu(24,n,e,i)).elementType=F,t.lanes=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case k:s=10;break t;case O:s=9;break t;case N:s=11;break t;case R:s=14;break t;case x:s=16,r=null;break t;case D:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Mu(s,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function Vu(t,e,n,r){return(t=Mu(7,t,r,e)).lanes=n,t}function Bu(t,e,n,r){return(t=Mu(23,t,r,e)).elementType=M,t.lanes=n,t}function Ku(t,e,n){return(t=Mu(6,t,null,e)).lanes=n,t}function zu(t,e,n){return(e=Mu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Wu(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ve(0),this.expirationTimes=Ve(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ve(0),this.mutableSourceEagerHydrationData=null}function Hu(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:T,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Gu(t,e,n,r){var i=e.current,o=ou(),s=au(i);t:if(n){e:{if(Yt(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(fi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(fi(c)){n=vi(n,c,u);break t}}n=u}else n=si;return null===e.context?e.context=n:e.pendingContext=n,(e=oo(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),ao(i,e),su(i,s,o),s}function Qu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Yu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Xu(t,e){Yu(t,e),(t=t.alternate)&&Yu(t,e)}function $u(t,e,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Wu(t,e,null!=n&&!0===n.hydrate),e=Mu(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,ro(e),t[Yr]=n.current,kr(8===t.nodeType?t.parentNode:t),r)for(t=0;t<r.length;t++){var i=(e=r[t])._getVersion;i=i(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}function Ju(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Zu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var t=Qu(a);s.call(t)}}Gu(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new $u(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var t=Qu(a);u.call(t)}}pu((function(){Gu(e,a,t,i)}))}return Qu(a)}function tc(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(e))throw Error(a(200));return Hu(t,e,null,n)}Vs=function(t,e,n){var r=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||ci.current)Ra=!0;else{if(0===(n&r)){switch(Ra=!1,e.tag){case 3:Ba(e),Ko();break;case 5:Po(e);break;case 1:fi(e.type)&&gi(e);break;case 4:No(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;ai(Gi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(n&e.child.childLanes)?Ga(t,e,n):(ai(xo,1&xo.current),null!==(e=ts(t,e,n))?e.sibling:null);ai(xo,1&xo.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(64&t.flags)){if(r)return Za(t,e,n);e.flags|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ai(xo,xo.current),r)break;return null;case 23:case 24:return e.lanes=0,Ma(t,e,n)}return ts(t,e,n)}Ra=0!==(16384&t.flags)}else Ra=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=hi(e,ui.current),to(e,n),i=na(null,e,r,t,i,n),e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,fi(r)){var o=!0;gi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ro(e);var s=r.getDerivedStateFromProps;"function"===typeof s&&ho(e,r,s,t),i.updater=fo,e.stateNode=i,i._reactInternals=e,yo(e,r,t,n),e=Va(null,e,r,!0,o,n)}else e.tag=0,xa(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(o=i._init)(i._payload),e.type=i,o=e.tag=function(t){if("function"===typeof t)return Fu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===N)return 11;if(t===R)return 14}return 2}(i),t=Hi(i,t),o){case 0:e=Ua(null,e,i,t,n);break t;case 1:e=qa(null,e,i,t,n);break t;case 11:e=Da(null,e,i,t,n);break t;case 14:e=La(null,e,i,Hi(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ua(t,e,r,i=e.elementType===r?i:Hi(r,i),n);case 1:return r=e.type,i=e.pendingProps,qa(t,e,r,i=e.elementType===r?i:Hi(r,i),n);case 3:if(Ba(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,io(t,e),uo(e,r,null,n),(r=e.memoizedState.element)===i)Ko(),e=ts(t,e,n);else{if((o=(i=e.stateNode).hydrate)&&(jo=Kr(e.stateNode.containerInfo.firstChild),Lo=e,o=Mo=!0),o){if(null!=(t=i.mutableSourceEagerHydrationData))for(i=0;i<t.length;i+=2)(o=t[i])._workInProgressVersionPrimary=t[i+1],zo.push(o);for(n=To(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else xa(t,e,r,n),Ko();e=e.child}return e;case 5:return Po(e),null===t&&qo(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,Ur(r,i)?s=null:null!==o&&Ur(r,o)&&(e.flags|=16),Fa(t,e),xa(t,e,s,n),e.child;case 6:return null===t&&qo(e),null;case 13:return Ga(t,e,n);case 4:return No(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Io(e,null,r,n):xa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Da(t,e,r,i=e.elementType===r?i:Hi(r,i),n);case 7:return xa(t,e,e.pendingProps,n),e.child;case 8:case 12:return xa(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(ai(Gi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=ar(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!ci.current){e=ts(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=oo(-1,n&-n)).tag=2,ao(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),Zi(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}xa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,to(e,n),r=r(i=eo(i,o.unstable_observedBits)),e.flags|=1,xa(t,e,r,n),e.child;case 14:return o=Hi(i=e.type,e.pendingProps),La(t,e,i,o=Hi(i.type,o),r,n);case 15:return ja(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,fi(r)?(t=!0,gi(e)):t=!1,to(e,n),vo(e,r,i),yo(e,r,i,n),Va(null,e,r,!0,t,n);case 19:return Za(t,e,n);case 23:case 24:return Ma(t,e,n)}throw Error(a(156,e.tag))},$u.prototype.render=function(t){Gu(t,this._internalRoot,null,null)},$u.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Gu(null,t,null,(function(){e[Yr]=null}))},te=function(t){13===t.tag&&(su(t,4,ou()),Xu(t,4))},ee=function(t){13===t.tag&&(su(t,67108864,ou()),Xu(t,67108864))},ne=function(t){if(13===t.tag){var e=ou(),n=au(t);su(t,n,e),Xu(t,n)}},re=function(t,e){return e()},Ct=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=ti(r);if(!i)throw Error(a(90));$(r),nt(r,i)}}}break;case"textarea":ct(t,n);break;case"select":null!=(e=n.value)&&at(t,!!n.multiple,e,!1)}},Rt=du,xt=function(t,e,n,r,i){var o=Ss;Ss|=4;try{return Vi(98,t.bind(null,e,n,r,i))}finally{0===(Ss=o)&&(qs(),Ki())}},Dt=function(){0===(49&Ss)&&(function(){if(null!==$s){var t=$s;$s=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,cu(t,Fi())}))}Ki()}(),Ou())},Lt=function(t,e){var n=Ss;Ss|=2;try{return t(e)}finally{0===(Ss=n)&&(qs(),Ki())}};var ec={Events:[Jr,Zr,ti,At,Pt,Ou,{current:!1}]},nc={findFiberByHostInstance:$r,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Jt(t))?null:t.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{mi=ic.inject(rc),bi=ic}catch(oc){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,e.createPortal=tc,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=Jt(e))?null:t.stateNode},e.flushSync=function(t,e){var n=Ss;if(0!==(48&n))return t(e);Ss|=1;try{if(t)return Vi(99,t.bind(null,e))}finally{Ss=n,Ki()}},e.hydrate=function(t,e,n){if(!Ju(e))throw Error(a(200));return Zu(null,t,e,!0,n)},e.render=function(t,e,n){if(!Ju(e))throw Error(a(200));return Zu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Ju(t))throw Error(a(40));return!!t._reactRootContainer&&(pu((function(){Zu(null,null,t,!1,(function(){t._reactRootContainer=null,t[Yr]=null}))})),!0)},e.unstable_batchedUpdates=du,e.unstable_createPortal=function(t,e){return tc(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ju(n))throw Error(a(200));if(null==t||void 0===t._reactInternals)throw Error(a(38));return Zu(t,e,n,!1,r)},e.version="17.0.2"},function(t,e,n){"use strict";t.exports=n(36)},function(t,e,n){"use strict";var r,i,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var l=null,h=null,f=function t(){if(null!==l)try{var n=e.unstable_now();l(!0,n),l=null}catch(r){throw setTimeout(t,0),r}};r=function(t){null!==l?setTimeout(r,0,t):(l=t,setTimeout(f,0))},i=function(t,e){h=setTimeout(t,e)},o=function(){clearTimeout(h)},e.unstable_shouldYield=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,y=null,m=-1,b=5,_=0;e.unstable_shouldYield=function(){return e.unstable_now()>=_},a=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<t?Math.floor(1e3/t):5};var w=new MessageChannel,I=w.port2;w.port1.onmessage=function(){if(null!==y){var t=e.unstable_now();_=t+b;try{y(!0,t)?I.postMessage(null):(g=!1,y=null)}catch(n){throw I.postMessage(null),n}}else g=!1},r=function(t){y=t,g||(g=!0,I.postMessage(null))},i=function(t,n){m=d((function(){t(e.unstable_now())}),n)},o=function(){p(m),m=-1}}function T(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<C(i,e)))break t;t[r]=e,t[n]=i,n=r}}function E(t){return void 0===(t=t[0])?null:t}function S(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>C(a,n))void 0!==u&&0>C(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>C(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function C(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var k=[],O=[],N=1,A=null,P=3,R=!1,x=!1,D=!1;function L(t){for(var e=E(O);null!==e;){if(null===e.callback)S(O);else{if(!(e.startTime<=t))break;S(O),e.sortIndex=e.expirationTime,T(k,e)}e=E(O)}}function j(t){if(D=!1,L(t),!x)if(null!==E(k))x=!0,r(M);else{var e=E(O);null!==e&&i(j,e.startTime-t)}}function M(t,n){x=!1,D&&(D=!1,o()),R=!0;var r=P;try{for(L(n),A=E(k);null!==A&&(!(A.expirationTime>n)||t&&!e.unstable_shouldYield());){var a=A.callback;if("function"===typeof a){A.callback=null,P=A.priorityLevel;var s=a(A.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?A.callback=s:A===E(k)&&S(k),L(n)}else S(k);A=E(k)}if(null!==A)var u=!0;else{var c=E(O);null!==c&&i(j,c.startTime-n),u=!1}return u}finally{A=null,P=r,R=!1}}var F=a;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){x||R||(x=!0,r(M))},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return E(k)},e.unstable_next=function(t){switch(P){case 1:case 2:case 3:var e=3;break;default:e=P}var n=P;P=e;try{return t()}finally{P=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=F,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=P;P=t;try{return e()}finally{P=n}},e.unstable_scheduleCallback=function(t,n,a){var s=e.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,t){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return t={id:N++,callback:n,priorityLevel:t,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(t.sortIndex=a,T(O,t),null===E(k)&&t===E(O)&&(D?o():D=!0,i(j,a-s))):(t.sortIndex=u,T(k,t),x||R||(x=!0,r(M))),t},e.unstable_wrapCallback=function(t){var e=P;return function(){var n=P;P=e;try{return t.apply(this,arguments)}finally{P=n}}}},,,function(t,e,n){"use strict";var r=n(40);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,m=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,_=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function I(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case h:case f:case a:case u:case s:case p:return t;default:switch(t=t&&t.$$typeof){case l:case d:case y:case g:case c:return t;default:return e}}case o:return e}}}function T(t){return I(t)===f}e.AsyncMode=h,e.ConcurrentMode=f,e.ContextConsumer=l,e.ContextProvider=c,e.Element=i,e.ForwardRef=d,e.Fragment=a,e.Lazy=y,e.Memo=g,e.Portal=o,e.Profiler=u,e.StrictMode=s,e.Suspense=p,e.isAsyncMode=function(t){return T(t)||I(t)===h},e.isConcurrentMode=T,e.isContextConsumer=function(t){return I(t)===l},e.isContextProvider=function(t){return I(t)===c},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return I(t)===d},e.isFragment=function(t){return I(t)===a},e.isLazy=function(t){return I(t)===y},e.isMemo=function(t){return I(t)===g},e.isPortal=function(t){return I(t)===o},e.isProfiler=function(t){return I(t)===u},e.isStrictMode=function(t){return I(t)===s},e.isSuspense=function(t){return I(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===a||t===f||t===u||t===s||t===p||t===v||"object"===typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===g||t.$$typeof===c||t.$$typeof===l||t.$$typeof===d||t.$$typeof===b||t.$$typeof===_||t.$$typeof===w||t.$$typeof===m)},e.typeOf=I},,,,,,,,function(t,e,n){"use strict";(function(t,e){var r=n(3),i=n(5),o=n(1),a=n(0),s=n(4),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.K)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.E)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.k)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=function(){var t=1;return function(){return t++}}(),v=function(t){var e=Object(o.J)(t),n=new o.d;n.update(e);var r=n.digest();return o.h.encodeByteArray(r)},g=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var a=e[i];Array.isArray(a)||a&&"object"===typeof a&&"number"===typeof a.length?r+=t.apply(null,a):r+="object"===typeof a?Object(o.K)(a):a,r+=" "}return r},y=null,m=!0,b=function(t,e){Object(o.f)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,y=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"===typeof t?y=t:(y=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===y&&!0===f.get("logging_enabled")&&b(!0)),y){var n=g.apply(null,t);y(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(a.f)([t],Object(a.e)(e)))}},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+g.apply(void 0,Object(a.f)([],Object(a.e)(t)));d.error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+g.apply(void 0,Object(a.f)([],Object(a.e)(t)));throw d.error(n),new Error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+g.apply(void 0,Object(a.f)([],Object(a.e)(t)));d.warn(n)},S=function(t){return"number"===typeof t&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},C="[MIN_NAME]",k="[MAX_NAME]",O=function(t,e){if(t===e)return 0;if(t===C||e===k)return-1;if(e===C||t===k)return 1;var n=j(t),r=j(e);return null!==n?null!==r?n-r===0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},N=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.K)(e))},P=function t(e){if("object"!==typeof e||null===e)return Object(o.K)(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Object(o.K)(n[a]),i+=":",i+=t(e[n[a]]);return i+="}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function x(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var D=function(t){Object(o.f)(!S(t),"Invalid JSON number");var e,n,r,i,a;0===t?(n=0,r=0,e=1/t===-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var L=new RegExp("^-?(0*)\\d{1,10}$"),j=function(t){if(L.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},M=function(t){try{t()}catch(e){setTimeout((function(){var t=e.stack||"";throw E("Exception was thrown by user callback.",t),e}),Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"===typeof n&&n.unref&&n.unref(),n},U=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',E(t)},t}(),q=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),V=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,B=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function K(t,e,n){var r;if(Object(o.f)("string"===typeof e,"typeof type must == string"),Object(o.f)("object"===typeof n,"typeof params must == object"),"websocket"===e)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return x(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}var z=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.k)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.m)(this.counters_)},t}(),W={},H={};function G(t){var e=t.toString();return W[e]||(W[e]=new z),W[e]}var Q=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&M((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),Y=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=G(e),this.urlFn=function(t){return K(e,"long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Q(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(o.A)()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new X((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(a.e)(t,5),i=r[0],o=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(a.e)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!==typeof location&&location.hostname&&V.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!Object(o.A)()&&(!!t.forceAllow_||!t.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.K)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.i)(e),r=R(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.A)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.K)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),X=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.A)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(o.A)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),$="";function J(t){$=t}var Z=null;"undefined"!==typeof MozWebSocket?Z=MozWebSocket:"undefined"!==typeof WebSocket&&(Z=WebSocket);var tt=function(){function e(t,n,r,i,o){this.connId=t,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=G(n),this.connURL=e.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.A)()&&"undefined"!==typeof location&&location.hostname&&V.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),K(t,"websocket",r)},e.prototype.open=function(e,n){var r=this;this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.A)()){var i=this.nodeAdmin?"AdminNode":"Node",a={headers:{"User-Agent":"Firebase/5/"+$+"/"+t.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}},s=Object({NODE_ENV:"production",PUBLIC_URL:"/olx-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),u=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;u&&(a.proxy={origin:u}),this.mySock=new Z(this.connURL,[],a)}else{a={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new Z(this.connURL,[],a)}}catch(l){this.log_("Error instantiating WebSocket.");var c=l.message||l.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&r.log_(e),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Z&&!e.forceDisallow_},e.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.E)(e);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if(Object(o.f)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.K)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),et=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Y,tt]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=tt&&tt.isAvailable(),o=i&&!tt.previouslyFailed();if(e.webSocketOnly&&(i||E("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[tt];else{var s=this.transports_=[];try{for(var u=Object(a.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),nt=function(){function t(t,e,n,r,i,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new et(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?I("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):I("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&E("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),rt=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),it=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.f)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(a.f)([],Object(a.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.f)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),ot=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Object(o.y)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(a.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(it),at=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function st(){return new at("")}function ut(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ct(t){return t.pieces_.length-t.pieceNum_}function lt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new at(t.pieces_,e)}function ht(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ft(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function dt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new at(e,0)}function pt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof at)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new at(n,0)}function vt(t){return t.pieceNum_>=t.pieces_.length}function gt(t,e){var n=ut(t),r=ut(e);if(null===n)return e;if(n===r)return gt(lt(t),lt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function yt(t,e){for(var n=ft(t,0),r=ft(e,0),i=0;i<n.length&&i<r.length;i++){var o=O(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function mt(t,e){if(ct(t)!==ct(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function bt(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(ct(t)>ct(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var _t=function(t,e){this.errorPrefix_=e,this.parts_=ft(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.I)(this.parts_[n]);wt(this)};function wt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+It(t))}function It(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Tt,Et,St=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(n="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(n="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(a.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.f)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(it),Ct=function(t){function e(n,r,i,a,s,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=s,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.A)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),St.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&ot.getInstance().on("online",l.onOnline_,l),l}return Object(a.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.K)(i)),Object(o.f)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[a];void 0!==t&&i===t&&(delete e.outstandingGets_[a],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise},e.prototype.listen=function(t,e,n,r){var i=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Object(o.f)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(o.f)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"===typeof t&&Object(o.k)(t,"w")){var n=Object(o.H)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();E("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.r)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.D)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(o.f)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.K)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):I("Unrecognized action received from server: "+Object(o.K)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.f)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,i())};this.realtime_={close:l,sendRequest:function(t){Object(o.f)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then((function(e){u?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),t.authToken_=e&&e.accessToken,c=new nt(a,t.repoInfo_,t.applicationId_,n,r,i,(function(e){E(e+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")}),s))})).then(null,(function(e){t.log_("Failed to get token: "+e),u||(t.repoInfo_.nodeAdmin&&E(e),l())}))}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.v)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return P(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new at(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Object(a.g)(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,Object(a.g)(s.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.A)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+$.replace(/\./g,"-")]=1,Object(o.y)()?t["framework.cordova"]=1:Object(o.B)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ot.getInstance().currentlyOnline();return Object(o.v)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(rt),kt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ot=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new kt(C,t),r=new kt(C,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return kt.MIN},t}(),Nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Tt},set:function(t){Tt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return O(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.g)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return kt.MIN},e.prototype.maxPost=function(){return new kt(k,Tt)},e.prototype.makePost=function(t,e){return Object(o.f)("string"===typeof t,"KeyIndex indexValue must always be a string."),new kt(t,Tt)},e.prototype.toString=function(){return".key"},e}(Ot),At=new Nt,Pt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Rt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Dt.EMPTY_NODE,this.right=null!=o?o:Dt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Dt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Dt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),xt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Rt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Dt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Pt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Pt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Pt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Pt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new xt,t}();function Lt(t,e){return O(t.name,e.name)}function jt(t,e){return O(t,e)}var Mt,Ft,Ut,qt=function(t){return"number"===typeof t?"number:"+D(t):"string:"+t},Vt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.f)("string"===typeof e||"number"===typeof e||"object"===typeof e&&Object(o.k)(e,".sv"),"Priority must be a string or number.")}else Object(o.f)(t===Et||t.isEmpty(),"priority of unexpected type.");Object(o.f)(t===Et||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Bt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.f)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Vt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Mt},set:function(t){Mt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return vt(e)?this:".priority"===ut(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ut(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.f)(".priority"!==r||1===ct(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(lt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+qt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?D(this.value_):this.value_,this.lazyHash_=v(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.f)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.f)(i>=0,"Unknown leaf type: "+n),Object(o.f)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Kt,zt,Wt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?O(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return kt.MIN},e.prototype.maxPost=function(){return new kt(k,new Bt("[PRIORITY-POST]",Ut))},e.prototype.makePost=function(t,e){var n=Ft(t);return new kt(e,new Bt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ot)),Ht=Math.log(2),Gt=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Ht,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Qt=function(t,e,n,r){t.sort(e);var i=function(e){for(var r=null,i=null,o=t.length,a=function(e,r){var i=o-e,a=o;o-=e;var u=function e(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=t[r],a=n?n(o):o,new Rt(a,o.node,Rt.BLACK,null,null);var u=parseInt(s/2,10)+r,c=e(r,u),l=e(u+1,i);return o=t[u],a=n?n(o):o,new Rt(a,o.node,Rt.BLACK,c,l)}(i+1,a),c=t[i],l=n?n(c):c;s(new Rt(l,c.node,r,null,u))},s=function(t){r?(r.left=t,r=t):(i=t,r=t)},u=0;u<e.count;++u){var c=e.nextBitIsOne(),l=Math.pow(2,e.count-(u+1));c?a(l,Rt.BLACK):(a(l,Rt.BLACK),a(l,Rt.RED))}return i}(new Gt(t.length));return new Dt(r||e,i)},Yt={},Xt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.f)(Yt&&Wt,"ChildrenNode.ts has not been loaded"),Kt=Kt||new t({".priority":Yt},{".priority":Wt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.H)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Dt?e:null},t.prototype.hasIndex=function(t){return Object(o.k)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.f)(e!==At,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],s=!1,u=n.getIterator(kt.Wrap),c=u.getNext();c;)s=s||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=s?Qt(i,e.getCompare()):Yt;var l=e.toString(),h=Object(a.a)({},this.indexSet_);h[l]=e;var f=Object(a.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.F)(this.indexes_,(function(t,i){var a=Object(o.H)(r.indexSet_,i);if(Object(o.f)(a,"Missing index implementation for "+i),t===Yt){if(a.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(kt.Wrap),c=u.getNext();c;)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),Qt(s,a.getCompare())}return Yt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new kt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.F)(this.indexes_,(function(t){if(t===Yt)return t;var r=n.get(e.name);return r?t.remove(new kt(e.name,r)):t})),this.indexSet_)},t}(),$t=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Vt(this.priorityNode_),this.children_.isEmpty()&&Object(o.f)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return zt||(zt=new t(new Dt(jt),null,Xt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||zt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?zt:e},t.prototype.getChild=function(t){var e=ut(t);return null===e?this:this.getImmediateChild(e).getChild(lt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.f)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new kt(e,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?zt:this.priorityNode_;return new t(i,s,a)},t.prototype.updateChild=function(t,e){var n=ut(t);if(null===n)return e;Object(o.f)(".priority"!==ut(t)||1===ct(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(lt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Wt,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+qt(this.getPriority().val())+":"),this.forEachChild(Wt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":v(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new kt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new kt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new kt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,kt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,kt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Jt?-1:0},t.prototype.withIndex=function(e){if(e===At||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===At||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Wt),r=e.getIterator(Wt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===At?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Jt=new(function(t){function e(){return t.call(this,new Dt(jt),$t.EMPTY_NODE,Xt.Default)||this}return Object(a.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return $t.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}($t));Object.defineProperties(kt,{MIN:{value:new kt(C,$t.EMPTY_NODE)},MAX:{value:new kt(k,Jt)}}),Nt.__EMPTY_NODE=$t.EMPTY_NODE,Bt.__childrenNodeConstructor=$t,Et=Jt,function(t){Ut=t}(Jt);function Zt(t,e){if(void 0===e&&(e=null),null===t)return $t.EMPTY_NODE;if("object"===typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.f)(null===e||"string"===typeof e||"number"===typeof e||"object"===typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"===typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==typeof t||".sv"in t)return new Bt(t,Zt(e));if(t instanceof Array){var n=$t.EMPTY_NODE;return x(t,(function(e,r){if(Object(o.k)(t,e)&&"."!==e.substring(0,1)){var i=Zt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Zt(e))}var r=[],i=!1;if(x(t,(function(t,e){if("."!==t.substring(0,1)){var n=Zt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new kt(t,n)))}})),0===r.length)return $t.EMPTY_NODE;var a=Qt(r,Lt,(function(t){return t.name}),jt);if(i){var s=Qt(r,Wt.getCompare());return new $t(a,Zt(e),new Xt({".priority":s},{".priority":Wt}))}return new $t(a,Zt(e),Xt.Default)}!function(t){Ft=t}(Zt);var te=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.f)(!vt(e)&&".priority"!==ut(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(a.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?O(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Zt(t),r=$t.EMPTY_NODE.updateChild(this.indexPath_,n);return new kt(e,r)},e.prototype.maxPost=function(){var t=$t.EMPTY_NODE.updateChild(this.indexPath_,Jt);return new kt(k,t)},e.prototype.toString=function(){return ft(this.indexPath_,0).join("/")},e}(Ot),ee=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?O(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return kt.MIN},e.prototype.maxPost=function(){return kt.MAX},e.prototype.makePost=function(t,e){var n=Zt(t);return new kt(e,n)},e.prototype.toString=function(){return".value"},e}(Ot)),ne="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",re=function(){var t=0,e=[];return function(n){var r,i=n===t;t=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=ne.charAt(n%64),n=Math.floor(n/64);Object(o.f)(0===n,"Cannot push at time == 0");var s=a.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=ne.charAt(e[r]);return Object(o.f)(20===s.length,"nextPushId: Length should be 20."),s}}(),ie=function(t){if("2147483647"===t)return"-";var e=j(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return k;var o=n[i],a=ne.charAt(ne.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},oe=function(t){if("-2147483648"===t)return C;var e=j(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=ne.charAt(ne.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ae(t){return{type:"value",snapshotNode:t}}function se(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ue(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ce(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var le=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,a){Object(o.f)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(ue(e,s)):Object(o.f)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(se(e,n)):a.trackChildChange(ce(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Wt,(function(t,r){e.hasChild(t)||n.trackChildChange(ue(t,r))})),e.isLeafNode()||e.forEachChild(Wt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ce(e,r,i))}else n.trackChildChange(se(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?$t.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),he=function(){function t(e){this.indexedFilter_=new le(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new kt(e,n))||(n=$t.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=$t.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority($t.EMPTY_NODE);var i=this;return e.forEachChild(Wt,(function(t,e){i.matches(new kt(t,e))||(r=r.updateImmediateChild(t,$t.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),fe=function(){function t(t){this.rangedFilter_=new he(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new kt(e,n))||(n=$t.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=$t.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=$t.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority($t.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,$t.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;Object(o.f)(u.numChildren()===this.limit_,"");var c=new kt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ce(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ue(e,f));var v=u.updateImmediateChild(e,$t.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(se(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(ue(l.name,l.node)),i.trackChildChange(se(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,$t.EMPTY_NODE)):t},t}(),de=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.f)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:C},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.f)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:k},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.f)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Wt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function pe(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function ve(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function ge(t,e){var n=t.copy();return n.index_=e,n}function ye(t){var e,n={};return t.isDefault()||(t.index_===Wt?e="$priority":t.index_===ee?e="$value":t.index_===At?e="$key":(Object(o.f)(t.index_ instanceof te,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.K)(e),t.startSet_&&(n.startAt=Object(o.K)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.K)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.K)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.K)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function me(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Wt&&(e.i=t.index_.toString()),e}var be=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(a.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.f)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var a=this,s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=ye(t._queryParams);this.restRequest_(s+".json",l,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&a.onDataUpdate_(s,n,!1,r),Object(o.H)(a.listens_,u)===c)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=ye(t._queryParams),r=t._path.toString(),i=new o.a;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var a=i&&i.accessToken;a&&(e.auth=a);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.G)(e);r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.E)(u.responseText)}catch(e){E("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&E("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()}))},e}(rt),_e=function(){function t(){this.rootNode_=$t.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function we(){return{value:null,children:new Map}}function Ie(t,e,n){if(vt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ut(e);t.children.has(r)||t.children.set(r,we()),Ie(t.children.get(r),e=lt(e),n)}}function Te(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}(t,(function(t,r){Te(r,new at(e.toString()+"/"+t),n)}))}var Ee,Se=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(a.a)({},t);return this.last_&&x(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Ce=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Se(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;x(e,(function(e,i){i>0&&Object(o.k)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}();function ke(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ee||(Ee={}));var Oe,Ne=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ee.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(vt(this.path)){if(null!=this.affectedTree.value)return Object(o.f)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new at(e));return new t(st(),n,this.revert)}return Object(o.f)(ut(this.path)===e,"operationForChild called for unrelated child."),new t(lt(this.path),this.affectedTree,this.revert)},t}(),Ae=function(){function t(t,e){this.source=t,this.path=e,this.type=Ee.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return vt(this.path)?new t(this.source,st()):new t(this.source,lt(this.path))},t}(),Pe=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ee.OVERWRITE}return t.prototype.operationForChild=function(e){return vt(this.path)?new t(this.source,st(),this.snap.getImmediateChild(e)):new t(this.source,lt(this.path),this.snap)},t}(),Re=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ee.MERGE}return t.prototype.operationForChild=function(e){if(vt(this.path)){var n=this.children.subtree(new at(e));return n.isEmpty()?null:n.value?new Pe(this.source,st(),n.value):new t(this.source,st(),n)}return Object(o.f)(ut(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,lt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),xe=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(vt(t))return this.isFullyInitialized()&&!this.filtered_;var e=ut(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),De=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function Le(t,e,n,r,i,a){var s=r.filter((function(t){return t.type===n}));s.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.g)("Should only compare child_ events.");var r=new kt(e.childName,e.snapshotNode),i=new kt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)})),s.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,a);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function je(t,e){return{eventCache:t,serverCache:e}}function Me(t,e,n,r){return je(new xe(e,n,r),t.serverCache)}function Fe(t,e,n,r){return je(t.eventCache,new xe(e,n,r))}function Ue(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ve=function(){function t(t,e){void 0===e&&(Oe||(Oe=new Dt(N)),e=Oe),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return x(e,(function(t,e){n=n.set(new at(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:st(),value:this.value};if(vt(t))return null;var n=ut(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(lt(t),e);return null!=i?{path:pt(new at(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(vt(e))return this;var n=ut(e),r=this.children.get(n);return null!==r?r.subtree(lt(e)):new t(null)},t.prototype.set=function(e,n){if(vt(e))return new t(n,this.children);var r=ut(e),i=(this.children.get(r)||new t(null)).set(lt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(vt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ut(e),r=this.children.get(n);if(r){var i=r.remove(lt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(vt(t))return this.value;var e=ut(t),n=this.children.get(e);return n?n.get(lt(t)):null},t.prototype.setTree=function(e,n){if(vt(e))return n;var r=ut(e),i=(this.children.get(r)||new t(null)).setTree(lt(e),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(st(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(pt(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,st(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(vt(t))return null;var i=ut(t),o=this.children.get(i);return o?o.findOnPath_(lt(t),pt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,st(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(vt(e))return this;this.value&&r(n,this.value);var i=ut(e),o=this.children.get(i);return o?o.foreachOnPath_(lt(e),pt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(st(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(pt(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Be=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ve(null))},t}();function Ke(t,e,n){if(vt(e))return new Be(new Ve(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=gt(i,e);return o=o.updateChild(a,n),new Be(t.writeTree_.set(i,o))}var s=new Ve(n),u=t.writeTree_.setTree(e,s);return new Be(u)}function ze(t,e,n){var r=t;return x(n,(function(t,n){r=Ke(r,pt(e,t),n)})),r}function We(t,e){if(vt(e))return Be.empty();var n=t.writeTree_.setTree(e,new Ve(null));return new Be(n)}function He(t,e){return null!=Ge(t,e)}function Ge(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(gt(n.path,e)):null}function Qe(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Wt,(function(t,n){e.push(new kt(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new kt(t,n.value))})),e}function Ye(t,e){if(vt(e))return t;var n=Ge(t,e);return new Be(null!=n?new Ve(n):t.writeTree_.subtree(e))}function Xe(t){return t.writeTree_.isEmpty()}function $e(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,a){".priority"===n?(Object(o.f)(null!==a.value,"Priority writes must always be leaf nodes"),i=a.value):r=t(pt(e,n),a,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(pt(e,".priority"),i)),r}(st(),t.writeTree_,e)}function Je(t,e){return fn(e,t)}function Ze(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));Object(o.f)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,a=!1,s=t.allWrites.length-1;i&&s>=0;){var u=t.allWrites[s];u.visible&&(s>=n&&tn(u,r.path)?i=!1:bt(r.path,u.path)&&(a=!0)),s--}if(i){if(a)return function(t){t.visibleWrites=nn(t.allWrites,en,st()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0;r.snap?t.visibleWrites=We(t.visibleWrites,r.path):x(r.children,(function(e){t.visibleWrites=We(t.visibleWrites,pt(r.path,e))}));return!0}return!1}function tn(t,e){if(t.snap)return bt(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&bt(pt(t.path,n),e))return!0;return!1}function en(t){return t.visible}function nn(t,e,n){for(var r=Be.empty(),i=0;i<t.length;++i){var a=t[i];if(e(a)){var s=a.path,u=void 0;if(a.snap)bt(n,s)?r=Ke(r,u=gt(n,s),a.snap):bt(s,n)&&(u=gt(s,n),r=Ke(r,st(),a.snap.getChild(u)));else{if(!a.children)throw Object(o.g)("WriteRecord should have .snap or .children");if(bt(n,s))r=ze(r,u=gt(n,s),a.children);else if(bt(s,n))if(vt(u=gt(s,n)))r=ze(r,st(),a.children);else{var c=Object(o.H)(a.children,ut(u));if(c){var l=c.getChild(lt(u));r=Ke(r,st(),l)}}}}}return r}function rn(t,e,n,r,i){if(r||i){var o=Ye(t.visibleWrites,e);if(!i&&Xe(o))return n;if(i||null!=n||He(o,st())){return $e(nn(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(bt(t.path,e)||bt(e,t.path))}),e),n||$t.EMPTY_NODE)}return null}var a=Ge(t.visibleWrites,e);if(null!=a)return a;var s=Ye(t.visibleWrites,e);return Xe(s)?n:null!=n||He(s,st())?$e(s,n||$t.EMPTY_NODE):null}function on(t,e,n,r){return rn(t.writeTree,t.treePath,e,n,r)}function an(t,e){return function(t,e,n){var r=$t.EMPTY_NODE,i=Ge(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Wt,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=Ye(t.visibleWrites,e);return n.forEachChild(Wt,(function(t,e){var n=$e(Ye(o,new at(t)),e);r=r.updateImmediateChild(t,n)})),Qe(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return Qe(Ye(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function sn(t,e,n,r){return function(t,e,n,r,i){Object(o.f)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=pt(e,n);if(He(t.visibleWrites,a))return null;var s=Ye(t.visibleWrites,a);return Xe(s)?i.getChild(n):$e(s,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function un(t,e){return function(t,e){return Ge(t.visibleWrites,e)}(t.writeTree,pt(t.treePath,e))}function cn(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=Ye(t.visibleWrites,e),c=Ge(u,st());if(null!=c)s=c;else{if(null==n)return[];s=$e(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(t.writeTree,t.treePath,e,n,r,i,o)}function ln(t,e,n){return function(t,e,n,r){var i=pt(e,n),o=Ge(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?$e(Ye(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function hn(t,e){return fn(pt(t.treePath,e),t.writeTree)}function fn(t,e){return{treePath:t,writeTree:e}}var dn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.f)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.f)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ce(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ue(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,se(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.g)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ce(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),pn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),vn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new xe(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ln(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:qe(this.viewCache_),i=cn(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();function gn(t,e,n,r,i){var a,s,u=new dn;if(n.type===Ee.OVERWRITE){var c=n;c.source.fromUser?a=bn(t,e,c.path,c.snap,r,i,u):(Object(o.f)(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.serverCache.isFiltered()&&!vt(c.path),a=mn(t,e,c.path,c.snap,r,i,s,u))}else if(n.type===Ee.MERGE){var l=n;l.source.fromUser?a=function(t,e,n,r,i,o,a){var s=e;return r.foreach((function(r,u){var c=pt(n,r);_n(e,ut(c))&&(s=bn(t,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=pt(n,r);_n(e,ut(c))||(s=bn(t,s,c,u,i,o,a))})),s}(t,e,l.path,l.children,r,i,u):(Object(o.f)(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered(),a=In(t,e,l.path,l.children,r,i,s,u))}else if(n.type===Ee.ACK_USER_WRITE){var h=n;a=h.revert?function(t,e,n,r,i,a){var s;if(null!=un(r,n))return e;var u=new vn(r,e,i),c=e.eventCache.getNode(),l=void 0;if(vt(n)||".priority"===ut(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=on(r,qe(e));else{var f=e.serverCache.getNode();Object(o.f)(f instanceof $t,"serverChildren would be complete if leaf node"),h=an(r,f)}h=h,l=t.filter.updateFullNode(c,h,a)}else{var d=ut(n),p=ln(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?t.filter.updateChild(c,d,p,lt(n),u,a):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,$t.EMPTY_NODE,lt(n),u,a):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(s=on(r,qe(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,s,a))}return s=e.serverCache.isFullyInitialized()||null!=un(r,st()),Me(e,l,s,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,a){if(null!=un(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(vt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return mn(t,e,n,u.getNode().getChild(n),i,o,s,a);if(vt(n)){var c=new Ve(null);return u.getNode().forEachChild(At,(function(t,e){c=c.set(new at(t),e)})),In(t,e,n,c,i,o,s,a)}return e}var l=new Ve(null);return r.foreach((function(t,e){var r=pt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),In(t,e,n,l,i,o,s,a)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Ee.LISTEN_COMPLETE)throw Object(o.g)("Unknown operation type: "+n.type);a=function(t,e,n,r,i){var o=e.serverCache,a=Fe(e,o.getNode(),o.isFullyInitialized()||vt(n),o.isFiltered());return yn(t,a,n,r,pn,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ue(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ae(Ue(e)))}}(e,a,f),{viewCache:a,changes:f}}function yn(t,e,n,r,i,a){var s=e.eventCache;if(null!=un(r,n))return e;var u=void 0,c=void 0;if(vt(n))if(Object(o.f)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=qe(e),h=an(r,l instanceof $t?l:$t.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,a)}else{var f=on(r,qe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,a)}else{var d=ut(n);if(".priority"===d){Object(o.f)(1===ct(n),"Can't have a priority with additional path components");var p=s.getNode(),v=sn(r,n,p,c=e.serverCache.getNode());u=null!=v?t.filter.updatePriority(p,v):s.getNode()}else{var g=lt(n),y=void 0;if(s.isCompleteForChild(d)){c=e.serverCache.getNode();var m=sn(r,n,s.getNode(),c);y=null!=m?s.getNode().getImmediateChild(d).updateChild(g,m):s.getNode().getImmediateChild(d)}else y=ln(r,d,e.serverCache);u=null!=y?t.filter.updateChild(s.getNode(),d,y,g,i,a):s.getNode()}}return Me(e,u,s.isFullyInitialized()||vt(n),t.filter.filtersNodes())}function mn(t,e,n,r,i,o,a,s){var u,c=e.serverCache,l=a?t.filter:t.filter.getIndexedFilter();if(vt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=ut(n);if(!c.isCompleteForPath(n)&&ct(n)>1)return e;var d=lt(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,pn,null)}var v=Fe(e,u,c.isFullyInitialized()||vt(n),l.filtersNodes());return yn(t,v,n,i,new vn(i,v,o),s)}function bn(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new vn(i,e,o);if(vt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=Me(e,u,!0,t.filter.filtersNodes());else{var h=ut(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=Me(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=lt(n),d=c.getNode().getImmediateChild(h),p=void 0;if(vt(f))p=r;else{var v=l.getCompleteChild(h);p=null!=v?".priority"===ht(f)&&v.getChild(dt(f)).isEmpty()?v:v.updateChild(f,r):$t.EMPTY_NODE}if(d.equals(p))s=e;else s=Me(e,t.filter.updateChild(c.getNode(),h,p,f,l,a),c.isFullyInitialized(),t.filter.filtersNodes())}}return s}function _n(t,e){return t.eventCache.isCompleteForChild(e)}function wn(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function In(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=vt(n)?r:new Ve(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=wn(0,e.serverCache.getNode().getImmediateChild(n),r);c=mn(t,c,new at(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=wn(0,e.serverCache.getNode().getImmediateChild(n),r);c=mn(t,c,new at(n),h,i,o,a,s)}})),c}var Tn,En=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new le(r.getIndex()),o=(n=r).loadsAllData()?new le(n.getIndex()):n.hasLimit()?new fe(n):new he(n);this.processor_=function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode($t.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode($t.EMPTY_NODE,s.getNode(),null),l=new xe(u,a.isFullyInitialized(),i.filtersNodes()),h=new xe(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=je(h,l),this.eventGenerator_=new De(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Sn(t,e){var n=qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!vt(e)&&!n.getImmediateChild(ut(e)).isEmpty())?n.getChild(e):null}function Cn(t){return 0===t.eventRegistrations_.length}function kn(t,e,n){var r=[];if(n){Object(o.f)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var a=[],s=0;s<t.eventRegistrations_.length;++s){var u=t.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(s+1));break}}else a.push(u)}t.eventRegistrations_=a}else t.eventRegistrations_=[];return r}function On(t,e,n,r){e.type===Ee.MERGE&&null!==e.source.queryId&&(Object(o.f)(qe(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.f)(Ue(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,s=t.viewCache_,u=gn(t.processor_,s,e,n,r);return i=t.processor_,a=u.viewCache,Object(o.f)(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.f)(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.f)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Nn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Nn(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),Le(t,i,"child_removed",e,r,n),Le(t,i,"child_added",e,r,n),Le(t,i,"child_moved",o,r,n),Le(t,i,"child_changed",e,r,n),Le(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}var An,Pn=function(){this.views=new Map};function Rn(t,e,n,r){var i,s,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.f)(null!=c,"SyncTree gave us an op for an invalid query."),On(c,e,n,r)}var l=[];try{for(var h=Object(a.g)(t.views.values()),f=h.next();!f.done;f=h.next()){c=f.value;l=l.concat(On(c,e,n,r))}}catch(d){i={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}function xn(t,e,n,r,i){var o=e._queryIdentifier,a=t.views.get(o);if(!a){var s=on(n,i?r:null),u=!1;s?u=!0:r instanceof $t?(s=an(n,r),u=!1):(s=$t.EMPTY_NODE,u=!1);var c=je(new xe(s,u,!1),new xe(r,i,!1));return new En(e,c)}return a}function Dn(t,e,n,r,i,o){var a=xn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Wt,(function(t,e){r.push(se(t,e))})),n.isFullyInitialized()&&r.push(ae(n.getNode())),Nn(t,r,n.getNode(),e)}(a,n)}function Ln(t,e,n,r){var i,s,u=e._queryIdentifier,c=[],l=[],h=qn(t);if("default"===u)try{for(var f=Object(a.g)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p=Object(a.e)(d.value,2),v=p[0],g=p[1];l=l.concat(kn(g,n,r)),Cn(g)&&(t.views.delete(v),g.query._queryParams.loadsAllData()||c.push(g.query))}}catch(y){i={error:y}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}else(g=t.views.get(u))&&(l=l.concat(kn(g,n,r)),Cn(g)&&(t.views.delete(u),g.query._queryParams.loadsAllData()||c.push(g.query)));return h&&!qn(t)&&c.push(new(Object(o.f)(Tn,"Reference.ts has not been loaded"),Tn)(e._repo,e._path)),{removed:c,events:l}}function jn(t){var e,n,r=[];try{for(var i=Object(a.g)(t.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Mn(t,e){var n,r,i=null;try{for(var o=Object(a.g)(t.views.values()),s=o.next();!s.done;s=o.next()){var u=s.value;i=i||Sn(u,e)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Fn(t,e){if(e._queryParams.loadsAllData())return Vn(t);var n=e._queryIdentifier;return t.views.get(n)}function Un(t,e){return null!=Fn(t,e)}function qn(t){return null!=Vn(t)}function Vn(t){var e,n;try{for(var r=Object(a.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Bn=1,Kn=function(t){this.listenProvider_=t,this.syncPointTree_=new Ve(null),this.pendingWriteTree_={visibleWrites:Be.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function zn(t,e,n,r,i){return function(t,e,n,r,i){Object(o.f)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ke(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Jn(t,new Pe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Wn(t,e,n,r){!function(t,e,n,r){Object(o.f)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=ze(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Ve.fromObject(n);return Jn(t,new Re({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}function Hn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(Ze(t.pendingWriteTree_,e)){var i=new Ve(null);return null!=r.snap?i=i.set(st(),!0):x(r.children,(function(t){i=i.set(new at(t),!0)})),Jn(t,new Ne(r.path,i,n))}return[]}function Gn(t,e,n){return Jn(t,new Pe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Qn(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e._queryIdentifier||Un(o,e))){var s=Ln(o,e,n,r);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(t){return t._queryParams.loadsAllData()})),l=t.syncPointTree_.findOnPath(i,(function(t,e){return qn(e)}));if(c&&!l){var h=t.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(t){return t.fold((function(t,e,n){if(e&&qn(e))return[Vn(e)];var r=[];return e&&(r=jn(e)),x(n,(function(t,e){r=r.concat(e)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,g=Zn(t,p);t.listenProvider_.startListening(or(v),tr(t,v),g.hashFn,g.onComplete)}}if(!l&&u.length>0&&!r)if(c){t.listenProvider_.stopListening(or(e),null)}else u.forEach((function(e){var n=t.queryToTagMap.get(er(e));t.listenProvider_.stopListening(or(e),n)}));!function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=er(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,u)}return a}function Yn(t,e,n){var r=e._path,i=null,a=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=gt(t,r);i=i||Mn(e,n),a=a||qn(e)}));var s,u=t.syncPointTree_.get(r);(u?(a=a||qn(u),i=i||Mn(u,st())):(u=new Pn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i)?s=!0:(s=!1,i=$t.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=Mn(e,st());n&&(i=i.updateImmediateChild(t,n))})));var c=Un(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=er(e);Object(o.f)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Bn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=Dn(u,e,n,Je(t.pendingWriteTree_,r),i,s);if(!c&&!a){var d=Fn(u,e);f=f.concat(function(t,e,n){var r=e._path,i=tr(t,e),a=Zn(t,n),s=t.listenProvider_.startListening(or(e),i,a.hashFn,a.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.f)(!qn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!vt(t)&&e&&qn(e))return[Vn(e).query];var r=[];return e&&(r=r.concat(jn(e).map((function(t){return t.query})))),x(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(or(h),tr(t,h))}return s}(t,e,d))}return f}function Xn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=Mn(n,gt(t,e));if(r)return r}));return rn(r,e,i,n,!0)}function $n(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=gt(t,n);r=r||Mn(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||Mn(i,st()):(i=new Pn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new xe(r,!0,!1):null;return function(t){return Ue(t.viewCache_)}(xn(i,e,Je(t.pendingWriteTree_,e._path),o?a.getNode():$t.EMPTY_NODE,o))}function Jn(t,e){return function t(e,n,r,i){if(vt(e.path))return function t(e,n,r,i){var o=n.get(st());null==r&&null!=o&&(r=Mn(o,st()));var a=[];n.children.inorderTraversal((function(n,o){var s=r?r.getImmediateChild(n):null,u=hn(i,n),c=e.operationForChild(n);c&&(a=a.concat(t(c,o,s,u)))})),o&&(a=a.concat(Rn(o,e,i,r)));return a}(e,n,r,i);var o=n.get(st());null==r&&null!=o&&(r=Mn(o,st()));var a=[],s=ut(e.path),u=e.operationForChild(s),c=n.children.get(s);if(c&&u){var l=r?r.getImmediateChild(s):null,h=hn(i,s);a=a.concat(t(u,c,l,h))}return o&&(a=a.concat(Rn(o,e,i,r))),a}(e,t.syncPointTree_,null,Je(t.pendingWriteTree_,st()))}function Zn(t,e){var n=e.query,r=tr(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||$t.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=nr(t,n);if(r){var i=rr(r),o=i.path,a=i.queryId,s=gt(o,e);return ir(t,o,new Ae(ke(a),s))}return[]}(t,n._path,r):function(t,e){return Jn(t,new Ae({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Qn(t,n,null,i)}}}function tr(t,e){var n=er(e);return t.queryToTagMap.get(n)}function er(t){return t._path.toString()+"$"+t._queryIdentifier}function nr(t,e){return t.tagToQueryMap.get(e)}function rr(t){var e=t.indexOf("$");return Object(o.f)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new at(t.substr(0,e))}}function ir(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.f)(r,"Missing sync point for query tag that we're tracking"),Rn(r,n,Je(t.pendingWriteTree_,e),null)}function or(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(o.f)(An,"Reference.ts has not been loaded"),An)(t._repo,t._path):t}var ar=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),sr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=pt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Xn(this.syncTree_,this.path_)},t}(),ur=function(t,e,n){return t&&"object"===typeof t?(Object(o.f)(".sv"in t,"Unexpected leaf node or priority contents"),"string"===typeof t[".sv"]?cr(t[".sv"],e,n):"object"===typeof t[".sv"]?lr(t[".sv"],e):void Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},cr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.f)(!1,"Unexpected server value: "+t)}},lr=function(t,e,n){t.hasOwnProperty("increment")||Object(o.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!==typeof r&&Object(o.f)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.f)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},hr=function(t,e,n,r){return dr(e,new sr(n,t),r)},fr=function(t,e,n){return dr(t,new ar(e),n)};function dr(t,e,n){var r,i=t.getPriority().val(),o=ur(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=ur(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Bt(s,Zt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Bt(o))),u.forEachChild(Wt,(function(t,i){var o=dr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var pr=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function vr(t,e){for(var n=e instanceof at?e:new at(e),r=t,i=ut(n);null!==i;){var a=Object(o.H)(r.node.children,i)||{children:{},childCount:0};r=new pr(i,r,a),i=ut(n=lt(n))}return r}function gr(t){return t.node.value}function yr(t,e){t.node.value=e,wr(t)}function mr(t){return t.node.childCount>0}function br(t,e){x(t.node.children,(function(n,r){e(new pr(n,t,r))}))}function _r(t){return new at(null===t.parent?t.name:_r(t.parent)+"/"+t.name)}function wr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===gr(t)&&!mr(t)}(n),i=Object(o.k)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,wr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,wr(t))}(t.parent,t.name,t)}var Ir=/[\[\].#$\/\u0000-\u001F\u007F]/,Tr=/[\[\].#$\u0000-\u001F\u007F]/,Er=function(t){return"string"===typeof t&&0!==t.length&&!Ir.test(t)},Sr=function(t){return"string"===typeof t&&0!==t.length&&!Tr.test(t)},Cr=function(t){return null===t||"string"===typeof t||"number"===typeof t&&!S(t)||t&&"object"===typeof t&&Object(o.k)(t,".sv")},kr=function(t,e,n,r){r&&void 0===e||Or(Object(o.o)(t,"value"),e,n)},Or=function t(e,n,r){var i=r instanceof at?new _t(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+It(i));if("function"===typeof n)throw new Error(e+"contains a function "+It(i)+" with contents = "+n.toString());if(S(n))throw new Error(e+"contains "+n.toString()+" "+It(i));if("string"===typeof n&&n.length>10485760/3&&Object(o.I)(n)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+It(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,s=!1;if(x(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!Er(n)))throw new Error(e+" contains an invalid key ("+n+") "+It(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(o.I)(e),wt(t)}(i,n),t(e,r,i),function(t){var e=t.parts_.pop();t.byteLength_-=Object(o.I)(e),t.parts_.length>0&&(t.byteLength_-=1)}(i)})),a&&s)throw new Error(e+' contains ".value" child '+It(i)+" in addition to actual children.")}},Nr=function(t,e,n,r){if(!r||void 0!==e){var i=Object(o.o)(t,"values");if(!e||"object"!==typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var a=[];x(e,(function(t,e){var r=new at(t);if(Or(i,e,pt(n,r)),".priority"===ht(r)&&!Cr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=ft(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Er(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(yt);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&bt(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,a)}},Ar=function(t,e,n){if(!n||void 0!==e){if(S(e))throw new Error(Object(o.o)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Cr(e))throw new Error(Object(o.o)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Pr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.o)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Rr=function(t,e,n,r){if((!r||void 0!==n)&&!Er(n))throw new Error(Object(o.o)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},xr=function(t,e,n,r){if((!r||void 0!==n)&&!Sr(n))throw new Error(Object(o.o)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Dr=function(t,e){if(".info"===ut(e))throw new Error(t+" failed = Can't modify data under /.info/")},Lr=function(t,e){var n=e.path.toString();if("string"!==typeof e.repoInfo.host||0===e.repoInfo.host.length||!Er(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Sr(t)}(n))throw new Error(Object(o.o)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},jr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Object(o.o)(t,e)+"must be a boolean.")},Mr=function(){this.eventLists_=[],this.recursionDepth_=0};function Fr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||mt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ur(t,e,n){Fr(t,n),Vr(t,(function(t){return mt(t,e)}))}function qr(t,e,n){Fr(t,n),Vr(t,(function(t){return bt(t,e)||bt(e,t)}))}function Vr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i)e(i.path)?(Br(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}n&&(t.eventLists_=[]),t.recursionDepth_--}function Br(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();y&&_("event: "+n.toString()),M(r)}}}var Kr=function(){function t(t,e,n){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Mr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=we(),this.transactionQueueTree_=new pr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function zr(t,e,n){if(t.stats_=G(t.repoInfo_),t.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new be(t.repoInfo_,(function(e,n,r,i){Gr(t,e,n,r,i)}),t.authTokenProvider_),setTimeout((function(){return Qr(t,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.K)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ct(t.repoInfo_,e,(function(e,n,r,i){Gr(t,e,n,r,i)}),(function(e){Qr(t,e)}),(function(e){!function(t,e){x(e,(function(e,n){Yr(t,e,n)}))}(t,e)}),t.authTokenProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.statsReporter_=function(t,e){var n=t.toString();return H[n]||(H[n]=e()),H[n]}(t.repoInfo_,(function(){return new Ce(t.stats_,t.server_)})),t.infoData_=new _e,t.infoSyncTree_=new Kn({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=Gn(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Yr(t,"connected",!1),t.serverSyncTree_=new Kn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);qr(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function Wr(t){var e=t.infoData_.getNode(new at(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Hr(t){return(e=(e={timestamp:Wr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Gr(t,e,n,r,i){t.dataUpdateCount++;var a=new at(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s=[];if(i)if(r){var u=Object(o.F)(n,(function(t){return Zt(t)}));s=function(t,e,n,r){var i=nr(t,r);if(i){var o=rr(i),a=o.path,s=o.queryId,u=gt(a,e),c=Ve.fromObject(n);return ir(t,a,new Re(ke(s),u,c))}return[]}(t.serverSyncTree_,a,u,i)}else{var c=Zt(n);s=function(t,e,n,r){var i=nr(t,r);if(null!=i){var o=rr(i),a=o.path,s=o.queryId,u=gt(a,e);return ir(t,a,new Pe(ke(s),u,n))}return[]}(t.serverSyncTree_,a,c,i)}else if(r){var l=Object(o.F)(n,(function(t){return Zt(t)}));s=function(t,e,n){var r=Ve.fromObject(n);return Jn(t,new Re({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,a,l)}else{var h=Zt(n);s=Gn(t.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=ai(t,a)),qr(t.eventQueue_,f,s)}function Qr(t,e){Yr(t,"connected",e),!1===e&&function(t){ni(t,"onDisconnectEvents");var e=Hr(t),n=we();Te(t.onDisconnect_,st(),(function(r,i){var o=hr(r,i,t.serverSyncTree_,e);Ie(n,r,o)}));var r=[];Te(n,st(),(function(e,n){r=r.concat(Gn(t.serverSyncTree_,e,n));var i=li(t,e);ai(t,i)})),t.onDisconnect_=we(),qr(t.eventQueue_,st(),r)}(t)}function Yr(t,e,n){var r=new at("/.info/"+e),i=Zt(n);t.infoData_.updateSnapshot(r,i);var o=Gn(t.infoSyncTree_,r,i);qr(t.eventQueue_,r,o)}function Xr(t){return t.nextWriteId_++}function $r(t,e,n,r,i){ni(t,"set",{path:e.toString(),value:n,priority:r});var o=Hr(t),a=Zt(n,r),s=Xn(t.serverSyncTree_,e),u=fr(a,s,o),c=Xr(t),l=zn(t.serverSyncTree_,e,u,c,!0);Fr(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||E("set at "+e+" failed: "+n);var a=Hn(t.serverSyncTree_,c,!o);qr(t.eventQueue_,e,a),ri(t,i,n,r)}));var h=li(t,e);ai(t,h),qr(t.eventQueue_,h,[])}function Jr(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&function t(e,n){if(vt(n))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var r=e.value;return e.value=null,r.forEachChild(Wt,(function(t,n){Ie(e,new at(t),n)})),t(e,n)}if(e.children.size>0){var i=ut(n);if(n=lt(n),e.children.has(i))t(e.children.get(i),n)&&e.children.delete(i);return 0===e.children.size}return!0}(t.onDisconnect_,e),ri(t,n,r,i)}))}function Zr(t,e,n,r){var i=Zt(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Ie(t.onDisconnect_,e,i),ri(t,r,n,o)}))}function ti(t,e,n){var r;r=".info"===ut(e._path)?Qn(t.infoSyncTree_,e,n):Qn(t.serverSyncTree_,e,n),Ur(t.eventQueue_,e._path,r)}function ei(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}function ni(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(a.f)([r],Object(a.e)(e)))}function ri(t,e,n,r){e&&M((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function ii(t,e,n){return Xn(t.serverSyncTree_,e,n)||$t.EMPTY_NODE}function oi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||ci(t,e),gr(e)){var n=ui(t,e);Object(o.f)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=ii(t,e,r),a=i,s=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.f)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=gt(e,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=e;t.server_.put(f.toString(),h,(function(r){ni(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat(Hn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},s=0;s<n.length;s++)a(s);ci(t,vr(t.transactionQueueTree_,e)),oi(t,t.transactionQueueTree_),qr(t.eventQueue_,e,i);for(s=0;s<o.length;s++)M(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{E("transaction at "+f.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}ai(t,e)}}),s)}(t,_r(e),n)}else mr(e)&&br(e,(function(e){oi(t,e)}))}function ai(t,e){var n=si(t,e),r=_r(n);return function(t,e,n){if(0===e.length)return;for(var r=[],i=[],a=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),s=function(s){var u,c,l=e[s],h=gt(n,l.path),f=!1;if(Object(o.f)(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)f=!0,u=l.abortReason,i=i.concat(Hn(t.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)f=!0,u="maxretry",i=i.concat(Hn(t.serverSyncTree_,l.currentWriteId,!0));else{var d=ii(t,l.path,a);l.currentInputSnapshot=d;var p=e[s].update(d.val());if(void 0!==p){Or("transaction failed: Data returned ",p,l.path);var v=Zt(p);"object"===typeof p&&null!=p&&Object(o.k)(p,".priority")||(v=v.updatePriority(d.getPriority()));var g=l.currentWriteId,y=Hr(t),m=fr(v,d,y);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=m,l.currentWriteId=Xr(t),a.splice(a.indexOf(g),1),i=(i=i.concat(zn(t.serverSyncTree_,l.path,m,l.currentWriteId,l.applyLocally))).concat(Hn(t.serverSyncTree_,g,!0))}else f=!0,u="nodata",i=i.concat(Hn(t.serverSyncTree_,l.currentWriteId,!0))}qr(t.eventQueue_,n,i),i=[],f&&(e[s].status=2,c=e[s].unwatcher,setTimeout(c,Math.floor(0)),e[s].onComplete&&("nodata"===u?r.push((function(){return e[s].onComplete(null,!1,e[s].currentInputSnapshot)})):r.push((function(){return e[s].onComplete(new Error(u),!1,null)}))))},u=0;u<e.length;u++)s(u);ci(t,t.transactionQueueTree_);for(u=0;u<r.length;u++)M(r[u]);oi(t,t.transactionQueueTree_)}(t,ui(t,n),r),r}function si(t,e){var n,r=t.transactionQueueTree_;for(n=ut(e);null!==n&&void 0===gr(r);)r=vr(r,n),n=ut(e=lt(e));return r}function ui(t,e){var n=[];return function t(e,n,r){var i=gr(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);br(n,(function(n){t(e,n,r)}))}(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function ci(t,e){var n=gr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,yr(e,n.length>0?n:void 0)}br(e,(function(e){ci(t,e)}))}function li(t,e){var n=_r(si(t,e)),r=vr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){hi(t,e)})),hi(t,r),function t(e,n,r,i){r&&!i&&n(e),br(e,(function(e){t(e,n,!0,i)})),r&&i&&n(e)}(r,(function(e){hi(t,e)})),n}function hi(t,e){var n=gr(e);if(n){for(var r=[],i=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(Object(o.f)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):(Object(o.f)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Hn(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===a?yr(e,void 0):n.length=a+1,qr(t.eventQueue_,_r(e),i);for(s=0;s<r.length;s++)M(r[s])}}var fi=function(t,e){var n=di(t),r=n.namespace;"firebase.com"===n.domain&&T(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&E("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new B(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new at(n.pathString)}},di=function(t){var e="",n="",r="",i="",o="",s=!0,u="https",c=443;if("string"===typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(a.g)(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):E("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),o=r}"ns"in d&&(o=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:i,namespace:o}},pi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.K)(this.snapshot.exportVal())},t}(),vi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),gi=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(o.f)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),yi=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.a;return Jr(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){Dr("OnDisconnect.remove",this._path);var t=new o.a;return Zr(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){Dr("OnDisconnect.set",this._path),kr("OnDisconnect.set",t,this._path,!1);var e=new o.a;return Zr(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){Dr("OnDisconnect.setWithPriority",this._path),kr("OnDisconnect.setWithPriority",t,this._path,!1),Ar("OnDisconnect.setWithPriority",e,!1);var n=new o.a;return function(t,e,n,r,i){var o=Zt(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&Ie(t.onDisconnect_,e,o),ri(t,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){Dr("OnDisconnect.update",this._path),Nr("OnDisconnect.update",t,this._path,!1);var e=new o.a;return function(t,e,n,r){if(Object(o.v)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void ri(t,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&x(n,(function(n,r){var i=Zt(r);Ie(t.onDisconnect_,pt(e,n),i)})),ri(t,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),mi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return vt(this._path)?null:ht(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ii(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=me(this._queryParams),e=P(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return me(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(o.p)(e))instanceof t))return!1;var n=this._repo===e._repo,r=mt(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function bi(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function _i(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===At){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==C)throw new Error(r);if("string"!==typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==k)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(t.getIndex()===Wt){if(null!=e&&!Cr(e)||null!=n&&!Cr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.f)(t.getIndex()instanceof te||t.getIndex()===ee,"unknown index type."),null!=e&&"object"===typeof e||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function wi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Ii=function(t){function e(e,n){return t.call(this,e,n,new de,!1)||this}return Object(a.c)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=dt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(mi),Ti=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new at(e),r=Ci(this.ref,e);return new t(this._node.getChild(n),r,Wt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,Ci(n.ref,r),Wt))}))},t.prototype.hasChild=function(t){var e=new at(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ei(t,e){return(t=Object(o.p)(t))._checkNotDeleted("ref"),void 0!==e?Ci(t._root,e):t._root}function Si(t,e){(t=Object(o.p)(t))._checkNotDeleted("refFromURL");var n=fi(e,t._repo.repoInfo_.nodeAdmin);Lr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||T("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ei(t,n.path.toString())}function Ci(t,e){var n,r,i,a;return null===ut((t=Object(o.p)(t))._path)?(n="child",r="path",a=!1,(i=e)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),xr(n,r,i,a)):xr("child","path",e,!1),new Ii(t._repo,pt(t._path,e))}function ki(t,e){t=Object(o.p)(t),Dr("push",t._path),kr("push",e,t._path,!0);var n,r=Wr(t._repo),i=re(r),a=Ci(t,i),s=Ci(t,i);return n=null!=e?Ni(s,e).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function Oi(t){return Dr("remove",t._path),Ni(t,null)}function Ni(t,e){t=Object(o.p)(t),Dr("set",t._path),kr("set",e,t._path,!1);var n=new o.a;return $r(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Ai(t,e){t=Object(o.p)(t),Dr("setPriority",t._path),Ar("setPriority",e,!1);var n=new o.a;return $r(t._repo,pt(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function Pi(t,e,n){if(Dr("setWithPriority",t._path),kr("setWithPriority",e,t._path,!1),Ar("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.a;return $r(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function Ri(t,e){Nr("update",e,t._path,!1);var n=new o.a;return function(t,e,n,r){ni(t,"update",{path:e.toString(),value:n});var i=!0,o=Hr(t),a={};if(x(n,(function(n,r){i=!1,a[n]=hr(pt(e,n),Zt(r),t.serverSyncTree_,o)})),i)_("update() called with empty data.  Don't do anything."),ri(t,r,"ok",void 0);else{var s=Xr(t),u=Wn(t.serverSyncTree_,e,a,s);Fr(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||E("update at "+e+" failed: "+n);var a=Hn(t.serverSyncTree_,s,!o),u=a.length>0?ai(t,e):e;qr(t.eventQueue_,u,a),ri(t,r,n,i)})),x(n,(function(n){var r=li(t,pt(e,n));ai(t,r)})),qr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function xi(t){return function(t,e){var n=$n(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=Zt(n),i=Gn(t.serverSyncTree_,e._path,r);return Ur(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return ni(t,"get for query "+Object(o.K)(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=Object(o.p)(t))._repo,t).then((function(e){return new Ti(e,new Ii(t._repo,t._path),t._queryParams.getIndex())}))}var Di=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new pi("value",this,new Ti(t.snapshotNode,new Ii(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new vi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Li=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new vi(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.f)(null!=t.childName,"Child events should have a childName.");var n=Ci(new Ii(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new pi(t.type,this,new Ti(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function ji(t,e,n,r,i){var o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){a(e,n),ti(t._repo,t,c)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new gi(n,o||void 0),c="value"===e?new Di(u):new Li(e,u);return function(t,e,n){var r;r=".info"===ut(e._path)?Yn(t.infoSyncTree_,e,n):Yn(t.serverSyncTree_,e,n),Ur(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ti(t._repo,t,c)}}function Mi(t,e,n,r){return ji(t,"value",e,n,r)}function Fi(t,e,n,r){return ji(t,"child_added",e,n,r)}function Ui(t,e,n,r){return ji(t,"child_changed",e,n,r)}function qi(t,e,n,r){return ji(t,"child_moved",e,n,r)}function Vi(t,e,n,r){return ji(t,"child_removed",e,n,r)}function Bi(t,e,n){var r=null,i=n?new gi(n):null;"value"===e?r=new Di(i):e&&(r=new Li(e,i)),ti(t._repo,t,r)}var Ki=function(){},zi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a.c)(e,t),e.prototype._apply=function(t){kr("endAt",this._value,t._path,!0);var e=ve(t._queryParams,this._value,this._key);if(wi(e),_i(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mi(t._repo,t._path,e,t._orderByCalled)},e}(Ki);function Wi(t,e){return Rr("endAt","key",e,!0),new zi(t,e)}var Hi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a.c)(e,t),e.prototype._apply=function(t){kr("endBefore",this._value,t._path,!1);var e=function(t,e,n){var r;return t.index_===At?("string"===typeof e&&(e=oe(e)),r=ve(t,e,n)):r=ve(t,e,null==n?C:oe(n)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(wi(e),_i(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mi(t._repo,t._path,e,t._orderByCalled)},e}(Ki);function Gi(t,e){return Rr("endBefore","key",e,!0),new Hi(t,e)}var Qi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a.c)(e,t),e.prototype._apply=function(t){kr("startAt",this._value,t._path,!0);var e=pe(t._queryParams,this._value,this._key);if(wi(e),_i(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new mi(t._repo,t._path,e,t._orderByCalled)},e}(Ki);function Yi(t,e){return void 0===t&&(t=null),Rr("startAt","key",e,!0),new Qi(t,e)}var Xi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a.c)(e,t),e.prototype._apply=function(t){kr("startAfter",this._value,t._path,!1);var e=function(t,e,n){var r;if(t.index_===At)"string"===typeof e&&(e=ie(e)),r=pe(t,e,n);else{r=pe(t,e,null==n?k:ie(n))}return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(wi(e),_i(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new mi(t._repo,t._path,e,t._orderByCalled)},e}(Ki);function $i(t,e){return Rr("startAfter","key",e,!0),new Xi(t,e)}var Ji=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(a.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new mi(t._repo,t._path,function(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}(t._queryParams,this._limit),t._orderByCalled)},e}(Ki);function Zi(t){if("number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ji(t)}var to=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(a.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new mi(t._repo,t._path,function(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}(t._queryParams,this._limit),t._orderByCalled)},e}(Ki);function eo(t){if("number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new to(t)}var no=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(a.c)(e,t),e.prototype._apply=function(t){bi(t,"orderByChild");var e=new at(this._path);if(vt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new te(e),r=ge(t._queryParams,n);return _i(r),new mi(t._repo,t._path,r,!0)},e}(Ki);function ro(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return xr("orderByChild","path",t,!1),new no(t)}var io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),e.prototype._apply=function(t){bi(t,"orderByKey");var e=ge(t._queryParams,At);return _i(e),new mi(t._repo,t._path,e,!0)},e}(Ki);function oo(){return new io}var ao=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),e.prototype._apply=function(t){bi(t,"orderByPriority");var e=ge(t._queryParams,Wt);return _i(e),new mi(t._repo,t._path,e,!0)},e}(Ki);function so(){return new ao}var uo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.c)(e,t),e.prototype._apply=function(t){bi(t,"orderByValue");var e=ge(t._queryParams,ee);return _i(e),new mi(t._repo,t._path,e,!0)},e}(Ki);function co(){return new uo}var lo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(a.c)(e,t),e.prototype._apply=function(t){if(kr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new zi(this._value,this._key)._apply(new Qi(this._value,this._key)._apply(t))},e}(Ki);function ho(t,e){return Rr("equalTo","key",e,!0),new lo(t,e)}function fo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=Object(o.p)(t);try{for(var u=Object(a.g)(r),c=u.next();!c.done;c=u.next()){var l=c.value;s=l._apply(s)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s}!function(t){Object(o.f)(!Tn,"__referenceConstructor has already been defined"),Tn=t}(Ii),function(t){Object(o.f)(!An,"__referenceConstructor has already been defined"),An=t}(Ii);var po={},vo=!1;function go(e,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||T("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",e.options.projectId),o=e.options.projectId+"-default-rtdb.firebaseio.com");var a,s=fi(o,i),u=s.repoInfo,c=void 0;"undefined"!==typeof t&&(c=Object({NODE_ENV:"production",PUBLIC_URL:"/olx-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,o="http://"+c+"?ns="+u.namespace,u=(s=fi(o,i)).repoInfo):a=!s.repoInfo.secure;var l=i&&a?new q:new U(e.name,e.options,n);Lr("Invalid Firebase Database URL",s),vt(s.path)||T("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n){var r=po[e.name];r||(r={},po[e.name]=r);var i=r[t.toURLString()];i&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return i=new Kr(t,vo,n),r[t.toURLString()]=i,i}(u,e,l);return new yo(h,e)}var yo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(zr(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ii(this._repo,st())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){return this._checkNotDeleted("delete"),function(t,e){var n=po[e];n&&n[t.key]===t||T("Database "+e+"("+t.repoInfo_+") has already been deleted."),ei(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&T("Cannot call "+t+" on a deleted database.")},t}();function mo(t,e,n){(t=Object(o.p)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&T("Cannot call useEmulator() after instance has already been initialized."),function(t,e,n){t.repoInfo_=new B(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new q)}(t._repoInternal,e,n)}function bo(t){(t=Object(o.p)(t))._checkNotDeleted("goOffline"),ei(t._repo)}function _o(t){var e;(t=Object(o.p)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume("repo_interrupt")}function wo(t,e){b(t,e)}var Io={".sv":"timestamp"};var To=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Eo(t,e,n){var r;if(t=Object(o.p)(t),Dr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new o.a,s=Mi(t,(function(){}));return function(t,e,n,r,i,a){ni(t,"transaction on "+e);var s={path:e,update:n,onComplete:r,status:null,order:p(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=ii(t,e,void 0);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{Or("transaction failed: Data returned ",c,s.path),s.status=0;var l=vr(t.transactionQueueTree_,e),h=gr(l)||[];h.push(s),yr(l,h);var f=void 0;if("object"===typeof c&&null!==c&&Object(o.k)(c,".priority"))f=Object(o.H)(c,".priority"),Object(o.f)(Cr(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(Xn(t.serverSyncTree_,e)||$t.EMPTY_NODE).getPriority().val();var d=Hr(t),v=Zt(c,f),g=fr(v,u,d);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=g,s.currentWriteId=Xr(t);var y=zn(t.serverSyncTree_,e,g,s.currentWriteId,s.applyLocally);qr(t.eventQueue_,e,y),oi(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(function(e,n,r){var i=null;e?a.reject(e):(i=new Ti(r,new Ii(t._repo,t._path),Wt),a.resolve(new To(n,i)))}),s,i),a.promise}var So=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(o.L)("OnDisconnect.cancel",0,1,arguments.length),Object(o.M)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){Object(o.L)("OnDisconnect.remove",0,1,arguments.length),Object(o.M)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){Object(o.L)("OnDisconnect.set",1,2,arguments.length),Object(o.M)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){Object(o.L)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(o.M)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(Object(o.L)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(o.M)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),Co=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.L)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),ko=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(o.L)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(o.L)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(o.L)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(o.L)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(o.L)("DataSnapshot.child",0,1,arguments.length),e=String(e),xr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(o.L)("DataSnapshot.hasChild",1,1,arguments.length),xr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(o.L)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(o.L)("DataSnapshot.forEach",1,1,arguments.length),Object(o.M)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return Object(o.L)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.L)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(o.L)("DataSnapshot.ref",0,0,arguments.length),new No(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Oo=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var a,s=this;Object(o.L)("Query.on",2,4,arguments.length),Object(o.M)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new ko(s.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return Mi(this._delegate,c,l),n;case"child_added":return Fi(this._delegate,c,l),n;case"child_removed":return Vi(this._delegate,c,l),n;case"child_changed":return Ui(this._delegate,c,l),n;case"child_moved":return qi(this._delegate,c,l),n;default:throw new Error(Object(o.o)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(o.L)("Query.off",0,3,arguments.length),Pr("Query.off",t,!0),Object(o.M)("Query.off","callback",e,!0),Object(o.N)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Bi(this._delegate,t,r)}else Bi(this._delegate,t)},t.prototype.get=function(){var t=this;return xi(this._delegate).then((function(e){return new ko(t.database,e)}))},t.prototype.once=function(e,n,r,i){var a=this;Object(o.L)("Query.once",1,4,arguments.length),Object(o.M)("Query.once","callback",n,!0);var s=t.getCancelAndContextArgs_("Query.on",r,i),u=new o.a,c=function(t,e){var r=new ko(a.database,t);n&&n.call(s.context,r,e),u.resolve(r)};c.userCallback=n,c.context=s.context;var l=function(t){s.cancel&&s.cancel.call(s.context,t),u.reject(t)};switch(e){case"value":Mi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Fi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Vi(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Ui(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":qi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(o.o)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(o.L)("Query.limitToFirst",1,1,arguments.length),new t(this.database,fo(this._delegate,Zi(e)))},t.prototype.limitToLast=function(e){return Object(o.L)("Query.limitToLast",1,1,arguments.length),new t(this.database,fo(this._delegate,eo(e)))},t.prototype.orderByChild=function(e){return Object(o.L)("Query.orderByChild",1,1,arguments.length),new t(this.database,fo(this._delegate,ro(e)))},t.prototype.orderByKey=function(){return Object(o.L)("Query.orderByKey",0,0,arguments.length),new t(this.database,fo(this._delegate,oo()))},t.prototype.orderByPriority=function(){return Object(o.L)("Query.orderByPriority",0,0,arguments.length),new t(this.database,fo(this._delegate,so()))},t.prototype.orderByValue=function(){return Object(o.L)("Query.orderByValue",0,0,arguments.length),new t(this.database,fo(this._delegate,co()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(o.L)("Query.startAt",0,2,arguments.length),new t(this.database,fo(this._delegate,Yi(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(o.L)("Query.startAfter",0,2,arguments.length),new t(this.database,fo(this._delegate,$i(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(o.L)("Query.endAt",0,2,arguments.length),new t(this.database,fo(this._delegate,Wi(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(o.L)("Query.endBefore",0,2,arguments.length),new t(this.database,fo(this._delegate,Gi(e,n)))},t.prototype.equalTo=function(e,n){return Object(o.L)("Query.equalTo",1,2,arguments.length),new t(this.database,fo(this._delegate,ho(e,n)))},t.prototype.toString=function(){return Object(o.L)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(o.L)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(o.L)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(o.M)(t,"cancel",r.cancel,!0),r.context=n,Object(o.N)(t,"context",r.context,!0);else if(e)if("object"===typeof e&&null!==e)r.context=e;else{if("function"!==typeof e)throw new Error(Object(o.o)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new No(this.database,new Ii(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),No=function(t){function e(e,n){var r=t.call(this,e,new mi(n._repo,n._path,new de,!1))||this;return r.database=e,r._delegate=n,r}return Object(a.c)(e,t),e.prototype.getKey=function(){return Object(o.L)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(o.L)("Reference.child",1,1,arguments.length),"number"===typeof t&&(t=String(t)),new e(this.database,Ci(this._delegate,t))},e.prototype.getParent=function(){Object(o.L)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(o.L)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(o.L)("Reference.set",1,2,arguments.length),Object(o.M)("Reference.set","onComplete",e,!0);var n=Ni(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(Object(o.L)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,E("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Dr("Reference.update",this._delegate._path),Object(o.M)("Reference.update","onComplete",e,!0);var i=Ri(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){Object(o.L)("Reference.setWithPriority",2,3,arguments.length),Object(o.M)("Reference.setWithPriority","onComplete",n,!0);var r=Pi(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){Object(o.L)("Reference.remove",0,1,arguments.length),Object(o.M)("Reference.remove","onComplete",t,!0);var e=Oi(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;Object(o.L)("Reference.transaction",1,3,arguments.length),Object(o.M)("Reference.transaction","transactionUpdate",t,!1),Object(o.M)("Reference.transaction","onComplete",e,!0),jr("Reference.transaction","applyLocally",n,!0);var i=Eo(this._delegate,t,{applyLocally:n}).then((function(t){return new Co(t.committed,new ko(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){Object(o.L)("Reference.setPriority",1,2,arguments.length),Object(o.M)("Reference.setPriority","onComplete",e,!0);var n=Ai(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;Object(o.L)("Reference.push",0,2,arguments.length),Object(o.M)("Reference.push","onComplete",n,!0);var i=ki(this._delegate,t),a=i.then((function(t){return new e(r.database,t)}));n&&a.then((function(){return n(null)}),(function(t){return n(t)}));var s=new e(this.database,i);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},e.prototype.onDisconnect=function(){return Dr("Reference.onDisconnect",this._delegate._path),new So(new yi(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Oo),Ao=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e){mo(this._delegate,t,e)},t.prototype.ref=function(t){if(Object(o.L)("database.ref",0,1,arguments.length),t instanceof No){var e=Si(this._delegate,t.toString());return new No(this,e)}e=Ei(this._delegate,t);return new No(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(o.L)(e,1,1,arguments.length);var n=Si(this._delegate,t);return new No(this,n)},t.prototype.goOffline=function(){return Object(o.L)("database.goOffline",0,0,arguments.length),bo(this._delegate)},t.prototype.goOnline=function(){return Object(o.L)("database.goOnline",0,0,arguments.length),_o(this._delegate)},t.ServerValue={TIMESTAMP:Io,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}();var Po=Object.freeze({__proto__:null,forceLongPolling:function(){tt.forceDisallow(),Y.forceAllow()},forceWebSockets:function(){Y.forceDisallow()},isWebSocketsAvailable:function(){return tt.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!==typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Se(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);x(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){var n,r;t.stats_.incrementCounter(e),n=t.statsReporter_,r=e,n.statsToReport_[r]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,o=t.customAuthImpl,a=t.namespace,s=t.nodeAdmin,u=void 0!==s&&s;J(r);var c=new i.c("auth-internal",new i.b("database-standalone"));return c.setComponent(new i.a("auth-internal",(function(){return o}),"PRIVATE")),{instance:new Ao(go(e,c,n,u),e),namespace:a}}}),Ro=Ct;Ct.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ct.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var xo=nt,Do=B,Lo=Object.freeze({__proto__:null,DataConnection:Ro,RealTimeConnection:xo,hijackHash:function(t){var e=Ct.prototype.put;return Ct.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Ct.prototype.put=e}},ConnectionTarget:Do,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){vo=t}(t)}}),jo=Ao.ServerValue;!function(t){J(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new i.a("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return new Ao(go(r,i,n),r)}),"PUBLIC").setServiceProps({Reference:No,Query:Oo,Database:Ao,DataSnapshot:ko,enableLogging:wo,INTERNAL:Po,ServerValue:jo,TEST_ACCESS:Lo}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.9.12"),Object(o.A)()&&(e.exports=n)}(r.a)}).call(this,n(21),n(51)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";n(27)},function(t,e,n){(function(e,n){t.exports=function(){"use strict";!function(t){var e,n,r,i,o,a,s,u,c,l;function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t?String(t):t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function p(t){this.map={},t instanceof p?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function g(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function y(t){var e=new FileReader,n=g(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(r&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(i&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(o&&r&&s(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var t,e,n=v(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,n=g(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(t,e){var n,r=(e=e||{}).body;if(t instanceof _){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new p(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new p(e.headers)),this.method=(t=(n=e.method||this.method||"GET").toUpperCase(),-1<c.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){var n;t&&(t=(n=t.split("=")).shift().replace(/\+/g," "),n=n.join("=").replace(/\+/g," "),e.append(decodeURIComponent(t),decodeURIComponent(n)))})),e}function I(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new p(e.headers),this.url=e.url||"",this._initBody(t)}t.fetch||(e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,r="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in t,(o="ArrayBuffer"in t)&&(a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<a.indexOf(Object.prototype.toString.call(t))}),p.prototype.append=function(t,e){t=h(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},p.prototype.delete=function(t){delete this.map[h(t)]},p.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},p.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},p.prototype.set=function(t,e){this.map[h(t)]=f(e)},p.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},p.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),d(t)},p.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},p.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),d(t)},n&&(p.prototype[Symbol.iterator]=p.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},I.error=function(){var t=new I(null,{status:0,statusText:""});return t.type="error",t},l=[301,302,303,307,308],I.redirect=function(t,e){if(-1===l.indexOf(e))throw new RangeError("Invalid status code");return new I(null,{status:e,headers:{location:t}})},t.Headers=p,t.Request=_,t.Response=I,t.fetch=function(t,e){return new Promise((function(n,i){var o=new _(t,e),a=new XMLHttpRequest;a.onload=function(){var t,e={status:a.status,statusText:a.statusText,headers:(r=a.getAllResponseHeaders()||"",t=new p,r.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":");(e=n.shift().trim())&&(n=n.join(":").trim(),t.append(e,n))})),t)};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;n(new I(r,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),o.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),a.send(void 0===o._bodyInit?null:o._bodyInit)}))},t.fetch.polyfill=!0)}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function r(t){var e={exports:{}};return t(e,e.exports),e.exports}function i(t){try{return!!t()}catch(t){return!0}}function o(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function a(t){return _.call(t).slice(8,-1)}function s(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function u(t){return I(s(t))}function c(t){return"object"==typeof t?null!==t:"function"==typeof t}function l(t,e){if(!c(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!c(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!c(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!c(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function h(t,e){return T.call(t,e)}function f(t){return S?E.createElement(t):{}}function d(t){if(!c(t))throw TypeError(String(t)+" is not an object");return t}function p(e,n){try{P(v,e,n)}catch(t){v[e]=n}return n}var v=(Pe=function(t){return t&&t.Math==Math&&t})("object"==typeof globalThis&&globalThis)||Pe("object"==typeof window&&window)||Pe("object"==typeof self&&self)||Pe("object"==typeof t&&t)||function(){return this}()||Function("return this")(),g=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),y={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,b={f:m&&!y.call({1:2},1)?function(t){return!!(t=m(this,t))&&t.enumerable}:y},_={}.toString,w="".split,I=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?w.call(t,""):Object(t)}:Object,T={}.hasOwnProperty,E=v.document,S=c(E)&&c(E.createElement),C=!g&&!i((function(){return 7!=Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a})),k=Object.getOwnPropertyDescriptor,O={f:g?k:function(t,e){if(t=u(t),e=l(e,!0),C)try{return k(t,e)}catch(t){}if(h(t,e))return o(!b.f.call(t,e),t[e])}},N=Object.defineProperty,A={f:g?N:function(t,e,n){if(d(t),e=l(e,!0),d(n),C)try{return N(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},P=g?function(t,e,n){return A.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t},R=v[xe="__core-js_shared__"]||p(xe,{}),x=Function.toString;function D(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++G+Q).toString(36)}"function"!=typeof R.inspectSource&&(R.inspectSource=function(t){return x.call(t)});var L,j,M,F,U,q,V,B,K=R.inspectSource,z="function"==typeof(ie=v.WeakMap)&&/native code/.test(K(ie)),W=!1,H=r((function(t){(t.exports=function(t,e){return R[t]||(R[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})})),G=0,Q=Math.random(),Y=H("keys"),X=function(t){return Y[t]||(Y[t]=D(t))},$={},J=v.WeakMap;function Z(t){return"function"==typeof t?t:void 0}function tt(t,e){return arguments.length<2?Z(ft[t])||Z(v[t]):ft[t]&&ft[t][e]||v[t]&&v[t][e]}function et(t){return isNaN(t=+t)?0:(0<t?pt:dt)(t)}function nt(t){return 0<t?vt(et(t),9007199254740991):0}function rt(t,e){var n,r=u(t),i=0,o=[];for(n in r)!h($,n)&&h(r,n)&&o.push(n);for(;e.length>i;)h(r,n=e[i++])&&(~mt(o,n)||o.push(n));return o}function it(t,e){for(var n=Tt(e),r=A.f,i=O.f,o=0;o<n.length;o++){var a=n[o];h(t,a)||r(t,a,i(e,a))}}function ot(t,e){var n,r,i,o=t.target,a=t.global,s=t.stat,u=a?v:s?v[o]||p(o,{}):(v[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=At(u,n))&&i.value:u[n],!Nt(a?n:o+(s?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;it(r,i)}(t.sham||i&&i.sham)&&P(r,"sham",!0),ht(u,n,r,t)}}function at(t){return Object(s(t))}function st(){}function ut(t){return"<script>"+t+"</"+Ut+">"}V=z?(L=R.state||(R.state=new J),j=L.get,M=L.has,F=L.set,U=function(t,e){return e.facade=t,F.call(L,t,e),e},q=function(t){return j.call(L,t)||{}},function(t){return M.call(L,t)}):(B=X("state"),$[B]=!0,U=function(t,e){return e.facade=t,P(t,B,e),e},q=function(t){return h(t,B)?t[B]:{}},function(t){return h(t,B)});var ct,lt={set:U,get:q,has:V,enforce:function(t){return V(t)?q(t):U(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=q(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},ht=r((function(t){var e=lt.get,n=lt.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||h(i,"name")||P(i,"name",e),(o=n(i)).source||(o.source=r.join("string"==typeof e?e:""))),t!==v?(a?!u&&t[e]&&(s=!0):delete t[e],s?t[e]=i:P(t,e,i)):s?t[e]=i:p(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||K(this)}))})),ft=v,dt=Math.ceil,pt=Math.floor,vt=Math.min,gt=Math.max,yt=Math.min,mt=((Oe=function(t){return function(e,n,r){var i,o=u(e),a=nt(o.length),s=function(t,e){return(t=et(t))<0?gt(t+e,0):yt(t,e)}(r,a);if(t&&n!=n){for(;s<a;)if((i=o[s++])!=i)return!0}else for(;s<a;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}})(!0),Oe(!1)),bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_t=bt.concat("length","prototype"),wt={f:Object.getOwnPropertyNames||function(t){return rt(t,_t)}},It={f:Object.getOwnPropertySymbols},Tt=tt("Reflect","ownKeys")||function(t){var e=wt.f(d(t)),n=It.f;return n?e.concat(n(t)):e},Et=/#|\.prototype\./,St=(Pe=function(t,e){return(t=Ct[St(t)])==Ot||t!=kt&&("function"==typeof e?i(e):!!e)}).normalize=function(t){return String(t).replace(Et,".").toLowerCase()},Ct=Pe.data={},kt=Pe.NATIVE="N",Ot=Pe.POLYFILL="P",Nt=Pe,At=O.f,Pt=(t=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),X("IE_PROTO")),Rt=Object.prototype,xt=t?Object.getPrototypeOf:function(t){return h(t=at(t),Pt)?t[Pt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Rt:null},Dt=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(n){}return function(n,r){return d(n),function(t){if(!c(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Lt=Object.keys||function(t){return rt(t,bt)},jt=g?Object.defineProperties:function(t,e){d(t);for(var n,r=Lt(e),i=r.length,o=0;o<i;)A.f(t,n=r[o++],e[n]);return t},Mt=tt("document","documentElement"),Ft="prototype",Ut="script",qt=X("IE_PROTO"),Vt=function(){try{ct=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;Vt=ct?function(t){t.write(ut("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ct):((t=f("iframe")).style.display="none",Mt.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(ut("document.F=Object")),t.close(),t.F);for(var e=bt.length;e--;)delete Vt[Ft][bt[e]];return Vt()};function Bt(t){return h(Qt,t)||(Gt&&h(Yt,t)?Qt[t]=Yt[t]:Qt[t]=Xt("Symbol."+t)),Qt[t]}function Kt(t){return void 0!==t&&($t.Array===t||Zt[Jt]===t)}function zt(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function Wt(t,e,n){if(zt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}$[qt]=!0;var Ht=Object.create||function(t,e){var n;return null!==t?(st[Ft]=d(t),n=new st,st[Ft]=null,n[qt]=t):n=Vt(),void 0===e?n:jt(n,e)},Gt=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())})),Qt=(y=Gt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,H("wks")),Yt=v.Symbol,Xt=y?Yt:Yt&&Yt.withoutSetter||D,$t={},Jt=Bt("iterator"),Zt=Array.prototype;function te(t){if(null!=t)return t[ue]||t["@@iterator"]||$t[se(t)]}function ee(t){var e=t.return;return void 0!==e&&d(e.call(t)).value}function ne(t,e){this.stopped=t,this.result=e}function re(t,e,n){function r(t){return o&&ee(o),new ne(!0,t)}function i(t){return f?(d(t),v?g(t[0],t[1],r):g(t[0],t[1])):v?g(t,r):g(t)}var o,a,s,u,c,l,h=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),v=!(!n||!n.INTERRUPTED),g=Wt(e,h,1+f+v);if(p)o=t;else{if("function"!=typeof(p=te(t)))throw TypeError("Target is not iterable");if(Kt(p)){for(a=0,s=nt(t.length);a<s;a++)if((u=i(t[a]))&&u instanceof ne)return u;return new ne(!1)}o=p.call(t)}for(c=o.next;!(l=c.call(o)).done;){try{u=i(l.value)}catch(t){throw ee(o),t}if("object"==typeof u&&u&&u instanceof ne)return u}return new ne(!1)}(xe={})[Bt("toStringTag")]="z";var ie="[object z]"===String(xe),oe=Bt("toStringTag"),ae="Arguments"==a(function(){return arguments}()),se=ie?a:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),oe))?t:ae?a(e):"Object"==(t=a(e))&&"function"==typeof e.callee?"Arguments":t},ue=Bt("iterator"),ce=function t(e,n){var r=this;return r instanceof t?(Dt&&(r=Dt(new Error(void 0),xt(r))),void 0!==n&&P(r,"message",String(n)),re(e,(n=[]).push,{that:n}),P(r,"errors",n),r):new t(e,n)};function le(t,e,n){for(var r in e)ht(t,r,e[r],n);return t}function he(t,e,n){t&&!h(t=n?t:t.prototype,ge)&&ve(t,ge,{configurable:!0,value:e})}function fe(t){var e=tt(t);t=A.f,g&&e&&!e[ye]&&t(e,ye,{configurable:!0,get:function(){return this}})}function de(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}ce.prototype=Ht(Error.prototype,{constructor:o(5,ce),message:o(5,""),name:o(5,"AggregateError")}),ot({global:!0},{AggregateError:ce}),z=ie?{}.toString:function(){return"[object "+se(this)+"]"},ie||ht(Object.prototype,"toString",z,{unsafe:!0});var pe=v.Promise,ve=A.f,ge=Bt("toStringTag"),ye=Bt("species"),me=Bt("iterator"),be=!1;try{var _e=0,we={next:function(){return{done:!!_e++}},return:function(){be=!0}};we[me]=function(){return this},Array.from(we,(function(){throw 2}))}catch(Oa){}function Ie(t,e){if(!e&&!be)return!1;var n=!1;try{var r={};r[me]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Te(t,e){var n;return void 0===(t=d(t).constructor)||null==(n=d(t)[ke])?e:zt(n)}function Ee(t){var e;je.hasOwnProperty(t)&&(e=je[t],delete je[t],e())}function Se(t){return function(){Ee(t)}}var Ce,ke=Bt("species"),Oe=(J=tt("navigator","userAgent")||"",/(iphone|ipod|ipad).*applewebkit/i.test(J)),Ne="process"==a(v.process),Ae=v.location,Pe=v.setImmediate,Re=(t=v.clearImmediate,v.process),xe=v.MessageChannel,De=v.Dispatch,Le=0,je={},Me="onreadystatechange";ie=function(t){Ee(t.data)},z=function(t){v.postMessage(t+"",Ae.protocol+"//"+Ae.host)},Pe&&t||(Pe=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return je[++Le]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ce(Le),Le},t=function(t){delete je[t]},Ne?Ce=function(t){Re.nextTick(Se(t))}:De&&De.now?Ce=function(t){De.now(Se(t))}:xe&&!Oe?(He=(xe=new xe).port2,xe.port1.onmessage=ie,Ce=Wt(He.postMessage,He,1)):v.addEventListener&&"function"==typeof postMessage&&!v.importScripts&&Ae&&"file:"!==Ae.protocol&&!i(z)?(Ce=z,v.addEventListener("message",ie,!1)):Ce=Me in f("script")?function(t){Mt.appendChild(f("script"))[Me]=function(){Mt.removeChild(this),Ee(t)}}:function(t){setTimeout(Se(t),0)});var Fe,Ue,qe,Ve,Be,Ke,ze,We,He={set:Pe,clear:t},Ge=(z=O.f,He.set),Qe=(ie=v.MutationObserver||v.WebKitMutationObserver,Pe=v.document,v.process);function Ye(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=zt(e),this.reject=zt(n)}function Xe(t,e){return d(t),c(e)&&e.constructor===t?e:((0,(t=Ze.f(t)).resolve)(e),t.promise)}function $e(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}t=v.Promise,(z=(z=z(v,"queueMicrotask"))&&z.value)||(Fe=function(){var t,e;for(Ne&&(t=Qe.domain)&&t.exit();Ue;){e=Ue.fn,Ue=Ue.next;try{e()}catch(t){throw Ue?Ve():qe=void 0,t}}qe=void 0,t&&t.enter()},Ve=!Oe&&!Ne&&ie&&Pe?(Be=!0,Ke=Pe.createTextNode(""),new ie(Fe).observe(Ke,{characterData:!0}),function(){Ke.data=Be=!Be}):t&&t.resolve?(ze=t.resolve(void 0),We=ze.then,function(){We.call(ze,Fe)}):Ne?function(){Qe.nextTick(Fe)}:function(){Ge.call(v,Fe)});var Je=z||function(t){t={fn:t,next:void 0},qe&&(qe.next=t),Ue||(Ue=t,Ve()),qe=t},Ze={f:function(t){return new Ye(t)}};function tn(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e}function en(t,e){var n;t.notified||(t.notified=!0,n=t.reactions,Je((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,u,c=n[o++],l=i?c.ok:c.fail,h=c.resolve,f=c.reject,d=c.domain;try{l?(i||(2===t.rejection&&An(t),t.rejection=1),!0===l?a=r:(d&&d.enter(),a=l(r),d&&(d.exit(),u=!0)),a===c.promise?f(mn("Promise-chain cycle")):(s=tn(a))?s.call(a,h,f):h(a)):f(r)}catch(r){d&&!u&&d.exit(),f(r)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&On(t)})))}function nn(t,e,n){var r,i;En?((r=bn.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),v.dispatchEvent(r)):r={promise:e,reason:n},!Sn&&(i=v["on"+t])?i(r):t===Cn&&function(t,e){var n=v.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function rn(t,e,n){return function(r){t(e,r,n)}}function on(t,e,n){t.done||(t.done=!0,(t=n||t).value=e,t.state=2,en(t,!0))}(z=(z=(z=v.process)&&z.versions)&&z.v8)?Sr=(kn=z.split("."))[0]+kn[1]:J&&(!(kn=J.match(/Edge\/(\d+)/))||74<=kn[1])&&(kn=J.match(/Chrome\/(\d+)/))&&(Sr=kn[1]);var an,sn,un,cn,ln=Sr&&+Sr,hn=He.set,fn=Bt("species"),dn="Promise",pn=lt.get,vn=lt.set,gn=lt.getterFor(dn),yn=pe,mn=v.TypeError,bn=v.document,_n=v.process,wn=tt("fetch"),In=Ze.f,Tn=In,En=!!(bn&&bn.createEvent&&v.dispatchEvent),Sn="function"==typeof PromiseRejectionEvent,Cn="unhandledrejection",kn=(J=Nt(dn,(function(){if(K(yn)===String(yn)){if(66===ln)return!0;if(!Ne&&!Sn)return!0}if(51<=ln&&/native code/.test(yn))return!1;function t(t){t((function(){}),(function(){}))}var e=yn.resolve(1);return(e.constructor={})[fn]=t,!(e.then((function(){}))instanceof t)})))||!Ie((function(t){yn.all(t).catch((function(){}))})),On=function(t){hn.call(v,(function(){var e,n=t.facade,r=t.value;if(Nn(t)&&(e=$e((function(){Ne?_n.emit("unhandledRejection",r,n):nn(Cn,n,r)})),t.rejection=Ne||Nn(t)?2:1,e.error))throw e.value}))},Nn=function(t){return 1!==t.rejection&&!t.parent},An=function(t){hn.call(v,(function(){var e=t.facade;Ne?_n.emit("rejectionHandled",e):nn("rejectionhandled",e,t.value)}))},Pn=function t(e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===n)throw mn("Promise can't be resolved itself");var i=tn(n);i?Je((function(){var r={done:!1};try{i.call(n,rn(t,r,e),rn(on,r,e))}catch(n){on(r,n,e)}})):(e.value=n,e.state=1,en(e,!1))}catch(n){on({done:!1},n,e)}}};J&&(yn=function(t){de(this,yn,dn),zt(t),an.call(this);var e=pn(this);try{t(rn(Pn,e),rn(on,e))}catch(t){on(e,t)}},(an=function(t){vn(this,{type:dn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=le(yn.prototype,{then:function(t,e){var n=gn(this),r=In(Te(this,yn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Ne?_n.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&en(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),sn=function(){var t=new an,e=pn(t);this.promise=t,this.resolve=rn(Pn,e),this.reject=rn(on,e)},Ze.f=In=function(t){return t===yn||t===un?new sn:Tn(t)},"function"==typeof pe&&(cn=pe.prototype.then,ht(pe.prototype,"then",(function(t,e){var n=this;return new yn((function(t,e){cn.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof wn&&ot({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Xe(yn,wn.apply(v,arguments))}}))),ot({global:!0,wrap:!0,forced:J},{Promise:yn}),he(yn,dn,!1),fe(dn),un=tt(dn),ot({target:dn,stat:!0,forced:J},{reject:function(t){var e=In(this);return e.reject.call(void 0,t),e.promise}}),ot({target:dn,stat:!0,forced:J},{resolve:function(t){return Xe(this,t)}}),ot({target:dn,stat:!0,forced:kn},{all:function(t){var e=this,n=In(e),r=n.resolve,i=n.reject,o=$e((function(){var n=zt(e.resolve),o=[],a=0,s=1;re(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=In(e),r=n.reject,i=$e((function(){var i=zt(e.resolve);re(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),ot({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=Ze.f(e),r=n.resolve,i=n.reject,o=$e((function(){var n=zt(e.resolve),i=[],o=0,a=1;re(t,(function(t){var s=o++,u=!1;i.push(void 0),a++,n.call(e,t).then((function(t){u||(u=!0,i[s]={status:"fulfilled",value:t},--a||r(i))}),(function(t){u||(u=!0,i[s]={status:"rejected",reason:t},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var Rn="No one promise resolved";function xn(){return this}function Dn(){return this}function Ln(t,e,n,r,i,a,s){function u(t){if(t===i&&v)return v;if(!Fn&&t in d)return d[t];switch(t){case"keys":case qn:case Vn:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){e+=" Iterator",t.prototype=Ht(jn,{next:o(1,n)}),he(t,e,!1),$t[e]=xn}(n,e,r);var c,l,h=e+" Iterator",f=!1,d=t.prototype,p=d[Un]||d["@@iterator"]||i&&d[i],v=!Fn&&p||u(i);if((r="Array"==e&&d.entries||p)&&(t=xt(r.call(new t)),Mn!==Object.prototype&&t.next&&(xt(t)!==Mn&&(Dt?Dt(t,Mn):"function"!=typeof t[Un]&&P(t,Un,Dn)),he(t,h,!0))),i==qn&&p&&p.name!==qn&&(f=!0,v=function(){return p.call(this)}),d[Un]!==v&&P(d,Un,v),$t[e]=v,i)if(c={values:u(qn),keys:a?v:u("keys"),entries:u(Vn)},s)for(l in c)!Fn&&!f&&l in d||ht(d,l,c[l]);else ot({target:e,proto:!0,forced:Fn||f},c);return c}ot({target:"Promise",stat:!0},{any:function(t){var e=this,n=Ze.f(e),r=n.resolve,i=n.reject,o=$e((function(){var n=zt(e.resolve),o=[],a=0,s=1,u=!1;re(t,(function(t){var c=a++,l=!1;o.push(void 0),s++,n.call(e,t).then((function(t){l||u||(u=!0,r(t))}),(function(t){l||u||(l=!0,o[c]=t,--s||i(new(tt("AggregateError"))(o,Rn)))}))})),--s||i(new(tt("AggregateError"))(o,Rn))}));return o.error&&i(o.value),n.promise}}),ot({target:"Promise",proto:!0,real:!0,forced:Sr=!!pe&&i((function(){pe.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=Te(this,tt("Promise")),n="function"==typeof t;return this.then(n?function(n){return Xe(e,t()).then((function(){return n}))}:t,n?function(n){return Xe(e,t()).then((function(){throw n}))}:t)}}),"function"!=typeof pe||pe.prototype.finally||ht(pe.prototype,"finally",tt("Promise").prototype.finally),J={codeAt:(He=function(t){return function(e,n){var r,i=String(s(e)),o=et(n);return e=i.length,o<0||e<=o?t?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===e||(r=i.charCodeAt(o+1))<56320||57343<r?t?i.charAt(o):n:t?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}})(!1),charAt:He(!0)},kn=Bt("iterator"),Sr=!1,[].keys&&("next"in(Yn=[].keys())?(Er=xt(xt(Yn)))!==Object.prototype&&(pr=Er):Sr=!0),h(pr=null==pr?{}:pr,kn)||P(pr,kn,(function(){return this}));var jn=(He={IteratorPrototype:pr,BUGGY_SAFARI_ITERATORS:Sr}).IteratorPrototype,Mn=He.IteratorPrototype,Fn=He.BUGGY_SAFARI_ITERATORS,Un=Bt("iterator"),qn="values",Vn="entries",Bn=J.charAt,Kn="String Iterator",zn=lt.set,Wn=lt.getterFor(Kn);Ln(String,"String",(function(t){zn(this,{type:Kn,string:String(t),index:0})}),(function(){var t=Wn(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=Bn(e,n),t.index+=n.length,{value:n,done:!1})}));var Hn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Gn=Bt("unscopables"),Qn=Array.prototype;null==Qn[Gn]&&A.f(Qn,Gn,{configurable:!0,value:Ht(null)});var Yn=function(t){Qn[Gn][t]=!0},Xn="Array Iterator",$n=lt.set,Jn=lt.getterFor(Xn),Zn=Ln(Array,"Array",(function(t,e){$n(this,{type:Xn,target:u(t),index:0,kind:e})}),(function(){var t=Jn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");$t.Arguments=$t.Array,Yn("keys"),Yn("values"),Yn("entries");var tr,er=Bt("iterator"),nr=Bt("toStringTag"),rr=Zn.values;for(tr in Hn){var ir=v[tr],or=ir&&ir.prototype;if(or){if(or[er]!==rr)try{P(or,er,rr)}catch(Oa){or[er]=rr}if(or[nr]||P(or,nr,tr),Hn[tr])for(var ar in Zn)if(or[ar]!==Zn[ar])try{P(or,ar,Zn[ar])}catch(Oa){or[ar]=Zn[ar]}}}function sr(t,e){var n;return new(void 0===(n=cr(t)&&("function"==typeof(n=t.constructor)&&(n===Array||cr(n.prototype))||c(n)&&null===(n=n[lr]))?void 0:n)?Array:n)(0===e?0:e)}function ur(t){throw t}ft.Promise,ot({target:"Promise",stat:!0},{try:function(t){var e=Ze.f(this);return((t=$e(t)).error?e.reject:e.resolve)(t.value),e.promise}});var cr=Array.isArray||function(t){return"Array"==a(t)},lr=Bt("species"),hr=[].push,fr=(kn={forEach:(Er=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(u,c,l,h){for(var f,d,p=at(u),v=I(p),g=Wt(c,l,3),y=nt(v.length),m=0,b=(h=h||sr,e?h(u,y):n||a?h(u,0):void 0);m<y;m++)if((s||m in v)&&(d=g(f=v[m],m,p),t))if(e)b[m]=d;else if(d)switch(t){case 3:return!0;case 5:return f;case 6:return m;case 2:hr.call(b,f)}else switch(t){case 4:return!1;case 7:hr.call(b,f)}return o?-1:r||i?i:b}})(0),map:Er(1),filter:Er(2),some:Er(3),every:Er(4),find:Er(5),findIndex:Er(6),filterOut:Er(7)},Object.defineProperty),dr={},pr=function(t,e){if(h(dr,t))return dr[t];var n=[][t],r=!!h(e=e||{},"ACCESSORS")&&e.ACCESSORS,o=h(e,0)?e[0]:ur,a=h(e,1)?e[1]:void 0;return dr[t]=!!n&&!i((function(){if(r&&!g)return 1;var t={length:-1};r?fr(t,1,{enumerable:!0,get:ur}):t[1]=1,n.call(t,o,a)}))},vr=kn.find,gr=!0;He=pr(Sr="find"),Sr in[]&&Array(1)[Sr]((function(){gr=!1})),ot({target:"Array",proto:!0,forced:gr||!He},{find:function(t){return vr(this,t,1<arguments.length?arguments[1]:void 0)}}),Yn(Sr);var yr=Function.call,mr=((J=function(t,e,n){return Wt(yr,v[t].prototype[e],n)})("Array","find"),kn.findIndex),br=!0;function _r(t,e,n){(e=l(e))in t?A.f(t,e,o(0,n)):t[e]=n}He=pr(Er="findIndex"),Er in[]&&Array(1)[Er]((function(){br=!1})),ot({target:"Array",proto:!0,forced:br||!He},{findIndex:function(t){return mr(this,t,1<arguments.length?arguments[1]:void 0)}}),Yn(Er),J("Array","findIndex"),ot({target:"Array",stat:!0,forced:Sr=!Ie((function(t){Array.from(t)}))},{from:function(t){var e,n,r,i,o,a=at(t),s="function"==typeof this?this:Array,u=arguments.length,c=1<u?arguments[1]:void 0,l=void 0!==c,h=(t=te(a),0);if(l&&(c=Wt(c,2<u?arguments[2]:void 0,2)),null==t||s==Array&&Kt(t))for(n=new s(e=nt(a.length));h<e;h++)_r(n,h,l?c(a[h],h):a[h]);else for(o=(i=t.call(a)).next,n=new s;!(r=o.call(i)).done;h++)_r(n,h,l?function(t,e,n,r){try{return e(d(n)[0],n[1])}catch(e){throw ee(t),e}}(i,c,[r.value,h]):r.value);return n.length=h,n}}),ft.Array.from;var wr,Ir=kn.some;He=!!(wr=[].some)&&i((function(){wr.call(null,(function(){throw 1}),1)})),Yn=pr("some"),ot({target:"Array",proto:!0,forced:!He||!Yn},{some:function(t){return Ir(this,t,1<arguments.length?arguments[1]:void 0)}}),J("Array","some");var Tr,Er="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Sr=A.f,Cr=v.Int8Array,kr=Cr&&Cr.prototype,Or=(He=(pr=v.Uint8ClampedArray)&&pr.prototype,Cr&&xt(Cr)),Nr=kr&&xt(kr),Ar=((Yn=Object.prototype).isPrototypeOf,pr=Bt("toStringTag"),D("TYPED_ARRAY_TAG")),Pr=Er&&!!Dt&&"Opera"!==se(v.opera),Rr=(Er=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8}),xr={BigInt64Array:8,BigUint64Array:8};for(Tr in Rr)v[Tr]||(Pr=!1);if((!Pr||"function"!=typeof Or||Or===Function.prototype)&&(Or=function(){throw TypeError("Incorrect invocation")},Pr))for(Tr in Rr)v[Tr]&&Dt(v[Tr],Or);if((!Pr||!Nr||Nr===Yn)&&(Nr=Or.prototype,Pr))for(Tr in Rr)v[Tr]&&Dt(v[Tr].prototype,Nr);if(Pr&&xt(He)!==Nr&&Dt(He,Nr),g&&!h(Nr,pr))for(Tr in Er=!0,Sr(Nr,pr,{get:function(){return c(this)?this[Ar]:void 0}}),Rr)v[Tr]&&P(v[Tr],Ar,Tr);He=function(t){if(function(t){return!!c(t)&&(t=se(t),h(Rr,t)||h(xr,t))}(t))return t;throw TypeError("Target is not a typed array")},Sr=function(t,e,n){if(g){if(n)for(var r in Rr)(r=v[r])&&h(r.prototype,t)&&delete r.prototype[t];Nr[t]&&!n||ht(Nr,t,!n&&Pr&&kr[t]||e)}},pr=Bt("iterator"),Er=v.Uint8Array;var Dr=Zn.values,Lr=Zn.keys,jr=Zn.entries,Mr=He;He=Sr,Er=!!(Sr=Er&&Er.prototype[pr])&&("values"==Sr.name||null==Sr.name),Sr=function(){return Dr.call(Mr(this))},He("entries",(function(){return jr.call(Mr(this))})),He("keys",(function(){return Lr.call(Mr(this))})),He("values",Sr,!Er),He(pr,Sr,!Er);var Fr=Object.assign,Ur=Object.defineProperty;Sr=!Fr||i((function(){if(g&&1!==Fr({b:1},Fr(Ur({},"a",{enumerable:!0,get:function(){Ur(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=Fr({},t)[n]||Lt(Fr({},e)).join("")!=r}))?function(t,e){for(var n=at(t),r=arguments.length,i=1,o=It.f,a=b.f;i<r;)for(var s,u=I(arguments[i++]),c=o?Lt(u).concat(o(u)):Lt(u),l=c.length,h=0;h<l;)s=c[h++],g&&!a.call(u,s)||(n[s]=u[s]);return n}:Fr,ot({target:"Object",stat:!0,forced:Object.assign!==Sr},{assign:Sr}),ft.Object.assign;var qr=b.f,Vr=(Sr={entries:(Er=function(t){return function(e){for(var n,r=u(e),i=Lt(r),o=i.length,a=0,s=[];a<o;)n=i[a++],g&&!qr.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}})(!0),values:Er(!1)}).entries;ot({target:"Object",stat:!0},{entries:function(t){return Vr(t)}}),ft.Object.entries;var Br=Sr.values;function Kr(t){if(c(e=t)&&(void 0!==(n=e[zr])?n:"RegExp"==a(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}ot({target:"Object",stat:!0},{values:function(t){return Br(t)}}),ft.Object.values;var zr=Bt("match"),Wr=Bt("match");ot({target:"String",proto:!0,forced:!(Er=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Wr]=!1,"/./"[e](n)}catch(t){}}return!1})("includes")},{includes:function(t){return!!~String(s(this)).indexOf(Kr(t),1<arguments.length?arguments[1]:void 0)}}),J("String","includes"),Sr=O.f;var Hr,Gr="".startsWith,Qr=Math.min;Er=Er("startsWith"),ot({target:"String",proto:!0,forced:!(Hr=!(Er||!(Hr=Sr(String.prototype,"startsWith"))||Hr.writable))&&!Er},{startsWith:function(t){var e=String(s(this));Kr(t);var n=nt(Qr(1<arguments.length?arguments[1]:void 0,e.length));return t=String(t),Gr?Gr.call(e,t,n):e.slice(n,n+t.length)===t}}),J("String","startsWith"),ot({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(s(this)),n="",r=et(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}}),J("String","repeat");var Yr=Bt("species"),Xr=Bt("isConcatSpreadable"),$r=9007199254740991,Jr="Maximum allowed index exceeded";function Zr(t){var e=ft.Symbol||(ft.Symbol={});h(e,t)||ai(e,t,{value:oi.f(t)})}function ti(t,e){var n=_i[t]=Ht(pi[li]);return hi(n,{type:ci,tag:t,description:e}),g||(n.description=e),n}function ei(t,e){d(t);var n=u(e);return e=Lt(n).concat(Ni(n)),si(e,(function(e){g&&!Oi.call(n,e)||ki(t,e,n[e])})),t}Er=51<=ln||!i((function(){var t=[];return t[Xr]=!1,t.concat()[0]!==t})),J=51<=ln||!i((function(){var t=[];return(t.constructor={})[Yr]=function(){return{foo:1}},1!==t.concat(Boolean).foo})),ot({target:"Array",proto:!0,forced:!Er||!J},{concat:function(t){for(var e,n,r,i=at(this),o=sr(i,0),a=0,s=-1,u=arguments.length;s<u;s++)if(function(t){if(!c(t))return!1;var e=t[Xr];return void 0!==e?!!e:cr(t)}(r=-1===s?i:arguments[s])){if(n=nt(r.length),$r<a+n)throw TypeError(Jr);for(e=0;e<n;e++,a++)e in r&&_r(o,a,r[e])}else{if($r<=a)throw TypeError(Jr);_r(o,a++,r)}return o.length=a,o}});var ni=wt.f,ri={}.toString,ii="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],oi=(J={f:function(t){return ii&&"[object Window]"==ri.call(t)?function(t){try{return ni(t)}catch(t){return ii.slice()}}(t):ni(u(t))}},{f:Bt}),ai=A.f,si=kn.forEach,ui=X("hidden"),ci="Symbol",li="prototype",hi=(kn=Bt("toPrimitive"),lt.set),fi=lt.getterFor(ci),di=Object[li],pi=v.Symbol,vi=tt("JSON","stringify"),gi=O.f,yi=A.f,mi=J.f,bi=b.f,_i=H("symbols"),wi=H("op-symbols"),Ii=H("string-to-symbol-registry"),Ti=H("symbol-to-string-registry"),Ei=(X=H("wks"),!(H=v.QObject)||!H[li]||!H[li].findChild),Si=g&&i((function(){return 7!=Ht(yi({},"a",{get:function(){return yi(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=gi(di,e);r&&delete di[e],yi(t,e,n),r&&t!==di&&yi(di,e,r)}:yi,Ci=y?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof pi},ki=function t(e,n,r){return e===di&&t(wi,n,r),d(e),n=l(n,!0),d(r),h(_i,n)?(r.enumerable?(h(e,ui)&&e[ui][n]&&(e[ui][n]=!1),r=Ht(r,{enumerable:o(0,!1)})):(h(e,ui)||yi(e,ui,o(1,{})),e[ui][n]=!0),Si(e,n,r)):yi(e,n,r)},Oi=function(t){var e=l(t,!0);return t=bi.call(this,e),!(this===di&&h(_i,e)&&!h(wi,e))&&(!(t||!h(this,e)||!h(_i,e)||h(this,ui)&&this[ui][e])||t)},Ni=(H=function(t,e){var n=u(t);if(t=l(e,!0),n!==di||!h(_i,t)||h(wi,t))return!(e=gi(n,t))||!h(_i,t)||h(n,ui)&&n[ui][t]||(e.enumerable=!0),e},y=function(t){t=mi(u(t));var e=[];return si(t,(function(t){h(_i,t)||h($,t)||e.push(t)})),e},function(t){var e=t===di,n=(t=mi(e?wi:u(t)),[]);return si(t,(function(t){!h(_i,t)||e&&!h(di,t)||n.push(_i[t])})),n});Gt||(ht((pi=function(){if(this instanceof pi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=D(t),n=function t(n){this===di&&t.call(wi,n),h(this,ui)&&h(this[ui],e)&&(this[ui][e]=!1),Si(this,e,o(1,n))};return g&&Ei&&Si(di,e,{configurable:!0,set:n}),ti(e,t)})[li],"toString",(function(){return fi(this).tag})),ht(pi,"withoutSetter",(function(t){return ti(D(t),t)})),b.f=Oi,A.f=ki,O.f=H,wt.f=J.f=y,It.f=Ni,oi.f=function(t){return ti(Bt(t),t)},g&&(yi(pi[li],"description",{configurable:!0,get:function(){return fi(this).description}}),ht(di,"propertyIsEnumerable",Oi,{unsafe:!0}))),ot({global:!0,wrap:!0,forced:!Gt,sham:!Gt},{Symbol:pi}),si(Lt(X),(function(t){Zr(t)})),ot({target:ci,stat:!0,forced:!Gt},{for:function(t){var e=String(t);return h(Ii,e)?Ii[e]:(t=pi(e),Ii[e]=t,Ti[t]=e,t)},keyFor:function(t){if(!Ci(t))throw TypeError(t+" is not a symbol");if(h(Ti,t))return Ti[t]},useSetter:function(){Ei=!0},useSimple:function(){Ei=!1}}),ot({target:"Object",stat:!0,forced:!Gt,sham:!g},{create:function(t,e){return void 0===e?Ht(t):ei(Ht(t),e)},defineProperty:ki,defineProperties:ei,getOwnPropertyDescriptor:H}),ot({target:"Object",stat:!0,forced:!Gt},{getOwnPropertyNames:y,getOwnPropertySymbols:Ni}),ot({target:"Object",stat:!0,forced:i((function(){It.f(1)}))},{getOwnPropertySymbols:function(t){return It.f(at(t))}}),vi&&ot({target:"JSON",stat:!0,forced:Bi=!Gt||i((function(){var t=pi();return"[null]"!=vi([t])||"{}"!=vi({a:t})||"{}"!=vi(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((c(r=e)||void 0!==t)&&!Ci(t))return cr(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Ci(e))return e}),i[1]=e,vi.apply(null,i)}}),pi[li][kn]||P(pi[li],kn,pi[li].valueOf),he(pi,ci),$[ui]=!0,Zr("asyncIterator"),H=A.f;var Ai,Pi,Ri,xi,Di,Li=v.Symbol;!g||"function"!=typeof Li||"description"in Li.prototype&&void 0===Li().description||(Ai={},it(Pi=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Pi?new Li(t):void 0===t?Li():Li(t);return""===t&&(Ai[e]=!0),e},Li),(Wi=Pi.prototype=Li.prototype).constructor=Pi,Ri=Wi.toString,xi="Symbol(test)"==String(Li("test")),Di=/^Symbol\((.*)\)[^)]+$/,H(Wi,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=Ri.call(t);return h(Ai,t)?"":""===(e=xi?e.slice(7,-1):e.replace(Di,"$1"))?void 0:e}}),ot({global:!0,forced:!0},{Symbol:Pi})),Zr("hasInstance"),Zr("isConcatSpreadable"),Zr("iterator"),Zr("match"),Zr("matchAll"),Zr("replace"),Zr("search"),Zr("species"),Zr("split"),Zr("toPrimitive"),Zr("toStringTag"),Zr("unscopables"),he(v.JSON,"JSON",!0),he(Math,"Math",!0),ot({global:!0},{Reflect:{}}),he(v.Reflect,"Reflect",!0),ft.Symbol,Zr("asyncDispose"),Zr("dispose"),Zr("observable"),Zr("patternMatch"),Zr("replaceAll"),oi.f("iterator");var ji=!i((function(){return Object.isExtensible(Object.preventExtensions({}))})),Mi=r((function(t){function e(t){n(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var n=A.f,r=D("meta"),i=0,o=Object.isExtensible||function(){return!0},a=t.exports={REQUIRED:!1,fastKey:function(t,n){if(!c(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!h(t,r)){if(!o(t))return"F";if(!n)return"E";e(t)}return t[r].objectID},getWeakData:function(t,n){if(!h(t,r)){if(!o(t))return!0;if(!n)return!1;e(t)}return t[r].weakData},onFreeze:function(t){return ji&&a.REQUIRED&&o(t)&&!h(t,r)&&e(t),t}};$[r]=!0})),Fi=(y=function(t,e,n){function r(t){var e=g[t];ht(g,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(f&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return f&&!c(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(f&&!c(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})}var o,a,s,u,l,h=-1!==t.indexOf("Map"),f=-1!==t.indexOf("Weak"),d=h?"set":"add",p=v[t],g=p&&p.prototype,y=p,m={};return Nt(t,"function"!=typeof p||!(f||g.forEach&&!i((function(){(new p).entries().next()}))))?(y=n.getConstructor(e,t,h,d),Mi.REQUIRED=!0):Nt(t,!0)&&(a=(o=new y)[d](f?{}:-0,1)!=o,s=i((function(){o.has(1)})),u=Ie((function(t){new p(t)})),l=!f&&i((function(){for(var t=new p,e=5;e--;)t[d](e,e);return!t.has(-0)})),u||(((y=e((function(e,n){de(e,y,t);var r,i,o,a=(a=new p,r=e,e=y,Dt&&"function"==typeof(i=r.constructor)&&i!==e&&c(o=i.prototype)&&o!==e.prototype&&Dt(a,o),a);return null!=n&&re(n,a[d],{that:a,AS_ENTRIES:h}),a}))).prototype=g).constructor=y),(s||l)&&(r("delete"),r("has"),h&&r("get")),(l||a)&&r(d),f&&g.clear&&delete g.clear),m[t]=y,ot({global:!0,forced:y!=p},m),he(y,t),f||n.setStrong(y,t,h),y},A.f),Ui=Mi.fastKey,qi=lt.set,Vi=lt.getterFor,Bi={getConstructor:function(t,e,n,r){function i(t,e,n){var r,i=a(t),o=s(t,e);return o?o.value=n:(i.last=o={index:r=Ui(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),g?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}var o=t((function(t,i){de(t,o,e),qi(t,{type:e,index:Ht(null),first:void 0,last:void 0,size:0}),g||(t.size=0),null!=i&&re(i,t[r],{that:t,AS_ENTRIES:n})})),a=Vi(e),s=function(t,e){var n,r=a(t);if("F"!==(t=Ui(e)))return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return le(o.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,g?t.size=0:this.size=0},delete:function(t){var e,n=a(this),r=s(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),g?n.size--:this.size--),!!r},forEach:function(t){for(var e,n=a(this),r=Wt(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),le(o.prototype,n?{get:function(t){return(t=s(this,t))&&t.value},set:function(t,e){return i(this,0===t?0:t,e)}}:{add:function(t){return i(this,t=0===t?0:t,t)}}),g&&Fi(o.prototype,"size",{get:function(){return a(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",i=Vi(e),o=Vi(r);Ln(t,e,(function(t,e){qi(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}}),n?"entries":"values",!n,!0),fe(e)}};function Ki(){for(var t,e=d(this),n=zt(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}function zi(t){return Map.prototype.entries.call(t)}ot({target:"Map",stat:!0},{from:(y("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Bi),ft.Map,kn=function(t){var e,n,r,i,o=arguments.length,a=1<o?arguments[1]:void 0;return zt(this),(e=void 0!==a)&&zt(a),null==t?new this:(n=[],e?(r=0,i=Wt(a,2<o?arguments[2]:void 0,2),re(t,(function(t){n.push(i(t,r++))}))):re(t,n.push,{that:n}),new this(n))})}),ot({target:"Map",stat:!0},{of:H=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}}),ot({target:"Map",proto:!0,real:!0,forced:W},{deleteAll:function(){return Ki.apply(this,arguments)}}),ot({target:"Map",proto:!0,real:!0,forced:W},{emplace:function(t,e){var n=d(this);return e=n.has(t)&&"update"in e?e.update(n.get(t),t,n):e.insert(t,n),n.set(t,e),e}}),ot({target:"Map",proto:!0,real:!0,forced:W},{every:function(t){var e=d(this),n=zi(e),r=Wt(t,1<arguments.length?arguments[1]:void 0,3);return!re(n,(function(t,n,i){if(!r(n,t,e))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),ot({target:"Map",proto:!0,real:!0,forced:W},{filter:function(t){var e=d(this),n=zi(e),r=Wt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,tt("Map"))),o=zt(i.set);return re(n,(function(t,n){r(n,t,e)&&o.call(i,t,n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),ot({target:"Map",proto:!0,real:!0,forced:W},{find:function(t){var e=d(this),n=zi(e),r=Wt(t,1<arguments.length?arguments[1]:void 0,3);return re(n,(function(t,n,i){if(r(n,t,e))return i(n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),ot({target:"Map",proto:!0,real:!0,forced:W},{findKey:function(t){var e=d(this),n=zi(e),r=Wt(t,1<arguments.length?arguments[1]:void 0,3);return re(n,(function(t,n,i){if(r(n,t,e))return i(t)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),ot({target:"Map",stat:!0},{groupBy:function(t,e){var n=new this;zt(e);var r=zt(n.has),i=zt(n.get),o=zt(n.set);return re(t,(function(t){var a=e(t);r.call(n,a)?i.call(n,a).push(t):o.call(n,a,[t])})),n}}),ot({target:"Map",proto:!0,real:!0,forced:W},{includes:function(t){return re(zi(d(this)),(function(e,n,r){if((i=n)===(n=t)||i!=i&&n!=n)return r();var i}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),ot({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;zt(e);var r=zt(n.set);return re(t,(function(t){r.call(n,e(t),t)})),n}}),ot({target:"Map",proto:!0,real:!0,forced:W},{keyOf:function(t){return re(zi(d(this)),(function(e,n,r){if(n===t)return r(e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),ot({target:"Map",proto:!0,real:!0,forced:W},{mapKeys:function(t){var e=d(this),n=zi(e),r=Wt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,tt("Map"))),o=zt(i.set);return re(n,(function(t,n){o.call(i,r(n,t,e),n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),ot({target:"Map",proto:!0,real:!0,forced:W},{mapValues:function(t){var e=d(this),n=zi(e),r=Wt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,tt("Map"))),o=zt(i.set);return re(n,(function(t,n){o.call(i,t,r(n,t,e))}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),ot({target:"Map",proto:!0,real:!0,forced:W},{merge:function(t){for(var e=d(this),n=zt(e.set),r=0;r<arguments.length;)re(arguments[r++],n,{that:e,AS_ENTRIES:!0});return e}}),ot({target:"Map",proto:!0,real:!0,forced:W},{reduce:function(t){var e=d(this),n=zi(e),r=arguments.length<2,i=r?void 0:arguments[1];if(zt(t),re(n,(function(n,o){i=r?(r=!1,o):t(i,o,n,e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty map with no initial value");return i}}),ot({target:"Map",proto:!0,real:!0,forced:W},{some:function(t){var e=d(this),n=zi(e),r=Wt(t,1<arguments.length?arguments[1]:void 0,3);return re(n,(function(t,n,i){if(r(n,t,e))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),ot({target:"Map",proto:!0,real:!0,forced:W},{update:function(t,e){var n=d(this),r=arguments.length;zt(e);var i=n.has(t);if(!i&&r<3)throw TypeError("Updating absent value");return r=i?n.get(t):zt(2<r?arguments[2]:void 0)(t,n),n.set(t,e(r,t,n)),n}});var Wi=function(t,e){var n,r=d(this),i=2<arguments.length?arguments[2]:void 0;if("function"!=typeof e&&"function"!=typeof i)throw TypeError("At least one callback required");return r.has(t)?(n=r.get(t),"function"==typeof e&&(n=e(n),r.set(t,n))):"function"==typeof i&&(n=i(),r.set(t,n)),n};function Hi(t){return Set.prototype.values.call(t)}ot({target:"Map",proto:!0,real:!0,forced:W},{upsert:Wi}),ot({target:"Map",proto:!0,real:!0,forced:W},{updateOrInsert:Wi}),y("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Bi),ft.Set,ot({target:"Set",stat:!0},{from:kn}),ot({target:"Set",stat:!0},{of:H}),ot({target:"Set",proto:!0,real:!0,forced:W},{addAll:function(){return function(){for(var t=d(this),e=zt(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),ot({target:"Set",proto:!0,real:!0,forced:W},{deleteAll:function(){return Ki.apply(this,arguments)}}),ot({target:"Set",proto:!0,real:!0,forced:W},{every:function(t){var e=d(this),n=Hi(e),r=Wt(t,1<arguments.length?arguments[1]:void 0,3);return!re(n,(function(t,n){if(!r(t,t,e))return n()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),ot({target:"Set",proto:!0,real:!0,forced:W},{difference:function(t){var e=d(this),n=new(Te(e,tt("Set")))(e),r=zt(n.delete);return re(t,(function(t){r.call(n,t)})),n}}),ot({target:"Set",proto:!0,real:!0,forced:W},{filter:function(t){var e=d(this),n=Hi(e),r=Wt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,tt("Set"))),o=zt(i.add);return re(n,(function(t){r(t,t,e)&&o.call(i,t)}),{IS_ITERATOR:!0}),i}}),ot({target:"Set",proto:!0,real:!0,forced:W},{find:function(t){var e=d(this),n=Hi(e),r=Wt(t,1<arguments.length?arguments[1]:void 0,3);return re(n,(function(t,n){if(r(t,t,e))return n(t)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),ot({target:"Set",proto:!0,real:!0,forced:W},{intersection:function(t){var e=d(this),n=new(Te(e,tt("Set"))),r=zt(e.has),i=zt(n.add);return re(t,(function(t){r.call(e,t)&&i.call(n,t)})),n}}),ot({target:"Set",proto:!0,real:!0,forced:W},{isDisjointFrom:function(t){var e=d(this),n=zt(e.has);return!re(t,(function(t,r){if(!0===n.call(e,t))return r()}),{INTERRUPTED:!0}).stopped}}),ot({target:"Set",proto:!0,real:!0,forced:W},{isSubsetOf:function(t){var e=function(t){var e=te(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return d(e.call(t))}(this),n=d(t),r=n.has;return"function"!=typeof r&&(n=new(tt("Set"))(t),r=zt(n.has)),!re(e,(function(t,e){if(!1===r.call(n,t))return e()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),ot({target:"Set",proto:!0,real:!0,forced:W},{isSupersetOf:function(t){var e=d(this),n=zt(e.has);return!re(t,(function(t,r){if(!1===n.call(e,t))return r()}),{INTERRUPTED:!0}).stopped}}),ot({target:"Set",proto:!0,real:!0,forced:W},{join:function(t){var e=Hi(n=d(this)),n=void 0===t?",":String(t);return re(e,(t=[]).push,{that:t,IS_ITERATOR:!0}),t.join(n)}}),ot({target:"Set",proto:!0,real:!0,forced:W},{map:function(t){var e=d(this),n=Hi(e),r=Wt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,tt("Set"))),o=zt(i.add);return re(n,(function(t){o.call(i,r(t,t,e))}),{IS_ITERATOR:!0}),i}}),ot({target:"Set",proto:!0,real:!0,forced:W},{reduce:function(t){var e=d(this),n=Hi(e),r=arguments.length<2,i=r?void 0:arguments[1];if(zt(t),re(n,(function(n){i=r?(r=!1,n):t(i,n,n,e)}),{IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty set with no initial value");return i}}),ot({target:"Set",proto:!0,real:!0,forced:W},{some:function(t){var e=d(this),n=Hi(e),r=Wt(t,1<arguments.length?arguments[1]:void 0,3);return re(n,(function(t,n){if(r(t,t,e))return n()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),ot({target:"Set",proto:!0,real:!0,forced:W},{symmetricDifference:function(t){var e=d(this),n=new(Te(e,tt("Set")))(e),r=zt(n.delete),i=zt(n.add);return re(t,(function(t){r.call(n,t)||i.call(n,t)})),n}}),ot({target:"Set",proto:!0,real:!0,forced:W},{union:function(t){var e;return re(t,zt((e=new(Te(e=d(this),tt("Set")))(e)).add),{that:e}),e}});var Gi=Math.floor;ot({target:"Number",stat:!0},{isInteger:function(t){return!c(t)&&isFinite(t)&&Gi(t)===t}}),ft.Number.isInteger,ot({target:"Number",stat:!0},{isNaN:function(t){return t!=t}}),ft.Number.isNaN;var Qi=function(t,e){return(Qi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Yi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Qi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Xi=function(){return(Xi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function $i(t,e,n,r){return new(n=n||Promise)((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function Ji(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,(a=i?[2&a[0],i.value]:a)[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function Zi(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function to(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function eo(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function no(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function ro(t){try{return uo.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var io=!1,oo="${JSCORE_VERSION}",ao=function(t,e){if(!t)throw so(e)},so=function(t){return new Error("Firebase Database ("+oo+") INTERNAL ASSERT FAILED: "+t)},uo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=o>>2,l=(o=(3&o)<<4|s>>4,s=(15&s)<<2|(l=u?t[i+2]:0)>>6,63&l);u||(l=64,a||(s=64)),r.push(n[c],n[o],n[s],n[l])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(no(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,a,s=t[n++];s<128?e[r++]=String.fromCharCode(s):191<s&&s<224?(o=t[n++],e[r++]=String.fromCharCode((31&s)<<6|63&o)):239<s&&s<365?(i=((7&s)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],a=t[n++],e[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();o=o<<2|a>>4,r.push(o),64!==s&&(a=a<<4&240|s>>2,r.push(a),64!==u&&(u|=s<<6&192,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function co(t){return lo(void 0,t)}function lo(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=lo(t[n],e[n]));return t}var ho=(fo.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},fo);function fo(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}function po(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function vo(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(po())}function go(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function yo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function mo(){return!0===io}function bo(){return"indexedDB"in self&&null!=indexedDB}function _o(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function wo(){return!(!navigator||!navigator.cookieEnabled)}var Io,To=(Yi(Eo,Io=Error),Eo);function Eo(t,e,n){return(e=Io.call(this,e)||this).code=t,e.customData=n,e.name="FirebaseError",Object.setPrototypeOf(e,Eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,So.prototype.create),e}var So=(Co.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t;return t=(t=this.errors[t])?(r=i,t.replace(ko,(function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"}))):"Error",t=this.serviceName+": "+t+" ("+o+").",new To(o,t,i)},Co);function Co(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var ko=/\{\$([^}]+)}/g;function Oo(t){return JSON.parse(t)}function No(t){return JSON.stringify(t)}function Ao(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Oo(ro(o[0])||""),n=Oo(ro(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Po(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ro(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function xo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Do(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}var Lo=(jo.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},jo.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){var h=r<40?r<20?(o=c^s&(u^c),1518500249):(o=s^u^c,1859775393):r<60?(o=s&u|c&(s|u),2400959708):(o=s^u^c,3395469782);i=(a<<5|a>>>27)+o+l+h+n[r]&4294967295,l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},jo.prototype.update=function(t,e){if(null!=t){for(var n=(e=void 0===e?t.length:e)-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},jo.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},jo);function jo(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function Mo(t,e){return(e=new Fo(t,e)).subscribe.bind(e)}var Fo=(Uo.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},Uo.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},Uo.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},Uo.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");return void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=qo),void 0===r.error&&(r.error=qo),void 0===r.complete&&(r.complete=qo),n=this.unsubscribeOne.bind(this,this.observers.length),this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),n},Uo.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Uo.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},Uo.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},Uo.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},Uo);function Uo(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}function qo(){}function Vo(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Bo(t,e){return t+" failed: "+e+" argument "}function Ko(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Bo(t,e)+"must be a valid function.")}function zo(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Bo(t,e)+"must be a valid context object.")}function Wo(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}function Ho(t,e,n){return void 0===n&&(n=2),n=(e=void 0===e?1e3:e)*Math.pow(n,t),t=Math.round(.5*n*(Math.random()-.5)*2),Math.min(144e5,n+t)}function Go(t){return t&&t._delegate?t._delegate:t}var Qo=(Yo.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},Yo.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},Yo.prototype.setServiceProps=function(t){return this.serviceProps=t,this},Yo.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},Yo);function Yo(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var Xo="[DEFAULT]",$o=(Jo.prototype.get=function(t){void 0===t&&(t=Xo);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new ho;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},Jo.prototype.getImmediate=function(t){t=(e=Xi({identifier:Xo,optional:!1},t)).identifier;var e=e.optional,n=this.normalizeInstanceIdentifier(t);if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(e)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(e)return null;throw t}},Jo.prototype.getComponent=function(){return this.component},Jo.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if("EAGER"===t.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:Xo})}catch(t){}try{for(var r=Zi(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=to(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},Jo.prototype.clearInstance=function(t){void 0===t&&(t=Xo),this.instancesDeferred.delete(t),this.instances.delete(t)},Jo.prototype.delete=function(){return $i(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(eo(eo([],to(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),to(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},Jo.prototype.isComponentSet=function(){return null!=this.component},Jo.prototype.isInitialized=function(t){return void 0===t&&(t=Xo),this.instances.has(t)},Jo.prototype.initialize=function(t){var e,n,r=void 0===(r=(t=void 0===t?{}:t).instanceIdentifier)?Xo:r,i=(t=void 0===(t=t.options)?{}:t,this.normalizeInstanceIdentifier(r));if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:i,options:t});try{for(var a=Zi(this.instancesDeferred.entries()),s=a.next();!s.done;s=a.next()){var u=(c=to(s.value,2))[0],c=c[1];i===this.normalizeInstanceIdentifier(u)&&c.resolve(o)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o},Jo.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,r=(t=void 0===n?{}:n,this.instances.get(e));if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e)===Xo?void 0:n,options:t}),this.instances.set(e,r),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(t){}return r||null},Jo.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:Xo},Jo.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},Jo);function Jo(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var Zo=(ta.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},ta.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},ta.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new $o(t,this);return this.providers.set(t,e),e},ta.prototype.getProviders=function(){return Array.from(this.providers.values())},ta);function ta(t){this.name=t,this.providers=new Map}var ea,na=[];function ra(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=aa[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,eo(["["+i+"]  "+t.name+":"],n))}}(kn=ea=ea||{})[kn.DEBUG=0]="DEBUG",kn[kn.VERBOSE=1]="VERBOSE",kn[kn.INFO=2]="INFO",kn[kn.WARN=3]="WARN",kn[kn.ERROR=4]="ERROR",kn[kn.SILENT=5]="SILENT";var ia={debug:ea.DEBUG,verbose:ea.VERBOSE,info:ea.INFO,warn:ea.WARN,error:ea.ERROR,silent:ea.SILENT},oa=ea.INFO,aa=((H={})[ea.DEBUG]="log",H[ea.VERBOSE]="log",H[ea.INFO]="info",H[ea.WARN]="warn",H[ea.ERROR]="error",H),sa=(Object.defineProperty(ua.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ea))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),ua.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ia[t]:t},Object.defineProperty(ua.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(ua.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),ua.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ea.DEBUG],t)),this._logHandler.apply(this,eo([this,ea.DEBUG],t))},ua.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ea.VERBOSE],t)),this._logHandler.apply(this,eo([this,ea.VERBOSE],t))},ua.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ea.INFO],t)),this._logHandler.apply(this,eo([this,ea.INFO],t))},ua.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ea.WARN],t)),this._logHandler.apply(this,eo([this,ea.WARN],t))},ua.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,eo([this,ea.ERROR],t)),this._logHandler.apply(this,eo([this,ea.ERROR],t))},ua);function ua(t){this.name=t,this._logLevel=oa,this._logHandler=ra,this._userLogHandler=null,na.push(this)}function ca(t){na.forEach((function(e){e.setLogLevel(t)}))}(W={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",W["bad-app-name"]="Illegal App name: '{$appName}",W["duplicate-app"]="Firebase App named '{$appName}' already exists",W["app-deleted"]="Firebase App named '{$appName}' already deleted",W["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",W["invalid-log-argument"]="First argument to `onLog` must be null or a function.";var la=new So("app","Firebase",kn=W),ha="@firebase/app",fa="[DEFAULT]",da=((H={})[ha]="fire-core",H["@firebase/analytics"]="fire-analytics",H["@firebase/auth"]="fire-auth",H["@firebase/database"]="fire-rtdb",H["@firebase/functions"]="fire-fn",H["@firebase/installations"]="fire-iid",H["@firebase/messaging"]="fire-fcm",H["@firebase/performance"]="fire-perf",H["@firebase/remote-config"]="fire-rc",H["@firebase/storage"]="fire-gcs",H["@firebase/firestore"]="fire-fst",H["fire-js"]="fire-js",H["firebase-wrapper"]="fire-js-all",H),pa=new sa("@firebase/app"),va=(Object.defineProperty(ga.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(ga.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),ga.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},ga.prototype._getService=function(t,e){return void 0===e&&(e=fa),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},ga.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=fa),this.container.getProvider(t).clearInstance(e)},ga.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){pa.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},ga.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},ga.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},ga.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw la.create("app-deleted",{appName:this.name_})},ga);function ga(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=co(t),this.container=new Zo(e.name),this._addComponent(new Qo("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}function ya(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;if(void 0===o.name&&(o.name=fa),"string"!=typeof(i=o.name)||!i)throw la.create("bad-app-name",{appName:String(i)});if(Po(e,i))throw la.create("duplicate-app",{appName:i});return o=new t(n,o,r),e[i]=o},app:i,registerVersion:function(t,e,n){var r=null!==(i=da[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//);if(t=e.match(/\s|\//),i||t)return n=['Unable to register library "'+r+'" with version "'+e+'":'],i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void pa.warn(n.join(" "));o(new Qo(r+"-version",(function(){return{library:r,version:e}}),"VERSION"))},setLogLevel:ca,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw la.create("invalid-log-argument");!function(t,e){for(var n=0,r=na;n<r.length;n++)!function(n){var r=null;e&&e.level&&(r=ia[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:ea[n].toLowerCase(),message:a,args:i,type:e.name})}}(r[n])}(t,e)},apps:null,SDK_VERSION:"8.4.3",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!Po(e,t=t||fa))throw la.create("no-app",{appName:t});return e[t]}function o(o){var a,s=o.name;if(n.has(s))return pa.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;n.set(s,o),"PUBLIC"===o.type&&(a=function(t){if("function"!=typeof(t=void 0===t?i():t)[s])throw la.create("invalid-app-argument",{appName:s});return t[s]()},void 0!==o.serviceProps&&lo(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])});for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}va.prototype.name&&va.prototype.options||va.prototype.delete||console.log("dc"),W=function t(){var e=ya(va);return e.INTERNAL=Xi(Xi({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){lo(e,t)},createSubscribe:Mo,ErrorFactory:So,deepExtend:lo}),e}();var ma=(ba.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){return function(t){return"VERSION"===(null==(t=t.getComponent())?void 0:t.type)}(t)?(t=t.getImmediate()).library+"/"+t.version:null})).filter((function(t){return t})).join(" ")},ba);function ba(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(pa.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(Ls=self.firebase.SDK_VERSION)&&0<=Ls.indexOf("LITE")&&pa.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var _a=W.initializeApp;W.initializeApp=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return}}()&&pa.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_a.apply(void 0,t)};var wa,Ia=W;(wa=Ia).INTERNAL.registerComponent(new Qo("platform-logger",(function(t){return new ma(t)}),"PRIVATE")),wa.registerVersion(ha,"0.6.20",void 0),wa.registerVersion("fire-js",""),Ia.registerVersion("firebase","8.4.3","app"),function(){var t,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c((function(){e.g()}))),this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(e){o(e)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Qa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){for(var i=[],a=0;i.push(void 0),a++,o(r.value).Qa(function(e){return function(n){i[e]=n,0==--a&&t(i)}}(i.length-1),e),!(r=n.next()).done;);}))},e}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==h(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:m).apply(null,arguments)}function _(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function w(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function T(t,e,n){this.code=C+t,this.message=e||k[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new T(e.substring(C.length),t.message,t.serverResponse):null}w(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var S,C="auth/",k={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},O={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in O)if(O[e].id===t)return{firebaseEndpoint:(t=O[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function A(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function P(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,P):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function x(t){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function D(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function j(){this.b=this.a=null}S=N("__EID__")?"__EID__":void 0,w(P,Error),P.prototype.name="CustomError",w(R,P),R.prototype.name="AssertionError",D.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var M=new D((function(){return new F}),(function(t){t.reset()}));function F(){this.next=this.b=this.a=null}j.prototype.add=function(t,e){var n=M.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},F.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},F.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},V=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,a="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in a&&(n=a[s],e.call(void 0,n,s,t)&&(i[o++]=n));return i},B=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},K=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function z(t,e){return 0<=U(t,e)}function W(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function H(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function G(){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},$=/&/g,J=/</g,Z=/>/g,tt=/"/g,et=/'/g,nt=/\x00/g,rt=/[\x00&<>"']/;function it(t,e){return-1!=t.indexOf(e)}function ot(t,e){return t<e?-1:e<t?1:0}var at=a.navigator;function st(t){return it(Y,t)}function ut(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ct(t){for(var e in t)return;return 1}function lt(t){var e,n={};for(e in t)n[e]=t[e];return n}Y=at&&(at=at.userAgent)?at:"";var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<ht.length;i++)e=ht[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function dt(t,e){t:{try{var n;if((n=(n=(n=t&&t.ownerDocument)&&(n.defaultView||n.parentWindow))||a).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(p(t))try{var i=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){i="<object could not be stringified>"}else i=void 0===t?"undefined":null===t?"null":typeof t;x("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,i)}}function pt(t,e){this.a=t===mt&&e||"",this.b=yt}function vt(t){return t instanceof pt&&t.constructor===pt&&t.b===yt?t.a:(x("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.sa=!0,pt.prototype.ra=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var gt,yt={},mt={};function bt(){if(void 0===gt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(t){a.console&&a.console.error(t.message)}gt=t}else gt=t}return gt}function _t(t,e){this.a=e===St?t:""}function wt(t){return t instanceof _t&&t.constructor===_t?t.a:(x("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function It(t,e){var n,r=vt(t);if(!Et.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return n=t=r.replace(Tt,(function(t,n){if(!Object.prototype.hasOwnProperty.call(e,n))throw Error('Found marker, "'+n+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[n])instanceof pt?vt(t):encodeURIComponent(String(t))})),new _t(n=(t=bt())?t.createScriptURL(n):n,St)}_t.prototype.sa=!0,_t.prototype.ra=function(){return this.a.toString()},_t.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Tt=/%{(\w+)}/g,Et=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={};function Ct(t,e){this.a=e===xt?t:""}function kt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(x("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ot=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Nt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,At=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Pt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),t=At.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Nt))&&Ot.test(e[1])?new Ct(t,xt):null);var e}function Rt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),new Ct(t=At.test(t)?t:"about:invalid#zClosurez",xt))}var xt={},Dt=new Ct("about:invalid#zClosurez",xt);function Lt(t,e,n){this.a=n===jt?t:""}Lt.prototype.sa=!0,Lt.prototype.ra=function(){return this.a.toString()},Lt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var jt={};function Mt(t,e,n,r){return t=t instanceof Ct?t:Rt(t),e=e||a,n=n instanceof pt?vt(n):n||"",e.open(kt(t),n,r,void 0)}function Ft(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function Ut(t){return rt.test(t)&&-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=t.indexOf("&")?t.replace($,"&amp;"):t).indexOf("<")?t.replace(J,"&lt;"):t).indexOf(">")?t.replace(Z,"&gt;"):t).indexOf('"')?t.replace(tt,"&quot;"):t).indexOf("'")?t.replace(et,"&#39;"):t).indexOf("\0")&&(t=t.replace(nt,"&#0;")),t}function qt(t){return qt[" "](t),t}qt[" "]=l;var Vt,Bt=st("Opera"),Kt=st("Trident")||st("MSIE"),zt=st("Edge"),Wt=zt||Kt,Ht=st("Gecko")&&!(it(Y.toLowerCase(),"webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),Gt=it(Y.toLowerCase(),"webkit")&&!st("Edge");function Qt(){var t=a.document;return t?t.documentMode:void 0}var Yt="",Xt=(Xt=Y,Ht?/rv:([^\);]+)(\)|;)/.exec(Xt):zt?/Edge\/([\d\.]+)/.exec(Xt):Kt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt):Gt?/WebKit\/(\S+)/.exec(Xt):Bt?/(?:Version)[ \/]?(\S+)/.exec(Xt):void 0);Xt&&(Yt=Xt?Xt[1]:""),Vt=Kt&&null!=(Xt=Qt())&&Xt>parseFloat(Yt)?String(Xt):Yt;var $t={};function Jt(t){return e=t,n=function(){for(var e=0,n=X(String(Vt)).split("."),r=X(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++)for(var a=n[o]||"",s=r[o]||"";a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=a[0].length||0!=s[0].length)&&(e=ot(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ot(0==a[2].length,0==s[2].length)||ot(a[2],s[2]),a=a[3],s=s[3],0==e););return 0<=e},r=$t,Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=n();var e,n,r}var Zt=a.document&&Kt&&(Qt()||parseInt(Vt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!Kt||9<=Number(Zt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(t,e){ut(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:oe.hasOwnProperty(n)?t.setAttribute(oe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function se(t){a.setTimeout((function(){throw t}),0)}function ue(t,e){ie||function(){var t;ie=a.Promise&&a.Promise.resolve?(t=a.Promise.resolve(void 0),function(){t.then(he)}):function(){var t=he;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!st("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(re=re||function(){var t=a.MessageChannel;if(void 0===(t=void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!st("Presto")?function(){var t=ae(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}:t)||st("Trident")||st("MSIE"))return function(t){a.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Gb,n.Gb=null,t())},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}())(t):a.setImmediate(t)}}(),ce||(ie(),ce=!0),le.add(t,e)}var ce=!1,le=new j;function he(){for(var t,e,n;n=e=void 0,n=null,(e=le).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){se(t)}L(M,t)}ce=!1}function fe(t,e){if(this.a=de,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Se(n,pe,t)}),(function(t){if(!(t instanceof Re))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Se(n,ve,t)}))}catch(t){Se(this,ve,t)}}var de=0,pe=2,ve=3;function ge(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ge.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ye=new D((function(){return new ge}),(function(t){t.reset()}));function me(t,e,n){var r=ye.get();return r.g=t,r.b=e,r.f=n,r}function be(t){if(t instanceof fe)return t;var e=new fe(l);return Se(e,pe,t),e}function _e(t){return new fe((function(e,n){n(t)}))}function we(t,e,n){Ce(t,e,n,null)||ue(_(e,t))}function Ie(t){return new fe((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)we(t[o],_(i,o,!0),_(i,o,!1));else e(r)}))}function Te(t,e){t.b||t.a!=pe&&t.a!=ve||ke(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ee(t,e,n,r){var i=me(null,null,null);return i.a=new fe((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(n){o(n)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Re?o(e):t(i)}catch(e){o(e)}}:o})),Te(i.a.c=t,i),i.a}function Se(t,e,n){var r,i;t.a==de&&(t===n&&(e=ve,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ce(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,ke(t),e!=ve||n instanceof Re||(i=n,(r=t).g=!0,ue((function(){r.g&&Pe.call(null,i)})))))}function Ce(t,e,n,r){if(t instanceof fe)return Te(t,me(e||l,n||null,r)),1;if(A(t))return t.then(e,n,r),1;if(p(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function ke(t){t.h||(t.h=!0,ue(t.gc,t))}function Oe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ne(t,e,n,r){if(n==ve&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ae(e,n,r);else try{e.c?e.g.call(e.f):Ae(e,n,r)}catch(t){Pe.call(null,t)}L(ye,e)}function Ae(t,e,n){e==pe?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}fe.prototype.then=function(t,e,n){return Ee(this,d(t)?t:null,d(e)?e:null,n)},fe.prototype.$goog_Thenable=!0,(t=fe.prototype).oa=function(t,e){return(t=me(t,t,e)).c=!0,Te(this,t),this},t.o=function(t,e){return Ee(this,null,t,e)},t.cancel=function(t){var e;this.a==de&&(e=new Re(t),ue((function(){!function t(e,n){if(e.a==de)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,!((o=s.a==e?s:o)&&1<i)));s=s.next)o||(a=s);o&&(r.a==de&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Oe(r),Ne(r,o,ve,n)))}e.c=null}else Se(e,ve,n)}(this,e)}),this))},t.$c=function(t){this.a=de,Se(this,pe,t)},t.ad=function(t){this.a=de,Se(this,ve,t)},t.gc=function(){for(var t;t=Oe(this);)Ne(this,t,this.a,this.i);this.h=!1};var Pe=se;function Re(t){P.call(this,t)}function xe(){this.xa=this.xa,this.pa=this.pa}function De(t){t.xa||(t.xa=!0,t.Da(),1)||(t=t,Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++g))}w(Re,P),xe.prototype.xa=!(Re.prototype.name="cancel"),xe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Le=Object.freeze||function(t){return t},je=!Kt||9<=Number(Zt),Me=Kt&&!Jt("9"),Fe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",l,e),a.removeEventListener("test",l,e)}catch(t){}return t}();function Ue(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function qe(t,e){if(Ue.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ht){t:{try{qt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ve[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}Ue.prototype.preventDefault=function(){this.defaultPrevented=!0},w(qe,Ue);var Ve=Le({2:"touch",3:"pen",4:"mouse"});qe.prototype.preventDefault=function(){qe.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Me)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},qe.prototype.g=function(){return this.a};var Be="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Ke,this.va=this.Pa=!1}function We(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function He(t){this.src=t,this.a={},this.b=0}function Ge(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(We(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Qe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}He.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Qe(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new ze(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var Ye="closure_lm_"+(1e6*Math.random()|0),Xe={};function $e(t,e,n,r,i){if(r&&r.once)Ze(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)$e(t,e[o],n,r,i);else n=cn(n),t&&t[Be]?hn(t,e,n,p(r)?!!r.capture:!!r,i):Je(t,e,n,!1,r,i)}function Je(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a,s,u=p(i)?!!i.capture:!!i,c=sn(t);if(c||(t[Ye]=c=new He(t)),!(n=c.add(e,n,r,u,o)).proxy)if(a=an,r=s=je?function(t){return a.call(s.src,s.listener,t)}:function(t){if(!(t=a.call(s.src,s.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)void 0===(i=Fe?i:u)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(nn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function Ze(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else n=cn(n),t&&t[Be]?fn(t,e,n,p(r)?!!r.capture:!!r,i):Je(t,e,n,!0,r,i)}function tn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)tn(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=cn(n),t&&t[Be]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=Qe(o=t.a[e],n,r,i))&&(We(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):(t=t&&sn(t))&&(e=t.a[e.toString()],(n=(t=-1)<(t=e?Qe(e,n,r,i):t)?e[t]:null)&&en(n))}function en(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[Be]?Ge(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(nn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=sn(e))?(Ge(n,t),0==n.b&&(n.src=null,e[Ye]=null)):We(t)))}function nn(t){return t in Xe?Xe[t]:Xe[t]="on"+t}function rn(t,e,n,r){var i=!0;if((t=sn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=on(o,r),i=i&&!1!==o)}return i}function on(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&en(t),n.call(r,e)}function an(t,e){if(t.va)return!0;if(je)return on(t,new qe(e,this));if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new qe(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=rn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=rn(r[i],t,!1,e),n=n&&o}return n}function sn(t){return(t=t[Ye])instanceof He?t:null}var un="__closure_events_fn_"+(1e9*Math.random()>>>0);function cn(t){return d(t)?t:(t[un]||(t[un]=function(e){return t.handleEvent(e)}),t[un])}function ln(){xe.call(this),this.v=new He(this),(this.ac=this).gb=null}function hn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function fn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function dn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a,s,u=e[o];u&&!u.va&&u.capture==n&&(a=u.listener,s=u.Va||u.src,u.Pa&&Ge(t.v,u),i=!1!==a.call(s,r)&&i)}return i&&!r.defaultPrevented}function pn(t,e,n){if(d(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function vn(t){var e=null;return new fe((function(n,r){-1==(e=pn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function gn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function yn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function mn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof mn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function bn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];_n(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)_n(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function _n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(ln,xe),ln.prototype[Be]=!0,ln.prototype.addEventListener=function(t,e,n,r){$e(this,t,e,n,r)},ln.prototype.removeEventListener=function(t,e,n,r){tn(this,t,e,n,r)},ln.prototype.dispatchEvent=function(t){var e;if(n=this.gb)for(e=[];n;n=n.gb)e.push(n);var n=this.ac,r=t.type||t;if("string"==typeof t?t=new Ue(t,n):t instanceof Ue?t.target=t.target||n:(a=t,ft(t=new Ue(r,n),a)),a=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],a=dn(o,r,!0,t)&&a;if(a=dn(o=t.b=n,r,!0,t)&&a,a=dn(o,r,!1,t)&&a,e)for(i=0;i<e.length;i++)a=dn(o=t.b=e[i],r,!1,t)&&a;return a},ln.prototype.Da=function(){if(ln.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)We(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=mn.prototype).W=function(){bn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return bn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return _n(this.b,t)?this.b[t]:e},t.set=function(t,e){_n(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var wn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function In(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof In?(this.i=void 0!==e?e:t.i,Tn(this,t.c),this.l=t.l,this.a=t.a,En(this,t.g),this.f=t.f,Sn(this,zn(t.b)),this.h=t.h):t&&(n=String(t).match(wn))?(this.i=!!e,Tn(this,n[1]||"",!0),this.l=An(n[2]||""),this.a=An(n[3]||"",!0),En(this,n[4]),this.f=An(n[5]||"",!0),Sn(this,n[6]||"",!0),this.h=An(n[7]||"")):(this.i=!!e,this.b=new Fn(null,this.i))}function Tn(t,e,n){t.c=n?An(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function En(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Sn(t,e,n){var r,i;e instanceof Fn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(Un(r),r.c=null,r.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Vn(this,e),Kn(this,n,t))}),r)),r.f=i):(n||(e=Pn(e,jn)),t.b=new Fn(e,t.i))}function Cn(t,e,n){t.b.set(e,n)}function kn(t,e){return t.b.get(e)}function On(t){return t instanceof In?new In(t):new In(t,void 0)}function Nn(t,e,n,r){var i=new In(null,void 0);return t&&Tn(i,t),e&&(i.a=e),n&&En(i,n),r&&(i.f=r),i}function An(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Rn),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function Rn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}In.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Pn(e,xn,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(Pn(e,xn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Pn(n,"/"==n.charAt(0)?Ln:Dn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Pn(n,Mn)),t.join("")},In.prototype.resolve=function(t){var e=new In(this),n=!!t.c;n?Tn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)En(e,t.g);else if(n=!!t.f)if("/"!=r.charAt(0)&&(this.a&&!this.f?r="/"+r:-1!=(i=e.f.lastIndexOf("/"))&&(r=e.f.substr(0,i+1)+r)),".."==(i=r)||"."==i)r="";else if(it(i,"./")||it(i,"/.")){r=0==i.lastIndexOf("/",0);for(var i=i.split("/"),o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i;return n?e.f=r:n=""!==t.b.toString(),n?Sn(e,zn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var xn=/[#\/\?@]/g,Dn=/[#\?:]/g,Ln=/[#\?]/g,jn=/[#\?@]/g,Mn=/#/g;function Fn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Un(t){t.a||(t.a=new mn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function qn(t){var e=yn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Fn(null,void 0);t=gn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Kn(n,i,o):n.add(i,o)}return n}function Vn(t,e){Un(t),e=Wn(t,e),_n(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,_n((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&bn(t)))}function Bn(t,e){return Un(t),e=Wn(t,e),_n(t.a.b,e)}function Kn(t,e,n){Vn(t,e),0<n.length&&(t.c=null,t.a.set(Wn(t,e),Q(n)),t.b+=n.length)}function zn(t){var e=new Fn;return e.c=t.c,t.a&&(e.a=new mn(t.a),e.b=t.b),e}function Wn(t,e){return e=String(e),t.f?e.toLowerCase():e}function Hn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Xn(i,r),r.push(":"),t(e,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Xn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Gn,t,e),e.join("")}function Gn(){}(t=Fn.prototype).add=function(t,e){Un(this),this.c=null,t=Wn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Un(this),this.a.forEach((function(n,r){q(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Un(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Un(this);var e=[];if("string"==typeof t)Bn(this,t)&&(e=G(e,this.a.get(Wn(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return Un(this),this.c=null,Bn(this,t=Wn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),o=(r=this.W(r),0);o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}return this.c=t.join("&")};var Qn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Yn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Xn(t,e){e.push('"',t.replace(Yn,(function(t){var e=Qn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Qn[t]=e),e})),'"')}function $n(){var t=vr();return Kt&&Zt&&11==Zt||/Edge\/\d+/.test(t)}function Jn(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function Zn(t,e){e=e||a.window;var n="about:blank";t&&(n=kt(Pt(t)||Dt)),e.location.href=n}function tr(t){return!!((t=(t||vr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function er(t){t=t||a.window;try{t.close()}catch(t){}}function nr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=vr().toLowerCase(),r&&(e.target=r,it(n,"crios/")&&(e.target="_blank")),fr(vr())==hr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:Pt(void 0!==n.href?n.href:String(n))||Dt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((st("iPhone")&&!st("iPod")&&!st("iPad")||st("iPad")||st("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(dt(a=ae(document,"A"),"HTMLAnchorElement"),e=e instanceof Ct?e:Rt(e),a.href=kt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Mt("",r,n,a),t=kt(e),a&&(Wt&&it(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ut(t)+'">',t=new Lt(t=(r=bt())?r.createHTML(t):t,0,jt),r=a.document)&&(r.write((o=t)instanceof Lt&&o.constructor===Lt?o.a:(x("expected object of type SafeHtml, got '"+o+"' of type "+h(o)),"type_error:SafeHtml")),r.close())):(a=Mt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ir=/^[^@]+@[^@]+$/;function or(){var t=null;return new fe((function(e){"complete"==a.document.readyState?e():(t=function(){e()},Ze(window,"load",t))})).o((function(e){throw tn(window,"load",t),e}))}function ar(t){return t=t||vr(),!("file:"!==_r()&&"ionic:"!==_r()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function sr(){var t=a.window;try{return t&&t!=t.top}catch(t){return}}function ur(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function cr(){return Ia.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Ia.INTERNAL.hasOwnProperty("node")?"Node":ur()?"Worker":"Browser"}function lr(){var t=cr();return"ReactNative"===t||"Node"===t}var hr="Firefox";function fr(t){var e=t.toLowerCase();return it(e,"opera/")||it(e,"opr/")||it(e,"opios/")?"Opera":it(e,"iemobile")?"IEMobile":it(e,"msie")||it(e,"trident/")?"IE":it(e,"edge/")?"Edge":it(e,"firefox/")?hr:it(e,"silk/")?"Silk":it(e,"blackberry")?"Blackberry":it(e,"webos")?"Webos":!it(e,"safari/")||it(e,"chrome/")||it(e,"crios/")||it(e,"android")?!it(e,"chrome/")&&!it(e,"crios/")||it(e,"edge/")?it(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":"Chrome":"Safari"}var dr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function pr(t,e){e=e||[];var n,r=[],i={};for(n in dr)i[dr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=cr())?r=fr(i=vr()):"Worker"===r&&(r=fr(i=vr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function vr(){return a.navigator&&a.navigator.userAgent||""}function gr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length?void 0:e}function yr(){try{var t=a.localStorage,e=Sr();if(t)return t.setItem(e,"1"),t.removeItem(e),!$n()||!!a.indexedDB}catch(t){return ur()&&!!a.indexedDB}return!1}function mr(){return(br()||"chrome-extension:"===_r()||ar())&&!lr()&&yr()&&!ur()}function br(){return"http:"===_r()||"https:"===_r()}function _r(){return a.location&&a.location.protocol||null}function wr(t){return!tr(t=t||vr())&&fr(t)!=hr}function Ir(t){return void 0===t?null:Hn(t)}function Tr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Er(t){if(null!==t)return JSON.parse(t)}function Sr(t){return t||Math.floor(1e9*Math.random()).toString()}function Cr(t){return"Safari"!=fr(t=t||vr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function kr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Or(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=vr(),e=cr(),this.b=tr(t)||"ReactNative"===e}function Nr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Ar(){var t=a.document,e=null;return Nr()||!t?be():new fe((function(n){e=function(){Nr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}function Pr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Rr(){return gr("fireauth.oauthhelper",a)||gr("fireauth.iframe",a)}Or.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!br()&&"chrome-extension:"!==_r()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var xr,Dr={};function Lr(t){Dr[t]||(Dr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var jr={};Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:2}),xr=2==jr.abcd}catch(t){xr=!1}function Mr(t,e,n){xr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Fr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Mr(t,n,e[n])}function Ur(t){var e={};return Fr(e,t),e}function qr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Mr(e,n,qr(t[n]));return e}function Vr(t){var e=t&&(t[Hr]?"phone":null);if(!(e&&t&&t[Wr]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Mr(this,"uid",t[Wr]),Mr(this,"displayName",t[Kr]||null);var n=null;Mr(this,"enrollmentTime",n=t[zr]?new Date(t[zr]).toUTCString():n),Mr(this,"factorId",e)}function Br(t){try{var e=new Gr(t)}catch(t){e=null}return e}Vr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Kr="displayName",zr="enrolledAt",Wr="mfaEnrollmentId",Hr="phoneInfo";function Gr(t){Vr.call(this,t),Mr(this,"phoneNumber",t[Hr])}function Qr(t){var e={},n=t[Jr],r=t[ti],i=t[ei];if(t=Br(t[Zr]),!i||i!=Xr&&i!=$r&&!n||i==$r&&!r||i==Yr&&!t)throw Error("Invalid checkActionCode response!");i==$r?(e[ri]=n||null,e[oi]=n||null,e[ni]=r):(e[ri]=r||null,e[oi]=r||null,e[ni]=n||null),e[ii]=t||null,Mr(this,si,i),Mr(this,ai,qr(e))}w(Gr,Vr),Gr.prototype.w=function(){var t=Gr.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Yr="REVERT_SECOND_FACTOR_ADDITION",Xr="EMAIL_SIGNIN",$r="VERIFY_AND_CHANGE_EMAIL",Jr="email",Zr="mfaInfo",ti="newEmail",ei="requestType",ni="email",ri="fromEmail",ii="multiFactorInfo",oi="previousEmail",ai="data",si="operation";function ui(t){var e=kn(t=On(t),ci)||null,n=kn(t,li)||null,r=(r=kn(t,di)||null)&&vi[r]||null;if(!e||!n||!r)throw new T("argument-error",ci+", "+li+"and "+di+" are required in a valid action code URL.");Fr(this,{apiKey:e,operation:r,code:n,continueUrl:kn(t,hi)||null,languageCode:kn(t,fi)||null,tenantId:kn(t,pi)||null})}var ci="apiKey",li="oobCode",hi="continueUrl",fi="languageCode",di="mode",pi="tenantId",vi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Yr,signIn:Xr,verifyAndChangeEmail:$r,verifyEmail:"VERIFY_EMAIL"};function gi(t){try{return new ui(t)}catch(t){return null}}function yi(t){if(void 0===(e=t[Ii]))throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[mi])&&"object"==typeof r){var e=r[Si],n=r[Ti],r=r[Ei];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new T("argument-error",Ti+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new T("argument-error",Ei+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new T("argument-error",Si+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new T("missing-android-pkg-name")}}else if(void 0!==r)throw new T("argument-error",mi+" property must be a non null object when specified.");if(this.f=null,(e=t[wi])&&"object"==typeof e){if("string"==typeof(e=e[Ci])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Ci+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",wi+" property must be a non null object when specified.");if(void 0!==(e=t[_i])&&"boolean"!=typeof e)throw new T("argument-error",_i+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[bi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",bi+" property must be a non empty string when specified.");this.i=t||null}var mi="android",bi="dynamicLinkDomain",_i="handleCodeInApp",wi="iOS",Ii="url",Ti="installApp",Ei="minimumVersion",Si="packageName",Ci="bundleId";function ki(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Oi=null;function Ni(t){var e=Pi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Ai(t){try{return new Ni(t)}catch(t){return null}}function Pi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Oi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Oi){Oi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Oi[o]&&(Oi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i,o,a,s=r[e++];s<128?t[n++]=String.fromCharCode(s):191<s&&s<224?(i=r[e++],t[n++]=String.fromCharCode((31&s)<<6|63&i)):239<s&&s<365?(a=((7&s)<<18|(63&(i=r[e++]))<<12|(63&(o=r[e++]))<<6|63&r[e++])-65536,t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))):(i=r[e++],o=r[e++],t[n++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o))}return JSON.parse(t.join(""))}catch(t){}return null}Ni.prototype.T=function(){return this.f},Ni.prototype.l=function(){return this.c},Ni.prototype.toString=function(){return this.h};var Ri="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),xi=["client_id","response_type","scope","redirect_uri","state"],Di={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:xi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:xi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:xi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Ri},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Li(t){for(var e in Di)if(Di[e].fa==t)return Di[e];return null}function ji(t){var e={};e["facebook.com"]=Vi,e["google.com"]=Ki,e["github.com"]=Bi,e["twitter.com"]=zi;var n=t&&t[Fi];try{if(n)return new(e[n]||qi)(t);if(void 0!==t[Mi])return new Ui(t)}catch(t){}return null}var Mi="idToken",Fi="providerId";function Ui(t){var e,n=t[Fi];if(n||!t[Mi]||(e=Ai(t[Mi]))&&e.b&&(n=e.b),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Mr(this,"providerId",n),Mr(this,"isNewUser",e)}function qi(t){Ui.call(this,t),Mr(this,"profile",qr((t=Er(t.rawUserInfo||"{}"))||{}))}function Vi(t){if(qi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Bi(t){if(qi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Mr(this,"username",this.profile&&this.profile.login||null)}function Ki(t){if(qi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function zi(t){if(qi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Mr(this,"username",t.screenName||null)}function Wi(t){var e=kn(r=On(t),"link"),n=kn(On(e),"link"),r=kn(r,"deep_link_id");return kn(On(r),"link")||r||n||e||t}function Hi(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Gi:Qi}w(qi,Ui),w(Vi,qi),w(Bi,qi),w(Ki,qi),w(zi,qi);var Gi="enroll",Qi="signin";function Yi(){}function Xi(t,e){return t.then((function(t){if(t[Ua]){var n=Ai(t[Ua]);if(!n||e!=n.i)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==C+"user-not-found"?new T("user-mismatch"):t}))}function $i(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,Mr(this,"providerId",t),Mr(this,"signInMethod",t)}function Ji(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Zi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new $i(t.providerId,t.pendingToken)}catch(t){}return null}function to(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Mr(this,"idToken",e.idToken),e.accessToken&&Mr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Mr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Mr(this,"accessToken",e.oauthToken),Mr(this,"secret",e.oauthTokenSecret)}Mr(this,"providerId",t),Mr(this,"signInMethod",n)}function eo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:qn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function no(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new to(t.providerId,e,t.signInMethod)}catch(t){}}return null}function ro(t,e){this.Qc=e||[],Fr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Li(t)||{}).Ja||null,this.ob=null}function io(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');ro.call(this,t,[])}function oo(t){ro.call(this,t,xi),this.a=[]}function ao(){oo.call(this,"facebook.com")}function so(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new ao).credential({accessToken:e})}function uo(){oo.call(this,"github.com")}function co(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new uo).credential({accessToken:e})}function lo(){oo.call(this,"google.com"),this.Ca("profile")}function ho(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new lo).credential({idToken:n,accessToken:e})}function fo(){ro.call(this,"twitter.com",Ri)}function po(t,e){var n=t;if(!(n=p(n)?n:{oauthToken:t,oauthTokenSecret:e}).oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new to("twitter.com",n,"twitter.com")}function vo(t,e,n){this.a=t,this.f=e,Mr(this,"providerId","password"),Mr(this,"signInMethod",n===yo.EMAIL_LINK_SIGN_IN_METHOD?yo.EMAIL_LINK_SIGN_IN_METHOD:yo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function go(t){return t&&t.email&&t.password?new vo(t.email,t.password,t.signInMethod):null}function yo(){Fr(this,{providerId:"password",isOAuthProvider:!1})}function mo(t,e){if(!(e=bo(e)))throw new T("argument-error","Invalid email link!");return new vo(t,e.code,yo.EMAIL_LINK_SIGN_IN_METHOD)}function bo(t){return(t=gi(t=Wi(t)))&&t.operation===Xr?t:null}function _o(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new T("internal-error");this.a=t,Mr(this,"providerId","phone"),this.fa="phone",Mr(this,"signInMethod","phone")}function wo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return q(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new _o(e)}return null}function Io(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function To(t){try{this.a=t||Ia.auth()}catch(t){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Fr(this,{providerId:"phone",isOAuthProvider:!1})}function Eo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new _o({eb:t,cb:e})}function So(t){if(t.temporaryProof&&t.phoneNumber)return new _o({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return ho(o,n);case"facebook.com":return so(n);case"github.com":return co(n);case"twitter.com":return po(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new $i(e,a):new to(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new oo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Co(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function ko(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function Oo(t){return(t=t||{}).type?new ko(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function No(){this.b=null,this.a=[]}Hi.prototype.Ha=function(){return this.a?be(this.a):be(this.b)},Hi.prototype.w=function(){return this.type==Gi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Yi.prototype.ka=function(){},Yi.prototype.b=function(){},Yi.prototype.c=function(){},Yi.prototype.w=function(){},$i.prototype.ka=function(t){return as(t,Ji(this))},$i.prototype.b=function(t,e){var n=Ji(this);return n.idToken=e,ss(t,n)},$i.prototype.c=function(t,e){return Xi(us(t,Ji(this)),e)},$i.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},to.prototype.ka=function(t){return as(t,eo(this))},to.prototype.b=function(t,e){var n=eo(this);return n.idToken=e,ss(t,n)},to.prototype.c=function(t,e){return Xi(us(t,eo(this)),e)},to.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ro.prototype.Ka=function(t){return this.Ib=lt(t),this},w(io,ro),w(oo,ro),oo.prototype.Ca=function(t){return z(this.a,t)||this.a.push(t),this},oo.prototype.Qb=function(){return Q(this.a)},oo.prototype.credential=function(t,e){if(!(e=p(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!e.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new to(this.providerId,e,this.providerId)},w(ao,oo),Mr(ao,"PROVIDER_ID","facebook.com"),Mr(ao,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(uo,oo),Mr(uo,"PROVIDER_ID","github.com"),Mr(uo,"GITHUB_SIGN_IN_METHOD","github.com"),w(lo,oo),Mr(lo,"PROVIDER_ID","google.com"),Mr(lo,"GOOGLE_SIGN_IN_METHOD","google.com"),w(fo,ro),Mr(fo,"PROVIDER_ID","twitter.com"),Mr(fo,"TWITTER_SIGN_IN_METHOD","twitter.com"),vo.prototype.ka=function(t){return this.signInMethod==yo.EMAIL_LINK_SIGN_IN_METHOD?Ks(t,gs,{email:this.a,oobCode:this.f}):Ks(t,Fs,{email:this.a,password:this.f})},vo.prototype.b=function(t,e){return this.signInMethod==yo.EMAIL_LINK_SIGN_IN_METHOD?Ks(t,ys,{idToken:e,email:this.a,oobCode:this.f}):Ks(t,As,{idToken:e,email:this.a,password:this.f})},vo.prototype.c=function(t,e){return Xi(this.ka(t),e)},vo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Fr(yo,{PROVIDER_ID:"password"}),Fr(yo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Fr(yo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),_o.prototype.ka=function(t){return t.fb(Io(this))},_o.prototype.b=function(t,e){var n=Io(this);return n.idToken=e,Ks(t,qs,n)},_o.prototype.c=function(t,e){var n=Io(this);return n.operation="REAUTH",Xi(t=Ks(t,Vs,n),e)},_o.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},To.prototype.fb=function(t,e){var n=this.a.a;return be(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==e.type)throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var i=p(t)?t.session:null,o=p(t)?t.phoneNumber:t;return(i=i&&i.type==Gi?i.Ha().then((function(t){return Ks(n,Rs,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}}).then((function(t){return t.phoneSessionInfo.sessionInfo}))})):i&&i.type==Qi?i.Ha().then((function(e){return i=n,e={mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}},Ks(i,xs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}));var i})):Ks(n,Os,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}))}))},Fr(To,{PROVIDER_ID:"phone"}),Fr(To,{PHONE_SIGN_IN_METHOD:"phone"}),ko.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},ko.prototype.T=function(){return this.h},ko.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ao,Po=null;function Ro(t){var e="unauthorized-domain",n=void 0,r=On(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ft("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ft("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function xo(t,e,n){T.call(this,t,n),(t=e||{}).Jb&&Mr(this,"email",t.Jb),t.ea&&Mr(this,"phoneNumber",t.ea),t.credential&&Mr(this,"credential",t.credential),t.Zb&&Mr(this,"tenantId",t.Zb)}function Do(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:So(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new xo(e,n,t.message)}return null}function Lo(){}function jo(t){return t.c||(t.c=t.b())}function Mo(){}function Fo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Uo(){}function qo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Sb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function Vo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Bo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Ko(t){this.f=t,this.b=this.c=this.a=null}function zo(t,e){this.name=t,this.value=e}w(Ro,T),w(xo,T),xo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&ft(t,e),t},xo.prototype.toJSON=function(){return this.w()},Lo.prototype.c=null,w(Mo,Lo),Mo.prototype.a=function(){var t=Fo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Mo.prototype.b=function(){var t={};return Fo(this)&&(t[0]=!0,t[1]=!0),t},Ao=new Mo,w(Uo,Lo),Uo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new qo;throw Error("Unsupported browser")},Uo.prototype.b=function(){return{}},(t=qo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Vo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Vo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Vo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Bo.prototype.a=null,Bo.prototype.reset=function(t,e,n,r,i){delete this.a},zo.prototype.toString=function(){return this.name};var Wo=new zo("SEVERE",1e3),Ho=new zo("WARNING",900),Go=new zo("CONFIG",700),Qo=new zo("FINE",500);Ko.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c||(e.a?t(e.a):(x("Root logger has no level set."),null))}(this).value)for(d(e)&&(e=e()),t=new Bo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Yo,Xo={},$o=null;function Jo(t){var e,n,r;return $o||($o=new Ko(""),(Xo[""]=$o).c=Go),(e=Xo[t])||(e=new Ko(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=Jo(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,Xo[t]=e),e}function Zo(t,e){t&&t.log(Qo,e,void 0)}function ta(t){this.f=t}function ea(t){ln.call(this),this.u=t,this.h=void 0,this.readyState=na,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Jo("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(ta,Lo),ta.prototype.a=function(){return new ea(this.f)},ta.prototype.b=(Yo={},function(){return Yo}),w(ea,ln);var na=0;function ra(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ia(t){t.readyState=4,t.g=null,t.c=null,t.m=null,oa(t)}function oa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function aa(t){ln.call(this),this.headers=new mn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=sa,this.u=this.S=!1}(t=ea.prototype).open=function(t,e){if(this.readyState!=na)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,oa(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ia(this)),this.readyState=na},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,oa(this)),this.a&&(this.readyState=3,oa(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ra(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){var e;this.a&&((e=this.m.decode(t.value||new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?ia:oa)(this),3==this.readyState&&ra(this))},t.tc=function(t){this.a&&(this.response=this.responseText=t,ia(this))},t.sc=function(t){this.a&&(this.response=t,ia(this))},t.Ua=function(t){var e=this.i;e&&e.log(Ho,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ia(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Ho,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b)return(t=this.i)&&t.log(Ho,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ea.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),w(aa,ln);var sa="";aa.prototype.b=Jo("goog.net.XhrIo");var ua=/^https?$/i,ca=["POST","PUT"];function la(t){return"content-type"==t.toLowerCase()}function ha(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,fa(t),pa(t)}function fa(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function da(t){if(t.c&&void 0!==o)if(t.C[1]&&4==ga(t)&&2==ya(t))Zo(t.b,ma(t,"Local request error detected and ignored"));else if(t.i&&4==ga(t))pn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==ga(t)){Zo(t.b,ma(t,"Request complete")),t.c=!1;try{var e,n,r,i,s=ya(t);t:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}if((e=u)||((n=0===s)&&(!(i=String(t.l).match(wn)[1]||null)&&a.self&&a.self.location&&(i=(r=a.self.location.protocol).substr(0,r.length-1)),n=!ua.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<ga(t)?t.a.statusText:""}catch(e){Zo(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+ya(t)+"]",fa(t)}}finally{pa(t)}}}function pa(t,e){if(t.a){va(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Wo,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function va(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function ga(t){return t.a?t.a.readyState:0}function ya(t){try{return 2<ga(t)?t.a.status:-1}catch(t){return-1}}function ma(t,e){return e+" ["+t.R+" "+t.l+" "+ya(t)+"]"}function ba(t){var e=Pa;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function _a(t,e,n){t.a=!0,t.c=n,t.f=!e,Sa(t)}function wa(t){if(t.a){if(!t.v)throw new Ca;t.v=!1}}function Ta(t,e,n,r){t.g.push([e,n,r]),t.a&&Sa(t)}function Ea(t){return K(t.g,(function(t){return d(t[1])}))}function Sa(t){var e;t.h&&t.a&&Ea(t)&&(n=t.h,(e=Na[n])&&(a.clearTimeout(e.a),delete Na[n]),t.h=0),t.b&&(t.b.l--,delete t.b);for(var n=t.c,r=e=!1;t.g.length&&!t.i;){var i=(s=t.g.shift())[0],o=s[1],s=s[2];if(i=t.f?o:i)try{var u=i.call(s||t.s,n);void 0!==u&&(t.f=t.f&&(u==n||u instanceof Error),t.c=n=u),(A(n)||"function"==typeof a.Promise&&n instanceof a.Promise)&&(r=!0,t.i=!0)}catch(r){n=r,t.f=!0,Ea(t)||(e=!0)}}t.c=n,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),n instanceof ba?(Ta(n,u,r),n.C=!0):n.then(u,r)),e&&(n=new Oa(n),Na[n.a]=n,t.h=n.a)}function Ca(){P.call(this)}function ka(){P.call(this)}function Oa(t){this.a=a.setTimeout(b(this.c,this),0),this.b=t}(t=aa.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Zo(this.b,ma(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Zo(this.b,ma(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),pa(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),pa(this,!0)),aa.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?da(this):this.Jc())},t.Jc=function(){da(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case sa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Wo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Zo(this.b,"Can not get response: "+t.message),null}},ba.prototype.cancel=function(t){var e;this.a?this.c instanceof ba&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new ka,wa(this),_a(this,!1,t)))},ba.prototype.m=function(t,e){this.i=!1,_a(this,t,e)},ba.prototype.then=function(t,e,n){var r,i,o=new fe((function(t,e){r=t,i=e}));return Ta(this,r,(function(t){t instanceof ka?o.cancel():i(t)})),o.then(t,e,n)},ba.prototype.$goog_Thenable=!0,w(Ca,P),Ca.prototype.message="Deferred has already fired",Ca.prototype.name="AlreadyCalledError",w(ka,P),ka.prototype.message="Deferred was canceled",ka.prototype.name="CanceledError",Oa.prototype.c=function(){throw delete Na[this.a],this.b};var Na={};function Aa(t){var e=document,n=wt(t).toString(),r=ae(document,"SCRIPT"),i={Wb:r,Ma:void 0},o=new ba(i),s=window.setTimeout((function(){Ra(r,!0);var t=new La(Da,"Timeout reached for loading script "+n);wa(o),_a(o,!1,t)}),5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Ra(r,!1,s),wa(o),_a(o,!0,null))},r.onerror=function(){Ra(r,!0,s);var t=new La(xa,"Error while loading script "+n);wa(o),_a(o,!1,t)},ft(i={},{type:"text/javascript",charset:"UTF-8"}),ne(r,i),i=t,dt(t=r,"HTMLScriptElement"),t.src=wt(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=a?c(i.document):u=null===u?c(a.document):u)&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function Pa(){var t;this&&this.Wb&&(t=this.Wb)&&"SCRIPT"==t.tagName&&Ra(t,!0,this.Ma)}function Ra(t,e,n){null!=n&&a.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var xa=0,Da=1;function La(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function ja(t){this.f=t}function Ma(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||qa,this.g=lt(t.secureTokenHeaders||Va),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Ba,this.a=lt(t.firebaseHeaders||Ka),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==cr(),!(n=a.XMLHttpRequest||n&&Ia.INTERNAL.node&&Ia.INTERNAL.node.XMLHttpRequest)&&!ur())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ur()?this.f=new ta(self):lr()?this.f=new ja(n):this.f=new Uo,this.b=null}w(La,P),w(ja,Lo),ja.prototype.a=function(){return new this.f},ja.prototype.b=function(){return{}};var Fa,Ua="idToken",qa=new Or(3e4,6e4),Va={"Content-Type":"application/x-www-form-urlencoded"},Ba=new Or(3e4,6e4),Ka={"Content-Type":"application/json"};function za(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Wa(t,e){e&&(t.l=Ha("https://securetoken.googleapis.com/v1/token",e),t.h=Ha("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Ha("https://identitytoolkit.googleapis.com/v2/",e))}function Ha(t,e){return t=On(t),e=On(e.url),t.f=t.a+t.f,Tn(t,e.c),t.a=e.a,En(t,e.g),t.toString()}function Ga(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Qa(t,e,n,r,i,o,s){var u;(t=((u="Chrome"==fr(u=vr())&&(u=u.match(/\sChrome\/(\d+)/i))&&2==u.length?parseInt(u[1],10):null)&&u<30||Kt&&Zt&&!(9<Zt))&&!ur()?(Fa=Fa||new fe((function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(a[Xa]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},function(t,e){Ta(t,null,(function(){r(Error("CORS_UNSUPPORTED"))}),void 0)}(Aa(It(Ya,{onload:Xa}))))})),b(t.s,t)):b(t.u,t))(e,n,r,i,o,s)}Ma.prototype.T=function(){return this.b},Ma.prototype.u=function(t,e,n,r,i,o){if(ur()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,u=new aa(this.f);o&&(u.g=Math.max(0,o),s=setTimeout((function(){u.dispatchEvent("timeout")}),o)),hn(u,"complete",(function(){s&&clearTimeout(s);var n=null;try{n=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Zo(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){n=null}e&&e(n)})),fn(u,"ready",(function(){s&&clearTimeout(s),De(this)})),fn(u,"timeout",(function(){s&&clearTimeout(s),De(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=(t.D||Ao).a(),t.C=t.D?jo(t.D):jo(Ao),t.a.onreadystatechange=b(t.Vb,t);try{Zo(t.b,ma(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return Zo(t.b,ma(t,"Error opening Xhr: "+e.message)),void ha(t,e)}e=r||"";var o,s=new mn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)q(t,e,void 0);else for(var n=yn(t),r=gn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){s.set(e,t)})),i=function(t){t:{for(var e=la,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=a.FormData&&e instanceof a.FormData,!z(ca,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{va(t),0<t.g&&(t.u=(o=t.a,Kt&&Jt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),Zo(t.b,ma(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=pn(t.Ma,t.g,t)),Zo(t.b,ma(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){Zo(t.b,ma(t,"Send error: "+e.message)),ha(t,e)}}(u,t,n,r,i)};var Ya=new pt(mt,"https://apis.google.com/js/client.js?onload=%{onload}"),Xa="__fcb"+Math.floor(1e6*Math.random()).toString();function $a(t){if("string"!=typeof(t=t.email)||!ir.test(t))throw new T("invalid-email")}function Ja(t){"email"in t&&$a(t)}function Za(t){if(!t[Ua]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,lt(t));throw new T("internal-error")}}function ts(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}Ma.prototype.s=function(t,e,n,r,i){var o=this;Fa.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ma.prototype.zb=function(){return Ks(this,Ps,{})},Ma.prototype.Bb=function(t,e){return Ks(this,Ns,{idToken:t,email:e})},Ma.prototype.Cb=function(t,e){return Ks(this,As,{idToken:t,password:e})};var es={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ns(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function rs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function is(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Bn(t=new Fn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function os(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Do(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Do(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Do(t)):t.errorMessage&&(e=zs(t.errorMessage)),e)throw e;Za(t)}function as(t,e){return e.returnIdpCredential=!0,Ks(t,Ds,e)}function ss(t,e){return e.returnIdpCredential=!0,Ks(t,js,e)}function us(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ks(t,Ls,e)}function cs(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=Ma.prototype).Db=function(t,e){var n={idToken:t},r=[];return ut(es,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Ks(this,Ns,n)},t.vb=function(t,e){return ft(t={requestType:"PASSWORD_RESET",email:t},e),Ks(this,Es,t)},t.wb=function(t,e){return ft(t={requestType:"EMAIL_SIGNIN",email:t},e),Ks(this,ws,t)},t.ub=function(t,e){return ft(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ks(this,Is,t)},t.Eb=function(t,e,n){return ft(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ks(this,Ts,t)},t.fb=function(t){return Ks(this,Us,t)},t.nb=function(t,e){return Ks(this,ks,{oobCode:t,newPassword:e})},t.Ra=function(t){return Ks(this,hs,{oobCode:t})},t.jb=function(t){return Ks(this,ls,{oobCode:t})};var ls={endpoint:"setAccountInfo",A:cs,Z:"email",B:!0},hs={endpoint:"resetPassword",A:cs,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},B:!0},fs={endpoint:"signupNewUser",A:function(t){if($a(t),!t.password)throw new T("weak-password")},G:Za,V:!0,B:!0},ds={endpoint:"createAuthUri",B:!0},ps={endpoint:"deleteAccount",N:["idToken"]},vs={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},gs={endpoint:"emailLinkSignin",N:["email","oobCode"],A:$a,G:Za,V:!0,B:!0},ys={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:$a,G:Za,V:!0},ms={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ns,G:Za,B:!0,Na:!0},bs={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ns,G:Za,B:!0,Na:!0},_s={endpoint:"getAccountInfo"},ws={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");$a(t)},Z:"email",B:!0},Is={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Ts={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Es={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");$a(t)},Z:"email",B:!0},Ss={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Cs={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},ks={endpoint:"resetPassword",A:cs,Z:"email",B:!0},Os={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ns={endpoint:"setAccountInfo",N:["idToken"],A:Ja,V:!0},As={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(Ja(t),!t.password)throw new T("weak-password")},G:Za,V:!0},Ps={endpoint:"signupNewUser",G:Za,V:!0,B:!0},Rs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},xs={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Ds={endpoint:"verifyAssertion",A:rs,Ya:is,G:os,V:!0,B:!0},Ls={endpoint:"verifyAssertion",A:rs,Ya:is,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw zs(t.errorMessage);Za(t)},V:!0,B:!0},js={endpoint:"verifyAssertion",A:function(t){if(rs(t),!t.idToken)throw new T("internal-error")},Ya:is,G:os,V:!0},Ms={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new T("invalid-custom-token")},G:Za,V:!0,B:!0},Fs={endpoint:"verifyPassword",A:function(t){if($a(t),!t.password)throw new T("wrong-password")},G:Za,V:!0,B:!0},Us={endpoint:"verifyPhoneNumber",A:ts,G:Za,B:!0},qs={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new T("internal-error");ts(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Do(t);Za(t)}},Vs={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ts,G:Za,B:!0},Bs={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ua]^!!t.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function Ks(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.N))return _e(new T("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return be(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=On(e+n);Cn(s,"key",t.c),a&&Cn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Cn(s,c,i[c]);return new fe((function(e,n){Qa(t,s.toString(),(function(t){t?t.error?n(Ws(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:Hn(Tr(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function zs(t){return Ws({error:{errors:[{message:t}],code:400,message:t}})}function Ws(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new T(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",ft(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new T(i[n],e);return new T("internal-error",e=!e&&t?Ir(t):e)}function Hs(t){var e;this.b=t,this.a=null,this.rb=(e=this,(Xs=Xs||new fe((function(t,e){function n(){kr(),gr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){kr(),e(Error("Network Error"))},timeout:Qs.get()})}var r;gr("gapi.iframes.Iframe")?t():gr("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),a[r]=function(){gr("gapi.load")?n():e(Error("Network Error"))},be(Aa(r=It(Gs,{onload:r}))).o((function(){e(Error("Network Error"))})))})).o((function(t){throw Xs=null,t}))).then((function(){return new fe((function(t,n){gr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Ys.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))})))}var Gs=new pt(mt,"https://apis.google.com/js/api.js?onload=%{onload}"),Qs=new Or(3e4,6e4),Ys=new Or(5e3,15e3),Xs=null;function $s(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Nn((t=On(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Nn("https",this.l,null,"/__/auth/iframe"),this.a=t,Cn(this.a,"apiKey",this.h),Cn(this.a,"appName",this.i),this.b=null,this.c=[]}function Js(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Zs(t){try{return Ia.app(t).auth().Ga()}catch(t){return[]}}function tu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function eu(t){var e=Jn();return Ks(t,Ss,{}).then((function(t){return t.authorizedDomains||[]})).then((function(t){t:{for(var n=(r=On(e)).c,r=r.a,i=0;i<t.length;i++){var o=t[i],a=r,s=n;if(a=0==o.indexOf("chrome-extension://")?On(o).a==a&&"chrome-extension"==s:("http"==s||"https"==s)&&(rr.test(o)?a==o:(o=o.split(".").join("\\."),new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)))){t=!0;break t}}t=!1}if(!t)throw new Ro(Jn())}))}function nu(t){return t.m||(t.m=or().then((function(){var e,n,r,i;t.u||(e=t.c,n=t.i,r=Zs(t.b),(i=new $s(t.s,t.g,t.b,t.f)).f=e,i.b=n,i.c=Q(r||[]),t.u=i.toString()),t.v=new Hs(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Oo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",be(n)}return n.status="ERROR",be(n)}))}(t)})),t.m)}function ru(t){return t.l||(t.C=t.c?pr(t.c,Zs(t.b)):null,t.l=new Ma(t.g,N(t.i),t.C),t.f&&Wa(t.l,t.f)),t.l}function iu(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new Js(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=lt(u||null),t.f=c,t.yb(l).toString()}function ou(t){if(this.a=t||Ia.INTERNAL.reactNative&&Ia.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function au(t){this.b=t,this.a={},this.f=b(this.c,this)}$s.prototype.toString=function(){return this.f?Cn(this.a,"v",this.f):Vn(this.a.b,"v"),this.b?Cn(this.a,"eid",this.b):Vn(this.a.b,"eid"),this.c.length?Cn(this.a,"fw",this.c.join(",")):Vn(this.a.b,"fw"),this.a.toString()},Js.prototype.yb=function(t){return this.h=t,this},Js.prototype.toString=function(){var t;if(Cn(t=this.v?Nn((t=On(this.v.url)).c,t.a,t.g,"/emulator/auth/handler"):Nn("https",this.u,null,"/__/auth/handler"),"apiKey",this.s),Cn(t,"appName",this.c),Cn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Ia.app(this.c).auth().la()}catch(t){n=null}for(r in e.ob=n,Cn(t,"providerId",this.a.providerId),e=Tr((n=this.a).Ib))e[r]=e[r].toString();for(var r=n.Qc,i=(e=lt(e),0);i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),ct(e)||Cn(t,"customParameters",Ir(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&Cn(t,"scopes",n.join(",")),this.l?Cn(t,"redirectUrl",this.l):Vn(t.b,"redirectUrl"),this.g?Cn(t,"eventId",this.g):Vn(t.b,"eventId"),this.i?Cn(t,"v",this.i):Vn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!kn(t,a)&&Cn(t,a,this.b[a]);return this.h?Cn(t,"tid",this.h):Vn(t.b,"tid"),this.f?Cn(t,"eid",this.f):Vn(t.b,"eid"),(a=Zs(this.c)).length&&Cn(t,"fw",a.join(",")),t.toString()},(t=tu.prototype).Ob=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){var n,r;r={type:"webStorageSupport"},nu(n=o).then((function(){return t=n.v,e=r,t.rb.then((function(){return new fe((function(n){t.a.send(e.type,e,n,gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}));var t,e})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})).then((function(n){n||(t&&er(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return e=t,new fe((function(t){return function n(){vn(2e3).then((function(){return e&&!e.closed?n():void t()}))}()}));var e})).then((function(){if(!a)return vn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=vr();return!wr(t)&&!Cr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,a,s){if(!t)return _e(new T("popup-blocked"));if(a&&!wr())return this.ma().o((function(e){er(t),i(e)})),r(),be();this.a||(this.a=eu(ru(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw er(t),i(e),e}));return r(),e})).then((function(){Co(n),a||Zn(iu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=eu(ru(this)));var i=this;return this.a.then((function(){Co(e),Zn(iu(i.s,i.g,i.b,t,e,Jn(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return nu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){H(this.h,(function(e){return e==t}))},(t=ou.prototype).get=function(t){return be(this.a.getItem(t)).then((function(t){return t&&Er(t)}))},t.set=function(t,e){return be(this.a.setItem(t,Ir(e)))},t.U=function(t){return be(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var su,uu=[];function cu(t,e,n){ct(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function lu(t){this.a=t}function hu(t){this.c=t,this.b=!1,this.a=[]}function fu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return _e(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new fe((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return du(t,c),e})).o((function(e){throw du(t,c),e}))}function du(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),H(t.a,(function(t){return t==e})))}function pu(){if(!yu())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t,e,n,r=this;ur()&&self?(this.v=(n=ur()?self:null,q(uu,(function(t){t.b==n&&(e=t)})),e||(e=new au(n),uu.push(e)),e),cu(this.v,"keyChanged",(function(t,e){return Iu(r).then((function(t){return 0<t.length&&q(r.a,(function(e){e(t)})),{keyProcessed:z(t,e.key)}}))})),cu(this.v,"ping",(function(){return be(["keyChanged"])}))):((t=a.navigator)&&t.serviceWorker?be().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):be(null)).then((function(t){(r.h=t)&&(r.g=new hu(new lu(t)),fu(r.g,"ping",null,!0).then((function(t){t[0].fulfilled&&z(t[0].value,"keyChanged")&&(r.s=!0)})).o((function(){})))}))}function vu(t){return t.i||(t.i=function t(e){return new fe((function(n,r){var i=e.m.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(t){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){r(t)}},i.onsuccess=function(i){var o;(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):(o=e,new fe((function(t,e){var n=o.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}})).then((function(){return t(e)})).then((function(t){n(t)})).o((function(t){r(t)})))}}))}(t)),t.i}function gu(t,e){var n=0;return new fe((function r(i,o){vu(t).then(e).then(i).o((function(e){return 3<++n?void o(e):vu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}))}))}))}function yu(){try{return a.indexedDB}catch(t){return}}function mu(t){return t.objectStore("firebaseLocalStorage")}function bu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function _u(t){return new fe((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function wu(t,e){return t.g&&t.h&&((n=a.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?fu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):be();var n}function Iu(t){return vu(t).then((function(t){var e=mu(bu(t,!1));return e.getAll?_u(e.getAll()):new fe((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function Tu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Eu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=be().then((function(){if(yu()){var t=Sr(),r="__sak"+t;return su=su||new pu,(n=su).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){q(e.a,(function(e){e(t)}))})),t}))}function Su(){this.a={},this.type="inMemory"}function Cu(){if(!function(){var t="Node"==cr();if(!(t=ku()||t&&Ia.INTERNAL.node&&Ia.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==cr())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=ku()||Ia.INTERNAL.node.localStorage,this.type="localStorage"}function ku(){try{var t=a.localStorage,e=Sr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ou(){this.type="nullStorage"}function Nu(){if(!function(){var t="Node"==cr();if(!(t=Au()||t&&Ia.INTERNAL.node&&Ia.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==cr())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Au()||Ia.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Au(){try{var t=a.sessionStorage,e=Sr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Pu(){var t={};t.Browser=Du,t.Node=Lu,t.ReactNative=ju,t.Worker=Mu,this.a=t[cr()]}au.prototype.c=function(t){var e,n=t.data.eventType,r=t.data.eventId,i=this.a[n];i&&0<i.length&&(t.ports[0].postMessage({status:"ack",eventId:r,eventType:n,response:null}),e=[],q(i,(function(n){e.push(be().then((function(){return n(t.origin,t.data.data)})))})),Ie(e).then((function(e){var i=[];q(e,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),q(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:i})})))},lu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},hu.prototype.close=function(){for(;0<this.a.length;)du(this,this.a[0]);this.b=!0},(t=pu.prototype).set=function(t,e){var n=this,r=!1;return gu(this,(function(e){return _u((e=mu(bu(e,!0))).get(t))})).then((function(i){return gu(n,(function(o){if(o=mu(bu(o,!0)),i)return i.value=e,_u(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,_u(o.add(a))}))})).then((function(){return n.c[t]=e,wu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return gu(this,(function(e){return _u(mu(bu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return gu(this,(function(r){return n=!0,e.b++,_u(mu(bu(r,!0)).delete(t))})).then((function(){return delete e.c[t],wu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){var e;0==this.a.length&&(Tu(e=this),function t(){e.f=setTimeout((function(){e.l=Iu(e).then((function(t){0<t.length&&q(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()),this.a.push(t)},t.ia=function(t){H(this.a,(function(e){return e==t})),0==this.a.length&&Tu(this)},(t=Eu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){H(this.a,(function(e){return e==t}))},(t=Su.prototype).get=function(t){return be(this.a[t])},t.set=function(t,e){return this.a[t]=e,be()},t.U=function(t){return delete this.a[t],be()},t.ca=function(){},t.ia=function(){},(t=Cu.prototype).get=function(t){var e=this;return be().then((function(){return Er(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return be().then((function(){var r=Ir(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return be().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&$e(a.window,"storage",t)},t.ia=function(t){a.window&&tn(a.window,"storage",t)},(t=Ou.prototype).get=function(){return be(null)},t.set=function(){return be()},t.U=function(){return be()},t.ca=function(){},t.ia=function(){},(t=Nu.prototype).get=function(t){var e=this;return be().then((function(){return Er(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return be().then((function(){var r=Ir(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return be().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Ru,xu,Du={F:Cu,bb:Nu},Lu={F:Cu,bb:Nu},ju={F:ou,bb:Ou},Mu={F:Cu,bb:Ou},Fu={rd:"local",NONE:"none",td:"session"};function Uu(){var t=!(Cr(vr())||!sr()),e=wr(),n=yr();this.m=t,this.h=e,this.l=n,this.a={},t=Ru=Ru||new Pu;try{this.g=!$n()&&Rr()||!a.indexedDB?new t.a.F:new Eu(new(ur()?Su:t.a.F))}catch(t){this.g=new Su,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Su}this.v=new Su,this.f=b(this.Yb,this),this.b={}}function qu(){return xu=xu||new Uu}function Vu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function Bu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ku(t,e,n){return n=Bu(e,n),"local"==e.F&&(t.b[n]=null),Vu(t,e.F).U(n)}function zu(t){t.c&&(clearInterval(t.c),t.c=null)}function Wu(t){this.a=t,this.b=qu()}(t=Uu.prototype).get=function(t,e){return Vu(this,t.F).get(Bu(t,e))},t.set=function(t,e,n){var r=Bu(t,n),i=this,o=Vu(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){var r;t=Bu(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),ct(this.a)&&(Vu(this,"local").ca(this.f),this.h||($n()||!Rr())&&a.indexedDB||!this.l||(zu(r=this),r.c=setInterval((function(){for(var t in r.a){var e=a.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new qe({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Yb(e))}}),1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Bu(t,e),this.a[t]&&(H(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ct(this.a)&&(Vu(this,"local").ia(this.f),zu(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Vu(this,"local").ia(this.f):zu(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.mb(e))},Kt&&Zt&&10==Zt&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else q(t,b(this.mb,this))},t.mb=function(t){this.a[t]&&q(this.a[t],(function(t){t()}))};var Hu,Gu={name:"authEvent",F:"local"};function Qu(){this.a=qu()}function Yu(t,e){this.b=Xu,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===Hu&&(Hu=a.Int32Array?new Int32Array(rc):rc),this.reset()}w(Yu,(function(){this.b=-1}));for(var Xu=64,$u=Xu-1,Ju=[],Zu=0;Zu<$u;Zu++)Ju[Zu]=0;var tc=G(128,Ju);function ec(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Hu[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function nc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ec(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ec(t),i=0)}}t.c=i,t.g+=n}Yu.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Q(this.h)};var rc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ic(){Yu.call(this,8,oc)}w(ic,Yu);var oc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ac(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new Qu,this.g=new Wu(this.h),this.f=null,this.b=[],this.a=this.c=null}function sc(t){return new T("invalid-cordova-configuration",t)}function uc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function cc(t){return t.f||(t.f=t.ma().then((function(){return new fe((function(e){function n(t){o=!0,s&&s.cancel(),lc(r).then((function(e){var n,o=i;e&&t&&t.url&&(n=null,o=(n=-1!=(o=Wi(t.url)).indexOf("/__/auth/callback")?(n="object"==typeof(n=Er(kn(n=On(o),"firebaseError")||null))?E(n):null)?new ko(e.c,e.b,null,null,n,null,e.T()):new ko(e.c,e.b,o,e.f,null,null,e.T()):n)||i),uc(r,o)}))}var r,i,o,s,u;t.Ea((function n(r){return e(r),t.Sa(n),!1})),r=t,i=new ko("unknown",null,null,null,new T("no-auth-event")),o=!1,s=vn(500).then((function(){return lc(r).then((function(){o||uc(r,i)}))})),u=a.handleOpenURL,a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(gr("BuildInfo.packageName",a).toLowerCase()+"://")&&n({url:t}),"function"==typeof u)try{u(t)}catch(t){console.error(t)}},Po=Po||new No,function(t){var e=Po;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=gr("universalLinks.subscribe",a))&&t(null,e.b))}(n)}))}))),t.f}function lc(t){var e,n=null;return(e=t.g).b.get(Gu,e.a).then(Oo).then((function(e){return n=e,Ku((e=t.g).b,Gu,e.a)})).then((function(){return n}))}function hc(t){this.a=t,this.b=qu()}(t=ac.prototype).ma=function(){return this.Ia||(this.Ia=(ar(void 0)?or().then((function(){return new fe((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):_e(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof gr("universalLinks.subscribe",a))throw sc("cordova-universal-links-plugin-fix is not installed");if(void 0===gr("BuildInfo.packageName",a))throw sc("cordova-plugin-buildinfo is not installed");if("function"!=typeof gr("cordova.plugins.browsertab.openUrl",a))throw sc("cordova-plugin-browsertab is not installed");if("function"!=typeof gr("cordova.InAppBrowser.open",a))throw sc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")})))},t.Ob=function(t,e){return e(new T("operation-not-supported-in-this-environment")),be()},t.Mb=function(){return _e(new T("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return _e(new T("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=be().then((function(){return Co(e),cc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new ko(e,r,null,o,new T("no-auth-event"),null,i),u=gr("BuildInfo.packageName",a);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=gr("BuildInfo.displayName",a),l={};if(vr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!vr().toLowerCase().match(/android/))return _e(new T("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new ic;nc(e,t),t=[];var n=8*e.g;e.c<56?nc(e,tc,56-e.c):nc(e,tc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ec(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return B(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(o),l.sessionId=o;var h=iu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(Gu,s.w(),e)})).then((function(){var e=gr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=gr("cordova.plugins.browsertab.openUrl",a)))throw new T("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=gr("cordova.InAppBrowser.open",a)))throw new T("invalid-cordova-configuration");e=vr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new fe((function(t,e){u=function(){var e=gr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s=s||vn(2e3).then((function(){e(new T("redirect-cancelled-by-user"))}))},l=function(){Nr()&&c()},o.addEventListener("resume",c,!1),vr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return lc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Sa(u),i.c=null}))},t.Ea=function(t){this.b.push(t),cc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new ko("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Sa=function(t){H(this.b,(function(e){return e==t}))};var fc={name:"pendingRedirect",F:"session"};function dc(t){return Ku(t.b,fc,t.a)}function pc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Nc,this.C=new Dc,this.g=new hc(kc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=vc(this.D,this.v,this.m,S,this.J)}function vc(t,e,n,r,i){var o=Ia.SDK_VERSION||null;return new(ar()?ac:tu)(t,e,n,o,r,i)}function gc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function yc(t){t.a.Xb()&&gc(t).o((function(e){var n=new ko("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Tc(e)&&t.s(n)})),t.a.Tb()||Ac(t.b)}function mc(t,e){z(t.h,e)||t.h.push(e),t.f||(e=t.g).b.get(fc,e.a).then((function(t){return"pending"==t})).then((function(e){e?dc(t.g).then((function(){gc(t).o((function(e){var n=new ko("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Tc(e)&&t.s(n)}))})):yc(t)})).o((function(){yc(t)}))}function bc(t,e){H(t.h,(function(t){return t==e}))}pc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=vc(this.D,this.v,this.m,null,this.J),this.i={}},pc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Ac(this.b),e};var _c=new Or(2e3,1e4),wc=new Or(3e4,6e4);function Ic(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Tc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Ec(t,e,n,r,i){var o,a;return(a=t.g).b.set(fc,"pending",a.a).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Tc(e))throw new T("operation-not-supported-in-this-environment");return o=e,dc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new fe((function(){})):dc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function Sc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),_c.get())}pc.prototype.qa=function(){return this.b.qa()};var Cc={};function kc(t,e,n){return t=t+":"+e,n?t+":"+n.url:t}function Oc(t,e,n,r){var i=kc(e,n,r);return Cc[i]||(Cc[i]=new pc(t,e,n,r)),Cc[i]}function Nc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Ac(t){t.g||(t.g=!0,xc(t,!1,null,null))}function Pc(t){t.g&&!t.i&&xc(t,!1,null,null)}function Rc(t,e){if(t.b=function(){return be(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function xc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return _e(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Rc(t,n):Rc(t,{user:null}),t.f=[],t.c=[]}function Dc(){}function Lc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function jc(t,e){this.a=e,Mr(this,"verificationId",t)}function Mc(t,e,n,r){return new To(t).fb(e,n).then((function(t){return new jc(t,r)}))}function Fc(t){var e=Pi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Fr(this,{token:t,expirationTime:Pr(1e3*e.exp),authTime:Pr(1e3*e.auth_time),issuedAtTime:Pr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Uc(t,e,n){var r=e&&e[Vc];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=lt(e),this.g=n,this.c=new Hi(null,r),this.b=[];var i=this;q(e[qc]||[],(function(t){(t=Br(t))&&i.b.push(t)})),Mr(this,"auth",this.a),Mr(this,"session",this.c),Mr(this,"hints",this.b)}Nc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Nc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(xc(this,!0,null,t.a),be()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){xc(t,s,e,null)})).o((function(e){xc(t,s,null,e)}))}(this,t,e):_e(new T("invalid-auth-event")):(xc(this,!1,null,null),be())):_e(new T("invalid-auth-event"))},Nc.prototype.qa=function(){var t=this;return new fe((function(e,n){var r,i;t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),r=t,i=new T("timeout"),r.a&&r.a.cancel(),r.a=vn(wc.get()).then((function(){r.b||(r.g=!0,xc(r,!0,null,i))})))}))},Dc.prototype.h=function(t,e){var n,r,i,o,a;t?(n=t.c,r=t.b,t.a?(e.na(t.c,null,t.a,t.b),be()):e.Fa(n,r)?(i=e,o=(t=t).b,a=t.c,i.Fa(a,o)(t.g,t.f,t.T(),t.i).then((function(t){i.na(a,t,null,o)})).o((function(t){i.na(a,null,t,o)}))):_e(new T("invalid-auth-event"))):_e(new T("invalid-auth-event"))},jc.prototype.confirm=function(t){return t=Eo(this.verificationId,t),this.a(t)};var qc="mfaInfo",Vc="mfaPendingCredential";function Bc(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new Uc(t,e,n),Mr(this,"resolver",this.b)}function Kc(t,e,n){if(t&&p(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Bc(e,t.serverResponse,n,t.message)}catch(t){}return null}function zc(){}function Wc(t){Mr(this,"factorId",t.fa),this.a=t}function Hc(t){if(Wc.call(this,t),this.a.fa!=To.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Gc(t,e){for(var n in Ue.call(this,t),e)this[n]=e[n]}function Qc(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),$e(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&q(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[Wr]=t.uid),t.displayName&&(r[Kr]=t.displayName),t.enrollmentTime&&(r[zr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[Hr]=t.phoneNumber);try{e=new Gr(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),Yc(this,n)}function Yc(t,e){t.b=e,Mr(t,"enrolledFactors",e)}function Xc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function $c(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function Jc(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function Zc(t,e){t.b=Ai(e[Ua]||""),t.a=e.refreshToken,Jc(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function tl(t,e){this.a=t||null,this.b=e||null,Fr(this,{lastSignInTime:Pr(e||null),creationTime:Pr(t||null)})}function el(t,e,n,r,i,o){Fr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function nl(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r,i=Ia.SDK_VERSION?pr(Ia.SDK_VERSION):null;this.a=new Ma(this.l,N(S),i),t.emulatorConfig&&Wa(this.a,t.emulatorConfig),this.b=new $c(this.a),ll(this,e[Ua]),Zc(this.b,e),Mr(this,"refreshToken",this.b.a),dl(this,n||{}),ln.call(this),this.R=!1,this.s&&mr()&&(this.i=Oc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=(r=this,new Xc((function(){return r.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var t=r.b.c-Date.now()-3e5;return 0<t?t:0}))),this.aa=b(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){Wa(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){ol(o,t.f)},this.ba=null,this.O=new Qc(this,n),Mr(this,"multiFactor",this.O)}function rl(t,e){t.ja&&tn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&$e(e,"languageCodeChanged",t.Oa)}function il(t,e){t.X&&tn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&$e(e,"emulatorConfigChanged",t.Aa)}function ol(t,e){t.$=e,Ga(t.a,Ia.SDK_VERSION?pr(Ia.SDK_VERSION,t.$):null)}function al(t,e){t.ba&&tn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&$e(e,"frameworkChanged",t.Ba)}function sl(e){try{return Ia.app(e.m).auth()}catch(t){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function ul(t){t.D||t.u.b||(t.u.start(),tn(t,"tokenChanged",t.aa),$e(t,"tokenChanged",t.aa))}function cl(t){tn(t,"tokenChanged",t.aa),t.u.stop()}function ll(t,e){t.za=e,Mr(t,"_lat",e)}function hl(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ie(e).then((function(){return t}))}function fl(t){t.i&&!t.R&&(t.R=!0,mc(t.i,t))}function dl(t,e){Fr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new tl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function pl(){}function vl(t){return be().then((function(){if(t.D)throw new T("app-deleted")}))}function gl(t){return B(t.providerData,(function(t){return t.providerId}))}function yl(t,e){e&&(ml(t,e.providerId),t.providerData.push(e))}function ml(t,e){H(t.providerData,(function(t){return t.providerId==e}))}function bl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Mr(t,e,n)}function _l(t,e){var n,r;t!=e&&(Fr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Mr(t,"metadata",new tl((r=e.metadata).a,r.b)):Mr(t,"metadata",new tl),q(e.providerData,(function(e){yl(t,e)})),n=t.b,r=e.b,n.b=r.b,n.a=r.a,n.c=r.c,Mr(t,"refreshToken",t.b.a),Yc(t.O,e.O.b))}function wl(t){return t.I().then((function(e){var n,r,i=t.isAnonymous;return r=e,Ks((n=t).a,_s,{idToken:r}).then(b(n.Kc,n)).then((function(){return i||bl(t,"isAnonymous",!1),e}))}))}function Il(t,e){e[Ua]&&t.za!=e[Ua]&&(Zc(t.b,e),t.dispatchEvent(new Gc("tokenChanged")),ll(t,e[Ua]),bl(t,"refreshToken",t.b.a))}function Tl(t,e){return wl(t).then((function(){if(z(gl(t),e))return hl(t).then((function(){throw new T("provider-already-linked")}))}))}function El(t,e,n){return Ur({user:t,credential:So(e),additionalUserInfo:e=ji(e),operationType:n})}function Sl(t,e){return Il(t,e),t.reload().then((function(){return t}))}function Cl(t,e,n,r,i){if(!mr())return _e(new T("operation-not-supported-in-this-environment"));if(t.h&&!i)return _e(t.h);var o=Li(n.providerId),a=Sr(t.uid+":::"),s=null,u=nr(s=(!wr()||sr())&&t.s&&n.isOAuthProvider?iu(t.s,t.l,t.m,e,n,null,a,Ia.SDK_VERSION||null,null,null,t.tenantId):s,o&&o.ua,o&&o.ta);return r=r().then((function(){if(Ol(t),!i)return t.I().then((function(){}))})).then((function(){return Ic(t.i,u,e,n,a,!!s,t.tenantId)})).then((function(){return new fe((function(n,r){t.na(e,null,new T("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Sc(t.i,t,e,u,a)}))})).then((function(t){return u&&er(u),t?Ur(t):null})).o((function(t){throw u&&er(u),t})),Nl(t,r,i)}function kl(t,e,n,r,i){if(!mr())return _e(new T("operation-not-supported-in-this-environment"));if(t.h&&!i)return _e(t.h);var o=null,a=Sr(t.uid+":::");return r=r().then((function(){if(Ol(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,hl(t)})).then((function(e){return t.ha?(e=t.ha).b.set(Rl,t.w(),e.a):e})).then((function(){return Ec(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return xl(t.ha);throw o})).then((function(){if(o)throw o})),Nl(t,r,i)}function Ol(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new T("internal-error");throw new T("auth-domain-config-required")}}function Nl(t,e,n){var r,i=(e=e,n=n,(r=t).h&&!n?(e.cancel(),_e(r.h)):e.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Gc("userInvalidated")),r.h=t),t})));return t.J.push(i),i.oa((function(){W(t.J,i)})),i.o((function(e){var n=null;throw(n=e&&"auth/multi-factor-auth-required"===e.code?Kc(e.w(),sl(t),b(t.jc,t)):n)||e}))}function Al(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ua]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new nl(e,n,t);return t.providerData&&q(t.providerData,(function(t){t&&yl(i,Ur(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Pl(t){this.a=t,this.b=qu()}Uc.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=lt(e.f);return delete n[qc],delete n[Vc],ft(n,t),e.g(n)}))},w(Bc,T),zc.prototype.sb=function(t,e,n){return e.type==Gi?(o=this,a=t,s=n,e.Ha().then((function(t){return t={idToken:t},void 0!==s&&(t.displayName=s),ft(t,{phoneVerificationInfo:Io(o.a)}),Ks(a,ms,t)}))):(r=this,i=t,e.Ha().then((function(t){return ft(t={mfaPendingCredential:t},{phoneVerificationInfo:Io(r.a)}),Ks(i,bs,t)})));var r,i,o,a,s},w(Wc,zc),w(Hc,Wc),w(Gc,Ue),(t=Qc.prototype).yc=function(t){var e;Yc(this,(t=t.hd,e=[],q(t.mfaInfo||[],(function(t){(t=Br(t))&&e.push(t)})),e))},t.Rb=function(){return this.a.I().then((function(t){return new Hi(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return Il(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Ks(r,Bs,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=V(e.b,(function(t){return t.uid!=n}));return Yc(e,r),Il(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:B(this.b,(function(t){return t.w()}))}}},Xc.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=vn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(Ar).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},Xc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},$c.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},$c.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?_e(new T("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return n=t.f,r=e,new fe((function(t,e){"refresh_token"==r.grant_type&&r.refresh_token||"authorization_code"==r.grant_type&&r.code?Qa(n,n.l+"?key="+encodeURIComponent(n.c),(function(n){n?n.error?e(Ws(n)):n.access_token&&n.refresh_token?t(n):e(new T("internal-error")):e(new T("network-request-failed"))}),"POST",qn(r).toString(),n.g,n.m.get()):e(new T("internal-error"))})).then((function(e){return t.b=Ai(e.access_token),t.a=e.refresh_token,Jc(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}));var n,r}(this,{grant_type:"refresh_token",refresh_token:this.a}):be(null):be({accessToken:this.b.toString(),refreshToken:this.a})},tl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(nl,ln),nl.prototype.wa=function(t){this.ya=t,za(this.a,t)},nl.prototype.la=function(){return this.ya},nl.prototype.Ga=function(){return Q(this.$)},nl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Mr(nl.prototype,"providerId","firebase"),(t=nl.prototype).reload=function(){var t=this;return Nl(this,vl(this).then((function(){return wl(t).then((function(){return hl(t)})).then(pl)})))},t.oc=function(t){return this.I(t).then((function(t){return new Fc(t)}))},t.I=function(t){var e=this;return Nl(this,vl(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.za&&(ll(e,t.accessToken),e.dispatchEvent(new Gc("tokenChanged"))),bl(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");dl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?B(e,(function(t){return new el(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[],r=0;r<n.length;r++)yl(this,n[r]);bl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Gc("userReloaded",{hd:t}))},t.Lc=function(t){return Lr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Nl(this,t.c(this.a,this.uid).then((function(t){return Il(e,t),n=El(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Lr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Nl(this,Tl(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=El(e,t,"link"),Sl(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Nl(this,Tl(this,"phone").then((function(){return Mc(sl(n),t,e,b(n.qb,n))})))},t.Mc=function(t,e){var n=this;return Nl(this,be().then((function(){return Mc(sl(n),t,e,b(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return Nl(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Il(e,t),e.reload()})))},t.ed=function(t){var e=this;return Nl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Il(e,t),e.reload()})))},t.Cb=function(t){var e=this;return Nl(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Il(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return vl(this);var e=this;return Nl(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Il(e,t),bl(e,"displayName",t.displayName||null),bl(e,"photoURL",t.photoUrl||null),q(e.providerData,(function(t){"password"===t.providerId&&(Mr(t,"displayName",e.displayName),Mr(t,"photoURL",e.photoURL))})),hl(e)})).then(pl))},t.cd=function(t){var e=this;return Nl(this,wl(this).then((function(n){return z(gl(e),t)?Ks(e.a,vs,{idToken:n,deleteProvider:[t]}).then((function(t){var n={};return q(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),q(gl(e),(function(t){n[t]||ml(e,t)})),n[To.PROVIDER_ID]||Mr(e,"phoneNumber",null),hl(e)})):hl(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return Nl(this,this.I().then((function(e){return Ks(t.a,ps,{idToken:e})})).then((function(){t.dispatchEvent(new Gc("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");rl(t,null),il(t,null),al(t,null),t.J=[],t.D=!0,cl(t),Mr(t,"refreshToken",null),t.i&&bc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):null},t.Ec=function(t){var e=this;return Cl(this,"linkViaPopup",t,(function(){return Tl(e,t.providerId).then((function(){return hl(e)}))}),!1)},t.Nc=function(t){return Cl(this,"reauthViaPopup",t,(function(){return be()}),!0)},t.Fc=function(t){var e=this;return kl(this,"linkViaRedirect",t,(function(){return Tl(e,t.providerId)}),!1)},t.Oc=function(t){return kl(this,"reauthViaRedirect",t,(function(){return be()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Nl(this,this.I().then((function(n){return ss(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=El(i,t,"link"),Sl(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Nl(this,be().then((function(){return Xi(us(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=El(i,t,"reauthenticate"),Il(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return Nl(this,this.I().then((function(e){return n=e,void 0===t||ct(t)?{}:ki(new yi(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return Nl(this,this.I().then((function(t){return r=t,void 0===e||ct(e)?{}:ki(new yi(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Nl(this,t=Xi(be(t),n.uid).then((function(t){return e=El(n,t,"reauthenticate"),Il(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ft(t,this.metadata.w()),q(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),ft(t,this.O.w()),t};var Rl={name:"redirectUser",F:"session"};function xl(t){return Ku(t.b,Rl,t.a)}function Dl(t){var e,n,r,i;this.a=t,this.b=qu(),this.c=null,this.f=(n=Ml("local"),r=Ml("session"),i=Ml("none"),function(t,e,n){var r=Bu(e,n),i=Vu(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Er(a.localStorage.getItem(r))}catch(o){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}((e=this).b,n,e.a).then((function(){return e.b.get(r,e.a)})).then((function(t){return t?r:e.b.get(i,e.a).then((function(t){return t?i:e.b.get(n,e.a).then((function(t){return t?n:e.b.get(jl,e.a).then((function(t){return t?Ml(t):n}))}))}))})).then((function(t){return e.c=t,Ll(e,t.F)})).o((function(){e.c||(e.c=n)}))),this.b.addListener(Ml("local"),this.a,b(this.g,this))}function Ll(t,e){var n,r,i=[];for(n in Fu)Fu[n]!==e&&i.push(Ku(t.b,Ml(Fu[n]),t.a));return i.push(Ku(t.b,jl,t.a)),r=i,new fe((function(t,e){var n=r.length,i=[];if(n)for(var o=function(e,r){n--,i[e]=r,0==n&&t(i)},a=function(t){e(t)},s=0;s<r.length;s++)we(r[s],_(o,s),a);else t(i)}))}Dl.prototype.g=function(){var t=this,e=Ml("local");Vl(this,(function(){return be().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Ll(t,"local").then((function(){t.c=e}))}))}))};var jl={name:"persistence",F:"session"};function Ml(t){return{name:"authUser",F:t}}function Fl(t,e){return Vl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function Ul(t){return Vl(t,(function(){return Ku(t.b,t.c,t.a)}))}function ql(t,e,n){return Vl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Al(t||{})}))}))}function Vl(t,e){return t.f=t.f.then(e,e),t.f}function Bl(t){if(this.l=!1,Mr(this,"settings",new Lc),Mr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new T("invalid-api-key");var e,n,r,i,o,a;t=Ia.SDK_VERSION?pr(Ia.SDK_VERSION):null,this.a=new Ma(this.app.options&&this.app.options.apiKey,N(S),t),this.R=[],this.s=[],this.O=[],this.hb=Ia.INTERNAL.createSubscribe(b(this.zc,this)),this.X=void 0,this.bc=Ia.INTERNAL.createSubscribe(b(this.Ac,this)),Ql(this,null),this.i=new Dl(this.app.options.apiKey+":"+this.app.name),this.D=new Pl(this.app.options.apiKey+":"+this.app.name),this.$=Zl(this,(n=(e=this).app.options.authDomain,t=function(t){var e=function(t,e){return t.b.get(Rl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Al(t||{})}))}(t.D,t.app.options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),xl(t.D)}));return Zl(t,e)}(e).then((function(){return ql(e.i,n,e.P)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return Fl(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:Ul(e.i)}))):null})).then((function(t){Ql(e,t||null)})),Zl(e,t))),this.h=Zl(this,(r=this).$.then((function(){return Gl(r)})).o((function(){})).then((function(){if(!r.l)return r.ja()})).o((function(){})).then((function(){var t;r.l||(r.ba=!0,(t=r.i).b.addListener(Ml("local"),t.a,r.ja))}))),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.ya=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,o=(i=this).app.options.authDomain,a=i.app.options.apiKey,o&&mr()&&(i.Oa=i.$.then((function(){var t;if(!i.l)return i.b=Oc(o,a,i.app.name,i.P),mc(i.b,i),Xl(i)&&fl(Xl(i)),i.m&&(fl(i.m),(t=i.m).wa(i.la()),rl(t,i),ol(t=i.m,i.J),al(t,i),Wa((t=i.m).a,i.P),il(t,i),i.m=null),i.b}))),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,ln.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){var t;return this.P?Ur({protocol:(t=On(this.P.url)).c,host:t.a,port:t.g,options:Ur({disableWarnings:this.P.ec})}):null},enumerable:!1}),this.J=[],this.P=null}function Kl(t){Ue.call(this,"languageCodeChanged"),this.h=t}function zl(t){Ue.call(this,"emulatorConfigChanged"),this.c=t}function Wl(t){Ue.call(this,"frameworkChanged"),this.f=t}function Hl(t){return t.Oa||_e(new T("auth-domain-config-required"))}function Gl(t){if(!mr())return _e(new T("operation-not-supported-in-this-environment"));var e=Hl(t).then((function(){return t.b.qa()})).then((function(t){return t?Ur(t):null}));return Zl(t,e)}function Ql(t,e){var n,r;Xl(t)&&(n=Xl(t),r=t.Ba,H(n.S,(function(t){return t==r})),tn(Xl(t),"tokenChanged",t.ya),tn(Xl(t),"userDeleted",t.za),tn(Xl(t),"userInvalidated",t.Aa),cl(Xl(t))),e&&(e.S.push(t.Ba),$e(e,"tokenChanged",t.ya),$e(e,"userDeleted",t.za),$e(e,"userInvalidated",t.Aa),0<t.u&&ul(e)),Mr(t,"currentUser",e),e&&(e.wa(t.la()),rl(e,t),ol(e,t.J),al(e,t),Wa(e.a,t.P),il(e,t))}function Yl(t,e){var n=null,r=null;return Zl(t,e.then((function(e){return n=So(e),r=ji(e),function(t,e){var n={};return n.apiKey=t.app.options.apiKey,n.authDomain=t.app.options.authDomain,n.appName=t.app.name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return r=n,i=e,o=t.D,a=t.Ga(),s=new nl(r,i),o&&(s.ha=o),a&&ol(s,a),s.reload().then((function(){return s}));var r,i,o,a,s})).then((function(e){return Xl(t)&&e.uid==Xl(t).uid?_l(Xl(t),e):(Ql(t,e),fl(e)),t.da(e)})).then((function(){Jl(t)}))}(t,e)}),(function(e){var n=null;throw(n=e&&"auth/multi-factor-auth-required"===e.code?Kc(e.w(),t,b(t.kc,t)):n)||e})).then((function(){return Ur({user:Xl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Xl(t){return t.currentUser}function $l(t){return Xl(t)&&Xl(t)._lat||null}function Jl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e]($l(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e]($l(t))}}function Zl(t,e){return t.R.push(e),e.oa((function(){W(t.R,e)})),e}function th(){}function eh(){this.a={},this.b=1e12}Dl.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Fu)if(Fu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(cr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!yu()&&"none"!==t)throw n;break;default:if(!yr()&&"none"!==t)throw n}}(t),Vl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Ll(n,t)})).then((function(){if(n.c=Ml(t),e)return n.b.set(n.c,e,n.a)})):be()}))},w(Bl,ln),w(Kl,Ue),w(zl,Ue),w(Wl,Ue),(t=Bl.prototype).xb=function(t){return Zl(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,za(this.a,this.aa),this.dispatchEvent(new Kl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");n=e=!!e&&!!e.disableWarnings,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!n&&or().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})),this.P={url:t,ec:e},this.settings.ib=!0,Wa(this.a,this.P),this.dispatchEvent(new zl(this.P))}var n},t.Gc=function(t){this.J.push(t),Ga(this.a,Ia.SDK_VERSION?pr(Ia.SDK_VERSION,this.J):null),this.dispatchEvent(new Wl(this.J))},t.Ga=function(){return Q(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:Xl(this)&&Xl(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return Yl(i,as(i.a,o))}))},t.Xc=function(t){if(!mr())return _e(new T("operation-not-supported-in-this-environment"));var e=this,n=Li(t.providerId),r=Sr(),i=null,o=nr(i=(!wr()||sr())&&this.app.options.authDomain&&t.isOAuthProvider?iu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",t,null,r,Ia.SDK_VERSION||null,null,null,this.T(),this.P):i,n&&n.ua,n&&n.ta);return Zl(this,n=Hl(this).then((function(n){return Ic(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new fe((function(t,n){e.na("signInViaPopup",null,new T("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Sc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&er(o),t?Ur(t):null})).o((function(t){throw o&&er(o),t})))},t.Yc=function(t){if(!mr())return _e(new T("operation-not-supported-in-this-environment"));var e=this;return Zl(this,Hl(this).then((function(){return Vl(t=e.i,(function(){return t.b.set(jl,t.c.F,t.a)}));var t})).then((function(){return Ec(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return Gl(this).then((function(e){return t.b&&Pc(t.b.b),e})).o((function(e){throw t.b&&Pc(t.b.b),e}))},t.dd=function(t){if(!t)return _e(new T("null-user"));if(this.S!=t.tenantId)return _e(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,a,s,u=(r=t,i=n,o=e.D,a=e.Ga(),s=r.b,(n={})[Ua]=s.b&&s.b.toString(),n.refreshToken=s.a,i=new nl(i||{apiKey:r.l,authDomain:r.s,appName:r.m},n),o&&(i.ha=o),a&&ol(i,a),_l(i,r),i);return Zl(this,this.h.then((function(){if(e.app.options.apiKey!=t.l)return u.reload()})).then((function(){return Xl(e)&&t.uid==Xl(e).uid?(_l(Xl(e),t),e.da(t)):(Ql(e,u),fl(u),e.da(u))})).then((function(){Jl(e)})))},t.Ab=function(){var t=this;return Zl(this,this.h.then((function(){return t.b&&Pc(t.b.b),Xl(t)?(Ql(t,null),Ul(t.i).then((function(){Jl(t)}))):be()})))},t.Zc=function(){var t=this;return ql(this.i,this.app.options.authDomain).then((function(e){if(!t.l){var n,r;if((n=Xl(t)&&e)&&(n=Xl(t).uid,r=e.uid,n=null!=n&&""!==n&&null!=r&&""!==r&&n==r),n)return _l(Xl(t),e),Xl(t).I();(Xl(t)||e)&&(Ql(t,e),e&&(fl(e),e.ha=t.D),t.b&&mc(t.b,t),Jl(t))}}))},t.da=function(t){return Fl(this.i,t)},t.mc=function(){Jl(this),this.da(Xl(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return Yl(e,be(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Xl(e))}))},t.Ac=function(t){var e,n,r=this;n=function(){t.next(Xl(r))},(e=this).O.push(n),Zl(e,e.h.then((function(){!e.l&&z(e.O,n)&&e.X!==e.getUid()&&(e.X=e.getUid(),n($l(e)))})))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(Xl(r)):"function"==typeof t.next&&t.next(Xl(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(Xl(r)):"function"==typeof t.next&&t.next(Xl(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return Zl(this,this.h.then((function(){return Xl(e)?Xl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return Yl(e,Ks(e.a,Ms,{token:t}))})).then((function(t){var n=t.user;return bl(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return Yl(n,Ks(n.a,Fs,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return Yl(n,Ks(n.a,fs,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return Yl(e,t.ka(e.a))}))},t.Sc=function(t){return Lr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=Xl(t);if(e&&e.isAnonymous){var n=Ur({providerId:null,isNewUser:!1});return Ur({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Yl(t,t.a.zb()).then((function(e){var n=e.user;return bl(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return Xl(this)&&Xl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Xl(this)&&ul(Xl(this))},t.Pc=function(t){var e=this;q(this.s,(function(n){n==t&&e.u--})),this.u<0&&(this.u=0),0==this.u&&Xl(this)&&cl(Xl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),Zl(this,this.h.then((function(){e.l||z(e.s,t)&&t($l(e))})))},t.removeAuthTokenListener=function(t){H(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Ml("local"),t.a,this.ja),this.b&&(bc(this.b,this),Pc(this.b.b)),Promise.resolve()},t.hc=function(t){return Zl(this,Ks(this.a,ds,{identifier:t,continueUri:br()?Jn():"http://localhost"}).then((function(t){return t.signinMethods||[]})))},t.Bc=function(t){return!!bo(t)},t.wb=function(t,e){var n=this;return Zl(this,be().then((function(){var t=new yi(e);if(!t.c)throw new T("argument-error",_i+" must be true when sending sign in link to email");return ki(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return Zl(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return Zl(this,this.a.Ra(t).then((function(t){return new Qr(t)})))},t.jb=function(t){return Zl(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return Zl(this,be().then((function(){return void 0===e||ct(e)?{}:ki(new yi(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return Zl(this,Mc(this,t,e,b(this.$a,this)))},t.Vc=function(t,e){var n=this;return Zl(this,be().then((function(){var r=e||Jn(),i=mo(t,r);if(!(r=bo(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.$a(i)})))},th.prototype.render=function(){},th.prototype.reset=function(){},th.prototype.getResponse=function(){},th.prototype.execute=function(){};var nh=null;function rh(t,e){return(e=ih(e))&&t.a[e]||null}function ih(t){return(t=void 0===t?1e12:t)?t.toString():null}function oh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():$e(this.f,"click",this.i)}function ah(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function sh(){}function uh(){}eh.prototype.render=function(t,e){return this.a[this.b.toString()]=new oh(t,e),this.b++},eh.prototype.reset=function(t){var e=rh(this,t);t=ih(t),e&&t&&(e.delete(),delete this.a[t])},eh.prototype.getResponse=function(t){return(t=rh(this,t))?t.getResponse():null},eh.prototype.execute=function(t){(t=rh(this,t))&&t.execute()},oh.prototype.getResponse=function(){return ah(this),this.b},oh.prototype.execute=function(){ah(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(e){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(e){}t.h&&t.execute()}),6e4)}),500))},oh.prototype.delete=function(){ah(this),this.g=!0,clearTimeout(this.a),this.a=null,tn(this.f,"click",this.i)},Mr(sh,"FACTOR_ID","phone"),uh.prototype.g=function(){return be(nh=nh||new eh)},uh.prototype.c=function(){};var ch=null;function lh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var hh=new pt(mt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),fh=new Or(3e4,6e4);lh.prototype.g=function(t){var e=this;return new fe((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),fh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){var o;a.grecaptcha?(e.f=t,o=a.grecaptcha.render,a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)):(clearTimeout(i),r(new T("internal-error"))),delete a[e.a]},be(Aa(It(hh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},lh.prototype.c=function(){this.b--};var dh=null;function ph(t,e,n,r,i,o,s){if(Mr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s=s?ch=ch||new uh:dh=dh||new lh,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[yh])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[mh],!a.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ma(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[vh];this.a[vh]=function(t){var e;bh(u,t),"function"==typeof c?c(t):"string"!=typeof c||"function"==typeof(e=gr(c,a))&&e(t)};var l=this.a[gh];this.a[gh]=function(){var t;bh(u,null),"function"==typeof l?l():"string"!=typeof l||"function"==typeof(t=gr(l,a))&&t()}}var vh="callback",gh="expired-callback",yh="sitekey",mh="size";function bh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function _h(t,e){return t.h.push(e),e.oa((function(){W(t.h,e)})),e}function wh(t){if(t.D)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Ih(t,e,n){var r=!1;try{this.b=n||Ia.app()}catch(t){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Ia.SDK_VERSION?pr(Ia.SDK_VERSION,o):null,ph.call(this,n,t,e,(function(){try{var e=i.b.auth().la()}catch(t){e=null}return e}),o,N(S),r)}function Th(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],i<0||i>=Eh.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Eh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=ph.prototype).Ia=function(){var t=this;return this.f||(this.f=_h(this,be().then((function(){if(br()&&!ur())return or();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,Ks(t.s,Cs,{})})).then((function(e){t.a[yh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e}))))},t.render=function(){wh(this);var t=this;return _h(this,this.Ia().then((function(){var e,n;return null===t.c&&(n=t.v,t.i||(e=ee(n),n=function(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!te&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',Ut(i.name),'"'),i.type&&(r.push(' type="',Ut(i.type),'"'),ft(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=ae(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):ne(r,i)),2<e.length&&function(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||p(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(p(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}q(a?Q(o):o,r)}}}(n,r,e),r}("DIV"),e.appendChild(n)),t.c=t.g.render(n,t.a)),t.c})))},t.verify=function(){wh(this);var t=this;return _h(this,this.render().then((function(e){return new fe((function(n){var r,i=t.g.getResponse(e);i?n(i):(r=function(e){var i;e&&(i=r,H(t.l,(function(t){return t==i})),n(e))},t.l.push(r),t.i&&t.g.execute(t.c))}))})))},t.reset=function(){wh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){wh(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i)for(e=ee(this.v);t=e.firstChild;)e.removeChild(t)},w(Ih,ph);var Eh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Sh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Ch(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function kh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function Oh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Nh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Ah(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Ph(t,e){return p(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Rh(t){return p(t)&&"string"==typeof t.uid}function xh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Dh(t,e){for(var n in e){var r=e[n].name;t[r]=Mh(r,t[n],e[n].j)}}function Lh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_((function(t){return this[t]}),n),set:_((function(t,e,n,r){Th(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function jh(t,e,n,r){t[e]=Mh(e,n,r)}function Mh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Th(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=(t=t).split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Dh(Bl.prototype,{jb:{name:"applyActionCode",j:[Sh("code")]},Ra:{name:"checkActionCode",j:[Sh("code")]},nb:{name:"confirmPasswordReset",j:[Sh("code"),Sh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Sh("email"),Sh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Sh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Sh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[xh(kh(),Oh(),"nextOrObserver"),Oh("opt_error",!0),Oh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[xh(kh(),Oh(),"nextOrObserver"),Oh("opt_error",!0),Oh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Sh("email"),xh(kh("opt_actionCodeSettings",!0),Nh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Sh("email"),kh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Sh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Ah()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Ah()]},Tc:{name:"signInWithCustomToken",j:[Sh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Sh("email"),Sh("password")]},Vc:{name:"signInWithEmailLink",j:[Sh("email"),Sh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Sh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[xh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof nl)}},Nh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Sh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Sh("url"),kh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Sh("code")]}}),Lh(Bl.prototype,{lc:{name:"languageCode",kb:xh(Sh(),Nh(),"languageCode")},ti:{name:"tenantId",kb:xh(Sh(),Nh(),"tenantId")}}),(Bl.Persistence=Fu).LOCAL="local",Bl.Persistence.SESSION="session",Bl.Persistence.NONE="none",Dh(nl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Ch("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ch("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Ah()]},qb:{name:"linkWithCredential",j:[Ah()]},Dc:{name:"linkWithPhoneNumber",j:[Sh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ah()]},tb:{name:"reauthenticateWithCredential",j:[Ah()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Sh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[xh(kh("opt_actionCodeSettings",!0),Nh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Sh(null,!0)]},cd:{name:"unlink",j:[Sh("provider")]},Bb:{name:"updateEmail",j:[Sh("email")]},Cb:{name:"updatePassword",j:[Sh("password")]},ed:{name:"updatePhoneNumber",j:[Ah("phone")]},Db:{name:"updateProfile",j:[kh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Sh("email"),xh(kh("opt_actionCodeSettings",!0),Nh(null,!0),"opt_actionCodeSettings",!0)]}}),Dh(eh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Dh(th.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Dh(fe.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Lh(Lc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Ch("appVerificationDisabledForTesting")}}),Dh(jc.prototype,{confirm:{name:"confirm",j:[Sh("verificationCode")]}}),jh(Yi,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[no,go,wo,Zi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[xh(Sh(),kh(),"json")]),jh(yo,"credential",(function(t,e){return new vo(t,e)}),[Sh("email"),Sh("password")]),Dh(vo.prototype,{w:{name:"toJSON",j:[Sh(null,!0)]}}),Dh(ao.prototype,{Ca:{name:"addScope",j:[Sh("scope")]},Ka:{name:"setCustomParameters",j:[kh("customOAuthParameters")]}}),jh(ao,"credential",so,[xh(Sh(),kh(),"token")]),jh(yo,"credentialWithLink",mo,[Sh("email"),Sh("emailLink")]),Dh(uo.prototype,{Ca:{name:"addScope",j:[Sh("scope")]},Ka:{name:"setCustomParameters",j:[kh("customOAuthParameters")]}}),jh(uo,"credential",co,[xh(Sh(),kh(),"token")]),Dh(lo.prototype,{Ca:{name:"addScope",j:[Sh("scope")]},Ka:{name:"setCustomParameters",j:[kh("customOAuthParameters")]}}),jh(lo,"credential",ho,[xh(Sh(),xh(kh(),Nh()),"idToken"),xh(Sh(),Nh(),"accessToken",!0)]),Dh(fo.prototype,{Ka:{name:"setCustomParameters",j:[kh("customOAuthParameters")]}}),jh(fo,"credential",po,[xh(Sh(),kh(),"token"),Sh("secret",!0)]),Dh(oo.prototype,{Ca:{name:"addScope",j:[Sh("scope")]},credential:{name:"credential",j:[xh(Sh(),xh(kh(),Nh()),"optionsOrIdToken"),xh(Sh(),Nh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[kh("customOAuthParameters")]}}),Dh(to.prototype,{w:{name:"toJSON",j:[Sh(null,!0)]}}),Dh($i.prototype,{w:{name:"toJSON",j:[Sh(null,!0)]}}),jh(To,"credential",Eo,[Sh("verificationId"),Sh("verificationCode")]),Dh(To.prototype,{fb:{name:"verifyPhoneNumber",j:[xh(Sh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Ph(t.session,Gi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Ph(t.session,Qi)&&Rh(t.multiFactorHint):t.session&&t.multiFactorUid?Ph(t.session,Qi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Dh(_o.prototype,{w:{name:"toJSON",j:[Sh(null,!0)]}}),Dh(T.prototype,{toJSON:{name:"toJSON",j:[Sh(null,!0)]}}),Dh(xo.prototype,{toJSON:{name:"toJSON",j:[Sh(null,!0)]}}),Dh(Ro.prototype,{toJSON:{name:"toJSON",j:[Sh(null,!0)]}}),Dh(Bc.prototype,{toJSON:{name:"toJSON",j:[Sh(null,!0)]}}),Dh(Uc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Dh(Qc.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Sh("displayName",!0)]},bd:{name:"unenroll",j:[xh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Rh},Sh(),"multiFactorInfoIdentifier")]}}),Dh(Ih.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),jh(ui,"parseLink",gi,[Sh("link")]),jh(sh,"assertion",(function(t){return new Hc(t)}),[Ah("phone")]),function(){if(void 0===Ia||!Ia.INTERNAL||!Ia.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Xr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Yr,VERIFY_AND_CHANGE_EMAIL:$r,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Bl,AuthCredential:Yi,Error:T};jh(t,"EmailAuthProvider",yo,[]),jh(t,"FacebookAuthProvider",ao,[]),jh(t,"GithubAuthProvider",uo,[]),jh(t,"GoogleAuthProvider",lo,[]),jh(t,"TwitterAuthProvider",fo,[]),jh(t,"OAuthProvider",oo,[Sh("providerId")]),jh(t,"SAMLAuthProvider",io,[Sh("providerId")]),jh(t,"PhoneAuthProvider",To,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Bl)}}]),jh(t,"RecaptchaVerifier",Ih,[xh(Sh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),kh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Ia.app.App)}}]),jh(t,"ActionCodeURL",ui,[]),jh(t,"PhoneMultiFactorGenerator",sh,[]),Ia.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Bl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Ia.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Ia.registerVersion("@firebase/auth","0.16.5"),Ia.INTERNAL.extendNamespace({User:nl})}()}.apply("undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ta=(Ea.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),No(e))},Ea.prototype.get=function(t){return null==(t=this.domStorage_.getItem(this.prefixedName_(t)))?null:Oo(t)},Ea.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Ea.prototype.prefixedName_=function(t){return this.prefix_+t},Ea.prototype.toString=function(){return this.domStorage_.toString()},Ea);function Ea(t){this.domStorage_=t,this.prefix_="firebase:"}var Sa=(Ca.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Ca.prototype.get=function(t){return Po(this.cache_,t)?this.cache_[t]:null},Ca.prototype.remove=function(t){delete this.cache_[t]},Ca);function Ca(){this.cache_={},this.isInMemoryStorage=!0}function ka(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,ao(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new Lo).update(e),t=t.digest(),uo.encodeByteArray(t)}function Oa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Fa.apply(void 0,eo([],to(t)));ja.error(n)}function Na(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Aa(t,e){return t===e?0:t<e?-1:1}function Pa(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+No(e))}function Ra(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var xa,Da=(kn=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ta(e)}}catch(t){}return new Sa})("localStorage"),La=kn("sessionStorage"),ja=new sa("@firebase/database"),Ma=(xa=1,function(){return xa++}),Fa=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var o=e[i];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?r+=t.apply(null,o):r+="object"==typeof o?No(o):o,r+=" "}return r},Ua=null,qa=!0,Va=function(t,e){ao(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(ja.logLevel=ea.VERBOSE,Ua=ja.log.bind(ja),e&&La.set("logging_enabled",!0)):"function"==typeof t?Ua=t:(Ua=null,La.remove("logging_enabled"))},Ba=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===qa&&(qa=!1,null===Ua&&!0===La.get("logging_enabled")&&Va(!0)),Ua&&(t=Fa.apply(null,e),Ua(t))},Ka=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Ba.apply(void 0,eo([t],to(e)))}},za=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Fa.apply(void 0,eo([],to(t)));throw ja.error(n),new Error(n)},Wa=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Fa.apply(void 0,eo([],to(t)));ja.warn(n)},Ha="[MIN_NAME]",Ga="[MAX_NAME]",Qa=function(t,e){if(t===e)return 0;if(t===Ha||e===Ga)return-1;if(e===Ha||t===Ga)return 1;var n=ns(t),r=ns(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},Ya=function t(e){if("object"!=typeof e||null===e)return No(e);var n,r=[];for(n in e)r.push(n);r.sort();for(var i="{",o=0;o<r.length;o++)0!==o&&(i+=","),i+=No(r[o]),i+=":",i+=t(e[r[o]]);return i+"}"};function Xa(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function $a(t){var e,n,r,i;ao(!Na(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],a=52;a;--a)o.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;--a)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var s=o.join(""),u="";for(a=0;a<64;a+=8){var c=parseInt(s.substr(a,8),2).toString(16);u+=c=1===c.length?"0"+c:c}return u.toLowerCase()}function Ja(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var Za=new RegExp("^-?(0*)\\d{1,10}$"),ts=-2147483648,es=2147483647,ns=function(t){return Za.test(t)&&(t=Number(t),ts<=t&&t<=es)?t:null},rs=function(t){try{t()}catch(r){setTimeout((function(){var e=r.stack||"";throw Wa("Exception was thrown by user callback.",e),r}),Math.floor(0))}},is=(os.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(Ba("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},os.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},os.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},os.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wa(t)},os);function os(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then((function(t){return r.auth_=t}))}var as=(ss.prototype.getToken=function(t){return Promise.resolve({accessToken:ss.EMULATOR_AUTH_TOKEN})},ss.prototype.addTokenChangeListener=function(t){t(ss.EMULATOR_AUTH_TOKEN)},ss.prototype.removeTokenChangeListener=function(t){},ss.prototype.notifyForInvalidToken=function(){},ss.EMULATOR_AUTH_TOKEN="owner",ss);function ss(){}var us=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,cs="websocket",ls="long_polling",hs=(fs.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},fs.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(fs.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Da.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),fs.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},fs.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return t+this.host+"/"+e},fs);function fs(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Da.get("host:"+t)||this._host}function ds(t,e,n){var r;if(ao("string"==typeof e,"typeof type must == string"),ao("object"==typeof n,"typeof params must == object"),e===cs)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==ls)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}((e=t).host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=t.namespace);var i=[];return Xa(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}var ps=(vs.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Po(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},vs.prototype.get=function(){return co(this.counters_)},vs);function vs(){this.counters_={}}var gs={},ys={};function ms(t){return t=t.toString(),gs[t]||(gs[t]=new ps),gs[t]}var bs=(_s.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},_s.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var e=0;e<t.length;++e)!function(e){t[e]&&rs((function(){n.onMessage_(t[e])}))}(e);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}(););},_s);function _s(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var ws=(Is.prototype.open=function(t,e){var n,r,i,o=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new bs(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){o.log_("Timed out trying to connect."),o.onClosed_(),o.connectTimeoutTimer_=null}),Math.floor(3e4)),n=function(){var t;o.isClosed_||(o.scriptTagHolder=new Ts((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=to(t,5),r=n[0],i=n[1],a=n[2];if(n[3],n[4],o.incrementIncomingBytes_(t),o.scriptTagHolder)if(o.connectTimeoutTimer_&&(clearTimeout(o.connectTimeoutTimer_),o.connectTimeoutTimer_=null),o.everConnected_=!0,"start"===r)o.id=i,o.password=a;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(o.scriptTagHolder.sendNewPolls=!1,o.myPacketOrderer.closeAfter(i,(function(){o.onClosed_()}))):o.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=(r=to(t,2))[0],r=r[1];o.incrementIncomingBytes_(t),o.myPacketOrderer.handleResponse(n,r)}),(function(){o.onClosed_()}),o.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),o.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=o.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",o.transportSessionId&&(t.s=o.transportSessionId),o.lastSessionId&&(t.ls=o.lastSessionId),o.applicationId&&(t.p=o.applicationId),"undefined"!=typeof location&&location.hostname&&us.test(location.hostname)&&(t.r="f"),t=o.urlFn(t),o.log_("Connecting via long-poll to "+t),o.scriptTagHolder.addTag(t,(function(){})))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&i()})),window.attachEvent("onload",i)))},Is.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Is.forceAllow=function(){Is.forceAllow_=!0},Is.forceDisallow=function(){Is.forceDisallow_=!0},Is.isAvailable=function(){return!!Is.forceAllow_||!(Is.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Is.prototype.markConnectionHealthy=function(){},Is.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Is.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Is.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Is.prototype.send=function(t){t=No(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var e=Ra(t=function(t){return t=no(t),uo.encodeByteArray(t,!0)}(t),1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},Is.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Is.prototype.incrementIncomingBytes_=function(t){t=No(t).length,this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},Is);function Is(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ka(t),this.stats_=ms(e),this.urlFn=function(t){return ds(e,ls,t)}}var Ts=(Es.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ba("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},Es.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},Es.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},Es.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++,(t={}).id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+e.length<=1870;){var r=this.pendingSegs.shift();e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d,n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},Es.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},Es.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},Es.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Ba("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},Es);function Es(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Ma(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=Es.createIFrame_(),e="";var i="<html><body>"+(e=this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)?'<script>document.domain="'+document.domain+'";<\/script>':e)+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){Ba("frame writing exception"),t.stack&&Ba(t.stack),Ba(t)}}var Ss="";function Cs(t){Ss=t}var ks=null;"undefined"!=typeof MozWebSocket?ks=MozWebSocket:"undefined"!=typeof WebSocket&&(ks=WebSocket);var Os=(Ns.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.hostname&&us.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),ds(t,cs,r)},Ns.prototype.open=function(t,e){var n,r=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Da.set("previous_websocket_failure",!0);try{mo()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new ks(this.connURL,[],n))}catch(e){return this.log_("Error instantiating WebSocket."),(t=e.message||e.data)&&this.log_(t),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection."),(t=t.message||t.data)&&r.log_(t),r.onClosed_()}},Ns.prototype.start=function(){},Ns.forceDisallow=function(){Ns.forceDisallow_=!0},Ns.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0),!e&&null!==ks&&!Ns.forceDisallow_},Ns.previouslyFailed=function(){return Da.isInMemoryStorage||!0===Da.get("previous_websocket_failure")},Ns.prototype.markConnectionHealthy=function(){Da.remove("previous_websocket_failure")},Ns.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=Oo(t),this.onMessage(t))},Ns.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Ns.prototype.extractFrameCount_=function(t){if(ao(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Ns.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),(null!==this.frames||null!==(t=this.extractFrameCount_(t)))&&this.appendFrame_(t))},Ns.prototype.send=function(t){this.resetKeepAlive(),t=No(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=Ra(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},Ns.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Ns.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Ns.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Ns.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},Ns.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Ns.responsesRequiredToBeHealthy=2,Ns.healthyTimeout=3e4,Ns);function Ns(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ka(this.connId),this.stats_=ms(e),this.connURL=Ns.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var As=(Object.defineProperty(Ps,"ALL_TRANSPORTS",{get:function(){return[ws,Os]},enumerable:!1,configurable:!0}),Ps.prototype.initTransports_=function(t){var e,n,r=Os&&Os.isAvailable(),i=r&&!Os.previouslyFailed();if(t.webSocketOnly&&(r||Wa("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Os];else{var o=this.transports_=[];try{for(var a=Zi(Ps.ALL_TRANSPORTS),s=a.next();!s.done;s=a.next()){var u=s.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}},Ps.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Ps.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Ps);function Ps(t){this.initTransports_(t)}var Rs=(xs.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0)),0<(e=e.healthyTimeout||0)&&(this.healthyTimeout_=Ja((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(e)))},xs.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},xs.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},xs.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},xs.prototype.sendRequest=function(t){t={t:"d",d:t},this.sendData_(t)},xs.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},xs.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},xs.prototype.onSecondaryMessageReceived_=function(t){var e=Pa("t",t);if(t=Pa("d",t),"c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},xs.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},xs.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},xs.prototype.onPrimaryMessageReceived_=function(t){var e=Pa("t",t);t=Pa("d",t),"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},xs.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},xs.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},xs.prototype.onControl_=function(t){var e=Pa("t",t);if("d"in t)if(t=t.d,"h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?Oa("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Oa("Unknown control packet command: "+e)},xs.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Wa("Protocol version mismatch detected"),this.tryStartUpgrade_())},xs.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},xs.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_);t=this.disconnReceiver_(this.secondaryConn_),this.secondaryConn_.open(n,t),Ja((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},xs.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},xs.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ja((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},xs.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},xs.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},xs.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Da.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},xs.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},xs.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},xs.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},xs.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},xs);function xs(t,e,n,r,i,o,a,s){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ka("c:"+this.id+":"),this.transportManager_=new As(e),this.log_("Connection created"),this.start_()}function Ds(){}Ds.prototype.put=function(t,e,n,r){},Ds.prototype.merge=function(t,e,n,r){},Ds.prototype.refreshAuthToken=function(t){},Ds.prototype.onDisconnectPut=function(t,e,n){},Ds.prototype.onDisconnectMerge=function(t,e,n){},Ds.prototype.onDisconnectCancel=function(t,e){},Ds.prototype.reportStats=function(t){},H=Ds;var Ls=(js.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=eo([],to(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},js.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n}),(t=this.getInitialEvent(t))&&e.apply(n,t)},js.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},js.prototype.validateEventType_=function(t){ao(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},js);function js(t){this.allowedEvents_=t,this.listeners_={},ao(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Ms,Fs=(Yi(Us,Ms=Ls),Us.getInstance=function(){return new Us},Us.prototype.getInitialEvent=function(t){return ao("online"===t,"Unknown event type: "+t),[this.online_]},Us.prototype.currentlyOnline=function(){return this.online_},Us);function Us(){var t=Ms.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||vo()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}var qs=(Vs.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},Vs);function Vs(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}function Bs(){return new qs("")}function Ks(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function zs(t){return t.pieces_.length-t.pieceNum_}function Ws(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new qs(t.pieces_,e)}function Hs(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Gs(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function Qs(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new qs(e,0)}function Ys(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof qs)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)0<i[r].length&&n.push(i[r])}return new qs(n,0)}function Xs(t){return t.pieceNum_>=t.pieces_.length}function $s(t,e){var n=Ks(t),r=Ks(e);if(null===n)return e;if(n===r)return $s(Ws(t),Ws(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Js(t,e){for(var n=Gs(t,0),r=Gs(e,0),i=0;i<n.length&&i<r.length;i++){var o=Qa(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Zs(t,e){if(zs(t)!==zs(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function tu(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(zs(t)>zs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var eu=function(t,e){this.errorPrefix_=e,this.parts_=Gs(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Wo(this.parts_[n]);nu(this)};function nu(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ru(t))}function ru(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var iu,ou=(Yi(au,iu=Ls),au.getInstance=function(){return new au},au.prototype.getInitialEvent=function(t){return ao("visible"===t,"Unknown event type: "+t),[this.visible_]},au);function au(){var t,e,n=iu.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),n.visible_=!0,e&&document.addEventListener(e,(function(){var e=!document[t];e!==n.visible_&&(n.visible_=e,n.trigger("visible",e))}),!1),n}var su,uu=1e3,cu=(Yi(lu,su=H),lu.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_;e={r:r,a:t,b:e},this.log_(No(e)),ao(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},lu.prototype.get=function(t){var e=this,n=new ho,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},lu.prototype.listen=function(t,e,n,r){var i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ao(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ao(!this.listens.get(o).has(i),"listen() called twice for same path/queryId."),n={onComplete:r,hashFn:e,query:t,tag:n},this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},lu.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},lu.prototype.sendListen_=function(t){var e=this,n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);var o={p:r};t.tag&&(o.q=n._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,(function(o){var a=o.d,s=o.s;lu.warnOnListenWarnings_(a,n),(e.listens.get(r)&&e.listens.get(r).get(i))===t&&(e.log_("listen response",o),"ok"!==s&&e.removeListen_(r,i),t.onComplete&&t.onComplete(s,a))}))},lu.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&Po(t,"w")&&(t=Ro(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',e=e._path.toString(),Wa("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},lu.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},lu.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){return"object"==typeof(t=Ao(t).claims)&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},lu.prototype.tryAuth=function(){var t,e,n,r=this;this.connected_&&this.authToken_&&(e=function(t){return!!(t=Ao(t).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")}(t=this.authToken_)?"auth":"gauth",n={cred:t},null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,(function(e){var n=e.s;e=e.d||"error",r.authToken_===t&&("ok"===n?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(n,e))})))},lu.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ao(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},lu.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e),t={p:t},r&&(t.q=n,t.t=r),this.sendRequest("n",t)},lu.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},lu.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},lu.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},lu.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n},this.log_("onDisconnect "+t,n),this.sendRequest(t,n,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},lu.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},lu.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},lu.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n},void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++,r=this.outstandingPuts_.length-1,this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},lu.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},lu.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,(function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))})))},lu.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+No(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},lu.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Oa("Unrecognized action received from server: "+No(t)+"\nAre you using the latest client?")},lu.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},lu.prototype.scheduleConnect_=function(t){var e=this;ao(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},lu.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=uu,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},lu.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=uu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},lu.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=uu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},lu.prototype.establishConnection_=function(){var t,e,n,r,i,o,a,s,u,c=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+lu.nextConnectionId_++,i=this.lastSessionId,o=!1,a=null,s=function(){a?a.close():(o=!0,n())},this.realtime_={close:s,sendRequest:function(t){ao(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(t)}},u=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(u).then((function(s){o?Ba("getToken() completed but was canceled"):(Ba("getToken() completed. Creating connection."),c.authToken_=s&&s.accessToken,a=new Rs(r,c.repoInfo_,c.applicationId_,t,e,n,(function(t){Wa(t+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")}),i))})).then(null,(function(t){c.log_("Failed to get token: "+t),o||(c.repoInfo_.nodeAdmin&&Wa(t),s())})))},lu.prototype.interrupt=function(t){Ba("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},lu.prototype.resume=function(t){Ba("Resuming connection for reason: "+t),delete this.interruptReasons_[t],xo(this.interruptReasons_)&&(this.reconnectDelay_=uu,this.realtime_||this.scheduleConnect_(0))},lu.prototype.handleTimestamp_=function(t){t-=(new Date).getTime(),this.onServerInfoUpdate_({serverTimeOffset:t})},lu.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},lu.prototype.onListenRevoked_=function(t,e){e=e?e.map((function(t){return Ya(t)})).join("$"):"default",(e=this.removeListen_(t,e))&&e.onComplete&&e.onComplete("permission_denied")},lu.prototype.removeListen_=function(t,e){var n,r=new qs(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},lu.prototype.onAuthRevoked_=function(t,e){Ba("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},lu.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},lu.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=Zi(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,Zi(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},lu.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Ss.replace(/\./g,"-")]=1,vo()?t["framework.cordova"]=1:yo()&&(t["framework.reactnative"]=1),this.reportStats(t)},lu.prototype.shouldReconnect_=function(){var t=Fs.getInstance().currentlyOnline();return xo(this.interruptReasons_)&&t},lu.nextPersistentConnectionId_=0,lu.nextConnectionId_=0,lu);function lu(t,e,n,r,i,o,a){var s=su.call(this)||this;if(s.repoInfo_=t,s.applicationId_=e,s.onDataUpdate_=n,s.onConnectStatus_=r,s.onServerInfoUpdate_=i,s.authTokenProvider_=o,s.authOverride_=a,s.id=lu.nextPersistentConnectionId_++,s.log_=Ka("p:"+s.id+":"),s.interruptReasons_={},s.listens=new Map,s.outstandingPuts_=[],s.outstandingGets_=[],s.outstandingPutCount_=0,s.outstandingGetCount_=0,s.onDisconnectRequestQueue_=[],s.connected_=!1,s.reconnectDelay_=uu,s.maxReconnectDelay_=3e5,s.securityDebugCallback_=null,s.lastSessionId=null,s.establishConnectionTimer_=null,s.visible_=!1,s.requestCBHash_={},s.requestNumber_=0,s.realtime_=null,s.authToken_=null,s.forceTokenRefresh_=!1,s.invalidAuthTokenCount_=0,s.firstConnection_=!0,s.lastConnectionAttemptTime_=null,s.lastConnectionEstablishedTime_=null,a&&!mo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return s.scheduleConnect_(0),ou.getInstance().on("visible",s.onVisible_,s),-1===t.host.indexOf("fblocal")&&Fs.getInstance().on("online",s.onOnline_,s),s}var hu,fu,du=(pu.Wrap=function(t,e){return new pu(t,e)},pu);function pu(t,e){this.name=t,this.node=e}function vu(){}function gu(){return null!==fu&&fu.apply(this,arguments)||this}vu.prototype.getCompare=function(){return this.compare.bind(this)},vu.prototype.indexedValueChanged=function(t,e){return t=new du(Ha,t),e=new du(Ha,e),0!==this.compare(t,e)},vu.prototype.minPost=function(){return du.MIN};var yu=new(Yi(gu,fu=W=vu),Object.defineProperty(gu,"__EMPTY_NODE",{get:function(){return hu},set:function(t){hu=t},enumerable:!1,configurable:!0}),gu.prototype.compare=function(t,e){return Qa(t.name,e.name)},gu.prototype.isDefinedOn=function(t){throw so("KeyIndex.isDefinedOn not expected to be called.")},gu.prototype.indexedValueChanged=function(t,e){return!1},gu.prototype.minPost=function(){return du.MIN},gu.prototype.maxPost=function(){return new du(Ga,hu)},gu.prototype.makePost=function(t,e){return ao("string"==typeof t,"KeyIndex indexValue must always be a string."),new du(t,hu)},gu.prototype.toString=function(){return".key"},kn=gu),mu=(bu.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},bu.prototype.hasNext=function(){return 0<this.nodeStack_.length},bu.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},bu);function bu(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var _u=(wu.prototype.copy=function(t,e,n,r,i){return new wu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},wu.prototype.count=function(){return this.left.count()+1+this.right.count()},wu.prototype.isEmpty=function(){return!1},wu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},wu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},wu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},wu.prototype.minKey=function(){return this.min_().key},wu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},wu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},wu.prototype.removeMin_=function(){if(this.left.isEmpty())return Eu.EMPTY_NODE;var t=this;return(t=(t=t.left.isRed_()||t.left.left.isRed_()?t:t.moveRedLeft_()).copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},wu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()?r:r.moveRedLeft_()).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=(r=r.left.isRed_()?r.rotateRight_():r).right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()?r:r.moveRedRight_()).key)){if(r.right.isEmpty())return Eu.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},wu.prototype.isRed_=function(){return this.color},wu.prototype.fixUp_=function(){var t=this;return(t=(t=t.right.isRed_()&&!t.left.isRed_()?t.rotateLeft_():t).left.isRed_()&&t.left.left.isRed_()?t.rotateRight_():t).left.isRed_()&&t.right.isRed_()?t.colorFlip_():t},wu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_():t},wu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()?(t=t.rotateRight_()).colorFlip_():t},wu.prototype.rotateLeft_=function(){var t=this.copy(null,null,wu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},wu.prototype.rotateRight_=function(){var t=this.copy(null,null,wu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},wu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},wu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},wu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},wu.RED=!0,wu.BLACK=!1,wu);function wu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:wu.RED,this.left=null!=r?r:Eu.EMPTY_NODE,this.right=null!=i?i:Eu.EMPTY_NODE}function Iu(){}Iu.prototype.copy=function(t,e,n,r,i){return this},Iu.prototype.insert=function(t,e,n){return new _u(t,e,null)},Iu.prototype.remove=function(t,e){return this},Iu.prototype.count=function(){return 0},Iu.prototype.isEmpty=function(){return!0},Iu.prototype.inorderTraversal=function(t){return!1},Iu.prototype.reverseTraversal=function(t){return!1},Iu.prototype.minKey=function(){return null},Iu.prototype.maxKey=function(){return null},Iu.prototype.check_=function(){return 0},Iu.prototype.isRed_=function(){return!1},Ls=Iu;var Tu,Eu=(Su.prototype.insert=function(t,e){return new Su(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,_u.BLACK,null,null))},Su.prototype.remove=function(t){return new Su(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,_u.BLACK,null,null))},Su.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Su.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Su.prototype.isEmpty=function(){return this.root_.isEmpty()},Su.prototype.count=function(){return this.root_.count()},Su.prototype.minKey=function(){return this.root_.minKey()},Su.prototype.maxKey=function(){return this.root_.maxKey()},Su.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Su.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Su.prototype.getIterator=function(t){return new mu(this.root_,null,this.comparator_,!1,t)},Su.prototype.getIteratorFrom=function(t,e){return new mu(this.root_,t,this.comparator_,!1,e)},Su.prototype.getReverseIteratorFrom=function(t,e){return new mu(this.root_,t,this.comparator_,!0,e)},Su.prototype.getReverseIterator=function(t){return new mu(this.root_,null,this.comparator_,!0,t)},Su.EMPTY_NODE=new Ls,Su);function Su(t,e){void 0===e&&(e=Su.EMPTY_NODE),this.comparator_=t,this.root_=e}function Cu(t,e){return Qa(t.name,e.name)}function ku(t,e){return Qa(t,e)}function Ou(t){return"number"==typeof t?"number:"+$a(t):"string:"+t}var Nu,Au,Pu,Ru,xu=function(t){var e;t.isLeafNode()?(e=t.val(),ao("string"==typeof e||"number"==typeof e||"object"==typeof e&&Po(e,".sv"),"Priority must be a string or number.")):ao(t===Tu||t.isEmpty(),"priority of unexpected type."),ao(t===Tu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Du=(Object.defineProperty(Lu,"__childrenNodeConstructor",{get:function(){return Nu},set:function(t){Nu=t},enumerable:!1,configurable:!0}),Lu.prototype.isLeafNode=function(){return!0},Lu.prototype.getPriority=function(){return this.priorityNode_},Lu.prototype.updatePriority=function(t){return new Lu(this.value_,t)},Lu.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Lu.__childrenNodeConstructor.EMPTY_NODE},Lu.prototype.getChild=function(t){return Xs(t)?this:".priority"===Ks(t)?this.priorityNode_:Lu.__childrenNodeConstructor.EMPTY_NODE},Lu.prototype.hasChild=function(){return!1},Lu.prototype.getPredecessorChildName=function(t,e){return null},Lu.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Lu.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Lu.prototype.updateChild=function(t,e){var n=Ks(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(ao(".priority"!==n||1===zs(t),".priority must be the last token in a path"),this.updateImmediateChild(n,Lu.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ws(t),e)))},Lu.prototype.isEmpty=function(){return!1},Lu.prototype.numChildren=function(){return 0},Lu.prototype.forEachChild=function(t,e){return!1},Lu.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Lu.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+Ou(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?$a(this.value_):this.value_,this.lazyHash_=ka(t)),this.lazyHash_},Lu.prototype.getValue=function(){return this.value_},Lu.prototype.compareTo=function(t){return t===Lu.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Lu.__childrenNodeConstructor?-1:(ao(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Lu.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Lu.VALUE_TYPE_ORDER.indexOf(e),i=Lu.VALUE_TYPE_ORDER.indexOf(n);return ao(0<=r,"Unknown leaf type: "+e),ao(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Lu.prototype.withIndex=function(){return this},Lu.prototype.isIndexed=function(){return!0},Lu.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},Lu.VALUE_TYPE_ORDER=["object","boolean","number","string"],Lu);function Lu(t,e){void 0===e&&(e=Lu.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,ao(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),xu(this.priorityNode_)}function ju(){return null!==Ru&&Ru.apply(this,arguments)||this}var Mu=new(Yi(ju,Ru=W),ju.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority();return 0===(r=n.compareTo(r))?Qa(t.name,e.name):r},ju.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},ju.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},ju.prototype.minPost=function(){return du.MIN},ju.prototype.maxPost=function(){return new du(Ga,new Du("[PRIORITY-POST]",Pu))},ju.prototype.makePost=function(t,e){return t=Au(t),new du(e,new Du("[PRIORITY-POST]",t))},ju.prototype.toString=function(){return".priority"},ju),Fu=Math.log(2),Uu=(qu.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},qu);function qu(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Fu,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Vu,Bu,Ku=function(t,e,n,r){t.sort(e);var i=function(e){for(var r=null,i=null,o=t.length,a=function(e,r){var i=o-e,a=o;o-=e,e=function e(r,i){if(0==(o=i-r))return null;if(1==o)return a=t[r],s=n?n(a):a,new _u(s,a.node,_u.BLACK,null,null);r=e(r,o=parseInt(o/2,10)+r),i=e(o+1,i);var o,a=t[o],s=n?n(a):a;return new _u(s,a.node,_u.BLACK,r,i)}(1+i,a),a=t[i],i=n?n(a):a,s(new _u(i,a.node,r,null,e))},s=function(t){r=r?r.left=t:i=t},u=0;u<e.count;++u){var c=e.nextBitIsOne(),l=Math.pow(2,e.count-(u+1));c?a(l,_u.BLACK):(a(l,_u.BLACK),a(l,_u.RED))}return i}(new Uu(t.length));return new Eu(r||e,i)},zu={},Wu=(Object.defineProperty(Hu,"Default",{get:function(){return ao(Mu,"ChildrenNode.ts has not been loaded"),Vu=Vu||new Hu({".priority":zu},{".priority":Mu})},enumerable:!1,configurable:!0}),Hu.prototype.get=function(t){var e=Ro(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Eu?e:null},Hu.prototype.hasIndex=function(t){return Po(this.indexSet_,t.toString())},Hu.prototype.addIndex=function(t,e){ao(t!==yu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n=[],r=!1,i=e.getIterator(du.Wrap),o=i.getNext();o;)r=r||t.isDefinedOn(o.node),n.push(o),o=i.getNext();var a=r?Ku(n,t.getCompare()):zu,s=t.toString(),u=Xi({},this.indexSet_);return u[s]=t,(e=Xi({},this.indexes_))[s]=a,new Hu(e,u)},Hu.prototype.addToIndexes=function(t,e){var n=this;return new Hu(Do(this.indexes_,(function(r,i){var o=Ro(n.indexSet_,i);if(ao(o,"Missing index implementation for "+i),r===zu){if(o.isDefinedOn(t.node)){for(var a=[],s=e.getIterator(du.Wrap),u=s.getNext();u;)u.name!==t.name&&a.push(u),u=s.getNext();return a.push(t),Ku(a,o.getCompare())}return zu}return(r=(o=e.get(t.name))?r.remove(new du(t.name,o)):r).insert(t,t.node)})),this.indexSet_)},Hu.prototype.removeFromIndexes=function(t,e){return new Hu(Do(this.indexes_,(function(n){if(n===zu)return n;var r=e.get(t.name);return r?n.remove(new du(t.name,r)):n})),this.indexSet_)},Hu);function Hu(t,e){this.indexes_=t,this.indexSet_=e}var Gu,Qu=(Object.defineProperty(Yu,"EMPTY_NODE",{get:function(){return Bu=Bu||new Yu(new Eu(ku),null,Wu.Default)},enumerable:!1,configurable:!0}),Yu.prototype.isLeafNode=function(){return!1},Yu.prototype.getPriority=function(){return this.priorityNode_||Bu},Yu.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Yu(this.children_,t,this.indexMap_)},Yu.prototype.getImmediateChild=function(t){return".priority"===t?this.getPriority():null===(t=this.children_.get(t))?Bu:t},Yu.prototype.getChild=function(t){var e=Ks(t);return null===e?this:this.getImmediateChild(e).getChild(Ws(t))},Yu.prototype.hasChild=function(t){return null!==this.children_.get(t)},Yu.prototype.updateImmediateChild=function(t,e){if(ao(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new du(t,e),r=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_));return n=r.isEmpty()?Bu:this.priorityNode_,new Yu(r,n,i)},Yu.prototype.updateChild=function(t,e){var n=Ks(t);return null===n?e:(ao(".priority"!==Ks(t)||1===zs(t),".priority must be the last token in a path"),e=this.getImmediateChild(n).updateChild(Ws(t),e),this.updateImmediateChild(n,e))},Yu.prototype.isEmpty=function(){return this.children_.isEmpty()},Yu.prototype.numChildren=function(){return this.children_.count()},Yu.prototype.val=function(t){if(this.isEmpty())return null;var e={},n=0,r=0,i=!0;if(this.forEachChild(Mu,(function(o,a){e[o]=a.val(t),n++,i&&Yu.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!t&&i&&r<2*n){var o,a=[];for(o in e)a[o]=e[o];return a}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e},Yu.prototype.hash=function(){var t;return null===this.lazyHash_&&(t="",this.getPriority().isEmpty()||(t+="priority:"+Ou(this.getPriority().val())+":"),this.forEachChild(Mu,(function(e,n){""!==(n=n.hash())&&(t+=":"+e+":"+n)})),this.lazyHash_=""===t?"":ka(t)),this.lazyHash_},Yu.prototype.getPredecessorChildName=function(t,e,n){return(n=this.resolveIndex_(n))?(e=n.getPredecessorKey(new du(t,e)))?e.name:null:this.children_.getPredecessorKey(t)},Yu.prototype.getFirstChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.minKey())&&t.name:this.children_.minKey()},Yu.prototype.getFirstChild=function(t){return(t=this.getFirstChildName(t))?new du(t,this.children_.get(t)):null},Yu.prototype.getLastChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.maxKey())&&t.name:this.children_.maxKey()},Yu.prototype.getLastChild=function(t){return(t=this.getLastChildName(t))?new du(t,this.children_.get(t)):null},Yu.prototype.forEachChild=function(t,e){return(t=this.resolveIndex_(t))?t.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},Yu.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Yu.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,du.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Yu.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Yu.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,du.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Yu.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===$u?-1:0},Yu.prototype.withIndex=function(t){return t===yu||this.indexMap_.hasIndex(t)?this:(t=this.indexMap_.addIndex(t,this.children_),new Yu(this.children_,this.priorityNode_,t))},Yu.prototype.isIndexed=function(t){return t===yu||this.indexMap_.hasIndex(t)},Yu.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(Mu),n=t.getIterator(Mu),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},Yu.prototype.resolveIndex_=function(t){return t===yu?null:this.indexMap_.get(t.toString())},Yu.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Yu);function Yu(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&xu(this.priorityNode_),this.children_.isEmpty()&&ao(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Xu(){return Gu.call(this,new Eu(ku),Qu.EMPTY_NODE,Wu.Default)||this}var $u=new(Yi(Xu,Gu=Qu),Xu.prototype.compareTo=function(t){return t===this?0:1},Xu.prototype.equals=function(t){return t===this},Xu.prototype.getPriority=function(){return this},Xu.prototype.getImmediateChild=function(t){return Qu.EMPTY_NODE},Xu.prototype.isEmpty=function(){return!1},Xu);function Ju(t,e){if(void 0===e&&(e=null),null===t)return Qu.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),ao(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Du(t,Ju(e));if(t instanceof Array){var n=Qu.EMPTY_NODE;return Xa(t,(function(e,r){Po(t,e)&&"."!==e.substring(0,1)&&(!(r=Ju(r)).isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(e,r)))})),n.updatePriority(Ju(e))}var r=[],i=!1;if(Xa(t,(function(t,e){"."!==t.substring(0,1)&&((e=Ju(e)).isEmpty()||(i=i||!e.getPriority().isEmpty(),r.push(new du(t,e))))})),0===r.length)return Qu.EMPTY_NODE;var o=Ku(r,Cu,(function(t){return t.name}),ku);if(i){var a=Ku(r,Mu.getCompare());return new Qu(o,Ju(e),new Wu({".priority":a},{".priority":Mu}))}return new Qu(o,Ju(e),Wu.Default)}Object.defineProperties(du,{MIN:{value:new du(Ha,Qu.EMPTY_NODE)},MAX:{value:new du(Ga,$u)}}),kn.__EMPTY_NODE=Qu.EMPTY_NODE,Du.__childrenNodeConstructor=Qu,Tu=$u,Pu=$u,Au=Ju;var Zu,tc,ec=(Yi(nc,Zu=W),nc.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},nc.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},nc.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node);return 0===(r=n.compareTo(r))?Qa(t.name,e.name):r},nc.prototype.makePost=function(t,e){return t=Ju(t),t=Qu.EMPTY_NODE.updateChild(this.indexPath_,t),new du(e,t)},nc.prototype.maxPost=function(){var t=Qu.EMPTY_NODE.updateChild(this.indexPath_,$u);return new du(Ga,t)},nc.prototype.toString=function(){return Gs(this.indexPath_,0).join("/")},nc);function nc(t){var e=Zu.call(this)||this;return e.indexPath_=t,ao(!Xs(t)&&".priority"!==Ks(t),"Can't create PathIndex with empty path or .priority key"),e}function rc(){return null!==tc&&tc.apply(this,arguments)||this}function ic(t){if(t===""+es)return"-";var e=ns(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;0<=i&&"z"===n[i];)i--;return-1===i?Ga:(e=n[i],e=cc.charAt(cc.indexOf(e)+1),n[i]=e,n.slice(0,i+1).join(""))}function oc(t){if(t===""+ts)return Ha;var e=ns(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?""+es:(delete n[n.length-1],n.join("")):(n[n.length-1]=cc.charAt(cc.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}var ac,sc,uc=new(Yi(rc,tc=W),rc.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Qa(t.name,e.name):n},rc.prototype.isDefinedOn=function(t){return!0},rc.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},rc.prototype.minPost=function(){return du.MIN},rc.prototype.maxPost=function(){return du.MAX},rc.prototype.makePost=function(t,e){return t=Ju(t),new du(e,t)},rc.prototype.toString=function(){return".value"},rc),cc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",lc=(ac=0,sc=[],function(t){var e=t===ac;ac=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=cc.charAt(t%64),t=Math.floor(t/64);ao(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===sc[r];r--)sc[r]=0;sc[r]++}else for(r=0;r<12;r++)sc[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=cc.charAt(sc[r]);return ao(20===i.length,"nextPushId: Length should be 20."),i});function hc(t){return{type:"value",snapshotNode:t}}function fc(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function dc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function pc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var vc=(gc.prototype.updateChild=function(t,e,n,r,i,o){ao(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(dc(e,a)):ao(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(fc(e,n)):o.trackChildChange(pc(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},gc.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Mu,(function(t,r){e.hasChild(t)||n.trackChildChange(dc(t,r))})),e.isLeafNode()||e.forEachChild(Mu,(function(e,r){var i;t.hasChild(e)?(i=t.getImmediateChild(e)).equals(r)||n.trackChildChange(pc(e,r,i)):n.trackChildChange(fc(e,r))}))),e.withIndex(this.index_)},gc.prototype.updatePriority=function(t,e){return t.isEmpty()?Qu.EMPTY_NODE:t.updatePriority(e)},gc.prototype.filtersNodes=function(){return!1},gc.prototype.getIndexedFilter=function(){return this},gc.prototype.getIndex=function(){return this.index_},gc);function gc(t){this.index_=t}var yc=(mc.prototype.getStartPost=function(){return this.startPost_},mc.prototype.getEndPost=function(){return this.endPost_},mc.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},mc.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new du(e,n))||(n=Qu.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},mc.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Qu.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(Qu.EMPTY_NODE),i=this;return e.forEachChild(Mu,(function(t,e){i.matches(new du(t,e))||(r=r.updateImmediateChild(t,Qu.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},mc.prototype.updatePriority=function(t,e){return t},mc.prototype.filtersNodes=function(){return!0},mc.prototype.getIndexedFilter=function(){return this.indexedFilter_},mc.prototype.getIndex=function(){return this.index_},mc.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},mc.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},mc);function mc(t){this.indexedFilter_=new vc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=mc.getStartPost_(t),this.endPost_=mc.getEndPost_(t)}var bc=(_c.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new du(e,n))||(n=Qu.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},_c.prototype.updateFullNode=function(t,e,n){if(e.isLeafNode()||e.isEmpty())r=Qu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){var r=Qu.EMPTY_NODE.withIndex(this.index_),i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Qu.EMPTY_NODE);var s,u=void 0,c=void 0,l=void 0;i=void 0,l=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),s=this.index_.getCompare(),function(t,e){return s(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare()),o=0;for(var h=!1;i.hasNext();)a=i.getNext(),(h=!h&&l(u,a)<=0||h)&&o<this.limit_&&l(a,c)<=0?o++:r=r.updateImmediateChild(a.name,Qu.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},_c.prototype.updatePriority=function(t,e){return t},_c.prototype.filtersNodes=function(){return!0},_c.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},_c.prototype.getIndex=function(){return this.index_},_c.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,a;a=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var s=t;ao(s.numChildren()===this.limit_,"");var u=new du(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);return l&&!n.isEmpty()&&0<=d?(null!=i&&i.trackChildChange(pc(e,n,h)),s.updateImmediateChild(e,n)):(null!=i&&i.trackChildChange(dc(e,h)),h=s.updateImmediateChild(e,Qu.EMPTY_NODE),null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(fc(f.name,f.node)),h.updateImmediateChild(f.name,f.node)):h)}return!n.isEmpty()&&l&&0<=a(c,u)?(null!=i&&(i.trackChildChange(dc(c.name,c.node)),i.trackChildChange(fc(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,Qu.EMPTY_NODE)):t},_c);function _c(t){this.rangedFilter_=new yc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var wc=(Ic.prototype.hasStart=function(){return this.startSet_},Ic.prototype.hasStartAfter=function(){return this.startAfterSet_},Ic.prototype.hasEndBefore=function(){return this.endBeforeSet_},Ic.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},Ic.prototype.getIndexStartValue=function(){return ao(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Ic.prototype.getIndexStartName=function(){return ao(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ha},Ic.prototype.hasEnd=function(){return this.endSet_},Ic.prototype.getIndexEndValue=function(){return ao(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Ic.prototype.getIndexEndName=function(){return ao(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ga},Ic.prototype.hasLimit=function(){return this.limitSet_},Ic.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Ic.prototype.getLimit=function(){return ao(this.limitSet_,"Only valid if limit has been set"),this.limit_},Ic.prototype.getIndex=function(){return this.index_},Ic.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Ic.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Mu},Ic.prototype.copy=function(){var t=new Ic;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Ic);function Ic(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mu}function Tc(t,e,n){return(t=t.copy()).startSet_=!0,void 0===e&&(e=null),t.indexStartValue_=e,null!=n?(t.startNameSet_=!0,t.indexStartName_=n):(t.startNameSet_=!1,t.indexStartName_=""),t}function Ec(t,e,n){return(t=t.copy()).endSet_=!0,void 0===e&&(e=null),t.indexEndValue_=e,void 0!==n?(t.endNameSet_=!0,t.indexEndName_=n):(t.endNameSet_=!1,t.indexEndName_=""),t}function Sc(t,e){return(t=t.copy()).index_=e,t}function Cc(t){var e,n={};return t.isDefault()||(e=t.index_===Mu?"$priority":t.index_===uc?"$value":t.index_===yu?"$key":(ao(t.index_ instanceof ec,"Unrecognized index type!"),t.index_.toString()),n.orderBy=No(e),t.startSet_&&(n.startAt=No(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+No(t.indexStartName_))),t.endSet_&&(n.endAt=No(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+No(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function kc(t){var e,n={};return t.startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_&&(n.sn=t.indexStartName_)),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_&&(n.en=t.indexEndName_)),t.limitSet_&&(n.l=t.limit_,""===(e=t.viewFrom_)&&(e=t.isViewFromLeft()?"l":"r"),n.vf=e),t.index_!==Mu&&(n.i=t.index_.toString()),n}var Oc,Nc=(Yi(Ac,Oc=H),Ac.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Ac.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(ao(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},Ac.prototype.listen=function(t,e,n,r){var i=this,o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);var a=Ac.getListenId_(t,n),s={};this.listens_[a]=s,t=Cc(t._queryParams),this.restRequest_(o+".json",t,(function(t,e){null===(t=404===t?e=null:t)&&i.onDataUpdate_(o,e,!1,n),Ro(i.listens_,a)===s&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},Ac.prototype.unlisten=function(t,e){e=Ac.getListenId_(t,e),delete this.listens_[e]},Ac.prototype.get=function(t){var e=this,n=Cc(t._queryParams),r=t._path.toString(),i=new ho;return this.restRequest_(r+".json",n,(function(t,n){null===(t=404===t?n=null:t)?(e.onDataUpdate_(r,n,!1,null),i.resolve(n)):i.reject(new Error(n))})),i.promise},Ac.prototype.refreshAuthToken=function(t){},Ac.prototype.restRequest_=function(t,e,n){var r=this;(e=void 0===e?{}:e).format="export",this.authTokenProvider_.getToken(!1).then((function(i){(i=i&&i.accessToken)&&(e.auth=i);var o=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=0,r=Object.entries(t);n<r.length;n++){var i=r[n];!function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}(i[0],i[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+o);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);var t=null;if(200<=a.status&&a.status<300){try{t=Oo(a.responseText)}catch(t){Wa("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&Wa("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))},Ac);function Ac(t,e,n){var r=Oc.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=Ka("p:rest:"),r.listens_={},r}var Pc=(Rc.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Rc.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Rc);function Rc(){this.rootNode_=Qu.EMPTY_NODE}function xc(){return{value:null,children:new Map}}function Dc(t,e,n){var r;Xs(e)?(t.value=n,t.children.clear()):null!==t.value?t.value=t.value.updateChild(e,n):(r=Ks(e),t.children.has(r)||t.children.set(r,xc()),Dc(t.children.get(r),e=Ws(e),n))}function Lc(t,e,n){var r;null!==t.value?n(e,t.value):(r=function(t,r){Lc(r,new qs(e.toString()+"/"+t),n)},t.children.forEach((function(t,e){r(e,t)})))}var jc=(Mc.prototype.get=function(){var t=this.collection_.get(),e=Xi({},t);return this.last_&&Xa(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},Mc);function Mc(t){this.collection_=t,this.last_=null}var Fc,Uc=(qc.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Xa(e,(function(e,i){0<i&&Po(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Ja(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},qc);function qc(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new jc(t),t=1e4+2e4*Math.random(),Ja(this.reportStats_.bind(this),Math.floor(t))}function Vc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}(Ls=Fc=Fc||{})[Ls.OVERWRITE=0]="OVERWRITE",Ls[Ls.MERGE=1]="MERGE",Ls[Ls.ACK_USER_WRITE=2]="ACK_USER_WRITE",Ls[Ls.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Bc=(Kc.prototype.operationForChild=function(t){if(Xs(this.path)){if(null!=this.affectedTree.value)return ao(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new qs(t));return new Kc(Bs(),e,this.revert)}return ao(Ks(this.path)===t,"operationForChild called for unrelated child."),new Kc(Ws(this.path),this.affectedTree,this.revert)},Kc);function Kc(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Fc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}var zc=(Wc.prototype.operationForChild=function(t){return Xs(this.path)?new Wc(this.source,Bs()):new Wc(this.source,Ws(this.path))},Wc);function Wc(t,e){this.source=t,this.path=e,this.type=Fc.LISTEN_COMPLETE}var Hc=(Gc.prototype.operationForChild=function(t){return Xs(this.path)?new Gc(this.source,Bs(),this.snap.getImmediateChild(t)):new Gc(this.source,Ws(this.path),this.snap)},Gc);function Gc(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Fc.OVERWRITE}var Qc=(Yc.prototype.operationForChild=function(t){if(Xs(this.path)){var e=this.children.subtree(new qs(t));return e.isEmpty()?null:e.value?new Hc(this.source,Bs(),e.value):new Yc(this.source,Bs(),e)}return ao(Ks(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Yc(this.source,Ws(this.path),this.children)},Yc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Yc);function Yc(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Fc.MERGE}var Xc=($c.prototype.isFullyInitialized=function(){return this.fullyInitialized_},$c.prototype.isFiltered=function(){return this.filtered_},$c.prototype.isCompleteForPath=function(t){return Xs(t)?this.isFullyInitialized()&&!this.filtered_:(t=Ks(t),this.isCompleteForChild(t))},$c.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},$c.prototype.getNode=function(){return this.node_},$c);function $c(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var Jc,Zc=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function tl(t,e,n,r,i,o){(r=r.filter((function(t){return t.type===n}))).sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw so("Should only compare child_ events.");return e=new du(e.childName,e.snapshotNode),n=new du(n.childName,n.snapshotNode),t.index_.compare(e,n)}(t,e,n)})),r.forEach((function(n){var r,a,s,u=(r=t,s=o,"value"===(a=n).type||"child_removed"===a.type||(a.prevName=s.getPredecessorChildName(a.childName,a.snapshotNode,r.index_)),a);i.forEach((function(r){r.respondsTo(n.type)&&e.push(r.createEvent(u,t.query_))}))}))}function el(t,e){return{eventCache:t,serverCache:e}}function nl(t,e,n,r){return el(new Xc(e,n,r),t.serverCache)}function rl(t,e,n,r){return el(t.eventCache,new Xc(e,n,r))}function il(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function ol(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var al=(sl.fromObject=function(t){var e=new sl(null);return Xa(t,(function(t,n){e=e.set(new qs(t),n)})),e},sl.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},sl.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Bs(),value:this.value};if(Xs(t))return null;var n=Ks(t),r=this.children.get(n);return null===r||null==(e=r.findRootMostMatchingPathAndValue(Ws(t),e))?null:{path:Ys(new qs(n),e.path),value:e.value}},sl.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},sl.prototype.subtree=function(t){if(Xs(t))return this;var e=Ks(t);return null!==(e=this.children.get(e))?e.subtree(Ws(t)):new sl(null)},sl.prototype.set=function(t,e){if(Xs(t))return new sl(e,this.children);var n=Ks(t);return e=(this.children.get(n)||new sl(null)).set(Ws(t),e),e=this.children.insert(n,e),new sl(this.value,e)},sl.prototype.remove=function(t){if(Xs(t))return this.children.isEmpty()?new sl(null):new sl(null,this.children);var e=Ks(t),n=this.children.get(e);return n?(n=n.remove(Ws(t)),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n),null===this.value&&t.isEmpty()?new sl(null):new sl(this.value,t)):this},sl.prototype.get=function(t){if(Xs(t))return this.value;var e=Ks(t);return(e=this.children.get(e))?e.get(Ws(t)):null},sl.prototype.setTree=function(t,e){if(Xs(t))return e;var n=Ks(t);return t=(this.children.get(n)||new sl(null)).setTree(Ws(t),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t),new sl(this.value,e)},sl.prototype.fold=function(t){return this.fold_(Bs(),t)},sl.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Ys(t,r),e)})),e(t,this.value,n)},sl.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Bs(),e)},sl.prototype.findOnPath_=function(t,e,n){if(r=!!this.value&&n(e,this.value))return r;if(Xs(t))return null;var r,i=Ks(t);return(r=this.children.get(i))?r.findOnPath_(Ws(t),Ys(e,i),n):null},sl.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Bs(),e)},sl.prototype.foreachOnPath_=function(t,e,n){if(Xs(t))return this;this.value&&n(e,this.value);var r=Ks(t),i=this.children.get(r);return i?i.foreachOnPath_(Ws(t),Ys(e,r),n):new sl(null)},sl.prototype.foreach=function(t){this.foreach_(Bs(),t)},sl.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(Ys(t,n),e)})),this.value&&e(t,this.value)},sl.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},sl);function sl(t,e){void 0===e&&(e=Jc=Jc||new Eu(Aa)),this.value=t,this.children=e}var ul=(cl.empty=function(){return new cl(new al(null))},cl);function cl(t){this.writeTree_=t}function ll(t,e,n){if(Xs(e))return new ul(new al(n));if(null!=(o=t.writeTree_.findRootMostValueAndPath(e))){var r=o.path,i=o.value,o=$s(r,e);return i=i.updateChild(o,n),new ul(t.writeTree_.set(r,i))}return n=new al(n),n=t.writeTree_.setTree(e,n),new ul(n)}function hl(t,e,n){var r=t;return Xa(n,(function(t,n){r=ll(r,Ys(e,t),n)})),r}function fl(t,e){return Xs(e)?ul.empty():(e=t.writeTree_.setTree(e,new al(null)),new ul(e))}function dl(t,e){return null!=pl(t,e)}function pl(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild($s(n.path,e)):null}function vl(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Mu,(function(t,n){e.push(new du(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new du(t,n.value))})),e}function gl(t,e){if(Xs(e))return t;var n=pl(t,e);return new ul(null!=n?new al(n):t.writeTree_.subtree(e))}function yl(t){return t.writeTree_.isEmpty()}function ml(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(ao(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(Ys(e,n),o,r)})),r=r.getChild(e).isEmpty()||null===i?r:r.updateChild(Ys(e,".priority"),i)}(Bs(),t.writeTree_,e)}function bl(t,e){return Nl(e,t)}function _l(t){return t.visible}function wl(t,e,n){for(var r=ul.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)tu(n,a)?r=ll(r,s=$s(n,a),o.snap):tu(a,n)&&(s=$s(a,n),r=ll(r,Bs(),o.snap.getChild(s)));else{if(!o.children)throw so("WriteRecord should have .snap or .children");tu(n,a)?r=hl(r,s=$s(n,a),o.children):tu(a,n)&&(Xs(s=$s(a,n))?r=hl(r,Bs(),o.children):(o=Ro(o.children,Ks(s)))&&(s=o.getChild(Ws(s)),r=ll(r,Bs(),s)))}}}return r}function Il(t,e,n,r,i){if(r||i){var o=gl(t.visibleWrites,e);return!i&&yl(o)?n:i||null!=n||dl(o,Bs())?ml(wl(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(tu(t.path,e)||tu(e,t.path))}),e),n||Qu.EMPTY_NODE):null}return null!=(o=pl(t.visibleWrites,e))?o:yl(t=gl(t.visibleWrites,e))?n:null!=n||dl(t,Bs())?ml(t,n||Qu.EMPTY_NODE):null}function Tl(t,e,n,r){return Il(t.writeTree,t.treePath,e,n,r)}function El(t,e){return function(t,e,n){var r=Qu.EMPTY_NODE,i=pl(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Mu,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=gl(t.visibleWrites,e);return n.forEachChild(Mu,(function(t,e){e=ml(gl(o,new qs(t)),e),r=r.updateImmediateChild(t,e)})),vl(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return vl(gl(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function Sl(t,e,n,r){return i=t.writeTree,t=t.treePath,e=e,r=r,ao(n||r,"Either existingEventSnap or existingServerSnap must exist"),t=Ys(t,e),dl(i.visibleWrites,t)?null:yl(t=gl(i.visibleWrites,t))?r.getChild(e):ml(t,r.getChild(e));var i}function Cl(t,e){return n=t.writeTree,e=Ys(t.treePath,e),pl(n.visibleWrites,e);var n}function kl(t,e,n){return r=t.writeTree,i=t.treePath,t=n,e=Ys(i,n=e),null!=(i=pl(r.visibleWrites,e))?i:t.isCompleteForChild(n)?ml(gl(r.visibleWrites,e),t.getNode().getImmediateChild(n)):null;var r,i}function Ol(t,e){return Nl(Ys(t.treePath,e),t.writeTree)}function Nl(t,e){return{treePath:t,writeTree:e}}var Al=(Pl.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;ao("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),ao(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,pc(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,dc(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,fc(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw so("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,pc(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Pl.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Pl);function Pl(){this.changeMap=new Map}function Rl(){}var xl=new(Rl.prototype.getCompleteChild=function(t){return null},Rl.prototype.getChildAfterChild=function(t,e,n){return null},Rl),Dl=(Ll.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;return e.isCompleteForChild(t)?e.getNode().getImmediateChild(t):(e=null!=this.optCompleteServerCache_?new Xc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache,kl(this.writes_,t,e))},Ll.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ol(this.viewCache_);return 0===(t=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s;if(null!=(e=pl(t=gl(t.visibleWrites,e),Bs())))s=e;else{if(null==n)return[];s=ml(t,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=a.getCompare(),l=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),h=l.getNext();h&&u.length<i;)0!==c(h,r)&&u.push(h),h=l.getNext();return u}(t.writeTree,t.treePath,e,n,r,i,o)}(this.writes_,r,e,1,n,t)).length?null:t[0]},Ll);function Ll(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function jl(t,e,n,r,i,o){var a=e.eventCache;if(null!=Cl(r,n))return e;var s,u,c,l,h,f=void 0;return h=Xs(n)?(ao(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()?(s=El(r,(s=ol(e))instanceof Qu?s:Qu.EMPTY_NODE),t.filter.updateFullNode(e.eventCache.getNode(),s,o)):(u=Tl(r,ol(e)),t.filter.updateFullNode(e.eventCache.getNode(),u,o))):".priority"===(u=Ks(n))?(ao(1===zs(n),"Can't have a priority with additional path components"),null!=(l=Sl(r,n,c=a.getNode(),f=e.serverCache.getNode()))?t.filter.updatePriority(c,l):a.getNode()):(c=Ws(n),l=void 0,null!=(l=a.isCompleteForChild(u)?(f=e.serverCache.getNode(),null!=(f=Sl(r,n,a.getNode(),f))?a.getNode().getImmediateChild(u).updateChild(c,f):a.getNode().getImmediateChild(u)):kl(r,u,e.serverCache))?t.filter.updateChild(a.getNode(),u,l,c,i,o):a.getNode()),nl(e,h,a.isFullyInitialized()||Xs(n),t.filter.filtersNodes())}function Ml(t,e,n,r,i,o,a,s){var u=e.serverCache,c=a?t.filter:t.filter.getIndexedFilter();if(Xs(n))h=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered())var l=u.getNode().updateChild(n,r),h=c.updateFullNode(u.getNode(),l,null);else{if(a=Ks(n),!u.isCompleteForPath(n)&&1<zs(n))return e;l=Ws(n),r=u.getNode().getImmediateChild(a).updateChild(l,r),h=".priority"===a?c.updatePriority(u.getNode(),r):c.updateChild(u.getNode(),a,r,l,xl,null)}return jl(t,c=rl(e,h,u.isFullyInitialized()||Xs(n),c.filtersNodes()),n,i,new Dl(i,c,o),s)}function Fl(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new Dl(i,e,o);return Xs(n)?(u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),nl(e,u,!0,t.filter.filtersNodes())):".priority"===(s=Ks(n))?(u=t.filter.updatePriority(e.eventCache.getNode(),r),nl(e,u,c.isFullyInitialized(),c.isFiltered())):(i=Ws(n),o=c.getNode().getImmediateChild(s),u=void 0,u=Xs(i)?r:null!=(n=l.getCompleteChild(s))?".priority"===Hs(i)&&n.getChild(Qs(i)).isEmpty()?n:n.updateChild(i,r):Qu.EMPTY_NODE,o.equals(u)?e:nl(e,t.filter.updateChild(c.getNode(),s,u,i,l,a),c.isFullyInitialized(),t.filter.filtersNodes()))}function Ul(t,e){return t.eventCache.isCompleteForChild(e)}function ql(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function Vl(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u=e,c=(r=Xs(n)?r:new al(null).setTree(n,r),e.serverCache.getNode());return r.children.inorderTraversal((function(n,r){c.hasChild(n)&&(r=ql(0,e.serverCache.getNode().getImmediateChild(n),r),u=Ml(t,u,new qs(n),r,i,o,a,s))})),r.children.inorderTraversal((function(n,r){var l=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;c.hasChild(n)||l||(r=ql(0,e.serverCache.getNode().getImmediateChild(n),r),u=Ml(t,u,new qs(n),r,i,o,a,s))})),u}var Bl,Kl=(Object.defineProperty(zl.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),zl);function zl(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new vc(n.getIndex()),i=(o=n).loadsAllData()?new vc(o.getIndex()):new(o.hasLimit()?bc:yc)(o);this.processor_={filter:i},t=e.serverCache,n=e.eventCache;var o=r.updateFullNode(Qu.EMPTY_NODE,t.getNode(),null);e=i.updateFullNode(Qu.EMPTY_NODE,n.getNode(),null),r=new Xc(o,t.isFullyInitialized(),r.filtersNodes()),i=new Xc(e,n.isFullyInitialized(),i.filtersNodes()),this.viewCache_=el(i,r),this.eventGenerator_=new Zc(this.query_)}function Wl(t){return 0===t.eventRegistrations_.length}function Hl(t,e,n){var r,i=[];if(n&&(ao(null==e,"A cancel should cancel all event registrations."),r=t.query._path,t.eventRegistrations_.forEach((function(t){(t=t.createCancelEvent(n,r))&&i.push(t)}))),e){for(var o=[],a=0;a<t.eventRegistrations_.length;++a){var s=t.eventRegistrations_[a];if(s.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}else o.push(s)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return i}function Gl(t,e,n,r){e.type===Fc.MERGE&&null!==e.source.queryId&&(ao(ol(t.viewCache_),"We should always have a full cache before handling merges"),ao(il(t.viewCache_),"Missing event cache, even though we have a server cache"));var i=t.viewCache_;return e=function(t,e,n,r,i){var o,a,s,u,c,l,h,f,d=new Al;if(n.type===Fc.OVERWRITE)var p=n,v=p.source.fromUser?Fl(t,e,p.path,p.snap,r,i,d):(ao(p.source.fromServer,"Unknown source."),o=p.source.tagged||e.serverCache.isFiltered()&&!Xs(p.path),Ml(t,e,p.path,p.snap,r,i,o,d));else if(n.type===Fc.MERGE){var g=n;v=g.source.fromUser?(a=t,s=e,u=g.path,p=g.children,c=r,l=i,h=d,f=s,p.foreach((function(t,e){t=Ys(u,t),Ul(s,Ks(t))&&(f=Fl(a,f,t,e,c,l,h))})),p.foreach((function(t,e){t=Ys(u,t),Ul(s,Ks(t))||(f=Fl(a,f,t,e,c,l,h))})),f):(ao(g.source.fromServer,"Unknown source."),o=g.source.tagged||e.serverCache.isFiltered(),Vl(t,e,g.path,g.children,r,i,o,d))}else if(n.type===Fc.ACK_USER_WRITE){var y=n;v=y.revert?function(t,e,n,r,i,o){var a;if(null!=Cl(r,n))return e;var s,u,c=new Dl(r,e,i),l=e.eventCache.getNode();return i=void 0,Xs(n)||".priority"===Ks(n)?(u=void 0,u=e.serverCache.isFullyInitialized()?Tl(r,ol(e)):(s=e.serverCache.getNode(),ao(s instanceof Qu,"serverChildren would be complete if leaf node"),El(r,s)),i=t.filter.updateFullNode(l,u,o)):(null==(u=kl(r,s=Ks(n),e.serverCache))&&e.serverCache.isCompleteForChild(s)&&(u=l.getImmediateChild(s)),(i=null!=u?t.filter.updateChild(l,s,u,Ws(n),c,o):e.eventCache.getNode().hasChild(s)?t.filter.updateChild(l,s,Qu.EMPTY_NODE,Ws(n),c,o):l).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Tl(r,ol(e))).isLeafNode()&&(i=t.filter.updateFullNode(i,a,o))),a=e.serverCache.isFullyInitialized()||null!=Cl(r,Bs()),nl(e,i,a,t.filter.filtersNodes())}(t,e,y.path,r,i,d):function(t,e,n,r,i,o,a){if(null!=Cl(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(Xs(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ml(t,e,n,u.getNode().getChild(n),i,o,s,a);if(Xs(n)){var c=new al(null);return u.getNode().forEachChild(yu,(function(t,e){c=c.set(new qs(t),e)})),Vl(t,e,n,c,i,o,s,a)}return e}var l=new al(null);return r.foreach((function(t,e){var r=Ys(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),Vl(t,e,n,l,i,o,s,a)}(t,e,y.path,y.affectedTree,r,i,d)}else{if(n.type!==Fc.LISTEN_COMPLETE)throw so("Unknown operation type: "+n.type);o=t,y=e,i=n.path,t=r,n=d,v=jl(o,r=rl(y,(r=y.serverCache).getNode(),r.isFullyInitialized()||Xs(i),r.isFiltered()),i,t,xl,n)}return function(t,e,n){var r,i,o=e.eventCache;o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=il(t),(0<n.length||!t.eventCache.isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(hc(il(e))))}(e,v,d=d.getChanges()),{viewCache:v,changes:d}}(t.processor_,i,e,n,r),n=t.processor_,r=e.viewCache,ao(r.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ao(r.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed"),ao(e.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=e.viewCache,Ql(t,e.changes,e.viewCache.eventCache.getNode(),null)}function Ql(t,e,n,r){return r=r?[r]:t.eventRegistrations_,function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),tl(t,i,"child_removed",e,r,n),tl(t,i,"child_added",e,r,n),tl(t,i,"child_moved",o,r,n),tl(t,i,"child_changed",e,r,n),tl(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r)}var Yl,Xl=function(){this.views=new Map};function $l(t,e,n,r){var i,o,a=e.source.queryId;if(null!==a){var s=t.views.get(a);return ao(null!=s,"SyncTree gave us an op for an invalid query."),Gl(s,e,n,r)}var u=[];try{for(var c=Zi(t.views.values()),l=c.next();!l.done;l=c.next())s=l.value,u=u.concat(Gl(s,e,n,r))}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function Jl(t,e,n,r,i){var o=e._queryIdentifier;return(t=t.views.get(o))?t:(t=!1,t=!!(o=Tl(n,i?r:null))||(o=r instanceof Qu?El(n,r):Qu.EMPTY_NODE,!1),i=el(new Xc(o,t,!1),new Xc(r,i,!1)),new Kl(e,i))}function Zl(t){var e,n,r=[];try{for(var i=Zi(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function th(t,e){var n,r,i,o,a=null;try{for(var s=Zi(t.views.values()),u=s.next();!u.done;u=s.next()){var c=u.value;a=a||(i=e,o=void 0,(o=ol((c=c).viewCache_))&&(c.query._queryParams.loadsAllData()||!Xs(i)&&!o.getImmediateChild(Ks(i)).isEmpty())?o.getChild(i):null)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return a}function eh(t,e){return e._queryParams.loadsAllData()?ih(t):(e=e._queryIdentifier,t.views.get(e))}function nh(t,e){return null!=eh(t,e)}function rh(t){return null!=ih(t)}function ih(t){var e,n;try{for(var r=Zi(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var oh=1,ah=function(t){this.listenProvider_=t,this.syncPointTree_=new al(null),this.pendingWriteTree_={visibleWrites:ul.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function sh(t,e,n,r,i){var o,a,s,u;return o=t.pendingWriteTree_,a=e,s=n,u=i,ao((r=r)>o.lastWriteId,"Stacking an older write on top of newer ones"),void 0===u&&(u=!0),o.allWrites.push({path:a,snap:s,writeId:r,visible:u}),u&&(o.visibleWrites=ll(o.visibleWrites,a,s)),o.lastWriteId=r,i?dh(t,new Hc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function uh(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));ao(0<=n,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i,o=r.visible,a=!1,s=t.allWrites.length-1;o&&0<=s;){var u=t.allWrites[s];u.visible&&(n<=s&&function(t,e){if(t.snap)return tu(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&tu(Ys(t.path,n),e))return!0;return!1}(u,r.path)?o=!1:tu(r.path,u.path)&&(a=!0)),s--}return!!o&&(a?((i=t).visibleWrites=wl(i.allWrites,_l,Bs()),0<i.allWrites.length?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1):r.snap?t.visibleWrites=fl(t.visibleWrites,r.path):Xa(r.children,(function(e){t.visibleWrites=fl(t.visibleWrites,Ys(r.path,e))})),!0)}(t.pendingWriteTree_,e)){var i=new al(null);return null!=r.snap?i=i.set(Bs(),!0):Xa(r.children,(function(t){i=i.set(new qs(t),!0)})),dh(t,new Bc(r.path,i,n))}return[]}function ch(t,e,n){return dh(t,new Hc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function lh(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e._queryIdentifier||nh(o,e))){var s=function(t,e,n,r){var i,o,a=e._queryIdentifier,s=[],u=[],c=rh(t);if("default"===a)try{for(var l=Zi(t.views.entries()),h=l.next();!h.done;h=l.next()){var f=to(h.value,2),d=f[0],p=f[1];u=u.concat(Hl(p,n,r)),Wl(p)&&(t.views.delete(d),p.query._queryParams.loadsAllData()||s.push(p.query))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else(p=t.views.get(a))&&(u=u.concat(Hl(p,n,r)),Wl(p)&&(t.views.delete(a),p.query._queryParams.loadsAllData()||s.push(p.query)));return c&&!rh(t)&&s.push((ao(Bl,"Reference.ts has not been loaded"),new Bl(e._repo,e._path))),{removed:s,events:u}}(o,e,n,r);if(0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i)),n=s.removed,a=s.events,o=-1!==n.findIndex((function(t){return t._queryParams.loadsAllData()})),s=t.syncPointTree_.findOnPath(i,(function(t,e){return rh(e)})),o&&!s&&!(i=t.syncPointTree_.subtree(i)).isEmpty())for(var u=i.fold((function(t,e,n){if(e&&rh(e))return[ih(e)];var r=[];return e&&(r=Zl(e)),Xa(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var l=(h=u[c]).query,h=ph(t,h);t.listenProvider_.startListening(_h(l),vh(t,l),h.hashFn,h.onComplete)}!s&&0<n.length&&!r&&(o?t.listenProvider_.stopListening(_h(e),null):n.forEach((function(e){var n=t.queryToTagMap.get(gh(e));t.listenProvider_.stopListening(_h(e),n)}))),function(t,e){for(var n=0;n<e.length;++n){var r,i=e[n];i._queryParams.loadsAllData()||(r=gh(i),i=t.queryToTagMap.get(r),t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i))}}(t,n)}return a}function hh(t,e,n){var r=e._path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){t=$s(t,r),i=i||th(e,t),o=o||rh(e)}));var a=t.syncPointTree_.get(r);a?(o=o||rh(a),i=i||th(a,Bs())):(a=new Xl,t.syncPointTree_=t.syncPointTree_.set(r,a)),null!=i?l=!0:(l=!1,i=Qu.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){(e=th(e,Bs()))&&(i=i.updateImmediateChild(t,e))})));var s,u,c=nh(a,e);c||e._queryParams.loadsAllData()||(s=gh(e),ao(!t.queryToTagMap.has(s),"View does not exist, but we have a tag"),u=oh++,t.queryToTagMap.set(s,u),t.tagToQueryMap.set(u,s));var l=function(t,e,n,r,i,o){var a;return o=Jl(t,e,r,i,o),t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),e=n,o.eventRegistrations_.push(e),e=n,o=(n=o).viewCache_.eventCache,a=[],o.getNode().isLeafNode()||o.getNode().forEachChild(Mu,(function(t,e){a.push(fc(t,e))})),o.isFullyInitialized()&&a.push(hc(o.getNode())),Ql(n,a,o.getNode(),e)}(a,e,n,bl(t.pendingWriteTree_,r),i,l);return c||o||(a=eh(a,e),l=l.concat(function(t,e,n){var r=e._path,i=vh(t,e);if(n=ph(t,n),n=t.listenProvider_.startListening(_h(e),i,n.hashFn,n.onComplete),r=t.syncPointTree_.subtree(r),i)ao(!rh(r.value),"If we're adding a query, it shouldn't be shadowed");else for(var o=r.fold((function(t,e,n){if(!Xs(t)&&e&&rh(e))return[ih(e).query];var r=[];return e&&(r=r.concat(Zl(e).map((function(t){return t.query})))),Xa(n,(function(t,e){r=r.concat(e)})),r})),a=0;a<o.length;++a){var s=o[a];t.listenProvider_.stopListening(_h(s),vh(t,s))}return n}(t,e,a))),l}function fh(t,e,n){var r=t.pendingWriteTree_;return t=t.syncPointTree_.findOnPath(e,(function(t,n){if(t=th(n,$s(t,e)))return t})),Il(r,e,t,n,!0)}function dh(t,e){return function t(e,n,r,i){if(Xs(e.path))return function t(e,n,r,i){var o=n.get(Bs());null==r&&null!=o&&(r=th(o,Bs()));var a=[];return n.children.inorderTraversal((function(n,o){var s=r?r.getImmediateChild(n):null,u=Ol(i,n);(n=e.operationForChild(n))&&(a=a.concat(t(n,o,s,u)))})),a=o?a.concat($l(o,e,i,r)):a}(e,n,r,i);var o=n.get(Bs());null==r&&null!=o&&(r=th(o,Bs()));var a=[],s=Ks(e.path),u=e.operationForChild(s),c=n.children.get(s);return c&&u&&(n=r?r.getImmediateChild(s):null,s=Ol(i,s),a=a.concat(t(u,c,n,s))),o?a.concat($l(o,e,i,r)):a}(e,t.syncPointTree_,null,bl(t.pendingWriteTree_,Bs()))}function ph(t,e){var n=e.query,r=vh(t,n);return{hashFn:function(){return(e.viewCache_.serverCache.getNode()||Qu.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=yh(t,n);return r?(r=(n=mh(r)).path,n=n.queryId,e=$s(r,e),bh(t,r,new zc(Vc(n),e))):[]}(t,n._path,r):(i=t,o=n._path,dh(i,new zc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o)));var i,o=(o="Unknown Error","too_big"===(e=e)?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?o="Client doesn't have permission to access the desired data.":"unavailable"===e&&(o="The service is unavailable"),(o=new Error(e+" at "+n._path.toString()+": "+o)).code=e.toUpperCase(),o);return lh(t,n,null,o)}}}function vh(t,e){return e=gh(e),t.queryToTagMap.get(e)}function gh(t){return t._path.toString()+"$"+t._queryIdentifier}function yh(t,e){return t.tagToQueryMap.get(e)}function mh(t){var e=t.indexOf("$");return ao(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new qs(t.substr(0,e))}}function bh(t,e,n){var r=t.syncPointTree_.get(e);return ao(r,"Missing sync point for query tag that we're tracking"),$l(r,n,bl(t.pendingWriteTree_,e),null)}function _h(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?(ao(Yl,"Reference.ts has not been loaded"),new Yl(t._repo,t._path)):t}var wh=(Ih.prototype.getImmediateChild=function(t){return new Ih(this.node_.getImmediateChild(t))},Ih.prototype.node=function(){return this.node_},Ih);function Ih(t){this.node_=t}var Th=(Eh.prototype.getImmediateChild=function(t){return t=Ys(this.path_,t),new Eh(this.syncTree_,t)},Eh.prototype.node=function(){return fh(this.syncTree_,this.path_)},Eh);function Eh(t,e){this.syncTree_=t,this.path_=e}var Sh=function(t,e,n){return t&&"object"==typeof t?(ao(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Ch(t[".sv"],e,n):"object"==typeof t[".sv"]?kh(t[".sv"],e):void ao(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Ch=function(t,e,n){if("timestamp"===t)return n.timestamp;ao(!1,"Unexpected server value: "+t)},kh=function(t,e,n){return t.hasOwnProperty("increment")||ao(!1,"Unexpected server value: "+JSON.stringify(t,null,2)),"number"!=typeof(t=t.increment)&&ao(!1,"Unexpected increment value: "+t),e=e.node(),ao(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),e.isLeafNode()?"number"!=typeof(e=e.getValue())?t:e+t:t},Oh=function(t,e,n,r){return Ah(e,new Th(n,t),r)},Nh=function(t,e,n){return Ah(t,new wh(e),n)};function Ah(t,e,n){var r=t.getPriority().val(),i=Sh(r,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var o=t;return(r=Sh(o.getValue(),e,n))!==o.getValue()||i!==o.getPriority().val()?new Du(r,Ju(i)):t}var a=t=t;return i!==t.getPriority().val()&&(a=a.updatePriority(new Du(i))),t.forEachChild(Mu,(function(t,r){var i=Ah(r,e.getImmediateChild(t),n);i!==r&&(a=a.updateImmediateChild(t,i))})),a}var Ph=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function Rh(t,e){for(var n=e instanceof qs?e:new qs(e),r=t,i=Ks(n);null!==i;){var o=Ro(r.node.children,i)||{children:{},childCount:0};r=new Ph(i,r,o),i=Ks(n=Ws(n))}return r}function xh(t){return t.node.value}function Dh(t,e){t.node.value=e,function t(e){var n,r,i,o;null!==e.parent&&(n=e.parent,r=e.name,o=function(t){return void 0===xh(t)&&!Lh(t)}(i=e),e=Po(n.node.children,r),o&&e?(delete n.node.children[r],n.node.childCount--,t(n)):o||e||(n.node.children[r]=i.node,n.node.childCount++,t(n)))}(t)}function Lh(t){return 0<t.node.childCount}function jh(t,e){Xa(t.node.children,(function(n,r){e(new Ph(n,t,r))}))}function Mh(t){return new qs(null===t.parent?t.name:Mh(t.parent)+"/"+t.name)}function Fh(t){return"string"==typeof t&&0!==t.length&&!Kh.test(t)}function Uh(t){return"string"==typeof t&&0!==t.length&&!zh.test(t)}function qh(t,e,n,r){if(!r||void 0!==e){var i=Bo(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];Xa(e,(function(t,e){if(t=new qs(t),Qh(i,e,Ys(n,t)),".priority"===Hs(t)&&!Hh(e))throw new Error(i+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(t)})),function(t,e){for(var n=0;n<e.length;n++)for(var r,i=Gs(r=e[n]),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Fh(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Js);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&tu(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}}function Vh(t,e,n){if(!n||void 0!==e){if(Na(e))throw new Error(Bo(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Hh(e))throw new Error(Bo(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Bh(t,e,n,r){if(!(r&&void 0===n||Fh(n)))throw new Error(Bo(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}var Kh=/[\[\].#$\/\u0000-\u001F\u007F]/,zh=/[\[\].#$\u0000-\u001F\u007F]/,Wh=10485760,Hh=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Na(t)||t&&"object"==typeof t&&Po(t,".sv")},Gh=function(t,e,n,r){r&&void 0===e||Qh(Bo(t,"value"),e,n)},Qh=function t(e,n,r){var i=r instanceof qs?new eu(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+ru(i));if("function"==typeof n)throw new Error(e+"contains a function "+ru(i)+" with contents = "+n.toString());if(Na(n))throw new Error(e+"contains "+n.toString()+" "+ru(i));if("string"==typeof n&&n.length>Wh/3&&Wo(n)>Wh)throw new Error(e+"contains a string greater than "+Wh+" utf8 bytes "+ru(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,a=!1;if(Xa(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!Fh(n)))throw new Error(e+" contains an invalid key ("+n+") "+ru(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s;s=n,0<(n=i).parts_.length&&(n.byteLength_+=1),n.parts_.push(s),n.byteLength_+=Wo(s),nu(n),t(e,r,i),r=(n=i).parts_.pop(),n.byteLength_-=Wo(r),0<n.parts_.length&&--n.byteLength_})),o&&a)throw new Error(e+' contains ".value" child '+ru(i)+" in addition to actual children.")}},Yh=function(t,e,n,r){if(!(r&&void 0===n||Uh(n)))throw new Error(Bo(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Xh=function(t,e,n,r){n=n&&n.replace(/^\/*\.info(\/|$)/,"/"),Yh(t,e,n,r)},$h=function(t,e){if(".info"===Ks(e))throw new Error(t+" failed = Can't modify data under /.info/")},Jh=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Fh(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!Uh(n=(n=n)&&n.replace(/^\/*\.info(\/|$)/,"/")))throw new Error(Bo(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Zh=function(){this.eventLists_=[],this.recursionDepth_=0};function tf(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Zs(o,n.path)||(t.eventLists_.push(n),n=null),(n=null===n?{events:[],path:o}:n).events.push(i)}n&&t.eventLists_.push(n)}function ef(t,e,n){tf(t,n),rf(t,(function(t){return Zs(t,e)}))}function nf(t,e,n){tf(t,n),rf(t,(function(t){return tu(t,e)||tu(e,t)}))}function rf(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(function(t){for(var e=0;e<t.events.length;e++){var n,r=t.events[e];null!==r&&(t.events[e]=null,n=r.getEventRunner(),Ua&&Ba("event: "+r.toString()),rs(n))}}(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}var of="repo_interrupt",af=(sf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},sf);function sf(t,e,n){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Zh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xc(),this.transactionQueueTree_=new Ph,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}function uf(t){return t=t.infoData_.getNode(new qs(".info/serverTimeOffset")).val()||0,(new Date).getTime()+t}function cf(t){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:uf(t)})}function lf(t,e,n,r,i){t.dataUpdateCount++;var o=new qs(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a,s,u,c,l=o;0<(c=i?r?(a=Do(n,(function(t){return Ju(t)})),function(t,e,n,r){var i=yh(t,r);return i?(i=(r=mh(i)).path,r=r.queryId,e=$s(i,e),n=al.fromObject(n),bh(t,i,new Qc(Vc(r),e,n))):[]}(t.serverSyncTree_,o,a,i)):(e=Ju(n),a=t.serverSyncTree_,s=o,u=e,null==(i=yh(a,e=i))?[]:(e=mh(i),i=e.path,e=e.queryId,s=$s(i,s),bh(a,i,new Hc(Vc(e),s,u)))):r?(s=Do(n,(function(t){return Ju(t)})),u=t.serverSyncTree_,r=o,s=s,s=al.fromObject(s),dh(u,new Qc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},r,s))):(n=Ju(n),ch(t.serverSyncTree_,o,n))).length&&(l=If(t,o)),nf(t.eventQueue_,l,c)}function hf(t,e){ff(t,"connected",e),!1===e&&function(t){mf(t,"onDisconnectEvents");var e=cf(t),n=xc();Lc(t.onDisconnect_,Bs(),(function(r,i){i=Oh(r,i,t.serverSyncTree_,e),Dc(n,r,i)}));var r=[];Lc(n,Bs(),(function(e,n){r=r.concat(ch(t.serverSyncTree_,e,n)),e=Cf(t,e),If(t,e)})),t.onDisconnect_=xc(),nf(t.eventQueue_,Bs(),r)}(t)}function ff(t,e,n){e=new qs("/.info/"+e),n=Ju(n),t.infoData_.updateSnapshot(e,n),n=ch(t.infoSyncTree_,e,n),nf(t.eventQueue_,e,n)}function df(t){return t.nextWriteId_++}function pf(t,e,n,r,i){mf(t,"set",{path:e.toString(),value:n,priority:r});var o=cf(t),a=(n=Ju(n,r),r=fh(t.serverSyncTree_,e),o=Nh(n,r,o),df(t));o=sh(t.serverSyncTree_,e,o,a,!0),tf(t.eventQueue_,o),t.server_.put(e.toString(),n.val(!0),(function(n,r){var o="ok"===n;o||Wa("set at "+e+" failed: "+n),o=uh(t.serverSyncTree_,a,!o),nf(t.eventQueue_,e,o),bf(0,i,n,r)})),n=Cf(t,e),If(t,n),nf(t.eventQueue_,n,[])}function vf(t,e,n,r){var i=Ju(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Dc(t.onDisconnect_,e,i),bf(0,r,n,o)}))}function gf(t,e,n){n=".info"===Ks(e._path)?lh(t.infoSyncTree_,e,n):lh(t.serverSyncTree_,e,n),ef(t.eventQueue_,e._path,n)}function yf(t){t.persistentConnection_&&t.persistentConnection_.interrupt(of)}function mf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Ba.apply(void 0,eo([r],to(e)))}function bf(t,e,n,r){e&&rs((function(){var t,i;"ok"===n?e(null):(i=t=(n||"error").toUpperCase(),r&&(i+=": "+r),(i=new Error(i)).code=t,e(i))}))}function _f(t,e,n){return fh(t.serverSyncTree_,e,n)||Qu.EMPTY_NODE}function wf(t,e){var n;(e=void 0===e?t.transactionQueueTree_:e)||Sf(t,e),xh(e)?(n=Ef(t,e),ao(0<n.length,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=u=_f(t,e,r),o=(r=u.hash(),0);o<n.length;o++){var a=n[o];ao(0===a.status,"tryToSendTransactionQueue_: items in queue should all be run."),a.status=1,a.retryCount++;var s=$s(e,a.path);i=i.updateChild(s,a.currentOutputSnapshotRaw)}var u=i.val(!0),c=e;t.server_.put(c.toString(),u,(function(r){mf(t,"transaction put response",{path:c.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<n.length;a++)!function(e){n[e].status=2,i=i.concat(uh(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()}(a);for(Sf(t,Rh(t.transactionQueueTree_,e)),wf(t,t.transactionQueueTree_),nf(t.eventQueue_,e,i),a=0;a<o.length;a++)rs(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)3===n[a].status?n[a].status=4:n[a].status=0;else for(Wa("transaction at "+c.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;If(t,e)}}),r)}(t,Mh(e),n)):Lh(e)&&jh(e,(function(e){wf(t,e)}))}function If(t,e){var n=Tf(t,e);return e=Mh(n),function(t,e,n){if(0!==e.length){for(var r=[],i=[],o=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=0;a<e.length;a++)!function(a){var s,u,c,l,h=e[a],f=$s(n,h.path),d=!1;ao(null!==f,"rerunTransactionsUnderNode_: relativePath should not be null."),4===h.status?(d=!0,s=h.abortReason,i=i.concat(uh(t.serverSyncTree_,h.currentWriteId,!0))):0===h.status&&(i=h.retryCount>=25?(d=!0,s="maxretry",i.concat(uh(t.serverSyncTree_,h.currentWriteId,!0))):(u=_f(t,h.path,o),h.currentInputSnapshot=u,void 0!==(l=e[a].update(u.val()))?(Qh("transaction failed: Data returned ",l,h.path),c=Ju(l),"object"==typeof l&&null!=l&&Po(l,".priority")||(c=c.updatePriority(u.getPriority())),f=h.currentWriteId,l=cf(t),l=Nh(c,u,l),h.currentOutputSnapshotRaw=c,h.currentOutputSnapshotResolved=l,h.currentWriteId=df(t),o.splice(o.indexOf(f),1),(i=i.concat(sh(t.serverSyncTree_,h.path,l,h.currentWriteId,h.applyLocally))).concat(uh(t.serverSyncTree_,f,!0))):(d=!0,s="nodata",i.concat(uh(t.serverSyncTree_,h.currentWriteId,!0))))),nf(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,d=e[a].unwatcher,setTimeout(d,Math.floor(0)),e[a].onComplete&&("nodata"===s?r.push((function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)})):r.push((function(){return e[a].onComplete(new Error(s),!1,null)}))))}(a);for(Sf(t,t.transactionQueueTree_),a=0;a<r.length;a++)rs(r[a]);wf(t,t.transactionQueueTree_)}}(t,Ef(t,n),e),e}function Tf(t,e){for(var n=t.transactionQueueTree_,r=Ks(e);null!==r&&void 0===xh(n);)n=Rh(n,r),r=Ks(e=Ws(e));return n}function Ef(t,e){var n=[];return function t(e,n,r){var i=xh(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);jh(n,(function(n){t(e,n,r)}))}(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function Sf(t,e){var n=xh(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Dh(e,0<n.length?n:void 0)}jh(e,(function(e){Sf(t,e)}))}function Cf(t,e){var n=Mh(Tf(t,e));return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return;r=r.parent}}(e=Rh(t.transactionQueueTree_,e),(function(e){kf(t,e)})),kf(t,e),function t(e,n,r,i){r&&!i&&n(e),jh(e,(function(e){t(e,n,!0,i)})),r&&i&&n(e)}(e,(function(e){kf(t,e)})),n}function kf(t,e){var n=xh(e);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(ao(o===a-1,"All SENT items should be at beginning of queue."),n[o=a].status=3,n[a].abortReason="set"):(ao(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(uh(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===o?Dh(e,void 0):n.length=o+1,nf(t.eventQueue_,Mh(e),i),a=0;a<r.length;a++)rs(r[a])}}var Of=function(t,e){var n=Nf(t),r=n.namespace;return"firebase.com"===n.domain&&za(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||za("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Wa("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),t="ws"===n.scheme||"wss"===n.scheme,{repoInfo:new hs(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new qs(n.pathString)}},Nf=function(t){var e,n,r,i="",o="",a="",s="",u="",c=!0,l="https",h=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(l=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(s=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Zi(t.split("&")),o=i.next();!o.done;o=i.next()){var a,s=o.value;0!==s.length&&(2===(a=s.split("=")).length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Wa("Invalid query segment '"+s+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(c="https"===l||"wss"===l,h=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),a=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=a),"ns"in n&&(u=n.ns)),{host:i,port:h,domain:o,subdomain:a,secure:c,scheme:l,pathString:s,namespace:u}},Af=(Pf.prototype.getPath=function(){var t=this.snapshot.ref;return("value"===this.eventType?t:t.parent)._path},Pf.prototype.getEventType=function(){return this.eventType},Pf.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Pf.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+No(this.snapshot.exportVal())},Pf);function Pf(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var Rf=(xf.prototype.getPath=function(){return this.path},xf.prototype.getEventType=function(){return"cancel"},xf.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},xf.prototype.toString=function(){return this.path.toString()+":cancel"},xf);function xf(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var Df=(Lf.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},Lf.prototype.onCancel=function(t){return ao(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(Lf.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),Lf.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},Lf);function Lf(t,e){this.snapshotCallback=t,this.cancelCallback=e}var jf=(Mf.prototype.cancel=function(){var t=new ho;return function(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&function t(e,n){if(Xs(n))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var r=e.value;return e.value=null,r.forEachChild(Mu,(function(t,n){Dc(e,new qs(t),n)})),t(e,n)}return!(0<e.children.size)||(r=Ks(n),n=Ws(n),e.children.has(r)&&t(e.children.get(r),n)&&e.children.delete(r),0===e.children.size)}(t.onDisconnect_,e),bf(0,n,r,i)}))}(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},Mf.prototype.remove=function(){$h("OnDisconnect.remove",this._path);var t=new ho;return vf(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},Mf.prototype.set=function(t){$h("OnDisconnect.set",this._path),Gh("OnDisconnect.set",t,this._path,!1);var e=new ho;return vf(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},Mf.prototype.setWithPriority=function(t,e){$h("OnDisconnect.setWithPriority",this._path),Gh("OnDisconnect.setWithPriority",t,this._path,!1),Vh("OnDisconnect.setWithPriority",e,!1);var n,r,i,o,a=new ho;return n=this._repo,r=this._path,t=t,e=e,i=a.wrapCallback((function(){})),o=Ju(t,e),n.server_.onDisconnectPut(r.toString(),o.val(!0),(function(t,e){"ok"===t&&Dc(n.onDisconnect_,r,o),bf(0,i,t,e)})),a.promise},Mf.prototype.update=function(t){$h("OnDisconnect.update",this._path),qh("OnDisconnect.update",t,this._path,!1);var e=new ho;return function(t,e,n,r){if(xo(n))return Ba("onDisconnect().update() called with empty data.  Don't do anything."),bf(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&Xa(n,(function(n,r){r=Ju(r),Dc(t.onDisconnect_,Ys(e,n),r)})),bf(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},Mf);function Mf(t,e){this._repo=t,this._path=e}var Ff=(Object.defineProperty(Uf.prototype,"key",{get:function(){return Xs(this._path)?null:Hs(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(Uf.prototype,"ref",{get:function(){return new zf(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(Uf.prototype,"_queryIdentifier",{get:function(){var t=kc(this._queryParams);return"{}"===(t=Ya(t))?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(Uf.prototype,"_queryObject",{get:function(){return kc(this._queryParams)},enumerable:!1,configurable:!0}),Uf.prototype.isEqual=function(t){if(!((t=Go(t))instanceof Uf))return!1;var e=this._repo===t._repo,n=Zs(this._path,t._path);return t=this._queryIdentifier===t._queryIdentifier,e&&n&&t},Uf.prototype.toJSON=function(){return this.toString()},Uf.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},Uf);function Uf(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}function qf(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Vf(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===yu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Ha)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Ga)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Mu){if(null!=e&&!Hh(e)||null!=n&&!Hh(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ao(t.getIndex()instanceof ec||t.getIndex()===uc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Bf(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Kf,zf=(Yi(Wf,Kf=Ff),Object.defineProperty(Wf.prototype,"parent",{get:function(){var t=Qs(this._path);return null===t?null:new Wf(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(Wf.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),Wf);function Wf(t,e){return Kf.call(this,t,e,new wc,!1)||this}var Hf=(Object.defineProperty(Gf.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(Gf.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(Gf.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),Gf.prototype.child=function(t){var e=new qs(t);return t=Xf(this.ref,t),new Gf(this._node.getChild(e),t,Mu)},Gf.prototype.exists=function(){return!this._node.isEmpty()},Gf.prototype.exportVal=function(){return this._node.val(!0)},Gf.prototype.forEach=function(t){var e=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(n,r){return t(new Gf(r,Xf(e.ref,n),Mu))}))},Gf.prototype.hasChild=function(t){return t=new qs(t),!this._node.getChild(t).isEmpty()},Gf.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},Gf.prototype.toJSON=function(){return this.exportVal()},Gf.prototype.val=function(){return this._node.val()},Gf);function Gf(t,e,n){this._node=t,this.ref=e,this._index=n}function Qf(t,e){return(t=Go(t))._checkNotDeleted("ref"),void 0!==e?Xf(t._root,e):t._root}function Yf(t,e){(t=Go(t))._checkNotDeleted("refFromURL");var n=Of(e,t._repo.repoInfo_.nodeAdmin);return Jh("refFromURL",n),e=n.repoInfo,t._repo.repoInfo_.isCustomHost()||e.host===t._repo.repoInfo_.host||za("refFromURL: Host name does not match the current database: (found "+e.host+" but expected "+t._repo.repoInfo_.host+")"),Qf(t,n.path.toString())}function Xf(t,e){return(null===Ks((t=Go(t))._path)?Xh:Yh)("child","path",e,!1),new zf(t._repo,Ys(t._path,e))}function $f(t,e){t=Go(t),$h("set",t._path),Gh("set",e,t._path,!1);var n=new ho;return pf(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Jf(t,e){qh("update",e,t._path,!1);var n=new ho;return function(t,e,n,r){mf(t,"update",{path:e.toString(),value:n});var i,o,a=!0,s=cf(t),u={};Xa(n,(function(n,r){a=!1,u[n]=Oh(Ys(e,n),Ju(r),t.serverSyncTree_,s)})),a?(Ba("update() called with empty data.  Don't do anything."),bf(0,r,"ok",void 0)):(i=df(t),o=function(t,e,n,r){var i,o,a;return i=t.pendingWriteTree_,o=e,a=n,ao((r=r)>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:o,children:a,writeId:r,visible:!0}),i.visibleWrites=hl(i.visibleWrites,o,a),i.lastWriteId=r,n=al.fromObject(n),dh(t,new Qc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n))}(t.serverSyncTree_,e,u,i),tf(t.eventQueue_,o),t.server_.merge(e.toString(),n,(function(n,o){(s="ok"===n)||Wa("update at "+e+" failed: "+n);var a=uh(t.serverSyncTree_,i,!s),s=0<a.length?If(t,e):e;nf(t.eventQueue_,s,a),bf(0,r,n,o)})),Xa(n,(function(n){n=Cf(t,Ys(e,n)),If(t,n)})),nf(t.eventQueue_,e,[]))}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function Zf(t){return t=Go(t),e=t._repo,n=t,(null!=(r=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){t=$s(t,n),r=r||th(e,t)}));var i=t.syncPointTree_.get(n);i?r=r||th(i,Bs()):(i=new Xl,t.syncPointTree_=t.syncPointTree_.set(n,i));var o,a=(o=null!=r)?new Xc(r,!0,!1):null;return il((o=Jl(i,e,bl(t.pendingWriteTree_,e._path),o?a.getNode():Qu.EMPTY_NODE,o)).viewCache_)}(e.serverSyncTree_,n))?Promise.resolve(r):e.server_.get(n).then((function(t){var r=Ju(t);return t=ch(e.serverSyncTree_,n._path,r),ef(e.eventQueue_,n._path,t),Promise.resolve(r)}),(function(t){return mf(e,"get for query "+No(n)+" failed: "+t),Promise.reject(new Error(t))}))).then((function(e){return new Hf(e,new zf(t._repo,t._path),t._queryParams.getIndex())}));var e,n,r}var td=(ed.prototype.respondsTo=function(t){return"value"===t},ed.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Af("value",this,new Hf(t.snapshotNode,new zf(e._repo,e._path),n))},ed.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},ed.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Rf(this,t,e):null},ed.prototype.matches=function(t){return t instanceof ed&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},ed.prototype.hasAnyCallback=function(){return null!==this.callbackContext},ed);function ed(t){this.callbackContext=t}var nd=(rd.prototype.respondsTo=function(t){return t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t,this.eventType===t},rd.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Rf(this,t,e):null},rd.prototype.createEvent=function(t,e){ao(null!=t.childName,"Child events should have a childName.");var n=Xf(new zf(e._repo,e._path),t.childName);return e=e._queryParams.getIndex(),new Af(t.type,this,new Hf(t.snapshotNode,n,e),t.prevName)},rd.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},rd.prototype.matches=function(t){return t instanceof rd&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))},rd.prototype.hasAnyCallback=function(){return!!this.callbackContext},rd);function rd(t,e){this.eventType=t,this.callbackContext=e}function id(t,e,n,r,i){var o;"object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce&&((i=function(e,n){o(e,n),gf(t._repo,t,s)}).userCallback=(o=n).userCallback,i.context=n.context,n=i),n=new Df(n,a||void 0);var a,s="value"===e?new td(n):new nd(e,n);return a=t._repo,e=s,e=".info"===Ks((n=t)._path)?hh(a.infoSyncTree_,n,e):hh(a.serverSyncTree_,n,e),ef(a.eventQueue_,n._path,e),function(){return gf(t._repo,t,s)}}function od(t,e,n,r){return id(t,"value",e,n,r)}function ad(t,e,n,r){return id(t,"child_added",e,n,r)}function sd(t,e,n,r){return id(t,"child_changed",e,n,r)}function ud(t,e,n,r){return id(t,"child_moved",e,n,r)}function cd(t,e,n,r){return id(t,"child_removed",e,n,r)}function ld(t,e,n){var r=null;n=n?new Df(n):null,"value"===e?r=new td(n):e&&(r=new nd(e,n)),gf(t._repo,t,r)}var hd,fd=(Yi(dd,hd=kn=function(){}),dd.prototype._apply=function(t){Gh("endAt",this._value,t._path,!0);var e=Ec(t._queryParams,this._value,this._key);if(Bf(e),Vf(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ff(t._repo,t._path,e,t._orderByCalled)},dd);function dd(t,e){var n=hd.call(this)||this;return n._value=t,n._key=e,n}var pd,vd=(Yi(gd,pd=kn),gd.prototype._apply=function(t){var e,n,r;if(Gh("endBefore",this._value,t._path,!1),Bf((e=t._queryParams,n=this._value,r=this._key,(r=e.index_===yu?Ec(e,n="string"==typeof n?oc(n):n,r):Ec(e,n,null==r?Ha:oc(r))).endBeforeSet_=!0,r=r)),Vf(r),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ff(t._repo,t._path,r,t._orderByCalled)},gd);function gd(t,e){var n=pd.call(this)||this;return n._value=t,n._key=e,n}var yd,md=(Yi(bd,yd=kn),bd.prototype._apply=function(t){Gh("startAt",this._value,t._path,!0);var e=Tc(t._queryParams,this._value,this._key);if(Bf(e),Vf(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ff(t._repo,t._path,e,t._orderByCalled)},bd);function bd(t,e){var n=yd.call(this)||this;return n._value=t,n._key=e,n}var _d,wd=(Yi(Id,_d=kn),Id.prototype._apply=function(t){var e,n,r;if(Gh("startAfter",this._value,t._path,!1),Bf((e=t._queryParams,n=this._value,r=this._key,(r=e.index_===yu?Tc(e,n="string"==typeof n?ic(n):n,r):Tc(e,n,null==r?Ga:ic(r))).startAfterSet_=!0,r=r)),Vf(r),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ff(t._repo,t._path,r,t._orderByCalled)},Id);function Id(t,e){var n=_d.call(this)||this;return n._value=t,n._key=e,n}var Td,Ed=(Yi(Sd,Td=kn),Sd.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ff(t._repo,t._path,(e=t._queryParams,n=this._limit,(e=e.copy()).limitSet_=!0,e.limit_=n,e.viewFrom_="l",e),t._orderByCalled);var e,n},Sd);function Sd(t){var e=Td.call(this)||this;return e._limit=t,e}var Cd,kd=(Yi(Od,Cd=kn),Od.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ff(t._repo,t._path,(e=t._queryParams,n=this._limit,(e=e.copy()).limitSet_=!0,e.limit_=n,e.viewFrom_="r",e),t._orderByCalled);var e,n},Od);function Od(t){var e=Cd.call(this)||this;return e._limit=t,e}var Nd,Ad=(Yi(Pd,Nd=kn),Pd.prototype._apply=function(t){qf(t,"orderByChild");var e=new qs(this._path);if(Xs(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");return e=new ec(e),Vf(e=Sc(t._queryParams,e)),new Ff(t._repo,t._path,e,!0)},Pd);function Pd(t){var e=Nd.call(this)||this;return e._path=t,e}var Rd,xd=(Yi(Dd,Rd=kn),Dd.prototype._apply=function(t){qf(t,"orderByKey");var e=Sc(t._queryParams,yu);return Vf(e),new Ff(t._repo,t._path,e,!0)},Dd);function Dd(){return null!==Rd&&Rd.apply(this,arguments)||this}var Ld,jd=(Yi(Md,Ld=kn),Md.prototype._apply=function(t){qf(t,"orderByPriority");var e=Sc(t._queryParams,Mu);return Vf(e),new Ff(t._repo,t._path,e,!0)},Md);function Md(){return null!==Ld&&Ld.apply(this,arguments)||this}var Fd,Ud=(Yi(qd,Fd=kn),qd.prototype._apply=function(t){qf(t,"orderByValue");var e=Sc(t._queryParams,uc);return Vf(e),new Ff(t._repo,t._path,e,!0)},qd);function qd(){return null!==Fd&&Fd.apply(this,arguments)||this}var Vd,Bd,Kd,zd=(Yi(Wd,Vd=kn),Wd.prototype._apply=function(t){if(Gh("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new fd(this._value,this._key)._apply(new md(this._value,this._key)._apply(t))},Wd);function Wd(t,e){var n=Vd.call(this)||this;return n._value=t,n._key=e,n}function Hd(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=Go(t);try{for(var a=Zi(r),s=a.next();!s.done;s=a.next())o=s.value._apply(o)}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o}Bd=zf,ao(!Bl,"__referenceConstructor has already been defined"),Bl=Bd,Kd=zf,ao(!Yl,"__referenceConstructor has already been defined"),Yl=Kd;var Gd={},Qd=!1;function Yd(t,e,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||za("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ba("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=Of(o,i),u=s.repoInfo;return r=void 0,(r="undefined"!=typeof n?Object({NODE_ENV:"production",PUBLIC_URL:"/olx-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).FIREBASE_DATABASE_EMULATOR_HOST:r)?(a=!0,o="http://"+r+"?ns="+u.namespace,u=(s=Of(o,i)).repoInfo):a=!s.repoInfo.secure,e=i&&a?new as:new is(t.name,t.options,e),Jh("Invalid Firebase Database URL",s),Xs(s.path)||za("Database URL must point to the root of a Firebase Database (not including a child path)."),e=function(t,e,n){var r=Gd[e.name];return r||(r={},Gd[e.name]=r),(e=r[t.toURLString()])&&za("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),e=new af(t,Qd,n),r[t.toURLString()]=e}(u,t,e),new Xd(e,t)}var Xd=(Object.defineProperty($d.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=ms(t.repoInfo_),t.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))t.server_=new Nc(t.repoInfo_,(function(e,n,r,i){lf(t,e,n,r,i)}),t.authTokenProvider_),setTimeout((function(){return hf(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{No(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}t.persistentConnection_=new cu(t.repoInfo_,e,(function(e,n,r,i){lf(t,e,n,r,i)}),(function(e){hf(t,e)}),(function(e){var n;n=t,Xa(e,(function(t,e){ff(n,t,e)}))}),t.authTokenProvider_,n),t.server_=t.persistentConnection_}var r;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.statsReporter_=(e=function(){return new Uc(t.stats_,t.server_)},r=(r=t.repoInfo_).toString(),ys[r]||(ys[r]=e()),ys[r]),t.infoData_=new Pc,t.infoSyncTree_=new ah({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=ch(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),ff(t,"connected",!1),t.serverSyncTree_=new ah({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){r=i(n,r),nf(t.eventQueue_,e._path,r)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty($d.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new zf(this._repo,Bs())),this._rootInternal},enumerable:!1,configurable:!0}),$d.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,e=this.app.name,(n=Gd[e])&&n[t.key]===t||za("Database "+e+"("+t.repoInfo_+") has already been deleted."),yf(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},$d.prototype._checkNotDeleted=function(t){null===this._rootInternal&&za("Cannot call "+t+" on a deleted database.")},$d);function $d(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}function Jd(t){(t=Go(t))._checkNotDeleted("goOnline"),(t=t._repo).persistentConnection_&&t.persistentConnection_.resume(of)}var Zd=(tp.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},tp);function tp(t,e){this.committed=t,this.snapshot=e}function ep(t,e,n){if(t=Go(t),$h("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";n=null===(i=null==n?void 0:n.applyLocally)||void 0===i||i;var r=new ho,i=od(t,(function(){}));return function(t,e,n,r,i,o){mf(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:Ma(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null};n=_f(t,e,void 0),a.currentInputSnapshot=n,void 0===(r=a.update(n.val()))?(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot)):(Qh("transaction failed: Data returned ",r,a.path),a.status=0,(i=xh(o=Rh(t.transactionQueueTree_,e))||[]).push(a),Dh(o,i),o=void 0,"object"==typeof r&&null!==r&&Po(r,".priority")?(o=Ro(r,".priority"),ao(Hh(o),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):o=(fh(t.serverSyncTree_,e)||Qu.EMPTY_NODE).getPriority().val(),i=cf(t),o=Ju(r,o),i=Nh(o,n,i),a.currentOutputSnapshotRaw=o,a.currentOutputSnapshotResolved=i,a.currentWriteId=df(t),a=sh(t.serverSyncTree_,e,i,a.currentWriteId,a.applyLocally),nf(t.eventQueue_,e,a),wf(t,t.transactionQueueTree_))}(t._repo,t._path,e,(function(e,n,i){var o;e?r.reject(e):(o=new Hf(i,new zf(t._repo,t._path),Mu),r.resolve(new Zd(n,o)))}),i,n),r.promise}var np=(rp.prototype.cancel=function(t){Vo("OnDisconnect.cancel",0,1,arguments.length),Ko("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},rp.prototype.remove=function(t){Vo("OnDisconnect.remove",0,1,arguments.length),Ko("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},rp.prototype.set=function(t,e){return Vo("OnDisconnect.set",1,2,arguments.length),Ko("OnDisconnect.set","onComplete",e,!0),t=this._delegate.set(t),e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},rp.prototype.setWithPriority=function(t,e,n){return Vo("OnDisconnect.setWithPriority",2,3,arguments.length),Ko("OnDisconnect.setWithPriority","onComplete",n,!0),e=this._delegate.setWithPriority(t,e),n&&e.then((function(){return n(null)}),(function(t){return n(t)})),e},rp.prototype.update=function(t,e){if(Vo("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Wa("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ko("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},rp);function rp(t){this._delegate=t}var ip=(op.prototype.toJSON=function(){return Vo("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},op);function op(t,e){this.committed=t,this.snapshot=e}var ap=(sp.prototype.val=function(){return Vo("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},sp.prototype.exportVal=function(){return Vo("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},sp.prototype.toJSON=function(){return Vo("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},sp.prototype.exists=function(){return Vo("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},sp.prototype.child=function(t){return Vo("DataSnapshot.child",0,1,arguments.length),t=String(t),Yh("DataSnapshot.child","path",t,!1),new sp(this._database,this._delegate.child(t))},sp.prototype.hasChild=function(t){return Vo("DataSnapshot.hasChild",1,1,arguments.length),Yh("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},sp.prototype.getPriority=function(){return Vo("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},sp.prototype.forEach=function(t){var e=this;return Vo("DataSnapshot.forEach",1,1,arguments.length),Ko("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(n){return t(new sp(e._database,n))}))},sp.prototype.hasChildren=function(){return Vo("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(sp.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),sp.prototype.numChildren=function(){return Vo("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},sp.prototype.getRef=function(){return Vo("DataSnapshot.ref",0,0,arguments.length),new hp(this._database,this._delegate.ref)},Object.defineProperty(sp.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),sp);function sp(t,e){this._database=t,this._delegate=e}var up=(cp.prototype.on=function(t,e,n,r){var i=this;function o(t,n){e.call(a.context,new ap(i.database,t),n)}Vo("Query.on",2,4,arguments.length),Ko("Query.on","callback",e,!1);var a=cp.getCancelAndContextArgs_("Query.on",n,r);o.userCallback=e,o.context=a.context;var s=null===(r=a.cancel)||void 0===r?void 0:r.bind(a.context);switch(t){case"value":return od(this._delegate,o,s),e;case"child_added":return ad(this._delegate,o,s),e;case"child_removed":return cd(this._delegate,o,s),e;case"child_changed":return sd(this._delegate,o,s),e;case"child_moved":return ud(this._delegate,o,s),e;default:throw new Error(Bo("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},cp.prototype.off=function(t,e,n){var r;Vo("Query.off",0,3,arguments.length),function(t,e,n){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Bo("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),Ko("Query.off","callback",e,!0),zo("Query.off","context",n,!0),e?((r=function(){}).userCallback=e,r.context=n,ld(this._delegate,t,r)):ld(this._delegate,t)},cp.prototype.get=function(){var t=this;return Zf(this._delegate).then((function(e){return new ap(t.database,e)}))},cp.prototype.once=function(t,e,n,r){var i=this;function o(t,n){t=new ap(i.database,t),e&&e.call(a.context,t,n),s.resolve(t)}Vo("Query.once",1,4,arguments.length),Ko("Query.once","callback",e,!0);var a=cp.getCancelAndContextArgs_("Query.on",n,r),s=new ho;function u(t){a.cancel&&a.cancel.call(a.context,t),s.reject(t)}switch(o.userCallback=e,o.context=a.context,t){case"value":od(this._delegate,o,u,{onlyOnce:!0});break;case"child_added":ad(this._delegate,o,u,{onlyOnce:!0});break;case"child_removed":cd(this._delegate,o,u,{onlyOnce:!0});break;case"child_changed":sd(this._delegate,o,u,{onlyOnce:!0});break;case"child_moved":ud(this._delegate,o,u,{onlyOnce:!0});break;default:throw new Error(Bo("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},cp.prototype.limitToFirst=function(t){return Vo("Query.limitToFirst",1,1,arguments.length),new cp(this.database,Hd(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Ed(t)}(t)))},cp.prototype.limitToLast=function(t){return Vo("Query.limitToLast",1,1,arguments.length),new cp(this.database,Hd(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new kd(t)}(t)))},cp.prototype.orderByChild=function(t){return Vo("Query.orderByChild",1,1,arguments.length),new cp(this.database,Hd(this._delegate,function(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Yh("orderByChild","path",t,!1),new Ad(t)}(t)))},cp.prototype.orderByKey=function(){return Vo("Query.orderByKey",0,0,arguments.length),new cp(this.database,Hd(this._delegate,new xd))},cp.prototype.orderByPriority=function(){return Vo("Query.orderByPriority",0,0,arguments.length),new cp(this.database,Hd(this._delegate,new jd))},cp.prototype.orderByValue=function(){return Vo("Query.orderByValue",0,0,arguments.length),new cp(this.database,Hd(this._delegate,new Ud))},cp.prototype.startAt=function(t,e){return void 0===t&&(t=null),Vo("Query.startAt",0,2,arguments.length),new cp(this.database,Hd(this._delegate,(void 0===(t=t)&&(t=null),Bh("startAt","key",e=e,!0),new md(t,e))))},cp.prototype.startAfter=function(t,e){return void 0===t&&(t=null),Vo("Query.startAfter",0,2,arguments.length),new cp(this.database,Hd(this._delegate,(t=t,Bh("startAfter","key",e=e,!0),new wd(t,e))))},cp.prototype.endAt=function(t,e){return void 0===t&&(t=null),Vo("Query.endAt",0,2,arguments.length),new cp(this.database,Hd(this._delegate,(t=t,Bh("endAt","key",e=e,!0),new fd(t,e))))},cp.prototype.endBefore=function(t,e){return void 0===t&&(t=null),Vo("Query.endBefore",0,2,arguments.length),new cp(this.database,Hd(this._delegate,(t=t,Bh("endBefore","key",e=e,!0),new vd(t,e))))},cp.prototype.equalTo=function(t,e){return Vo("Query.equalTo",1,2,arguments.length),new cp(this.database,Hd(this._delegate,(t=t,Bh("equalTo","key",e=e,!0),new zd(t,e))))},cp.prototype.toString=function(){return Vo("Query.toString",0,0,arguments.length),this._delegate.toString()},cp.prototype.toJSON=function(){return Vo("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},cp.prototype.isEqual=function(t){if(Vo("Query.isEqual",1,1,arguments.length),t instanceof cp)return this._delegate.isEqual(t._delegate);throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")},cp.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Ko(t,"cancel",r.cancel,!0),r.context=n,zo(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Bo(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(cp.prototype,"ref",{get:function(){return new hp(this.database,new zf(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),cp);function cp(t,e){this.database=t,this._delegate=e}var lp,hp=(Yi(fp,lp=up),fp.prototype.getKey=function(){return Vo("Reference.key",0,0,arguments.length),this._delegate.key},fp.prototype.child=function(t){return Vo("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new fp(this.database,Xf(this._delegate,t))},fp.prototype.getParent=function(){Vo("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new fp(this.database,t):null},fp.prototype.getRoot=function(){return Vo("Reference.root",0,0,arguments.length),new fp(this.database,this._delegate.root)},fp.prototype.set=function(t,e){return Vo("Reference.set",1,2,arguments.length),Ko("Reference.set","onComplete",e,!0),t=$f(this._delegate,t),e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},fp.prototype.update=function(t,e){if(Vo("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Wa("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}$h("Reference.update",this._delegate._path),Ko("Reference.update","onComplete",e,!0);var i=Jf(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},fp.prototype.setWithPriority=function(t,e,n){return Vo("Reference.setWithPriority",2,3,arguments.length),Ko("Reference.setWithPriority","onComplete",n,!0),e=function(t,e,n){if($h("setWithPriority",t._path),Gh("setWithPriority",e,t._path,!1),Vh("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new ho;return pf(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,t,e),n&&e.then((function(){return n(null)}),(function(t){return n(t)})),e},fp.prototype.remove=function(t){Vo("Reference.remove",0,1,arguments.length),Ko("Reference.remove","onComplete",t,!0);var e=(e=this._delegate,$h("remove",e._path),$f(e,null));return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},fp.prototype.transaction=function(t,e,n){var r=this;return Vo("Reference.transaction",1,3,arguments.length),Ko("Reference.transaction","transactionUpdate",t,!1),Ko("Reference.transaction","onComplete",e,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(Bo("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n),n=ep(this._delegate,t,{applyLocally:n}).then((function(t){return new ip(t.committed,new ap(r.database,t.snapshot))})),e&&n.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),n},fp.prototype.setPriority=function(t,e){return Vo("Reference.setPriority",1,2,arguments.length),Ko("Reference.setPriority","onComplete",e,!0),t=function(t,e){t=Go(t),$h("setPriority",t._path),Vh("setPriority",e,!1);var n=new ho;return pf(t._repo,Ys(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,t),e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},fp.prototype.push=function(t,e){var n=this;Vo("Reference.push",0,2,arguments.length),Ko("Reference.push","onComplete",e,!0);var r=function(t,e){t=Go(t),$h("push",t._path),Gh("push",e,t._path,!0);var n=uf(t._repo),r=lc(n),i=(n=Xf(t,r),Xf(t,r));return e=null!=e?$f(i,e).then((function(){return i})):Promise.resolve(i),n.then=e.then.bind(e),n.catch=e.then.bind(e,void 0),n}(this._delegate,t);return t=r.then((function(t){return new fp(n.database,t)})),e&&t.then((function(){return e(null)}),(function(t){return e(t)})),(r=new fp(this.database,r)).then=t.then.bind(t),r.catch=t.catch.bind(t,void 0),r},fp.prototype.onDisconnect=function(){return $h("Reference.onDisconnect",this._delegate._path),new np(new jf(this._delegate._repo,this._delegate._path))},Object.defineProperty(fp.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(fp.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(fp.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),fp);function fp(t,e){var n=lp.call(this,t,new Ff(e._repo,e._path,new wc,!1))||this;return n.database=t,n._delegate=e,n}var dp=(pp.prototype.useEmulator=function(t,e){!function(t,e,n){(t=Go(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&za("Cannot call useEmulator() after instance has already been initialized."),e=e,n=n,(t=t._repoInternal).repoInfo_=new hs(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new as)}(this._delegate,t,e)},pp.prototype.ref=function(t){if(Vo("database.ref",0,1,arguments.length),t instanceof hp){var e=Yf(this._delegate,t.toString());return new hp(this,e)}return e=Qf(this._delegate,t),new hp(this,e)},pp.prototype.refFromURL=function(t){return Vo("database.refFromURL",1,1,arguments.length),t=Yf(this._delegate,t),new hp(this,t)},pp.prototype.goOffline=function(){var t;Vo("database.goOffline",0,0,arguments.length),(t=Go(t=this._delegate))._checkNotDeleted("goOffline"),yf(t._repo)},pp.prototype.goOnline=function(){return Vo("database.goOnline",0,0,arguments.length),Jd(this._delegate)},pp.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},pp);function pp(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}var vp=Object.freeze({__proto__:null,forceLongPolling:function(){Os.forceDisallow(),ws.forceAllow()},forceWebSockets:function(){ws.forceDisallow()},isWebSocketsAvailable:function(){return Os.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){var n;t=t._delegate._repo,void 0===(e=e)&&(e=!1),"undefined"!=typeof console&&(t=e?(t.statsListener_||(t.statsListener_=new jc(t.stats_)),t.statsListener_.get()):t.stats_.get(),n=Object.keys(t).reduce((function(t,e){return Math.max(e.length,t)}),0),Xa(t,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})))},statsIncrementCounter:function(t,e){e=e,(t=t._delegate._repo).stats_.incrementCounter(e),e=e,(t=t.statsReporter_).statsToReport_[e]=!0},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){e=e,(t=t._delegate._repo).interceptServerDataCallback_=e},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace;return t=void 0!==(t=t.nodeAdmin)&&t,Cs(r),(r=new $o("auth-internal",new Zo("database-standalone"))).setComponent(new Qo("auth-internal",(function(){return i}),"PRIVATE")),{instance:new dp(Yd(e,r,n,t),e),namespace:o}}});W=cu,cu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},cu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var gp,yp=Object.freeze({__proto__:null,DataConnection:W,RealTimeConnection:Rs,hijackHash:function(t){var e=cu.prototype.put;return cu.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){cu.prototype.put=e}},ConnectionTarget:hs,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){Qd=t}}),mp=dp.ServerValue;Cs((gp=Ia).SDK_VERSION),gp.INTERNAL.registerComponent(new Qo("database",(function(t,e){var n=e.instanceIdentifier;return e=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal"),new dp(Yd(e,t,n),e)}),"PUBLIC").setServiceProps({Reference:hp,Query:up,Database:dp,DataSnapshot:ap,enableLogging:function(t,e){Va(t,e)},INTERNAL:vp,ServerValue:mp,TEST_ACCESS:yp}).setMultipleInstances(!0)),gp.registerVersion("@firebase/database","0.9.12");var bp=function(t,e){return(bp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function _p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}H="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};var wp={},Ip=H||self;function Tp(){}function Ep(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Sp(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Cp="closure_uid_"+(1e9*Math.random()>>>0),kp=0;function Op(t,e,n){return t.call.apply(t.bind,arguments)}function Np(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ap(t,e,n){return(Ap=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Op:Np).apply(null,arguments)}function Pp(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function Rp(){return Date.now()}function xp(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,(t.prototype.constructor=t).Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Dp(){this.j=this.j,this.i=this.i}Dp.prototype.j=!1,Dp.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Cp)&&t[Cp]||(t[Cp]=++kp))},Dp.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Lp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},jp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Mp(){return Array.prototype.concat.apply([],arguments)}function Fp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Up(t){return/^[\s\xa0]*$/.test(t)}var qp,Vp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Bp(t,e){return-1!=t.indexOf(e)}function Kp(t,e){return t<e?-1:e<t?1:0}var zp=Ip.navigator;function Wp(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Hp(t){var e,n={};for(e in t)n[e]=t[e];return n}qp=zp&&(zp=zp.userAgent)?zp:"";var Gp="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Qp(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Gp.length;i++)e=Gp[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Yp(t){return Yp[" "](t),t}Yp[" "]=Tp;var Xp,$p=Bp(qp,"Opera"),Jp=Bp(qp,"Trident")||Bp(qp,"MSIE"),Zp=Bp(qp,"Edge"),tv=Zp||Jp,ev=Bp(qp,"Gecko")&&!(Bp(qp.toLowerCase(),"webkit")&&!Bp(qp,"Edge"))&&!(Bp(qp,"Trident")||Bp(qp,"MSIE"))&&!Bp(qp,"Edge"),nv=Bp(qp.toLowerCase(),"webkit")&&!Bp(qp,"Edge");function rv(){var t=Ip.document;return t?t.documentMode:void 0}var iv="",ov=(ov=qp,ev?/rv:([^\);]+)(\)|;)/.exec(ov):Zp?/Edge\/([\d\.]+)/.exec(ov):Jp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ov):nv?/WebKit\/(\S+)/.exec(ov):$p?/(?:Version)[ \/]?(\S+)/.exec(ov):void 0);ov&&(iv=ov?ov[1]:""),Xp=Jp&&null!=(ov=rv())&&ov>parseFloat(iv)?String(ov):iv;var av={};function sv(t){return e=t,n=function(){for(var e=0,n=Vp(String(Xp)).split("."),r=Vp(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++)for(var a=n[o]||"",s=r[o]||"";a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=a[0].length||0!=s[0].length)&&(e=Kp(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Kp(0==a[2].length,0==s[2].length)||Kp(a[2],s[2]),a=a[3],s=s[3],0==e););return 0<=e},r=av,Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=n();var e,n,r}var uv=Ip.document&&Jp&&(rv()||parseInt(Xp,10))||void 0,cv=!Jp||9<=Number(uv),lv=Jp&&!sv("9"),hv=function(){if(!Ip.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ip.addEventListener("test",Tp,e),Ip.removeEventListener("test",Tp,e)}catch(t){}return t}();function fv(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function dv(t,e){if(fv.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ev){t:{try{Yp(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:pv[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}fv.prototype.b=function(){this.defaultPrevented=!0},xp(dv,fv);var pv={2:"touch",3:"pen",4:"mouse"};dv.prototype.b=function(){dv.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,lv)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var vv="closure_listenable_"+(1e6*Math.random()|0),gv=0;function yv(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++gv,this.Y=this.Z=!1}function mv(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function bv(t){this.src=t,this.a={},this.b=0}function _v(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=Lp(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(mv(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function wv(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}bv.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=wv(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new yv(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Iv="closure_lm_"+(1e6*Math.random()|0),Tv={};function Ev(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=Rv(r),e&&e[vv]?e.wa(n,r,Sp(i)?!!i.capture:!!i,o):Sv(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ev(t,e[o],n,r,i);return null}return n=Rv(n),t&&t[vv]?t.va(e,n,Sp(r)?!!r.capture:!!r,i):Sv(t,e,n,!1,r,i)}function Sv(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Sp(i)?!!i.capture:!!i;if(a&&!cv)return null;var s,u,c=Av(t);if(c||(t[Iv]=c=new bv(t)),(n=c.add(e,n,r,a,o)).proxy)return n;if(s=Nv,r=u=cv?function(t){return s.call(u.src,u.listener,t)}:function(t){if(!(t=s.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)void 0===(i=hv?i:a)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(kv(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Cv(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[vv]?_v(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(kv(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Av(e))?(_v(n,t),0==n.b&&(n.src=null,e[Iv]=null)):mv(t)))}function kv(t){return t in Tv?Tv[t]:Tv[t]="on"+t}function Ov(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Cv(t),n.call(r,e)}function Nv(t,e){if(t.Y)return!0;if(cv)return Ov(t,new dv(e,this));if(!e)t:{e=["window","event"];for(var n=Ip,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ov(t,e=new dv(e,this))}function Av(t){return(t=t[Iv])instanceof bv?t:null}var Pv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rv(t){return"function"==typeof t?t:(t[Pv]||(t[Pv]=function(e){return t.handleEvent(e)}),t[Pv])}function xv(){Dp.call(this),this.c=new bv(this),(this.J=this).C=null}function Dv(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new fv(e,t):e instanceof fv?e.target=e.target||t:(a=e,Qp(e=new fv(r,t),a)),a=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],a=Lv(o,r,!0,e)&&a;if(a=Lv(o=e.a=t,r,!0,e)&&a,a=Lv(o,r,!1,e)&&a,n)for(i=0;i<n.length;i++)a=Lv(o=e.a=n[i],r,!1,e)&&a}function Lv(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a,s,u=e[o];u&&!u.Y&&u.capture==n&&(a=u.listener,s=u.ca||u.src,u.Z&&_v(t.c,u),i=!1!==a.call(s,r)&&i)}return i&&!r.defaultPrevented}xp(xv,Dp),xv.prototype[vv]=!0,(Ls=xv.prototype).addEventListener=function(t,e,n,r){Ev(this,t,e,n,r)},Ls.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=Sp(i)?!!i.capture:!!i,r=Rv(r),e&&e[vv]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=wv(a=e.a[n],r,i,o))&&(mv(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):(e=e&&Av(e))&&(n=e.a[n.toString()],(r=(e=-1)<(e=n?wv(n,r,i,o):e)?n[e]:null)&&Cv(r))}(this,t,e,n,r)},Ls.G=function(){if(xv.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)mv(n[r]);delete e.a[t],e.b--}}this.C=null},Ls.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Ls.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var jv=Ip.JSON.stringify;function Mv(){this.b=this.a=null}var Fv,Uv=(qv.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new qv((function(){return new Vv}),(function(t){t.reset()})));function qv(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Vv(){this.next=this.b=this.a=null}function Bv(t,e){var n;Fv||(n=Ip.Promise.resolve(void 0),Fv=function(){n.then(Wv)}),Kv||(Fv(),Kv=!0),zv.add(t,e)}Mv.prototype.add=function(t,e){var n=Uv.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Vv.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Kv=!(Vv.prototype.reset=function(){this.next=this.b=this.a=null}),zv=new Mv;function Wv(){for(var t,e;n=e=void 0,n=null,(e=zv).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){Ip.setTimeout((function(){throw t}),0)}(t)}var n=Uv;n.f(t),n.b<100&&(n.b++,t.next=n.a,n.a=t)}Kv=!1}function Hv(t,e){xv.call(this),this.b=t||1,this.a=e||Ip,this.f=Ap(this.Za,this),this.g=Rp()}function Gv(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Qv(t,e,n){if("function"==typeof t)n&&(t=Ap(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ap(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ip.setTimeout(t,e||0)}xp(Hv,xv),(Ls=Hv.prototype).aa=!1,Ls.M=null,Ls.Za=function(){var t;this.aa&&(0<(t=Rp()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Dv(this,"tick"),this.aa&&(Gv(this),this.start())))},Ls.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Rp())},Ls.G=function(){Hv.X.G.call(this),Gv(this),delete this.a};var Yv,Xv,$v,Jv=(bp(Xv=tg,$v=Yv=Dp),Xv.prototype=null===$v?Object.create($v):(Zv.prototype=$v.prototype,new Zv),tg.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=Qv((function(){e.a=null,e.c&&(e.c=!1,t(e))}),e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},tg.prototype.G=function(){Yv.prototype.G.call(this),this.a&&(Ip.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},tg);function Zv(){this.constructor=Xv}function tg(t,e){var n=Yv.call(this)||this;return n.g=t,n.h=e,n.b=null,n.c=!1,n.a=null,n}function eg(t){Dp.call(this),this.b=t,this.a={}}xp(eg,Dp);var ng=[];function rg(t,e,n,r){Array.isArray(n)||(n&&(ng[0]=n.toString()),n=ng);for(var i=0;i<n.length;i++){var o=Ev(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ig(t){Wp(t.a,(function(t,e){this.a.hasOwnProperty(e)&&Cv(t)}),t),t.a={}}function og(){this.a=!0}function ag(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)&&"noop"!=(r=i[0])&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}return jv(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}eg.prototype.G=function(){eg.X.G.call(this),ig(this)},eg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},og.prototype.info=function(){};var sg={},ug=null;function cg(){return ug=ug||new xv}function lg(t){fv.call(this,sg.Fa,t)}function hg(t){var e=cg();Dv(e,new lg(e))}function fg(t,e){fv.call(this,sg.STAT_EVENT,t),this.stat=e}function dg(t){var e=cg();Dv(e,new fg(e,t))}function pg(t){fv.call(this,sg.Ga,t)}function vg(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ip.setTimeout((function(){t()}),e)}function gg(){}function yg(t){var e;return(e=t.a)?e:t.a={}}function mg(){}function bg(){fv.call(this,"d")}function _g(){fv.call(this,"c")}function wg(){}function Ig(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new eg(this),this.P=Eg,t=tv?125:void 0,this.R=new Hv(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}sg.Fa="serverreachability",xp(lg,fv),sg.STAT_EVENT="statevent",xp(fg,fv),sg.Ga="timingevent",xp(pg,fv),kn={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},W={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"},gg.prototype.a=null,H={OPEN:"a",eb:"b",Ea:"c",qb:"d"},xp(bg,fv),xp(_g,fv),xp(wg,gg);var Tg=new wg,Eg=45e3,Sg={},Cg={};function kg(t,e,n){t.H=1,t.i=Qg(Bg(e)),t.j=n,t.I=!0,Og(t,null)}function Og(t,e){t.u=Rp(),Ag(t),t.l=Bg(t.i);var n,r,i,o,a,s,u=t.l,c=t.S;Array.isArray(c)||(c=[String(c)]),sy(u.b,"t",c),t.D=0,t.a=tm(t.g,t.g.C?e:null),0<t.O&&(t.F=new Jv(Ap(t.Ca,t,t.a),t.O)),rg(t.J,t.a,"readystatechange",t.Xa),e=t.B?Hp(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),hg(),n=t.c,r=t.m,i=t.l,o=t.f,a=t.S,s=t.j,n.info((function(){if(n.a)if(s)for(var t="",e=s.split("&"),u=0;u<e.length;u++){var c,l,h=e[u].split("=");1<h.length&&(c=h[0],h=h[1],t=2<=(l=c.split("_")).length&&"type"==l[1]?t+(c+"=")+h+"&":t+(c+"=redacted&"))}else t=null;else t=s;return"XMLHTTP REQ ("+o+") [attempt "+a+"]: "+r+"\n"+i+"\n"+t}))}function Ng(t,e,n){for(var r,i,o,a=!0;!t.A&&t.D<n.length;){var s=(s=n,o=i=void 0,i=(r=t).D,-1==(o=s.indexOf("\n",i))?Cg:(i=Number(s.substring(i,o)),isNaN(i)?Sg:(o+=1)+i>s.length?Cg:(s=s.substr(o,i),r.D=o+i,s)));if(s==Cg){4==e&&(t.h=4,dg(14),a=!1),ag(t.c,t.f,null,"[Incomplete Response]");break}if(s==Sg){t.h=4,dg(15),ag(t.c,t.f,n,"[Invalid Chunk]"),a=!1;break}ag(t.c,t.f,s,null),Lg(t,s)}4==e&&0==n.length&&(t.h=1,dg(16),a=!1),t.b=t.b&&a,a?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hy(e),e.F=!0,dg(11))):(ag(t.c,t.f,n,"[Invalid Chunked Response]"),Dg(t),xg(t))}function Ag(t){t.T=Rp()+t.P,Pg(t,t.P)}function Pg(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=vg(Ap(t.Va,t),e)}function Rg(t){t.o&&(Ip.clearTimeout(t.o),t.o=null)}function xg(t){0==t.g.v||t.A||Yy(t.g,t)}function Dg(t){Rg(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Gv(t.R),ig(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Lg(t,e){try{var n,r,i,o,a,s=t.g;if(0!=s.v&&(s.a==t||py(s.b,t)))if(s.I=t.N,!t.C&&py(s.b,t)&&3==s.v){try{var u=s.ka.a.parse(e)}catch(t){u=null}if(Array.isArray(u)&&3==u.length){var c=u;if(0==c[0]){t:if(!s.j){if(s.a){if(!(s.a.u+3e3<t.u))break t;Qy(s),My(s)}Wy(s),dg(18)}}else s.oa=c[1],0<s.oa-s.P&&c[2]<37500&&s.H&&0==s.o&&!s.m&&(s.m=vg(Ap(s.Sa,s),6e3));if(dy(s.b)<=1&&s.ea){try{s.ea()}catch(t){}s.ea=void 0}}else $y(s,11)}else if(!t.C&&s.a!=t||Qy(s),!Up(e))for(e=u=s.ka.a.parse(e),u=0;u<e.length;u++)c=e[u],s.P=c[0],c=c[1],2==s.v?"c"==c[0]?(s.J=c[1],s.ga=c[2],null!=(r=c[3])&&(s.ha=r,s.c.info("VER="+s.ha)),null!=(o=c[4])&&(s.pa=o,s.c.info("SVER="+s.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,s.D=n,s.c.info("backChannelRequestTimeoutMs_="+n)),n=s,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(Bp(r,"spdy")||Bp(r,"quic")||Bp(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(vy(i,i.b),i.b=null)),!n.A||(a=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=a,Gg(n.B,n.A,a))),s.v=3,s.f&&s.f.ta(),s.U&&(s.N=Rp()-t.u,s.c.info("Handshake RTT: "+s.N+"ms")),i=t,(n=s).la=Zy(n,n.C?n.ga:null,n.fa),i.C?(gy(n.b,i),o=i,(a=n.D)&&o.setTimeout(a),o.o&&(Rg(o),Ag(o)),n.a=i):zy(n),0<s.g.length&&qy(s)):"stop"!=c[0]&&"close"!=c[0]||$y(s,7):3==s.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?$y(s,7):jy(s):"noop"!=c[0]&&s.f&&s.f.sa(c),s.o=0);hg()}catch(t){}}function jg(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Ep(t)||"string"==typeof t)jp(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Ep(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Ep(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Mg(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Mg)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Fg(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ug(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ug(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Ug(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ls=Ig.prototype).setTimeout=function(t){this.P=t},Ls.Xa=function(t){t=t.target;var e=this.F;e&&3==Ry(t)?e.f():this.Ca(t)},Ls.Ca=function(t){try{if(t==this.a)t:{var e=Ry(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!tv&&!this.a.$())){this.A||4!=e||7==n||hg(),Rg(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,r=this.c,u=this.m,c=this.l,l=this.f,h=this.S,f=e,d=i,r.info((function(){return"XMLHTTP RESP ("+l+") [ attempt "+h+"]: "+u+"\n"+c+"\n"+f+" "+d})),this.b){if(this.U&&!this.C){e:{if(this.a){var a=this.a;if((a=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Up(a)){var s=a;break e}}s=null}if(!s){this.b=!1,this.h=3,dg(12),Dg(this),xg(this);break t}ag(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Lg(this,s)}this.I?(Ng(this,e,o),tv&&this.b&&3==e&&(rg(this.J,this.R,"tick",this.Wa),this.R.start())):(ag(this.c,this.f,o,null),Lg(this,o)),4==e&&Dg(this),this.b&&!this.A&&(4==e?Yy(this.g,this):(this.b=!1,Ag(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,dg(12)):(this.h=0,dg(13)),Dg(this),xg(this)}}}catch(t){}var u,c,l,h,f,d},Ls.Wa=function(){var t,e;this.a&&(t=Ry(this.a),e=this.a.$(),this.D<e.length&&(Rg(this),Ng(this,t,e),this.b&&4!=t&&Ag(this)))},Ls.cancel=function(){this.A=!0,Dg(this)},Ls.Va=function(){this.o=null;var t,e,n=Rp();0<=n-this.T?(t=this.c,e=this.l,t.info((function(){return"TIMEOUT: "+e})),2!=this.H&&(hg(),dg(17)),Dg(this),this.h=2,xg(this)):Pg(this,this.T-n)},(Ls=Mg.prototype).K=function(){Fg(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Ls.L=function(){return Fg(this),this.a.concat()},Ls.get=function(t,e){return Ug(this.b,t)?this.b[t]:e},Ls.set=function(t,e){Ug(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Ls.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var qg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vg(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Vg?(this.a=void 0!==e?e:t.a,Kg(this,t.f),this.j=t.j,zg(this,t.c),Wg(this,t.h),this.g=t.g,e=t.b,(n=new ry).c=e.c,e.a&&(n.a=new Mg(e.a),n.b=e.b),Hg(this,n),this.i=t.i):t&&(n=String(t).match(qg))?(this.a=!!e,Kg(this,n[1]||"",!0),this.j=Yg(n[2]||""),zg(this,n[3]||"",!0),Wg(this,n[4]),this.g=Yg(n[5]||"",!0),Hg(this,n[6]||"",!0),this.i=Yg(n[7]||"")):(this.a=!!e,this.b=new ry(null,this.a))}function Bg(t){return new Vg(t)}function Kg(t,e,n){t.f=n?Yg(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function zg(t,e,n){t.c=n?Yg(e,!0):e}function Wg(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Hg(t,e,n){var r,i;e instanceof ry?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(iy(r),r.c=null,r.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(oy(this,e),sy(this,n,t))}),r)),r.f=i):(n||(e=Xg(e,ey)),t.b=new ry(e,t.a))}function Gg(t,e,n){t.b.set(e,n)}function Qg(t){return Gg(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Rp()).toString(36)),t}function Yg(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Xg(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,$g),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function $g(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Vg.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Xg(e,Jg,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Xg(e,Jg,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Xg(n,"/"==n.charAt(0)?ty:Zg,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Xg(n,ny)),t.join("")};var Jg=/[#\/\?@]/g,Zg=/[#\?:]/g,ty=/[#\?]/g,ey=/[#\?@]/g,ny=/#/g;function ry(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function iy(t){t.a||(t.a=new Mg,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function oy(t,e){iy(t),e=uy(t,e),Ug(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ug((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Fg(t)))}function ay(t,e){return iy(t),e=uy(t,e),Ug(t.a.b,e)}function sy(t,e,n){oy(t,e),0<n.length&&(t.c=null,t.a.set(uy(t,e),Fp(n)),t.b+=n.length)}function uy(t,e){return e=String(e),t.f?e.toLowerCase():e}(Ls=ry.prototype).add=function(t,e){iy(this),this.c=null,t=uy(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Ls.forEach=function(t,e){iy(this),this.a.forEach((function(n,r){jp(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Ls.L=function(){iy(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ls.K=function(t){iy(this);var e=[];if("string"==typeof t)ay(this,t)&&(e=Mp(e,this.a.get(uy(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Mp(e,t[n])}return e},Ls.set=function(t,e){return iy(this),this.c=null,ay(this,t=uy(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Ls.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Ls.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),o=(r=this.K(r),0);o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}return this.c=t.join("&")};var cy=function(t,e){this.b=t,this.a=e};function ly(t){this.g=t||hy,t=Ip.PerformanceNavigationTiming?0<(t=Ip.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ip.ia&&Ip.ia.ya&&Ip.ia.ya()&&Ip.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var hy=10;function fy(t){return t.b||t.a&&t.a.size>=t.f}function dy(t){return t.b?1:t.a?t.a.size:0}function py(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function vy(t,e){t.a?t.a.add(e):t.b=e}function gy(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function yy(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return Fp(t.c);var r=t.c;try{for(var i=_p(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function my(){}function by(){this.a=new my}function _y(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}ly.prototype.cancel=function(){var t,e;if(this.c=yy(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=_p(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},my.prototype.stringify=function(t){return Ip.JSON.stringify(t,void 0)},my.prototype.parse=function(t){return Ip.JSON.parse(t,void 0)};var wy=Ip.JSON.parse;function Iy(t){xv.call(this),this.headers=new Mg,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Ty,this.D=this.F=!1}xp(Iy,xv);var Ty="",Ey=/^https?$/i,Sy=["POST","PUT"];function Cy(t){return"content-type"==t.toLowerCase()}function ky(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Oy(t),Ay(t)}function Oy(t){t.u||(t.u=!0,Dv(t,"complete"),Dv(t,"error"))}function Ny(t){if(t.b&&void 0!==wp&&(!t.s[1]||4!=Ry(t)||2!=t.W()))if(t.l&&4==Ry(t))Qv(t.za,0,t);else if(Dv(t,"readystatechange"),4==Ry(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break t;default:a=!1}if((e=a)||((n=0===o)&&(!(i=String(t.B).match(qg)[1]||null)&&Ip.self&&Ip.self.location&&(i=(r=Ip.self.location.protocol).substr(0,r.length-1)),n=!Ey.test(i?i.toLowerCase():"")),e=n),e)Dv(t,"complete"),Dv(t,"success");else{t.h=6;try{var s=2<Ry(t)?t.a.statusText:""}catch(o){s=""}t.f=s+" ["+t.W()+"]",Oy(t)}}finally{Ay(t)}}}function Ay(t,e){if(t.a){Py(t);var n=t.a,r=t.s[0]?Tp:null;t.a=null,t.s=null,e||Dv(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Py(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Ip.clearTimeout(t.m),t.m=null)}function Ry(t){return t.a?t.a.readyState:0}function xy(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Wp(n,(function(t,e){i+=e,i+=":",i+=t,i+="\r\n"})),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Gg(t,e,n))}function Dy(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Ly(t){this.pa=0,this.g=[],this.c=new og,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Dy("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Dy("baseRetryDelayMs",5e3,t),this.Ra=Dy("retryDelaySeedMs",1e4,t),this.Ma=Dy("forwardChannelMaxRetries",2,t),this.ma=Dy("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new ly(t&&t.concurrentRequestLimit),this.ka=new by,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function jy(t){var e,n;Fy(t),3==t.v&&(e=t.R++,Gg(n=Bg(t.B),"SID",t.J),Gg(n,"RID",e),Gg(n,"TYPE","terminate"),By(t,n),(e=new Ig(t,t.c,e,void 0)).H=2,e.i=Qg(Bg(n)),n=!1,!(n=Ip.navigator&&Ip.navigator.sendBeacon?Ip.navigator.sendBeacon(e.i.toString(),""):n)&&Ip.Image&&((new Image).src=e.i,n=!0),n||(e.a=tm(e.g,null),e.a.ba(e.i)),e.u=Rp(),Ag(e)),Jy(t)}function My(t){t.a&&(Hy(t),t.a.cancel(),t.a=null)}function Fy(t){My(t),t.j&&(Ip.clearTimeout(t.j),t.j=null),Qy(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Ip.clearTimeout(t.h),t.h=null)}function Uy(t,e){t.g.push(new cy(t.Oa++,e)),3==t.v&&qy(t)}function qy(t){fy(t.b)||t.h||(t.h=!0,Bv(t.Ba,t),t.u=0)}function Vy(t,e){var n=e?e.f:t.R++,r=Bg(t.B);Gg(r,"SID",t.J),Gg(r,"RID",n),Gg(r,"AID",t.P),By(t,r),t.i&&t.l&&xy(r,t.i,t.l),n=new Ig(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ky(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),vy(t.b,n),kg(n,r,e)}function By(t,e){t.f&&jg({},(function(t,n){Gg(e,n,t)}))}function Ky(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Ap(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{!function(t,e,n){var r=n||"";try{jg(t,(function(t,n){var i=t;Sp(t)&&(i=jv(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function zy(t){t.a||t.j||(t.T=1,Bv(t.Aa,t),t.o=0)}function Wy(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=vg(Ap(t.Aa,t),Xy(t,t.o)),t.o++,1)}function Hy(t){null!=t.s&&(Ip.clearTimeout(t.s),t.s=null)}function Gy(t){t.a=new Ig(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Bg(t.la);Gg(e,"RID","rpc"),Gg(e,"SID",t.J),Gg(e,"CI",t.H?"0":"1"),Gg(e,"AID",t.P),By(t,e),Gg(e,"TYPE","xmlhttp"),t.i&&t.l&&xy(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Qg(Bg(e)),n.j=null,n.I=!0,Og(n,t)}function Qy(t){null!=t.m&&(Ip.clearTimeout(t.m),t.m=null)}function Yy(t,e){var n,r,i,o=null;if(t.a==e){Qy(t),Hy(t),t.a=null;var a=2}else{if(!py(t.b,e))return;o=e.s,gy(t.b,e),a=1}if(t.I=e.N,0!=t.v)if(e.b)1==a?(o=e.j?e.j.length:0,e=Rp()-e.u,n=t.u,Dv(a=cg(),new pg(a)),qy(t)):zy(t);else if(3==(n=e.h)||0==n&&0<t.I||(1!=a||(i=e,dy((r=t).b)>=r.b.f-(r.h?1:0)||(r.h?(r.g=i.s.concat(r.g),0):1==r.v||2==r.v||r.u>=(r.La?0:r.Ma)||(r.h=vg(Ap(r.Ba,r,i),Xy(r,r.u)),r.u++,0))))&&(2!=a||!Wy(t)))switch(o&&0<o.length&&(e=t.b,e.c=e.c.concat(o)),n){case 1:$y(t,5);break;case 4:$y(t,10);break;case 3:$y(t,6);break;default:$y(t,2)}}function Xy(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function $y(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=Ap(t.Ya,t),r||(r=new Vg("//www.google.com/images/cleardot.gif"),Ip.location&&"http"==Ip.location.protocol||Kg(r,"https"),Qg(r)),n=r.toString(),r=o,o=new og,Ip.Image?((i=new Image).onload=Pp(_y,o,i,"TestLoadImage: loaded",!0,r),i.onerror=Pp(_y,o,i,"TestLoadImage: error",!1,r),i.onabort=Pp(_y,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=Pp(_y,o,i,"TestLoadImage: timeout",!1,r),Ip.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=n):r(!1)):dg(2),t.v=0,t.f&&t.f.ra(e),Jy(t),Fy(t)}function Jy(t){t.v=0,t.I=-1,t.f&&(0==yy(t.b).length&&0==t.g.length||(t.b.c.length=0,Fp(t.g),t.g.length=0),t.f.qa())}function Zy(t,e,n){var r,i,o,a,s,u=(a=n)instanceof Vg?Bg(a):new Vg(a,void 0);return""!=u.c?(e&&zg(u,e+"."+u.c),Wg(u,u.h)):(r=(s=Ip.location).protocol,i=e?e+"."+s.hostname:s.hostname,o=+s.port,a=n,s=new Vg(null,void 0),r&&Kg(s,r),i&&zg(s,i),o&&Wg(s,o),a&&(s.g=a),u=s),t.V&&Wp(t.V,(function(t,e){Gg(u,e,t)})),e=t.A,n=t.na,e&&n&&Gg(u,e,n),Gg(u,"VER",t.ha),By(t,u),u}function tm(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Iy(t.Na)).F=t.C,e}function em(){}function nm(){if(Jp&&!(10<=Number(uv)))throw Error("Environmental error: no available transport.")}function rm(t,e){xv.call(this),this.a=new Ly(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Up(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Up(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new am(this)}function im(t){bg.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function om(){_g.call(this),this.status=1}function am(t){this.a=t}(Ls=Iy.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?yg(this.H):yg(Tg),this.a.onreadystatechange=Ap(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void ky(this,t)}t=n||"";var i,o=new Mg(this.headers);r&&jg(r,(function(t,e){o.set(e,t)})),r=function(t){t:{for(var e=Cy,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=Ip.FormData&&t instanceof Ip.FormData,0<=Lp(Sy,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Py(this),0<this.o&&((this.D=(i=this.a,Jp&&sv(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=Ap(this.xa,this)):this.m=Qv(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){ky(this,t)}},Ls.xa=function(){void 0!==wp&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Dv(this,"timeout"),this.abort(8))},Ls.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Dv(this,"complete"),Dv(this,"abort"),Ay(this))},Ls.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Ay(this,!0)),Iy.X.G.call(this)},Ls.za=function(){this.j||(this.A||this.l||this.g?Ny(this):this.Ua())},Ls.Ua=function(){Ny(this)},Ls.W=function(){try{return 2<Ry(this)?this.a.status:-1}catch(t){return-1}},Ls.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Ls.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),wy(e)}},Ls.ua=function(){return this.h},Ls.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Ls=Ly.prototype).ha=8,Ls.v=1,Ls.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ig(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Qp(r=Hp(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ky(this,n,e),Gg(i=Bg(this.B),"RID",t),Gg(i,"CVER",22),this.A&&Gg(i,"X-HTTP-Session-Id",this.A),By(this,i),this.i&&r&&xy(i,this.i,r),vy(this.b,n),this.Ia&&Gg(i,"TYPE","init"),this.da?(Gg(i,"$req",e),Gg(i,"SID","null"),n.U=!0,kg(n,i,null)):kg(n,i,e),this.v=2}}else 3==this.v&&(t?Vy(this,t):0==this.g.length||fy(this.b)||Vy(this))},Ls.Aa=function(){var t;this.j=null,Gy(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=vg(Ap(this.Ta,this),t))},Ls.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,dg(10),My(this),Gy(this))},Ls.Sa=function(){null!=this.m&&(this.m=null,My(this),Wy(this),dg(19))},Ls.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),dg(2)):(this.c.info("Failed to ping google.com"),dg(1))},(Ls=em.prototype).ta=function(){},Ls.sa=function(){},Ls.ra=function(){},Ls.qa=function(){},Ls.Ja=function(){},nm.prototype.a=function(t,e){return new rm(t,e)},xp(rm,xv),rm.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;dg(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Zy(t,null,t.fa),qy(t)},rm.prototype.close=function(){jy(this.a)},rm.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,Uy(this.a,e)):this.l?((e={}).__data__=jv(t),Uy(this.a,e)):Uy(this.a,t)},rm.prototype.G=function(){this.a.f=null,delete this.f,jy(this.a),delete this.a,rm.X.G.call(this)},xp(im,bg),xp(om,_g),xp(am,em),am.prototype.ta=function(){Dv(this.a,"a")},am.prototype.sa=function(t){Dv(this.a,new im(t))},am.prototype.ra=function(t){Dv(this.a,new om)},am.prototype.qa=function(){Dv(this.a,"b")},nm.prototype.createWebChannel=nm.prototype.a,rm.prototype.send=rm.prototype.h,rm.prototype.open=rm.prototype.g,kn.NO_ERROR=0,kn.TIMEOUT=8,kn.HTTP_ERROR=6,W.COMPLETE="complete",(mg.EventType=H).OPEN="a",H.CLOSE="b",H.ERROR="c",H.MESSAGE="d",xv.prototype.listen=xv.prototype.va,Iy.prototype.listenOnce=Iy.prototype.wa,Iy.prototype.getLastError=Iy.prototype.Qa,Iy.prototype.getLastErrorCode=Iy.prototype.ua,Iy.prototype.getStatus=Iy.prototype.W,Iy.prototype.getResponseJson=Iy.prototype.Pa,Iy.prototype.getResponseText=Iy.prototype.$,Iy.prototype.send=Iy.prototype.ba;var sm=cg,um=kn,cm=W,lm=sg,hm=mg,fm=Iy,dm=(pm.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},pm.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},pm);function pm(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}dm.o=-1;var vm,gm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ym=(Yi(bm,vm=Error),bm),mm=new sa("@firebase/firestore");function bm(t,e){var n=this;return(n=vm.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function _m(){return mm.logLevel}function wm(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];mm.logLevel<=ea.DEBUG&&(e=n.map(Em),mm.debug.apply(mm,eo(["Firestore (8.4.3): "+t],e)))}function Im(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];mm.logLevel<=ea.ERROR&&(e=n.map(Em),mm.error.apply(mm,eo(["Firestore (8.4.3): "+t],e)))}function Tm(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];mm.logLevel<=ea.WARN&&(e=n.map(Em),mm.warn.apply(mm,eo(["Firestore (8.4.3): "+t],e)))}function Em(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Sm(t){throw Im(t="FIRESTORE (8.4.3) INTERNAL ASSERTION FAILED: "+(t=void 0===t?"Unexpected state":t)),new Error(t)}function Cm(t){t||Sm()}var km=(Om.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(40);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<40;r++)n[r]=Math.floor(256*Math.random());return n}(),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Om);function Om(){}function Nm(t,e){return t<e?-1:e<t?1:0}function Am(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Pm(t){return t+"\0"}var Rm=(Lm.now=function(){return Lm.fromMillis(Date.now())},Lm.fromDate=function(t){return Lm.fromMillis(t.getTime())},Lm.fromMillis=function(t){var e=Math.floor(t/1e3);return new Lm(e,Math.floor(1e6*(t-1e3*e)))},Lm.prototype.toDate=function(){return new Date(this.toMillis())},Lm.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Lm.prototype._compareTo=function(t){return this.seconds===t.seconds?Nm(this.nanoseconds,t.nanoseconds):Nm(this.seconds,t.seconds)},Lm.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Lm.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Lm.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},Lm.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Lm),xm=(Dm.fromTimestamp=function(t){return new Dm(t)},Dm.min=function(){return new Dm(new Rm(0,0))},Dm.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},Dm.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Dm.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Dm.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Dm.prototype.toTimestamp=function(){return this.timestamp},Dm);function Dm(t){this.timestamp=t}function Lm(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new ym(gm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new ym(gm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ym(gm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new ym(gm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function jm(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function Mm(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Fm(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}Object.defineProperty(Xm.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),Xm.prototype.isEqual=function(t){return 0===Xm.comparator(this,t)},Xm.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Xm?t.forEach((function(t){e.push(t)})):e.push(t),this.construct(e)},Xm.prototype.limit=function(){return this.offset+this.length},Xm.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},Xm.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},Xm.prototype.firstSegment=function(){return this.segments[this.offset]},Xm.prototype.lastSegment=function(){return this.get(this.length-1)},Xm.prototype.get=function(t){return this.segments[this.offset+t]},Xm.prototype.isEmpty=function(){return 0===this.length},Xm.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Xm.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Xm.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Xm.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Xm.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0};var Um,qm,Vm=(Yi(Ym,qm=kn=Xm),Ym.prototype.construct=function(t,e,n){return new Ym(t,e,n)},Ym.prototype.canonicalString=function(){return this.toArray().join("/")},Ym.prototype.toString=function(){return this.canonicalString()},Ym.fromString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new ym(gm.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter((function(t){return 0<t.length})))}return new Ym(n)},Ym.emptyPath=function(){return new Ym([])},Ym),Bm=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Km=(Yi(Qm,Um=kn),Qm.prototype.construct=function(t,e,n){return new Qm(t,e,n)},Qm.isValidIdentifier=function(t){return Bm.test(t)},Qm.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qm.isValidIdentifier(t)?t:"`"+t+"`"})).join(".")},Qm.prototype.toString=function(){return this.canonicalString()},Qm.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},Qm.keyField=function(){return new Qm(["__name__"])},Qm.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new ym(gm.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new ym(gm.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var s=t[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new ym(gm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new ym(gm.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Qm(e)},Qm.emptyPath=function(){return new Qm([])},Qm),zm=(Gm.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},Gm.prototype.isEqual=function(t){return Am(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},Gm),Wm=(Hm.fromBase64String=function(t){return new Hm(atob(t))},Hm.fromUint8Array=function(t){return new Hm(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},Hm.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},Hm.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},Hm.prototype.approximateByteSize=function(){return 2*this.binaryString.length},Hm.prototype.compareTo=function(t){return Nm(this.binaryString,t.binaryString)},Hm.prototype.isEqual=function(t){return this.binaryString===t.binaryString},Hm);function Hm(t){this.binaryString=t}function Gm(t){(this.fields=t).sort(Km.comparator)}function Qm(){return null!==Um&&Um.apply(this,arguments)||this}function Ym(){return null!==qm&&qm.apply(this,arguments)||this}function Xm(t,e,n){void 0===e?e=0:e>t.length&&Sm(),void 0===n?n=t.length-e:n>t.length-e&&Sm(),this.segments=t,this.offset=e,this.len=n}Wm.EMPTY_BYTE_STRING=new Wm("");var $m=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jm(t){if(Cm(!!t),"string"!=typeof t)return{seconds:Zm(t.seconds),nanos:Zm(t.nanos)};var e=0,n=$m.exec(t);return Cm(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n)),t=new Date(t),{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function Zm(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function tb(t){return"string"==typeof t?Wm.fromBase64String(t):Wm.fromUint8Array(t)}function eb(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function nb(t){return t=Jm(t.mapValue.fields.__local_write_time__.timestampValue),new Rm(t.seconds,t.nanos)}function rb(t){return null==t}function ib(t){return 0===t&&1/t==-1/0}function ob(t){return"number"==typeof t&&Number.isInteger(t)&&!ib(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ab=(sb.fromPath=function(t){return new sb(Vm.fromString(t))},sb.fromName=function(t){return new sb(Vm.fromString(t).popFirst(5))},sb.prototype.hasCollectionId=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},sb.prototype.isEqual=function(t){return null!==t&&0===Vm.comparator(this.path,t.path)},sb.prototype.toString=function(){return this.path.toString()},sb.comparator=function(t,e){return Vm.comparator(t.path,e.path)},sb.isDocumentKey=function(t){return t.length%2==0},sb.fromSegments=function(t){return new sb(new Vm(t.slice()))},sb);function sb(t){this.path=t}function ub(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?eb(t)?4:10:Sm()}function cb(t,e){var n,r,i=ub(t);if(i!==ub(e))return!1;switch(i){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nb(t).isEqual(nb(e));case 3:return function(e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Jm(t.timestampValue);return e=Jm(e.timestampValue),n.seconds===e.seconds&&n.nanos===e.nanos}(e);case 5:return t.stringValue===e.stringValue;case 6:return r=e,tb(t.bytesValue).isEqual(tb(r.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return n=e,Zm((r=t).geoPointValue.latitude)===Zm(n.geoPointValue.latitude)&&Zm(r.geoPointValue.longitude)===Zm(n.geoPointValue.longitude);case 2:return function(t,e){return"integerValue"in t&&"integerValue"in e?Zm(t.integerValue)===Zm(e.integerValue):"doubleValue"in t&&"doubleValue"in e&&((t=Zm(t.doubleValue))===(e=Zm(e.doubleValue))?ib(t)===ib(e):isNaN(t)&&isNaN(e))}(t,e);case 9:return Am(t.arrayValue.values||[],e.arrayValue.values||[],cb);case 10:return function(){var n,r=t.mapValue.fields||{},i=e.mapValue.fields||{};if(jm(r)!==jm(i))return!1;for(n in r)if(r.hasOwnProperty(n)&&(void 0===i[n]||!cb(r[n],i[n])))return!1;return!0}();default:return Sm()}}function lb(t,e){return void 0!==(t.values||[]).find((function(t){return cb(t,e)}))}function hb(t,e){var n,r,i,o=ub(t),a=ub(e);if(o!==a)return Nm(o,a);switch(o){case 0:return 0;case 1:return Nm(t.booleanValue,e.booleanValue);case 2:return r=e,(i=Zm(t.integerValue||t.doubleValue))<(r=Zm(r.integerValue||r.doubleValue))?-1:r<i?1:i===r?0:isNaN(i)?isNaN(r)?0:-1:1;case 3:return fb(t.timestampValue,e.timestampValue);case 4:return fb(nb(t),nb(e));case 5:return Nm(t.stringValue,e.stringValue);case 6:return function(t,e){return t=tb(t),e=tb(e),t.compareTo(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Nm(n[i],r[i]);if(0!==o)return o}return Nm(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,i=e.geoPointValue,0!==(r=Nm(Zm(n.latitude),Zm(i.latitude)))?r:Nm(Zm(n.longitude),Zm(i.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=hb(n[i],r[i]);if(o)return o}return Nm(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Nm(r[a],o[a]);if(0!==s)return s;if(0!==(s=hb(n[r[a]],i[o[a]])))return s}return Nm(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Sm()}}function fb(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Nm(t,e);var n=Jm(t);return t=Jm(e),0!==(e=Nm(n.seconds,t.seconds))?e:Nm(n.nanos,t.nanos)}function db(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){return"time("+(t=Jm(t)).seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?tb(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ab.fromName(n).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):Sm();var n}(t)}function pb(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function vb(t){return t&&"integerValue"in t}function gb(t){return!!t&&"arrayValue"in t}function yb(t){return t&&"nullValue"in t}function mb(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bb(t){return t&&"mapValue"in t}var _b=(wb.empty=function(){return new wb({mapValue:{}})},wb.prototype.field=function(t){return wb.extractNestedValue(this.buildProto(),t)},wb.prototype.toProto=function(){return this.field(Km.emptyPath())},wb.prototype.set=function(t,e){this.setOverlay(t,e)},wb.prototype.setAll=function(t){var e=this;t.forEach((function(t,n){t?e.set(n,t):e.delete(n)}))},wb.prototype.delete=function(t){this.setOverlay(t,null)},wb.prototype.isEqual=function(t){return cb(this.buildProto(),t.buildProto())},wb.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map||(o=o&&10===ub(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),n=o}n.set(t.lastSegment(),e)},wb.prototype.applyOverlay=function(t,e){var n=this,r=!1,i=wb.extractNestedValue(this.partialValue,t),o=bb(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){var a;e instanceof Map?null!=(a=n.applyOverlay(t.child(i),e))&&(o[i]=a,r=!0):null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},wb.prototype.buildProto=function(){var t=this.applyOverlay(Km.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},wb.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!bb(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},wb.prototype.clone=function(){return new wb(this.buildProto())},wb);function wb(t){this.overlayMap=new Map,this.partialValue=t}var Ib=(Eb.newInvalidDocument=function(t){return new Eb(t,0,xm.min(),_b.empty(),0)},Eb.newFoundDocument=function(t,e,n){return new Eb(t,1,e,n,0)},Eb.newNoDocument=function(t,e){return new Eb(t,2,e,_b.empty(),0)},Eb.newUnknownDocument=function(t,e){return new Eb(t,3,e,_b.empty(),2)},Eb.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},Eb.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=_b.empty(),this.documentState=0,this},Eb.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=_b.empty(),this.documentState=2,this},Eb.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},Eb.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(Eb.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(Eb.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(Eb.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Eb.prototype.isValidDocument=function(){return 0!==this.documentType},Eb.prototype.isFoundDocument=function(){return 1===this.documentType},Eb.prototype.isNoDocument=function(){return 2===this.documentType},Eb.prototype.isUnknownDocument=function(){return 3===this.documentType},Eb.prototype.isEqual=function(t){return t instanceof Eb&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},Eb.prototype.clone=function(){return new Eb(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},Eb.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},Eb),Tb=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Eb(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}function Sb(t,e,n,r,i,o,a){return new Tb(t,e=void 0===e?null:e,n=void 0===n?[]:n,r=void 0===r?[]:r,i=void 0===i?null:i,o=void 0===o?null:o,a=void 0===a?null:a)}function Cb(t){var e=t;return null===e.h&&(t=e.path.canonicalString(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((function(t){return(t=t).field.canonicalString()+t.op.toString()+db(t.value)})).join(","),t+="|ob:",t+=e.orderBy.map((function(t){return(t=t).field.canonicalString()+t.dir})).join(","),rb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e_(e.startAt)),e.endAt&&(t+="|ub:",t+=e_(e.endAt)),e.h=t),e.h}function kb(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,a,s=0;s<t.filters.length;s++)if(o=t.filters[s],a=e.filters[s],o.op!==a.op||!o.field.isEqual(a.field)||!cb(o.value,a.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!i_(t.startAt,e.startAt)&&i_(t.endAt,e.endAt)}function Ob(t){return ab.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Nb,Ab=(Yi(Pb,Nb=function(){}),Pb.create=function(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.l(t,e,n):new Lb(t,e,n):"array-contains"===e?new Hb(t,n):"in"===e?new Gb(t,n):"not-in"===e?new Qb(t,n):"array-contains-any"===e?new Yb(t,n):new Pb(t,e,n)},Pb.l=function(t,e,n){return new("in"===e?jb:Mb)(t,n)},Pb.prototype.matches=function(t){return t=t.data.field(this.field),"!="===this.op?null!==t&&this.m(hb(t,this.value)):null!==t&&ub(this.value)===ub(t)&&this.m(hb(t,this.value))},Pb.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Sm()}},Pb.prototype.g=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},Pb);function Pb(t,e,n){var r=this;return(r=Nb.call(this)||this).field=t,r.op=e,r.value=n,r}var Rb,xb,Db,Lb=(Yi(qb,Db=Ab),qb.prototype.matches=function(t){return t=ab.comparator(t.key,this.key),this.m(t)},qb),jb=(Yi(Ub,xb=Ab),Ub.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},Ub),Mb=(Yi(Fb,Rb=Ab),Fb.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},Fb);function Fb(t,e){var n=this;return(n=Rb.call(this,t,"not-in",e)||this).keys=Vb(0,e),n}function Ub(t,e){var n=this;return(n=xb.call(this,t,"in",e)||this).keys=Vb(0,e),n}function qb(t,e,n){var r=this;return(r=Db.call(this,t,e,n)||this).key=ab.fromName(n.referenceValue),r}function Vb(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map((function(t){return ab.fromName(t.referenceValue)}))}var Bb,Kb,zb,Wb,Hb=(Yi(t_,Wb=Ab),t_.prototype.matches=function(t){return gb(t=t.data.field(this.field))&&lb(t.arrayValue,this.value)},t_),Gb=(Yi(Zb,zb=Ab),Zb.prototype.matches=function(t){return null!==(t=t.data.field(this.field))&&lb(this.value.arrayValue,t)},Zb),Qb=(Yi(Jb,Kb=Ab),Jb.prototype.matches=function(t){return!lb(this.value.arrayValue,{nullValue:"NULL_VALUE"})&&null!==(t=t.data.field(this.field))&&!lb(this.value.arrayValue,t)},Jb),Yb=(Yi($b,Bb=Ab),$b.prototype.matches=function(t){var e=this;return!(!gb(t=t.data.field(this.field))||!t.arrayValue.values)&&t.arrayValue.values.some((function(t){return lb(e.value.arrayValue,t)}))},$b),Xb=function(t,e){this.position=t,this.before=e};function $b(t,e){return Bb.call(this,t,"array-contains-any",e)||this}function Jb(t,e){return Kb.call(this,t,"not-in",e)||this}function Zb(t,e){return zb.call(this,t,"in",e)||this}function t_(t,e){return Wb.call(this,t,"array-contains",e)||this}function e_(t){return(t.before?"b":"a")+":"+t.position.map(db).join(",")}var n_=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function r_(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?ab.comparator(ab.fromName(a.referenceValue),n.key):hb(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function i_(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!cb(t.position[n],e.position[n]))return!1;return!0}var o_=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function a_(t,e,n,r,i,o,a,s){return new o_(t,e,n,r,i,o,a,s)}function s_(t){return new o_(t)}function u_(t){return!rb(t.limit)&&"F"===t.limitType}function c_(t){return!rb(t.limit)&&"L"===t.limitType}function l_(t){return 0<t.explicitOrderBy.length?t.explicitOrderBy[0].field:null}function h_(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function f_(t){return null!==t.collectionGroup}function d_(t){var e=t;if(null===e.p){e.p=[];var n=h_(e);if(t=l_(e),null!==n&&null===t)n.isKeyField()||e.p.push(new n_(n)),e.p.push(new n_(Km.keyField(),"asc"));else{for(var r=!1,i=0,o=e.explicitOrderBy;i<o.length;i++){var a=o[i];e.p.push(a),a.field.isKeyField()&&(r=!0)}r||(n=0<e.explicitOrderBy.length?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",e.p.push(new n_(Km.keyField(),n)))}}return e.p}function p_(t){var e=t;if(!e.T)if("F"===e.limitType)e.T=Sb(e.path,e.collectionGroup,d_(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=d_(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new n_(o.field,a))}var s=e.endAt?new Xb(e.endAt.position,!e.endAt.before):null;t=e.startAt?new Xb(e.startAt.position,!e.startAt.before):null,e.T=Sb(e.path,e.collectionGroup,n,e.filters,e.limit,s,t)}return e.T}function v_(t,e,n){return new o_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function g_(t,e){return kb(p_(t),p_(e))&&t.limitType===e.limitType}function y_(t){return Cb(p_(t))+"|lt:"+t.limitType}function m_(t){return"Query(target="+(n=(e=p_(t)).path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map((function(t){return(t=t).field.canonicalString()+" "+t.op+" "+db(t.value)})).join(", ")+"]"),rb(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(t=t).field.canonicalString()+" ("+t.dir+")"})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+e_(e.startAt)),e.endAt&&(n+=", endAt: "+e_(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function b_(t,e){return e.isFoundDocument()&&(n=t,r=e.key.path,null!==n.collectionGroup?e.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):ab.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r))&&function(e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return}return 1}(e)&&function(e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return;return 1}(e)&&(r=e,(!(e=t).startAt||r_(e.startAt,d_(e),r))&&(!e.endAt||!r_(e.endAt,d_(e),r)));var n,r}function __(t){return function(e,n){for(var r=!1,i=0,o=d_(t);i<o.length;i++){var a=o[i],s=function(t,e,n){var r=t.field.isKeyField()?ab.comparator(e.key,n.key):function(t,n){var r=e.data.field(t);return t=n.data.field(t),null!==r&&null!==t?hb(r,t):Sm()}(t.field,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Sm()}}(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function w_(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ib(e)?"-0":e}}function I_(t){return{integerValue:""+t}}function T_(t,e){return ob(e)?I_(e):w_(t,e)}function E_(t,e){return t instanceof M_?vb(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var S_,C_,k_=(Yi(A_,C_=W=function(){this._=void 0}),A_),O_=(Yi(N_,S_=W),N_);function N_(t){var e=this;return(e=S_.call(this)||this).elements=t,e}function A_(){return null!==C_&&C_.apply(this,arguments)||this}function P_(t,e){for(var n=q_(e),r=0,i=t.elements;r<i.length;r++)!function(t){n.some((function(e){return cb(e,t)}))||n.push(t)}(i[r]);return{arrayValue:{values:n}}}var R_,x_=(Yi(D_,R_=W),D_);function D_(t){var e=this;return(e=R_.call(this)||this).elements=t,e}function L_(t,e){for(var n=q_(e),r=0,i=t.elements;r<i.length;r++)!function(t){n=n.filter((function(e){return!cb(e,t)}))}(i[r]);return{arrayValue:{values:n}}}var j_,M_=(Yi(F_,j_=W),F_);function F_(t,e){var n=this;return(n=j_.call(this)||this).R=t,n.A=e,n}function U_(t){return Zm(t.integerValue||t.doubleValue)}function q_(t){return gb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function V_(t,e){this.version=t,this.transformResults=e}var B_=function(t,e){this.field=t,this.transform=e},K_=(z_.none=function(){return new z_},z_.exists=function(t){return new z_(void 0,t)},z_.updateTime=function(t){return new z_(t)},Object.defineProperty(z_.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),z_.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},z_);function z_(t,e){this.updateTime=t,this.exists=e}function W_(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}function H_(t,e,n){var r,i,o,a;t instanceof $_?(i=e,o=n,W_((r=t).precondition,i)&&(a=r.value.clone(),o=rw(r.fieldTransforms,o,i),a.setAll(o),i.convertToFoundDocument(Q_(i),a).setHasLocalMutations())):t instanceof J_?(o=e,i=n,W_((a=t).precondition,o)&&(n=rw(a.fieldTransforms,i,o),(i=o.data).setAll(ew(a)),i.setAll(n),o.convertToFoundDocument(Q_(o),i).setHasLocalMutations())):(e=e,W_(t.precondition,e)&&e.convertToNoDocument(xm.min()))}function G_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Am(n,r,(function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof O_&&e instanceof O_||t instanceof x_&&e instanceof x_?Am(t.elements,e.elements,cb):t instanceof M_&&e instanceof M_?cb(t.A,e.A):t instanceof k_&&e instanceof k_)}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function Q_(t){return t.isFoundDocument()?t.version:xm.min()}var Y_,X_,$_=(Yi(tw,X_=kn=function(){}),tw),J_=(Yi(Z_,Y_=kn),Z_);function Z_(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=Y_.call(this)||this).key=t,o.data=e,o.fieldMask=n,o.precondition=r,o.fieldTransforms=i,o.type=1,o}function tw(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=X_.call(this)||this).key=t,i.value=e,i.precondition=n,i.fieldTransforms=r,i.type=0,i}function ew(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){var r;n.isEmpty()||(r=t.data.field(n),e.set(n,r))})),e}function nw(t,e,n){var r=new Map;Cm(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,(o=a,a=s,s=n[i],o instanceof O_?P_(o,a):o instanceof x_?L_(o,a):s))}return r}function rw(t,e,n){for(var r,i=new Map,o=0,a=t;o<a.length;o++){var s=a[o],u=s.transform,c=n.data.field(s.field);i.set(s.field,(r=c,s=e,c=void 0,(u=u)instanceof k_?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}},r&&(c.fields.__previous_value__=r),{mapValue:c}):u instanceof O_?P_(u,r):u instanceof x_?L_(u,r):(r=U_(u=E_(c=u,r))+U_(c.A),vb(u)&&vb(c.A)?I_(r):w_(c.R,r))))}return i}function iw(t){this.count=t}var ow,aw,sw,uw=(Yi(hw,sw=kn),hw),cw=(Yi(lw,aw=kn),lw);function lw(t,e){var n=this;return(n=aw.call(this)||this).key=t,n.precondition=e,n.type=3,n.fieldTransforms=[],n}function hw(t,e){var n=this;return(n=sw.call(this)||this).key=t,n.precondition=e,n.type=2,n.fieldTransforms=[],n}function fw(t){switch(t){case gm.OK:return Sm(),0;case gm.CANCELLED:case gm.UNKNOWN:case gm.DEADLINE_EXCEEDED:case gm.RESOURCE_EXHAUSTED:case gm.INTERNAL:case gm.UNAVAILABLE:case gm.UNAUTHENTICATED:return;case gm.INVALID_ARGUMENT:case gm.NOT_FOUND:case gm.ALREADY_EXISTS:case gm.PERMISSION_DENIED:case gm.FAILED_PRECONDITION:case gm.ABORTED:case gm.OUT_OF_RANGE:case gm.UNIMPLEMENTED:case gm.DATA_LOSS:return 1;default:return Sm(),0}}function dw(t){if(void 0===t)return Im("GRPC error has no .code"),gm.UNKNOWN;switch(t){case ow.OK:return gm.OK;case ow.CANCELLED:return gm.CANCELLED;case ow.UNKNOWN:return gm.UNKNOWN;case ow.DEADLINE_EXCEEDED:return gm.DEADLINE_EXCEEDED;case ow.RESOURCE_EXHAUSTED:return gm.RESOURCE_EXHAUSTED;case ow.INTERNAL:return gm.INTERNAL;case ow.UNAVAILABLE:return gm.UNAVAILABLE;case ow.UNAUTHENTICATED:return gm.UNAUTHENTICATED;case ow.INVALID_ARGUMENT:return gm.INVALID_ARGUMENT;case ow.NOT_FOUND:return gm.NOT_FOUND;case ow.ALREADY_EXISTS:return gm.ALREADY_EXISTS;case ow.PERMISSION_DENIED:return gm.PERMISSION_DENIED;case ow.FAILED_PRECONDITION:return gm.FAILED_PRECONDITION;case ow.ABORTED:return gm.ABORTED;case ow.OUT_OF_RANGE:return gm.OUT_OF_RANGE;case ow.UNIMPLEMENTED:return gm.UNIMPLEMENTED;case ow.DATA_LOSS:return gm.DATA_LOSS;default:return Sm()}}(W=ow=ow||{})[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";var pw=(bw.prototype.insert=function(t,e){return new bw(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,gw.BLACK,null,null))},bw.prototype.remove=function(t){return new bw(this.comparator,this.root.remove(t,this.comparator).copy(null,null,gw.BLACK,null,null))},bw.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},bw.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},bw.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(bw.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),bw.prototype.minKey=function(){return this.root.minKey()},bw.prototype.maxKey=function(){return this.root.maxKey()},bw.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},bw.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},bw.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},bw.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},bw.prototype.getIterator=function(){return new vw(this.root,null,this.comparator,!1)},bw.prototype.getIteratorFrom=function(t){return new vw(this.root,t,this.comparator,!1)},bw.prototype.getReverseIterator=function(){return new vw(this.root,null,this.comparator,!0)},bw.prototype.getReverseIteratorFrom=function(t){return new vw(this.root,t,this.comparator,!0)},bw),vw=(mw.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},mw.prototype.hasNext=function(){return 0<this.nodeStack.length},mw.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},mw),gw=(yw.prototype.copy=function(t,e,n,r,i){return new yw(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},yw.prototype.isEmpty=function(){return!1},yw.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},yw.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},yw.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},yw.prototype.minKey=function(){return this.min().key},yw.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},yw.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},yw.prototype.removeMin=function(){if(this.left.isEmpty())return yw.EMPTY;var t=this;return(t=(t=t.left.isRed()||t.left.left.isRed()?t:t.moveRedLeft()).copy(null,null,null,t.left.removeMin(),null)).fixUp()},yw.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()?r:r.moveRedLeft()).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=(r=r.left.isRed()?r.rotateRight():r).right.isEmpty()||r.right.isRed()||r.right.left.isRed()?r:r.moveRedRight()).key)){if(r.right.isEmpty())return yw.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},yw.prototype.isRed=function(){return this.color},yw.prototype.fixUp=function(){var t=this;return(t=(t=t.right.isRed()&&!t.left.isRed()?t.rotateLeft():t).left.isRed()&&t.left.left.isRed()?t.rotateRight():t).left.isRed()&&t.right.isRed()?t.colorFlip():t},yw.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip():t},yw.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()?(t=t.rotateRight()).colorFlip():t},yw.prototype.rotateLeft=function(){var t=this.copy(null,null,yw.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},yw.prototype.rotateRight=function(){var t=this.copy(null,null,yw.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},yw.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},yw.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},yw.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Sm();if(this.right.isRed())throw Sm();var t=this.left.check();if(t!==this.right.check())throw Sm();return t+(this.isRed()?0:1)},yw);function yw(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:yw.RED,this.left=null!=r?r:yw.EMPTY,this.right=null!=i?i:yw.EMPTY,this.size=this.left.size+1+this.right.size}function mw(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}function bw(t,e){this.comparator=t,this.root=e||gw.EMPTY}function _w(){this.size=0}gw.EMPTY=null,gw.RED=!0,gw.BLACK=!1,gw.EMPTY=(Object.defineProperty(_w.prototype,"key",{get:function(){throw Sm()},enumerable:!1,configurable:!0}),Object.defineProperty(_w.prototype,"value",{get:function(){throw Sm()},enumerable:!1,configurable:!0}),Object.defineProperty(_w.prototype,"color",{get:function(){throw Sm()},enumerable:!1,configurable:!0}),Object.defineProperty(_w.prototype,"left",{get:function(){throw Sm()},enumerable:!1,configurable:!0}),Object.defineProperty(_w.prototype,"right",{get:function(){throw Sm()},enumerable:!1,configurable:!0}),_w.prototype.copy=function(t,e,n,r,i){return this},_w.prototype.insert=function(t,e,n){return new gw(t,e)},_w.prototype.remove=function(t,e){return this},_w.prototype.isEmpty=function(){return!0},_w.prototype.inorderTraversal=function(t){return!1},_w.prototype.reverseTraversal=function(t){return!1},_w.prototype.minKey=function(){return null},_w.prototype.maxKey=function(){return null},_w.prototype.isRed=function(){return!1},_w.prototype.checkMaxDepth=function(){return!0},_w.prototype.check=function(){return 0},new _w);var ww=(Sw.prototype.has=function(t){return null!==this.data.get(t)},Sw.prototype.first=function(){return this.data.minKey()},Sw.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(Sw.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Sw.prototype.indexOf=function(t){return this.data.indexOf(t)},Sw.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},Sw.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},Sw.prototype.forEachWhile=function(t,e){for(var n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},Sw.prototype.firstAfterOrEqual=function(t){return(t=this.data.getIteratorFrom(t)).hasNext()?t.getNext().key:null},Sw.prototype.getIterator=function(){return new Iw(this.data.getIterator())},Sw.prototype.getIteratorFrom=function(t){return new Iw(this.data.getIteratorFrom(t))},Sw.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},Sw.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Sw.prototype.isEmpty=function(){return this.data.isEmpty()},Sw.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},Sw.prototype.isEqual=function(t){if(!(t instanceof Sw))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},Sw.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},Sw.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},Sw.prototype.copy=function(t){var e=new Sw(this.comparator);return e.data=t,e},Sw),Iw=(Ew.prototype.getNext=function(){return this.iter.getNext().key},Ew.prototype.hasNext=function(){return this.iter.hasNext()},Ew),Tw=new pw(ab.comparator);function Ew(t){this.iter=t}function Sw(t){this.comparator=t,this.data=new pw(this.comparator)}var Cw=new pw(ab.comparator),kw=new pw(ab.comparator),Ow=new ww(ab.comparator);function Nw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ow,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Aw=new ww(Nm),Pw=(Vw.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n=new Map;return n.set(t,Rw.createSynthesizedTargetChangeForCurrentChange(t,e)),new Vw(xm.min(),n,Aw,Tw,Nw())},Vw),Rw=(qw.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new qw(Wm.EMPTY_BYTE_STRING,e,Nw(),Nw(),Nw())},qw),xw=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Dw=function(t,e){this.targetId=t,this.V=e},Lw=function(t,e,n,r){void 0===n&&(n=Wm.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},jw=(Object.defineProperty(Uw.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(Uw.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(Uw.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(Uw.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),Uw.prototype.$=function(t){0<t.approximateByteSize()&&(this.F=!0,this.C=t)},Uw.prototype.M=function(){var t=Nw(),e=Nw(),n=Nw();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Sm()}})),new Rw(this.C,this.N,t,e,n)},Uw.prototype.L=function(){this.F=!1,this.D=Kw()},Uw.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},Uw.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},Uw.prototype.U=function(){this.S+=1},Uw.prototype.K=function(){--this.S},Uw.prototype.j=function(){this.F=!0,this.N=!0},Uw),Mw=(Fw.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},Fw.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Sm()}}))},Fw.prototype.forEachTarget=function(t,e){var n=this;0<t.targetIds.length?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},Fw.prototype.rt=function(t){var e=t.targetId,n=t.V.count;(t=this.ot(e))&&(Ob(t=t.target)?0===n?(t=new ab(t.path),this.tt(e,t,Ib.newNoDocument(t,xm.min()))):Cm(1===n):this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e)))},Fw.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);o&&(r.current&&Ob(o.target)&&(o=new ab(o.target.path),null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,Ib.newNoDocument(o,t))),r.O&&(n.set(i,r.M()),r.L()))}));var r=Nw();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){return!(t=e.ot(t))||2===t.purpose||(i=!1)})),i&&(r=r.add(t))}));var i=new Pw(t,n,this.Y,this.H,r);return this.H=Tw,this.J=Bw(),this.Y=new ww(Nm),i},Fw.prototype.Z=function(t,e){var n;this.st(t)&&(n=this.at(t,e.key)?2:0,this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t)))},Fw.prototype.tt=function(t,e,n){var r;this.st(t)&&(r=this.nt(t),this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n)))},Fw.prototype.removeTarget=function(t){this.G.delete(t)},Fw.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},Fw.prototype.U=function(t){this.nt(t).U()},Fw.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new jw,this.G.set(t,e)),e},Fw.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new ww(Nm),this.J=this.J.insert(t,e)),e},Fw.prototype.st=function(t){var e=null!==this.ot(t);return e||wm("WatchChangeAggregator","Detected inactive target",t),e},Fw.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},Fw.prototype.it=function(t){var e=this;this.G.set(t,new jw),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},Fw.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},Fw);function Fw(t){this.W=t,this.G=new Map,this.H=Tw,this.J=Bw(),this.Y=new ww(Nm)}function Uw(){this.S=0,this.D=Kw(),this.C=Wm.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}function qw(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function Vw(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}function Bw(){return new pw(ab.comparator)}function Kw(){return new pw(ab.comparator)}var zw={asc:"ASCENDING",desc:"DESCENDING"},Ww={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hw=function(t,e){this.databaseId=t,this.I=e};function Gw(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qw(t,e){return t.I?e.toBase64():e.toUint8Array()}function Yw(t){return Cm(!!t),xm.fromTimestamp((t=Jm(t),new Rm(t.seconds,t.nanos)))}function Xw(t,e){return new Vm(["projects",t.projectId,"databases",t.database]).child("documents").child(e).canonicalString()}function $w(t){return Cm(yI(t=Vm.fromString(t))),t}function Jw(t,e){return Xw(t.databaseId,e.path)}function Zw(t,e){if((e=$w(e)).get(1)!==t.databaseId.projectId)throw new ym(gm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.databaseId.projectId);if(e.get(3)!==t.databaseId.database)throw new ym(gm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.databaseId.database);return new ab(rI(e))}function tI(t,e){return Xw(t.databaseId,e)}function eI(t){return 4===(t=$w(t)).length?Vm.emptyPath():rI(t)}function nI(t){return new Vm(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rI(t){return Cm(4<t.length&&"documents"===t.get(4)),t.popFirst(5)}function iI(t,e,n){return{name:Jw(t,e),fields:n.toProto().mapValue.fields}}function oI(t,e,n){var r=Zw(t,e.name);return t=Yw(e.updateTime),e=new _b({mapValue:{fields:e.fields}}),e=Ib.newFoundDocument(r,t,e),n&&e.setHasCommittedMutations(),n?e.setHasCommittedMutations():e}function aI(t,e){var n,r,i;if(e instanceof $_)n={update:iI(t,e.key,e.value)};else if(e instanceof uw)n={delete:Jw(t,e.key)};else if(e instanceof J_)n={update:iI(t,e.key,e.data),updateMask:(i=e.fieldMask,r=[],i.fields.forEach((function(t){return r.push(t.canonicalString())})),{fieldPaths:r})};else{if(!(e instanceof cw))return Sm();n={verify:Jw(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map((function(t){var e=t.transform;if(e instanceof k_)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(e instanceof O_)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:e.elements}};if(e instanceof x_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:e.elements}};if(e instanceof M_)return{fieldPath:t.field.canonicalString(),increment:e.A};throw Sm()}))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:(e=t,t=i.updateTime,Gw(e,t.toTimestamp()))}:void 0!==i.exists?{exists:i.exists}:Sm()),n}function sI(t,e){var n=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?K_.updateTime(Yw(a.updateTime)):void 0!==a.exists?K_.exists(a.exists):K_.none():K_.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n,r=null;return"setToServerValue"in e?(Cm("REQUEST_TIME"===e.setToServerValue),r=new k_):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new O_(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new x_(n)):"increment"in e?r=new M_(t,e.increment):Sm(),e=Km.fromServerFormat(e.fieldPath),new B_(e,r)}(t,e)})):[];if(e.update){e.update.name;var i=Zw(t,e.update.name),o=new _b({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=(a=e.updateMask.fieldPaths||[],new zm(a.map((function(t){return Km.fromServerFormat(t)}))));return new J_(i,o,a,n,r)}return new $_(i,o,n,r)}return e.delete?(r=Zw(t,e.delete),new uw(r,n)):e.verify?(e=Zw(t,e.verify),new cw(e,n)):Sm()}function uI(t,e){return{documents:[tI(t,e.path)]}}function cI(t,e){var n={structuredQuery:{}},r=e.path;return null!==e.collectionGroup?(n.parent=tI(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=tI(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),(r=function(t){if(0!==t.length)return 1===(t=t.map((function(t){if("=="===t.op){if(mb(t.value))return{unaryFilter:{field:dI(t.field),op:"IS_NAN"}};if(yb(t.value))return{unaryFilter:{field:dI(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(mb(t.value))return{unaryFilter:{field:dI(t.field),op:"IS_NOT_NAN"}};if(yb(t.value))return{unaryFilter:{field:dI(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dI(t.field),op:(e=t.op,Ww[e]),value:t.value}};var e}))).length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(e.filters))&&(n.structuredQuery.where=r),(r=function(t){if(0!==t.length)return t.map((function(t){return{field:dI((t=t).field),direction:(t=t.dir,zw[t])}}))}(e.orderBy))&&(n.structuredQuery.orderBy=r),r=e.limit,null!==(r=t.I||rb(r)?r:{value:r})&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=hI(e.startAt)),e.endAt&&(n.structuredQuery.endAt=hI(e.endAt)),n}function lI(t){var e=eI(t.parent),n=t.structuredQuery,r=null;0<(a=n.from?n.from.length:0)&&(Cm(1===a),(s=n.from[0]).allDescendants?r=s.collectionId:e=e.child(s.collectionId));var i=[];n.where&&(i=function t(e){return e?void 0!==e.unaryFilter?[gI(e)]:void 0!==e.fieldFilter?[vI(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Sm():[]}(n.where));var o=[],a=(t=null,null),s=null;return a_(e,r,o=n.orderBy?n.orderBy.map((function(t){return new n_(pI((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e})):o,i,t=n.limit?rb(i="object"==typeof(i=n.limit)?i.value:i)?null:i:t,"F",a=n.startAt?fI(n.startAt):a,s=n.endAt?fI(n.endAt):s)}function hI(t){return{before:t.before,values:t.position}}function fI(t){var e=!!t.before;return t=t.values||[],new Xb(t,e)}function dI(t){return{fieldPath:t.canonicalString()}}function pI(t){return Km.fromServerFormat(t.fieldPath)}function vI(t){return Ab.create(pI(t.fieldFilter.field),function(){switch(t.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Sm()}}(),t.fieldFilter.value)}function gI(t){switch(t.unaryFilter.op){case"IS_NAN":var e=pI(t.unaryFilter.field);return Ab.create(e,"==",{doubleValue:NaN});case"IS_NULL":return e=pI(t.unaryFilter.field),Ab.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var n=pI(t.unaryFilter.field);return Ab.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":return n=pI(t.unaryFilter.field),Ab.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Sm()}}function yI(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function mI(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=bI(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}(t.get(n),e);return bI(e)}function bI(t){return t+"\x01\x01"}function _I(t){var e=t.length;if(Cm(2<=e),2===e)return Cm("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Vm.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||n<a)&&Sm(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:Sm()}o=a+2}return new Vm(r)}function wI(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var II=function(t,e){this.seconds=t,this.nanoseconds=e};function TI(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}function EI(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}wI.store="owner",wI.key="owner",TI.store="mutationQueues",TI.keyPath="userId",EI.store="mutations",EI.keyPath="batchId",EI.userMutationsIndex="userMutationsIndex",EI.userMutationsKeyPath=["userId","batchId"];var SI=(CI.prefixForUser=function(t){return[t]},CI.prefixForPath=function(t,e){return[t,mI(e)]},CI.key=function(t,e,n){return[t,mI(e),n]},CI);function CI(){}function kI(t,e){this.path=t,this.readTime=e}function OI(t,e){this.path=t,this.version=e}SI.store="documentMutations",SI.PLACEHOLDER=new SI;var NI=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};function AI(t){this.byteSize=t}function PI(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}NI.store="remoteDocuments",NI.readTimeIndex="readTimeIndex",NI.readTimeIndexPath="readTime",NI.collectionReadTimeIndex="collectionReadTimeIndex",NI.collectionReadTimeIndexPath=["parentPath","readTime"],AI.store="remoteDocumentGlobal",AI.key="remoteDocumentGlobalKey",PI.store="targets",PI.keyPath="targetId",PI.queryTargetsIndexName="queryTargetsIndex",PI.queryTargetsKeyPath=["canonicalId","targetId"];var RI=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};function xI(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function DI(t,e){this.collectionId=t,this.parent=e}function LI(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}function jI(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}function MI(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}RI.store="targetDocuments",RI.keyPath=["targetId","path"],RI.documentTargetsIndex="documentTargetsIndex",RI.documentTargetsKeyPath=["path","targetId"],xI.key="targetGlobalKey",xI.store="targetGlobal",DI.store="collectionParents",DI.keyPath=["collectionId","parent"],LI.store="clientMetadata",LI.keyPath="clientId",jI.store="bundles",jI.keyPath="bundleId",MI.store="namedQueries",MI.keyPath="name";var FI,UI=eo(eo([],eo(eo([],eo(eo([],eo(eo([],[TI.store,EI.store,SI.store,NI.store,PI.store,wI.store,xI.store,RI.store]),[LI.store])),[AI.store])),[DI.store])),[jI.store,MI.store]),qI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",VI=(JI.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},JI.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},kn=JI,function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}),BI=($I.prototype.catch=function(t){return this.next(void 0,t)},$I.prototype.next=function(t,e){var n=this;return this.callbackAttached&&Sm(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new $I((function(r,i){n.nextCallback=function(e){n.wrapSuccess(t,e).next(r,i)},n.catchCallback=function(t){n.wrapFailure(e,t).next(r,i)}}))},$I.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},$I.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof $I?e:$I.resolve(e)}catch(t){return $I.reject(t)}},$I.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction((function(){return t(e)})):$I.resolve(e)},$I.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction((function(){return t(e)})):$I.reject(e)},$I.resolve=function(t){return new $I((function(e,n){e(t)}))},$I.reject=function(t){return new $I((function(e,n){n(t)}))},$I.waitFor=function(t){return new $I((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(t){return n(t)}))})),o=!0,i===r&&e()}))},$I.or=function(t){for(var e=$I.resolve(!1),n=0,r=t;n<r.length;n++)!function(t){e=e.next((function(e){return e?$I.resolve(e):t()}))}(r[n]);return e},$I.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},$I),KI=(XI.open=function(t,e,n,r){try{return new XI(e,t.transaction(r,n))}catch(t){throw new HI(e,t)}},Object.defineProperty(XI.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),XI.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(wm("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},XI.prototype.store=function(t){return t=this.transaction.objectStore(t),new tT(t)},XI),zI=(YI.delete=function(t){return wm("SimpleDb","Removing database:",t),nT(window.indexedDB.deleteDatabase(t)).toPromise()},YI.yt=function(){if("undefined"==typeof indexedDB)return!1;if(YI.gt())return!0;var t=po(),e=0<(n=YI._t(t))&&n<10,n=0<(n=YI.Et(t))&&n<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||e||n)},YI.gt=function(){var t;return"undefined"!=typeof n&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"/olx-clone",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===t?void 0:t.Tt)},YI.It=function(t,e){return t.store(e)},YI._t=function(t){return t=(t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i))?t[1].split("_").slice(0,2).join("."):"-1",Number(t)},YI.Et=function(t){return t=(t=t.match(/Android ([\d.]+)/i))?t[1].split(".").slice(0,2).join("."):"-1",Number(t)},YI.prototype.At=function(t){return $i(this,void 0,void 0,(function(){var e,n=this;return Ji(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(wm("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){t=t.target.result,e(t)},i.onblocked=function(){r(new HI(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){"VersionError"===(e=e.target.error).name?r(new ym(gm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new HI(t,e))},i.onupgradeneeded=function(t){wm("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){wm("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},YI.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},YI.prototype.runTransaction=function(t,e,n,r){return $i(this,void 0,void 0,(function(){var i,o,a,s;return Ji(this,(function(u){switch(u.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u;return Ji(this,(function(c){switch(c.label){case 0:++o,c.label=1;case 1:return c.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=c.sent(),e=KI.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),BI.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(c.sent(),s),u)];case 4:return s=c.sent(),u="FirebaseError"!==s.name&&o<3,wm("SimpleDb","Transaction failed with error:",s.message,"Retrying:",u),a.close(),u?[3,5]:[2,{value:Promise.reject(s)}];case 5:return[2]}}))},a=this,u.label=1;case 1:return[5,s()];case 2:if("object"==typeof(s=u.sent()))return[2,s.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},YI.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},YI),WI=(Object.defineProperty(QI.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(QI.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(QI.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),QI.prototype.done=function(){this.Vt=!0},QI.prototype.Ct=function(t){this.St=t},QI.prototype.delete=function(){return nT(this.Pt.delete())},QI),HI=(Yi(GI,FI=ym),GI);function GI(t,e){var n=this;return(n=FI.call(this,gm.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function QI(t){this.Pt=t,this.Vt=!1,this.St=null}function YI(t,e,n){this.name=t,this.version=e,this.wt=n,12.2===YI._t(po())&&Im("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function XI(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new VI,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new HI(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){e=iT(e.target.error),n.ft.reject(new HI(t,e))}}function $I(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}function JI(){this.onCommittedListeners=[]}function ZI(t){return"IndexedDbTransactionError"===t.name}var tT=(eT.prototype.put=function(t,e){return nT(t=void 0!==e?(wm("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(wm("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},eT.prototype.add=function(t){return wm("SimpleDb","ADD",this.store.name,t,t),nT(this.store.add(t))},eT.prototype.get=function(t){var e=this;return nT(this.store.get(t)).next((function(n){return void 0===n&&(n=null),wm("SimpleDb","GET",e.store.name,t,n),n}))},eT.prototype.delete=function(t){return wm("SimpleDb","DELETE",this.store.name,t),nT(this.store.delete(t))},eT.prototype.count=function(){return wm("SimpleDb","COUNT",this.store.name),nT(this.store.count())},eT.prototype.Nt=function(t,e){e=this.cursor(this.options(t,e));var n=[];return this.xt(e,(function(t,e){n.push(e)})).next((function(){return n}))},eT.prototype.Ft=function(t,e){return wm("SimpleDb","DELETE ALL",this.store.name),(e=this.options(t,e)).kt=!1,e=this.cursor(e),this.xt(e,(function(t,e,n){return n.delete()}))},eT.prototype.Ot=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.xt(n,e)},eT.prototype.$t=function(t){var e=this.cursor({});return new BI((function(n,r){e.onerror=function(t){t=iT(t.target.error),r(t)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},eT.prototype.xt=function(t,e){var n=[];return new BI((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i,o=t.target.result;o?(i=new WI(o),(t=e(o.primaryKey,o.value,i))instanceof BI&&(t=t.catch((function(t){return i.done(),BI.reject(t)})),n.push(t)),i.isDone?r():null===i.Dt?o.continue():o.continue(i.Dt)):r()}})).next((function(){return BI.waitFor(n)}))},eT.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},eT.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},eT);function eT(t){this.store=t}function nT(t){return new BI((function(e,n){t.onsuccess=function(t){t=t.target.result,e(t)},t.onerror=function(t){t=iT(t.target.error),n(t)}}))}var rT=!1;function iT(t){var e=zI._t(po());if(12.2<=e&&e<13&&(e="An internal error was encountered in the Indexed Database server",0<=t.message.indexOf(e))){var n=new ym("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return rT||(rT=!0,setTimeout((function(){throw n}),0)),n}return t}var oT,aT=(Yi(sT,oT=kn),sT);function sT(t,e){var n=this;return(n=oT.call(this)||this).Mt=t,n.currentSequenceNumber=e,n}function uT(t,e){return zI.It(t.Mt,e)}var cT=(vT.prototype.applyToRemoteDocument=function(t,e){for(var n,r,i,o,a,s,u=e.mutationResults,c=0;c<this.mutations.length;c++){var l=this.mutations[c];l.key.isEqual(t.key)&&(n=l,r=t,i=u[c],l=s=a=o=void 0,n instanceof $_?(a=r,s=i,l=(o=n).value.clone(),o=nw(o.fieldTransforms,a,s.transformResults),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()):n instanceof J_?(o=r,a=i,W_((s=n).precondition,o)?(l=nw(s.fieldTransforms,o,a.transformResults),(n=o.data).setAll(ew(s)),n.setAll(l),o.convertToFoundDocument(a.version,n).setHasCommittedMutations()):o.convertToUnknownDocument(a.version)):r.convertToNoDocument(i.version).setHasCommittedMutations())}},vT.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(r=n[e]).key.isEqual(t.key)&&H_(r,t,this.localWriteTime);for(var r,i=0,o=this.mutations;i<o.length;i++)(r=o[i]).key.isEqual(t.key)&&H_(r,t,this.localWriteTime)},vT.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key);n=r,e.applyToLocalView(n),r.isValidDocument()||n.convertToNoDocument(xm.min())}))},vT.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Nw())},vT.prototype.isEqual=function(t){return this.batchId===t.batchId&&Am(this.mutations,t.mutations,G_)&&Am(this.baseMutations,t.baseMutations,G_)},vT),lT=(pT.from=function(t,e,n){Cm(t.mutations.length===n.length);for(var r=kw,i=t.mutations,o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new pT(t,e,n,r)},pT),hT=(dT.prototype.withSequenceNumber=function(t){return new dT(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},dT.prototype.withResumeToken=function(t,e){return new dT(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},dT.prototype.withLastLimboFreeSnapshotVersion=function(t){return new dT(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},dT),fT=function(t){this.Lt=t};function dT(t,e,n,r,i,o,a){void 0===i&&(i=xm.min()),void 0===o&&(o=xm.min()),void 0===a&&(a=Wm.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}function pT(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}function vT(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}function gT(t,e){if(e.document)return oI(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ab.fromSegments(e.noDocument.path),r=wT(e.noDocument.readTime);return n=Ib.newNoDocument(n,r),e.hasCommittedMutations?n.setHasCommittedMutations():n}return e.unknownDocument?(n=ab.fromSegments(e.unknownDocument.path),r=wT(e.unknownDocument.version),Ib.newUnknownDocument(n,r)):Sm()}function yT(t,e,n){var r=mT(n);if(n=e.key.path.popLast().toArray(),e.isFoundDocument()){var i={name:Jw(o=t.Lt,(a=e).key),fields:a.data.toProto().mapValue.fields,updateTime:Gw(o,a.version.toTimestamp())},o=e.hasCommittedMutations;return new NI(null,null,i,o,r,n)}if(e.isNoDocument()){var a=e.key.path.toArray();return i=_T(e.version),o=e.hasCommittedMutations,new NI(null,new kI(a,i),null,o,r,n)}return e.isUnknownDocument()?(o=e.key.path.toArray(),e=_T(e.version),new NI(new OI(o,e),null,null,!0,r,n)):Sm()}function mT(t){return[(t=t.toTimestamp()).seconds,t.nanoseconds]}function bT(t){return t=new Rm(t[0],t[1]),xm.fromTimestamp(t)}function _T(t){return t=t.toTimestamp(),new II(t.seconds,t.nanoseconds)}function wT(t){return t=new Rm(t.seconds,t.nanoseconds),xm.fromTimestamp(t)}function IT(t,e){for(var n=(e.baseMutations||[]).map((function(e){return sI(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i,o=e.mutations[r];r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(i=e.mutations[r+1],o.updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r+1,1),++r)}var a=e.mutations.map((function(e){return sI(t.Lt,e)})),s=Rm.fromMillis(e.localWriteTimeMs);return new cT(e.batchId,s,n,a)}function TT(t){var e=wT(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?wT(t.lastLimboFreeSnapshotVersion):xm.min(),r=void 0!==t.query.documents?(Cm(1===(r=t.query).documents.length),p_(s_(eI(r.documents[0])))):p_(lI(t.query));return new hT(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Wm.fromBase64String(t.resumeToken))}function ET(t,e){var n=_T(e.snapshotVersion),r=_T(e.lastLimboFreeSnapshotVersion),i=(Ob(e.target)?uI:cI)(t.Lt,e.target);return t=e.resumeToken.toBase64(),new PI(e.targetId,Cb(e.target),n,t,e.sequenceNumber,r,i)}function ST(t){var e=lI({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?v_(e,e.limit,"L"):e}var CT=(kT.prototype.getBundleMetadata=function(t,e){return OT(t).get(e).next((function(t){if(t)return{id:(t=t).bundleId,createTime:wT(t.createTime),version:t.version}}))},kT.prototype.saveBundleMetadata=function(t,e){return OT(t).put({bundleId:(e=e).id,createTime:_T(Yw(e.createTime)),version:e.version})},kT.prototype.getNamedQuery=function(t,e){return NT(t).get(e).next((function(t){if(t)return{name:(t=t).name,query:ST(t.bundledQuery),readTime:wT(t.readTime)}}))},kT.prototype.saveNamedQuery=function(t,e){return NT(t).put({name:(e=e).name,readTime:_T(Yw(e.readTime)),bundledQuery:e.bundledQuery})},kT);function kT(){}function OT(t){return uT(t,jI.store)}function NT(t){return uT(t,MI.store)}var AT=(LT.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),BI.resolve()},LT.prototype.getCollectionParents=function(t,e){return BI.resolve(this.Bt.getEntries(e))},LT),PT=(DT.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ww(Vm.comparator);return t=!r.has(n),this.index[e]=r.add(n),t},DT.prototype.has=function(t){var e=t.lastSegment();return t=t.popLast(),(e=this.index[e])&&e.has(t)},DT.prototype.getEntries=function(t){return(this.index[t]||new ww(Vm.comparator)).toArray()},DT),RT=(xT.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(this.qt.has(e))return BI.resolve();var r=e.lastSegment(),i=e.popLast();return t.addOnCommittedListener((function(){n.qt.add(e)})),i={collectionId:r,parent:mI(i)},jT(t).put(i)},xT.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Pm(e),""],!1,!0);return jT(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(_I(o.parent))}return n}))},xT);function xT(){this.qt=new PT}function DT(){this.index={}}function LT(){this.Bt=new PT}function jT(t){return uT(t,DI.store)}var MT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},FT=(UT.withCacheSize=function(t){return new UT(t,UT.DEFAULT_COLLECTION_PERCENTILE,UT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},UT);function UT(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}function qT(t,e,n){var r=t.store(EI.store),i=t.store(SI.store),o=[],a=(t=IDBKeyRange.only(n.batchId),0);t=r.Ot({range:t},(function(t,e,n){return a++,n.delete()})),o.push(t.next((function(){Cm(1===a)})));for(var s=[],u=0,c=n.mutations;u<c.length;u++){var l=c[u],h=SI.key(e,l.key.path,n.batchId);o.push(i.delete(h)),s.push(l.key)}return BI.waitFor(o).next((function(){return s}))}function VT(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Sm();e=t.noDocument}return JSON.stringify(e).length}FT.DEFAULT_COLLECTION_PERCENTILE=10,FT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,FT.DEFAULT=new FT(41943040,FT.DEFAULT_COLLECTION_PERCENTILE,FT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),FT.DISABLED=new FT(-1,0,0);var BT=(KT.Kt=function(t,e,n,r){return Cm(""!==t.uid),new KT(t.isAuthenticated()?t.uid:"",e,n,r)},KT.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return WT(t).Ot({index:EI.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},KT.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=HT(t),a=WT(t);return a.add({}).next((function(s){Cm("number"==typeof s);for(var u,c,l,h,f,d=new cT(s,e,n,r),p=(u=i.R,c=i.userId,h=(l=d).baseMutations.map((function(t){return aI(u.Lt,t)})),f=l.mutations.map((function(t){return aI(u.Lt,t)})),new EI(c,l.batchId,l.localWriteTime.toMillis(),h,f)),v=[],g=new ww((function(t,e){return Nm(t.canonicalString(),e.canonicalString())})),y=0,m=r;y<m.length;y++){var b=m[y],_=SI.key(i.userId,b.key.path,s);g=g.add(b.key.path.popLast()),v.push(a.put(p)),v.push(o.put(_,SI.PLACEHOLDER))}return g.forEach((function(e){v.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=d.keys()})),BI.waitFor(v).next((function(){return d}))}))},KT.prototype.lookupMutationBatch=function(t,e){var n=this;return WT(t).get(e).next((function(t){return t?(Cm(t.userId===n.userId),IT(n.R,t)):null}))},KT.prototype.jt=function(t,e){var n=this;return this.Qt[e]?BI.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){return t?(t=t.keys(),n.Qt[e]=t):null}))},KT.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=(e=IDBKeyRange.lowerBound([this.userId,r]),null);return WT(t).Ot({index:EI.userMutationsIndex,range:e},(function(t,e,o){e.userId===n.userId&&(Cm(e.batchId>=r),i=IT(n.R,e)),o.done()})).next((function(){return i}))},KT.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return WT(t).Ot({index:EI.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},KT.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return WT(t).Nt(EI.userMutationsIndex,n).next((function(t){return t.map((function(t){return IT(e.R,t)}))}))},KT.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=SI.prefixForPath(this.userId,e.path),i=(r=IDBKeyRange.lowerBound(r),[]);return HT(t).Ot({range:r},(function(r,o,a){var s=r[0],u=r[1];if(r=r[2],u=_I(u),s===n.userId&&e.path.isEqual(u))return WT(t).get(r).next((function(t){if(!t)throw Sm();Cm(t.userId===n.userId),i.push(IT(n.R,t))}));a.done()})).next((function(){return i}))},KT.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ww(Nm),i=[];return e.forEach((function(e){var o=SI.prefixForPath(n.userId,e.path);o=IDBKeyRange.lowerBound(o),o=HT(t).Ot({range:o},(function(t,i,o){var a=t[0],s=t[1];t=t[2],s=_I(s),a===n.userId&&e.path.isEqual(s)?r=r.add(t):o.done()})),i.push(o)})),BI.waitFor(i).next((function(){return n.Wt(t,r)}))},KT.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=(e=SI.prefixForPath(this.userId,r),e=IDBKeyRange.lowerBound(e),new ww(Nm));return HT(t).Ot({range:e},(function(t,e,a){var s=t[0],u=t[1];t=t[2],u=_I(u),s===n.userId&&r.isPrefixOf(u)?u.length===i&&(o=o.add(t)):a.done()})).next((function(){return n.Wt(t,o)}))},KT.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(WT(t).get(e).next((function(t){if(null===t)throw Sm();Cm(t.userId===n.userId),r.push(IT(n.R,t))})))})),BI.waitFor(i).next((function(){return r}))},KT.prototype.removeMutationBatch=function(t,e){var n=this;return qT(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),BI.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},KT.prototype.Gt=function(t){delete this.Qt[t]},KT.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return BI.resolve();n=IDBKeyRange.lowerBound(SI.prefixForUser(e.userId));var r=[];return HT(t).Ot({range:n},(function(t,n,i){t[0]===e.userId?(t=_I(t[1]),r.push(t)):i.done()})).next((function(){Cm(0===r.length)}))}))},KT.prototype.containsKey=function(t,e){return zT(t,this.userId,e)},KT.prototype.zt=function(t){var e=this;return GT(t).get(this.userId).next((function(t){return t||new TI(e.userId,-1,"")}))},KT);function KT(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}function zT(t,e,n){var r=(n=SI.prefixForPath(e,n.path))[1],i=(n=IDBKeyRange.lowerBound(n),!1);return HT(t).Ot({range:n,kt:!0},(function(t,n,o){var a=t[0],s=t[1];t[2],a===e&&s===r&&(i=!0),o.done()})).next((function(){return i}))}function WT(t){return uT(t,EI.store)}function HT(t){return uT(t,SI.store)}function GT(t){return uT(t,TI.store)}var QT=($T.prototype.next=function(){return this.Ht+=2,this.Ht},$T.Jt=function(){return new $T(0)},$T.Yt=function(){return new $T(-1)},$T),YT=(XT.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new QT(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},XT.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return xm.fromTimestamp(new Rm(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},XT.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},XT.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},XT.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},XT.prototype.updateTargetData=function(t,e){return this.te(t,e)},XT.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return JT(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Cm(0<e.targetCount),--e.targetCount,n.Zt(t,e)}))},XT.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return JT(t).Ot((function(a,s){(s=TT(s)).sequenceNumber<=e&&null===n.get(s.targetId)&&(i++,o.push(r.removeTargetData(t,s)))})).next((function(){return BI.waitFor(o)})).next((function(){return i}))},XT.prototype.forEachTarget=function(t,e){return JT(t).Ot((function(t,n){n=TT(n),e(n)}))},XT.prototype.Xt=function(t){return ZT(t).get(xI.key).next((function(t){return Cm(null!==t),t}))},XT.prototype.Zt=function(t,e){return ZT(t).put(xI.key,e)},XT.prototype.te=function(t,e){return JT(t).put(ET(this.R,e))},XT.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},XT.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},XT.prototype.getTargetData=function(t,e){var n=Cb(e),r=(n=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),null);return JT(t).Ot({range:n,index:PI.queryTargetsIndexName},(function(t,n,i){n=TT(n),kb(e,n.target)&&(r=n,i.done())})).next((function(){return r}))},XT.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=tE(t);return e.forEach((function(e){var a=mI(e.path);i.push(o.put(new RI(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),BI.waitFor(i)},XT.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=tE(t);return BI.forEach(e,(function(e){var o=mI(e.path);return BI.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},XT.prototype.removeMatchingKeysForTargetId=function(t,e){return t=tE(t),e=IDBKeyRange.bound([e],[e+1],!1,!0),t.delete(e)},XT.prototype.getMatchingKeysForTargetId=function(t,e){e=IDBKeyRange.bound([e],[e+1],!1,!0),t=tE(t);var n=Nw();return t.Ot({range:e,kt:!0},(function(t,e,r){t=_I(t[1]),t=new ab(t),n=n.add(t)})).next((function(){return n}))},XT.prototype.containsKey=function(t,e){e=mI(e.path),e=IDBKeyRange.bound([e],[Pm(e)],!1,!0);var n=0;return tE(t).Ot({index:RI.documentTargetsIndex,kt:!0,range:e},(function(t,e,r){var i=t[0];t[1],0!==i&&(n++,r.done())})).next((function(){return 0<n}))},XT.prototype.lt=function(t,e){return JT(t).get(e).next((function(t){return t?TT(t):null}))},XT);function XT(t,e){this.referenceDelegate=t,this.R=e}function $T(t){this.Ht=t}function JT(t){return uT(t,PI.store)}function ZT(t){return uT(t,xI.store)}function tE(t){return uT(t,RI.store)}function eE(t){return $i(this,void 0,void 0,(function(){return Ji(this,(function(e){if(t.code!==gm.FAILED_PRECONDITION||t.message!==qI)throw t;return wm("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function nE(t,e){var n=t[0],r=t[1];return t=e[0],e=e[1],0===(t=Nm(n,t))?Nm(r,e):t}var rE=(lE.prototype.ie=function(){return++this.se},lE.prototype.re=function(t){var e=[t,this.ie()];this.buffer.size<this.ne?this.buffer=this.buffer.add(e):nE(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(lE.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),lE),iE=(cE.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},cE.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(cE.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),cE.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;wm("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return $i(e,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ZI(e=n.sent())?(wm("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,eE(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},cE),oE=(uE.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},uE.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return BI.resolve(dm.o);var r=new rE(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},uE.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},uE.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},uE.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(wm("LruGarbageCollector","Garbage collection skipped; disabled"),BI.resolve(MT)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(wm("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),MT):n.fe(t,e)}))},uE.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},uE.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return r=e>c.params.maximumSequenceNumbersToCollect?(wm("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),c.params.maximumSequenceNumbersToCollect):e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),_m()<=ea.DEBUG&&wm("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),BI.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},uE),aE=(sE.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},sE.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},sE.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},sE.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},sE.prototype.addReference=function(t,e,n){return hE(t,n)},sE.prototype.removeReference=function(t,e,n){return hE(t,n)},sE.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},sE.prototype.markPotentiallyOrphaned=hE,sE.prototype._e=function(t,e){return r=e,i=!1,GT(n=t).$t((function(t){return zT(n,t,r).next((function(t){return t&&(i=!0),BI.resolve(!t)}))})).next((function(){return i}));var n,r,i},sE.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){s<=e&&(s=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),tE(t).delete([0,mI(a.path)])}))})),i.push(s))})).next((function(){return BI.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},sE.prototype.removeTarget=function(t,e){return e=e.withSequenceNumber(t.currentSequenceNumber),this.db.getTargetCache().updateTargetData(t,e)},sE.prototype.updateLimboDocument=hE,sE.prototype.we=function(t,e){t=tE(t);var n,r=dm.o;return t.Ot({index:RI.documentTargetsIndex},(function(t,i){var o=t[0];t[1],t=i.path,i=i.sequenceNumber,0===o?(r!==dm.o&&e(new ab(_I(n)),r),r=i,n=t):r=dm.o})).next((function(){r!==dm.o&&e(new ab(_I(n)),r)}))},sE.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},sE);function sE(t,e){this.db=t,this.garbageCollector=new oE(this,e)}function uE(t,e){this.ae=t,this.params=e}function cE(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}function lE(t){this.ne=t,this.buffer=new ww(nE),this.se=0}function hE(t,e){return tE(t).put((t=t.currentSequenceNumber,new RI(0,mI(e.path),t)))}var fE,dE=(bE.prototype.get=function(t){var e=this.mapKeyFn(t);if(void 0!==(e=this.inner[e]))for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];if(this.equalsFn(i,t))return o}},bE.prototype.has=function(t){return void 0!==this.get(t)},bE.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},bE.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},bE.prototype.forEach=function(t){Mm(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=(a=i[r])[0],a=a[1];t(o,a)}}))},bE.prototype.isEmpty=function(){return Fm(this.inner)},bE),pE=(mE.prototype.getReadTime=function(t){return(t=this.changes.get(t))?t.readTime:xm.min()},mE.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},mE.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Ib.newInvalidDocument(t),readTime:e})},mE.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?BI.resolve(n.document):this.getFromCache(t,e)},mE.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},mE.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},mE.prototype.assertNotApplied=function(){},W=mE,yE.prototype.addEntry=function(t,e,n){return wE(t).put(IE(e),n)},yE.prototype.removeEntry=function(t,e){return t=wE(t),e=IE(e),t.delete(e)},yE.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},yE.prototype.getEntry=function(t,e){var n=this;return wE(t).get(IE(e)).next((function(t){return n.ye(e,t)}))},yE.prototype.ge=function(t,e){var n=this;return wE(t).get(IE(e)).next((function(t){return{document:n.ye(e,t),size:VT(t)}}))},yE.prototype.getEntries=function(t,e){var n=this,r=Tw;return this.pe(t,e,(function(t,e){e=n.ye(t,e),r=r.insert(t,e)})).next((function(){return r}))},yE.prototype.Ee=function(t,e){var n=this,r=Tw,i=new pw(ab.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,VT(e))})).next((function(){return{documents:r,Te:i}}))},yE.prototype.pe=function(t,e,n){if(e.isEmpty())return BI.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return wE(t).Ot({range:r},(function(t,e,r){for(var a=ab.fromSegments(t);o&&ab.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},yE.prototype.getDocumentsMatchingQuery=function(t,e,n){var r,i=this,o=Tw,a=e.path.length+1,s={};return n.isEqual(xm.min())?(r=e.path.toArray(),s.range=IDBKeyRange.lowerBound(r)):(r=e.path.toArray(),n=mT(n),s.range=IDBKeyRange.lowerBound([r,n],!0),s.index=NI.collectionReadTimeIndex),wE(t).Ot(s,(function(t,n,r){t.length===a&&(n=gT(i.R,n),e.path.isPrefixOf(n.key.path)?b_(e,n)&&(o=o.insert(n.key,n)):r.done())})).next((function(){return o}))},yE.prototype.newChangeBuffer=function(t){return new vE(this,!!t&&t.trackRemovals)},yE.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},yE.prototype.getMetadata=function(t){return _E(t).get(AI.key).next((function(t){return Cm(!!t),t}))},yE.prototype.me=function(t,e){return _E(t).put(AI.key,e)},yE.prototype.ye=function(t,e){return!e||(e=gT(this.R,e)).isNoDocument()&&e.version.isEqual(xm.min())?Ib.newInvalidDocument(t):e},yE),vE=(Yi(gE,fE=W),gE.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new ww((function(t,e){return Nm(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s,u=e.Ae.get(o);a.document.isValidDocument()?(s=yT(e.Ie.R,a.document,e.getReadTime(o)),i=i.add(o.path.popLast()),a=VT(s),r+=a-u,n.push(e.Ie.addEntry(t,o,s))):(r-=u,e.trackRemovals?(u=yT(e.Ie.R,Ib.newNoDocument(o,xm.min()),e.getReadTime(o)),n.push(e.Ie.addEntry(t,o,u))):n.push(e.Ie.removeEntry(t,o)))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),BI.waitFor(n)},gE.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},gE.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},gE);function gE(t,e){var n=this;return(n=fE.call(this)||this).Ie=t,n.trackRemovals=e,n.Ae=new dE((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),n}function yE(t,e){this.R=t,this.Ut=e}function mE(){this.changes=new dE((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}function bE(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}function _E(t){return uT(t,AI.store)}function wE(t){return uT(t,NI.store)}function IE(t){return t.path.toArray()}var TE=(EE.prototype.Rt=function(t,e,n,r){var i=this;Cm(n<r&&0<=n&&r<=11);var o=new KI("createOrUpgrade",e);n<1&&1<=r&&(t.createObjectStore(wI.store),(a=t).createObjectStore(TI.store,{keyPath:TI.keyPath}),a.createObjectStore(EI.store,{keyPath:EI.keyPath,autoIncrement:!0}).createIndex(EI.userMutationsIndex,EI.userMutationsKeyPath,{unique:!0}),a.createObjectStore(SI.store),SE(t),t.createObjectStore(NI.store));var a,s=BI.resolve();return n<3&&3<=r&&(0!==n&&((a=t).deleteObjectStore(RI.store),a.deleteObjectStore(PI.store),a.deleteObjectStore(xI.store),SE(t)),s=s.next((function(){return t=o.store(xI.store),e=new xI(0,0,xm.min().toTimestamp(),0),t.put(xI.key,e);var t,e}))),n<4&&4<=r&&(s=(s=0!==n?s.next((function(){return e=t,(n=o).store(EI.store).Nt().next((function(t){e.deleteObjectStore(EI.store),e.createObjectStore(EI.store,{keyPath:EI.keyPath,autoIncrement:!0}).createIndex(EI.userMutationsIndex,EI.userMutationsKeyPath,{unique:!0});var r=n.store(EI.store);return t=t.map((function(t){return r.put(t)})),BI.waitFor(t)}));var e,n})):s).next((function(){t.createObjectStore(LI.store,{keyPath:LI.keyPath})}))),n<5&&5<=r&&(s=s.next((function(){return i.Re(o)}))),n<6&&6<=r&&(s=s.next((function(){return t.createObjectStore(AI.store),i.be(o)}))),n<7&&7<=r&&(s=s.next((function(){return i.ve(o)}))),n<8&&8<=r&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&9<=r&&(s=s.next((function(){var n;(n=t).objectStoreNames.contains("remoteDocumentChanges")&&n.deleteObjectStore("remoteDocumentChanges"),(n=e.objectStore(NI.store)).createIndex(NI.readTimeIndex,NI.readTimeIndexPath,{unique:!1}),n.createIndex(NI.collectionReadTimeIndex,NI.collectionReadTimeIndexPath,{unique:!1})}))),n<10&&10<=r&&(s=s.next((function(){return i.Ve(o)}))),n<11&&11<=r?s.next((function(){t.createObjectStore(jI.store,{keyPath:jI.keyPath}),t.createObjectStore(MI.store,{keyPath:MI.keyPath})})):s},EE.prototype.be=function(t){var e=0;return t.store(NI.store).Ot((function(t,n){e+=VT(n)})).next((function(){var n=new AI(e);return t.store(AI.store).put(AI.key,n)}))},EE.prototype.Re=function(t){var e=this,n=t.store(TI.store),r=t.store(EI.store);return n.Nt().next((function(n){return BI.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(EI.userMutationsIndex,i).next((function(r){return BI.forEach(r,(function(r){return Cm(r.userId===n.userId),r=IT(e.R,r),qT(t,n.userId,r).next((function(){}))}))}))}))}))},EE.prototype.ve=function(t){var e=t.store(RI.store),n=t.store(NI.store);return t.store(xI.store).get(xI.key).next((function(t){var r=[];return n.Ot((function(n,i){var o=new Vm(n);n=[0,mI(o)],r.push(e.get(n).next((function(n){return n?BI.resolve():e.put(new RI(0,mI(o),t.highestListenSequenceNumber))})))})).next((function(){return BI.waitFor(r)}))}))},EE.prototype.Pe=function(t,e){function n(t){if(i.add(t)){var e=t.lastSegment();return t=t.popLast(),r.put({collectionId:e,parent:mI(t)})}}t.createObjectStore(DI.store,{keyPath:DI.keyPath});var r=e.store(DI.store),i=new PT;return e.store(NI.store).Ot({kt:!0},(function(t,e){return n((t=new Vm(t)).popLast())})).next((function(){return e.store(SI.store).Ot({kt:!0},(function(t,e){t[0];var r=t[1];return n((t[2],r=_I(r)).popLast())}))}))},EE.prototype.Ve=function(t){var e=this,n=t.store(PI.store);return n.Ot((function(t,r){return r=TT(r),r=ET(e.R,r),n.put(r)}))},EE);function EE(t){this.R=t}function SE(t){t.createObjectStore(RI.store,{keyPath:RI.keyPath}).createIndex(RI.documentTargetsIndex,RI.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(PI.store,{keyPath:PI.keyPath}).createIndex(PI.queryTargetsIndexName,PI.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(xI.store)}var CE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kE=(OE.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ym(gm.FAILED_PRECONDITION,CE);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new dm(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},OE.prototype.He=function(t){var e=this;return this.Me=function(n){return $i(e,void 0,void 0,(function(){return Ji(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},OE.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return $i(e,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},OE.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return $i(e,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},OE.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return AE(e).put(new LI(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ZI(e))return wm("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return wm("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},OE.prototype.Je=function(t){var e=this;return NE(t).get(wI.key).next((function(t){return BI.resolve(e.tn(t))}))},OE.prototype.en=function(t){return AE(t).delete(this.clientId)},OE.prototype.nn=function(){return $i(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Ji(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=uT(t,LI.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return BI.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},OE.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},OE.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},OE.prototype.Ye=function(t){var e=this;return this.Ce?BI.resolve(!0):NE(t).get(wI.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new ym(gm.FAILED_PRECONDITION,CE);return!1}}return!(!e.networkEnabled||!e.inForeground)||AE(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground;if(t=e.networkEnabled===t.networkEnabled,n||r&&t)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&wm("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},OE.prototype.shutdown=function(){return $i(this,void 0,void 0,(function(){var t=this;return Ji(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[wI.store,LI.store],(function(e){var n=new aT(e,dm.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},OE.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},OE.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return AE(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(OE.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),OE.prototype.getMutationQueue=function(t){return BT.Kt(t,this.R,this.Ut,this.referenceDelegate)},OE.prototype.getTargetCache=function(){return this.qe},OE.prototype.getRemoteDocumentCache=function(){return this.Ue},OE.prototype.getIndexManager=function(){return this.Ut},OE.prototype.getBundleCache=function(){return this.Qe},OE.prototype.runTransaction=function(t,e,n){var r=this;wm("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,UI,(function(o){return i=new aT(o,r.Ne?r.Ne.next():dm.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Im("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new ym(gm.FAILED_PRECONDITION,qI);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},OE.prototype.dn=function(t){var e=this;return NE(t).get(wI.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ym(gm.FAILED_PRECONDITION,CE)}))},OE.prototype.Ze=function(t){var e=new wI(this.clientId,this.allowTabSynchronization,Date.now());return NE(t).put(wI.key,e)},OE.yt=function(){return zI.yt()},OE.prototype.Xe=function(t){var e=this,n=NE(t);return n.get(wI.key).next((function(t){return e.tn(t)?(wm("IndexedDbPersistence","Releasing primary lease."),n.delete(wI.key)):BI.resolve()}))},OE.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Im("Detected an update time that is in the future: "+t+" > "+n),1))},OE.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},OE.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},OE.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("unload",this.Fe))},OE.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},OE.prototype.cn=function(t){try{var e=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return wm("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Im("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},OE.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Im("Failed to set zombie client id.",t)}},OE.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},OE.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},OE);function OE(t,e,n,r,i,o,a,s,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Se=i,this.window=o,this.document=a,this.De=u,this.Ce=c,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!OE.yt())throw new ym(gm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new aE(this,r),this.Le=e+"main",this.R=new fT(s),this.Be=new zI(this.Le,11,new TE(this.R)),this.qe=new YT(this.referenceDelegate,this.R),this.Ut=new RT,this.Ue=(e=this.R,s=this.Ut,new pE(e,s)),this.Qe=new CT,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===c&&Im("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function NE(t){return uT(t,wI.store)}function AE(t){return uT(t,LI.store)}function PE(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function RE(t,e){this.progress=t,this.wn=e}var xE=(qE.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},qE.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},qE.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},qE.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},qE.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},qE.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,ab.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):f_(e)?this.In(t,e,n):this.An(t,e,n);var r},qE.prototype.Tn=function(t,e){return this.mn(t,new ab(e)).next((function(t){var e=Cw;return t.isFoundDocument()?e.insert(t.key,t):e}))},qE.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Cw;return this.Ut.getCollectionParents(t,i).next((function(a){return BI.forEach(a,(function(a){var s=(s=e,a=a.child(i),new o_(a,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},qE.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=Ib.newInvalidDocument(c),r=r.insert(c,l)),H_(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){b_(e,n)||(r=r.remove(t))})),r}))},qE.prototype.Rn=function(t,e,n){for(var r=Nw(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof J_&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},qE),DE=(UE.Pn=function(t,e){for(var n=Nw(),r=Nw(),i=0,o=e.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}}return new UE(t,e.fromCache,n,r)},UE),LE=(FE.prototype.Vn=function(t){this.Sn=t},FE.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())||n.isEqual(xm.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(u_(e)||c_(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(_m()<=ea.DEBUG&&wm("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),m_(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},FE.prototype.Cn=function(t,e){var n=new ww(__(t));return e.forEach((function(e,r){b_(t,r)&&(n=n.add(r))})),n},FE.prototype.Nn=function(t,e,n,r){return n.size!==e.size||!!(e="F"===t?e.last():e.first())&&(e.hasPendingWrites||0<e.version.compareTo(r))},FE.prototype.Dn=function(t,e){return _m()<=ea.DEBUG&&wm("QueryEngine","Using full collection scan to execute query:",m_(e)),this.Sn.getDocumentsMatchingQuery(t,e,xm.min())},FE),jE=(ME.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},ME);function ME(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new pw(Nm),this.kn=new dE(Cb,kb),this.On=xm.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new xE(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}function FE(){}function UE(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}function qE(t,e,n){this.Ue=t,this._n=e,this.Ut=n}function VE(t,e,n,r){return new jE(t,e,n,r)}function BE(t,e){return $i(this,void 0,void 0,(function(){var n,r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return r=(n=t)._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new xE(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Nw(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];a=a.add(m.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function KE(t,e){var n=t;return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,a,s,u,c,l=e.batch.keys(),h=n.$n.newChangeBuffer({trackRemovals:!0});return r=n,i=t,a=h,u=(s=(o=e).batch).keys(),c=BI.resolve(),u.forEach((function(t){c=c.next((function(){return a.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);Cm(null!==n),e.version.compareTo(n)<0&&(s.applyToRemoteDocument(e,o),e.isValidDocument()&&a.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,s)})).next((function(){return h.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,l)}))}))}function zE(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function WE(t,e){var n=t,r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s,u,c,l=i.get(o);l&&(a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}))),0<(c=e.resumeToken).approximateByteSize()&&(s=l.withResumeToken(c,r).withSequenceNumber(t.currentSequenceNumber),i=i.insert(o,s),u=l,c=e,Cm(0<(l=s).resumeToken.approximateByteSize()),(0===u.resumeToken.approximateByteSize()||3e8<=l.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()||0<c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size)&&a.push(n.qe.updateTargetData(t,s))))}));var s,u=Tw;return e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(HE(t,o,e.documentUpdates,r,void 0).next((function(t){u=t}))),r.isEqual(xm.min())||(s=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)})),a.push(s)),BI.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,u)})).next((function(){return u}))})).then((function(t){return n.Fn=i,t}))}function HE(t,e,n,r,i){var o=Nw();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Tw;return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(xm.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||0<a.version.compareTo(s.version)||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):wm("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function GE(t,e){var n=t;return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,BI.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new hT(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||0<t.snapshotVersion.compareTo(r.snapshotVersion))&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function QE(t,e,n){return $i(this,void 0,void 0,(function(){var r,i,o;return Ji(this,(function(a){switch(a.label){case 0:i=(r=t).Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ZI(o=a.sent()))throw o;return wm("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function YE(t,e,n){var r=t,i=xm.min(),o=Nw();return r.persistence.runTransaction("Execute query","readonly",(function(t){return a=r,s=t,u=p_(e),(void 0!==(a=(c=a).kn.get(u))?BI.resolve(c.Fn.get(a)):c.qe.getTargetData(s,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:xm.min(),n?o:Nw())})).next((function(t){return{documents:t,Bn:o}}));var a,s,u,c}))}function XE(t,e){var n=t,r=n.qe;return(t=n.Fn.get(e))?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function $E(t){var e=t;return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.$n,r=t,t=e.On,i=n,o=Tw,a=mT(t),t=wE(r),r=IDBKeyRange.lowerBound(a,!0),t.Ot({index:NI.readTimeIndex,range:r},(function(t,e){var n=gT(i.R,e);o=o.insert(n.key,n),a=e.readTime})).next((function(){return{wn:o,readTime:bT(a)}}));var n,r,i,o,a})).then((function(t){var n=t.wn;return t=t.readTime,e.On=t,n}))}function JE(t){return $i(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){return[2,(e=t).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return t=wE(t),e=xm.min(),t.Ot({index:NI.readTimeIndex,reverse:!0},(function(t,n,r){n.readTime&&(e=bT(n.readTime)),r.done()})).next((function(){return e}));var e})).then((function(t){e.On=t}))]}))}))}var ZE,tS,eS=(IS.prototype.getBundleMetadata=function(t,e){return BI.resolve(this.Kn.get(e))},IS.prototype.saveBundleMetadata=function(t,e){return this.Kn.set(e.id,{id:e.id,version:e.version,createTime:Yw(e.createTime)}),BI.resolve()},IS.prototype.getNamedQuery=function(t,e){return BI.resolve(this.jn.get(e))},IS.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(e=e).name,query:ST(e.bundledQuery),readTime:Yw(e.readTime)}),BI.resolve()},IS),nS=(wS.prototype.isEmpty=function(){return this.Wn.isEmpty()},wS.prototype.addReference=function(t,e){e=new rS(t,e),this.Wn=this.Wn.add(e),this.zn=this.zn.add(e)},wS.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},wS.prototype.removeReference=function(t,e){this.Yn(new rS(t,e))},wS.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},wS.prototype.Zn=function(t){var e=this,n=new ab(new Vm([])),r=new rS(n,t),i=(t=new rS(n,t+1),[]);return this.zn.forEachInRange([r,t],(function(t){e.Yn(t),i.push(t.key)})),i},wS.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},wS.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},wS.prototype.es=function(t){var e=new ab(new Vm([])),n=new rS(e,t),r=(t=new rS(e,t+1),Nw());return this.zn.forEachInRange([n,t],(function(t){r=r.add(t.key)})),r},wS.prototype.containsKey=function(t){var e=new rS(t,0);return null!==(e=this.Wn.firstAfterOrEqual(e))&&t.isEqual(e.key)},wS),rS=(_S.Gn=function(t,e){return ab.comparator(t.key,e.key)||Nm(t.ns,e.ns)},_S.Hn=function(t,e){return Nm(t.ns,e.ns)||ab.comparator(t.key,e.key)},_S),iS=(bS.prototype.checkEmpty=function(t){return BI.resolve(0===this._n.length)},bS.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,0<this._n.length&&this._n[this._n.length-1],n=new cT(i,e,n,r),this._n.push(n);for(var o=0,a=r;o<a.length;o++){var s=a[o];this.rs=this.rs.add(new rS(s.key,i)),this.Ut.addToCollectionParentIndex(t,s.key.path.popLast())}return BI.resolve(n)},bS.prototype.lookupMutationBatch=function(t,e){return BI.resolve(this.os(e))},bS.prototype.getNextMutationBatchAfterBatchId=function(t,e){return e+=1,e=(e=this.cs(e))<0?0:e,BI.resolve(this._n.length>e?this._n[e]:null)},bS.prototype.getHighestUnacknowledgedBatchId=function(){return BI.resolve(0===this._n.length?-1:this.ss-1)},bS.prototype.getAllMutationBatches=function(t){return BI.resolve(this._n.slice())},bS.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new rS(e,0),i=(e=new rS(e,Number.POSITIVE_INFINITY),[]);return this.rs.forEachInRange([r,e],(function(t){t=n.os(t.ns),i.push(t)})),BI.resolve(i)},bS.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new ww(Nm);return e.forEach((function(t){var e=new rS(t,0);t=new rS(t,Number.POSITIVE_INFINITY),n.rs.forEachInRange([e,t],(function(t){r=r.add(t.ns)}))})),BI.resolve(this.us(r))},bS.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1;e=n,ab.isDocumentKey(e)||(e=e.child("")),e=new rS(new ab(e),0);var i=new ww(Nm);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(i=i.add(t.ns)),!0)}),e),BI.resolve(this.us(i))},bS.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){null!==(t=e.os(t))&&n.push(t)})),n},bS.prototype.removeMutationBatch=function(t,e){var n=this;Cm(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return BI.forEach(e.mutations,(function(i){var o=new rS(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},bS.prototype.Gt=function(t){},bS.prototype.containsKey=function(t,e){var n=new rS(e,0);return n=this.rs.firstAfterOrEqual(n),BI.resolve(e.isEqual(n&&n.key))},bS.prototype.performConsistencyCheck=function(t){return this._n.length,BI.resolve()},bS.prototype.hs=function(t,e){return this.cs(t)},bS.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},bS.prototype.os=function(t){return(t=this.cs(t))<0||t>=this._n.length?null:this._n[t]},bS),oS=(mS.prototype.addEntry=function(t,e,n){var r=e.key,i=(o=this.docs.get(r))?o.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-i,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},mS.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},mS.prototype.getEntry=function(t,e){var n=this.docs.get(e);return BI.resolve(n?n.document.clone():Ib.newInvalidDocument(e))},mS.prototype.getEntries=function(t,e){var n=this,r=Tw;return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Ib.newInvalidDocument(t))})),BI.resolve(r)},mS.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Tw,i=new ab(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=(s=o.getNext()).key,s=(u=s.value).document,u=u.readTime;if(!e.path.isPrefixOf(a.path))break;u.compareTo(n)<=0||b_(e,s)&&(r=r.insert(s.key,s.clone()))}return BI.resolve(r)},mS.prototype.fs=function(t,e){return BI.forEach(this.docs,(function(t){return e(t)}))},mS.prototype.newChangeBuffer=function(t){return new aS(this)},mS.prototype.getSize=function(t){return BI.resolve(this.size)},mS),aS=(Yi(yS,tS=W),yS.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),BI.waitFor(n)},yS.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},yS.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},yS),sS=(gS.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),BI.resolve()},gS.prototype.getLastRemoteSnapshotVersion=function(t){return BI.resolve(this.lastRemoteSnapshotVersion)},gS.prototype.getHighestSequenceNumber=function(t){return BI.resolve(this.ws)},gS.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),BI.resolve(this.highestTargetId)},gS.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),BI.resolve()},gS.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new QT(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},gS.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,BI.resolve()},gS.prototype.updateTargetData=function(t,e){return this.te(e),BI.resolve()},gS.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),--this.targetCount,BI.resolve()},gS.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),BI.waitFor(o).next((function(){return i}))},gS.prototype.getTargetCount=function(t){return BI.resolve(this.targetCount)},gS.prototype.getTargetData=function(t,e){return e=this.ds.get(e)||null,BI.resolve(e)},gS.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),BI.resolve()},gS.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),BI.waitFor(i)},gS.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),BI.resolve()},gS.prototype.getMatchingKeysForTargetId=function(t,e){return e=this._s.es(e),BI.resolve(e)},gS.prototype.containsKey=function(t,e){return BI.resolve(this._s.containsKey(e))},gS),uS=(vS.prototype.start=function(){return Promise.resolve()},vS.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(vS.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),vS.prototype.setDatabaseDeletedListener=function(){},vS.prototype.setNetworkEnabled=function(){},vS.prototype.getIndexManager=function(){return this.Ut},vS.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new iS(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},vS.prototype.getTargetCache=function(){return this.qe},vS.prototype.getRemoteDocumentCache=function(){return this.Ue},vS.prototype.getBundleCache=function(){return this.Qe},vS.prototype.runTransaction=function(t,e,n){var r=this;wm("MemoryPersistence","Starting transaction:",t);var i=new cS(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},vS.prototype.Is=function(t,e){return BI.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},vS),cS=(Yi(pS,ZE=kn),pS),lS=(dS.bs=function(t){return new dS(t)},Object.defineProperty(dS.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Sm()},enumerable:!1,configurable:!0}),dS.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),BI.resolve()},dS.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),BI.resolve()},dS.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),BI.resolve()},dS.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},dS.prototype.Es=function(){this.Rs=new Set},dS.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return BI.forEach(this.vs,(function(r){var i=ab.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},dS.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},dS.prototype.ps=function(t){return 0},dS.prototype.Ps=function(t,e){var n=this;return BI.or([function(){return BI.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},dS),hS=(fS.prototype.isAuthenticated=function(){return null!=this.uid},fS.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},fS.prototype.isEqual=function(t){return t.uid===this.uid},fS);function fS(t){this.uid=t}function dS(t){this.persistence=t,this.As=new nS,this.Rs=null}function pS(t){var e=this;return(e=ZE.call(this)||this).currentSequenceNumber=t,e}function vS(t,e){var n=this;this.gs={},this.Ne=new dm(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new sS(this),this.Ut=new AT,this.Ue=(t=this.Ut,new oS(t,(function(t){return n.referenceDelegate.ps(t)}))),this.R=new fT(e),this.Qe=new eS(this.R)}function gS(t){this.persistence=t,this.ds=new dE(Cb,kb),this.lastRemoteSnapshotVersion=xm.min(),this.highestTargetId=0,this.ws=0,this._s=new nS,this.targetCount=0,this.ys=QT.Jt()}function yS(t){var e=this;return(e=tS.call(this)||this).Ie=t,e}function mS(t,e){this.Ut=t,this.ls=e,this.docs=new pw(ab.comparator),this.size=0}function bS(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new ww(rS.Gn)}function _S(t,e){this.key=t,this.ns=e}function wS(){this.Wn=new ww(rS.Gn),this.zn=new ww(rS.Hn)}function IS(t){this.R=t,this.Kn=new Map,this.jn=new Map}function TS(t,e){return"firestore_clients_"+t+"_"+e}function ES(t,e,n){return n="firestore_mutations_"+t+"_"+n,e.isAuthenticated()&&(n+="_"+e.uid),n}function SS(t,e){return"firestore_targets_"+t+"_"+e}hS.UNAUTHENTICATED=new hS(null),hS.GOOGLE_CREDENTIALS=new hS("google-credentials-uid"),hS.FIRST_PARTY=new hS("first-party-uid");var CS,kS=(XS.Vs=function(t,e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ym(i.error.code,i.error.message)),o?new XS(t,e,i.state,r):(Im("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},XS.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},XS),OS=(YS.Vs=function(t,e){var n,r=JSON.parse(e),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(n=new ym(r.error.code,r.error.message)),i?new YS(t,r.state,n):(Im("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},YS.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},YS),NS=(QS.Vs=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Aw,o=0;r&&o<n.activeTargetIds.length;++o)r=ob(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new QS(t,i):(Im("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},QS),AS=(GS.Vs=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new GS(e.clientId,e.onlineState):(Im("SharedClientState","Failed to parse online state: "+t),null)},GS),PS=(HS.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},HS.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},HS.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},HS),RS=(WS.yt=function(t){return!(!t||!t.localStorage)},WS.prototype.start=function(){return $i(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l=this;return Ji(this,(function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(o=h.sent(),t=0,e=o;t<e.length;t++)(n=e[t])!==this.Ns&&(r=this.getItem(TS(this.persistenceKey,n)))&&(i=NS.Vs(n,r))&&(this.ks=this.ks.insert(i.clientId,i));for(this.Ks(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),s=0,u=this.Os;s<u.length;s++)c=u[s],this.Fs(c);return this.Os=[],this.window.addEventListener("unload",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},WS.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},WS.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},WS.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},WS.prototype.addPendingMutation=function(t){this.zs(t,"pending")},WS.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},WS.prototype.addLocalQueryTarget=function(t){var e,n="not-current";return this.isActiveQueryTarget(t)&&(!(e=this.storage.getItem(SS(this.persistenceKey,t)))||(e=OS.Vs(t,e))&&(n=e.state)),this.Js.Ds(t),this.Ks(),n},WS.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},WS.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},WS.prototype.clearQueryState=function(t){this.removeItem(SS(this.persistenceKey,t))},WS.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},WS.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},WS.prototype.setOnlineState=function(t){this.Xs(t)},WS.prototype.notifyBundleLoaded=function(){this.Zs()},WS.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},WS.prototype.getItem=function(t){var e=this.storage.getItem(t);return wm("SharedClientState","READ",t,e),e},WS.prototype.setItem=function(t,e){wm("SharedClientState","SET",t,e),this.storage.setItem(t,e)},WS.prototype.removeItem=function(t){wm("SharedClientState","REMOVE",t),this.storage.removeItem(t)},WS.prototype.Fs=function(t){var e=this,n=t;n.storageArea===this.storage&&(wm("SharedClientState","EVENT",n.key,n.newValue),n.key!==this.$s?this.Se.enqueueRetryable((function(){return $i(e,void 0,void 0,(function(){var t,e,r,i;return Ji(this,(function(o){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(e=this.si(n.key,n.newValue)))return[2,this.ii(e)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(r=this.ri(n.key,n.newValue)))return[2,this.oi(r)]}else if(n.key===this.Us){if(null!==n.newValue&&(i=this.js(n.newValue)))return[2,this.Ws(i)]}else if(n.key===this.Ms)(i=function(t){var e=dm.o;if(null!=t)try{var n=JSON.parse(t);Cm("number"==typeof n),e=n}catch(t){Im("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==dm.o&&this.sequenceNumberHandler(i);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))})):Im("Received WebStorage notification for local change. Another client might have garbage-collected our state"))},Object.defineProperty(WS.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),WS.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},WS.prototype.zs=function(t,e,n){n=new kS(this.currentUser,t,e,n),t=ES(this.persistenceKey,this.currentUser,t),this.setItem(t,n.Ss())},WS.prototype.Hs=function(t){t=ES(this.persistenceKey,this.currentUser,t),this.removeItem(t)},WS.prototype.Xs=function(t){t={clientId:this.Ns,onlineState:t},this.storage.setItem(this.Us,JSON.stringify(t))},WS.prototype.Ys=function(t,e,n){var r=SS(this.persistenceKey,t);n=new OS(t,e,n),this.setItem(r,n.Ss())},WS.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},WS.prototype.ti=function(t){return(t=this.Ls.exec(t))?t[1]:null},WS.prototype.ni=function(t,e){return t=this.ti(t),NS.Vs(t,e)},WS.prototype.si=function(t,e){var n=this.Bs.exec(t);return t=Number(n[1]),n=void 0!==n[2]?n[2]:null,kS.Vs(new hS(n),t,e)},WS.prototype.ri=function(t,e){return t=this.qs.exec(t),t=Number(t[1]),OS.Vs(t,e)},WS.prototype.js=function(t){return AS.Vs(t)},WS.prototype.ii=function(t){return $i(this,void 0,void 0,(function(){return Ji(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(wm("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},WS.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},WS.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},WS.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},WS.prototype.Gs=function(t){var e=Aw;return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},WS),xS=(zS.prototype.addPendingMutation=function(t){},zS.prototype.updateMutationState=function(t,e,n){},zS.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},zS.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},zS.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},zS.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},zS.prototype.clearQueryState=function(t){delete this.fi[t]},zS.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},zS.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},zS.prototype.start=function(){return this.li=new PS,Promise.resolve()},zS.prototype.handleUserChange=function(t,e,n){},zS.prototype.setOnlineState=function(t){},zS.prototype.shutdown=function(){},zS.prototype.writeSequenceNumber=function(t){},zS.prototype.notifyBundleLoaded=function(){},zS),DS=(KS.prototype.di=function(t){},KS.prototype.shutdown=function(){},KS),LS=(BS.prototype.di=function(t){this.gi.push(t)},BS.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},BS.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},BS.prototype._i=function(){wm("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},BS.prototype.yi=function(){wm("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},BS.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},BS),jS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},MS=(VS.prototype.Ii=function(t){this.Ai=t},VS.prototype.Ri=function(t){this.bi=t},VS.prototype.onMessage=function(t){this.vi=t},VS.prototype.close=function(){this.Ti()},VS.prototype.send=function(t){this.Ei(t)},VS.prototype.Pi=function(){this.Ai()},VS.prototype.Vi=function(t){this.bi(t)},VS.prototype.Si=function(t){this.vi(t)},VS),FS=(qS.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);return wm("RestConnection","Sending: ",i,n),e={},this.Fi(e,r),this.ki(t,i,e,n).then((function(t){return wm("RestConnection","Received: ",t),t}),(function(e){throw Tm("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},qS.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},qS.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.4.3",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},qS.prototype.xi=function(t,e){return t=jS[t],this.Di+"/v1/"+e+":"+t},Yi(US,CS=qS),US.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new fm;a.listenOnce(cm.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case um.NO_ERROR:var e=a.getResponseJson();wm("Connection","XHR received:",JSON.stringify(e)),i(e);break;case um.TIMEOUT:wm("Connection",'RPC "'+t+'" timed out'),o(new ym(gm.DEADLINE_EXCEEDED,"Request time out"));break;case um.HTTP_ERROR:var n=a.getStatus();wm("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),0<n?(e=a.getResponseJson().error)&&e.status&&e.message?(n=e.status.toLowerCase().replace(/_/g,"-"),n=0<=Object.values(gm).indexOf(n)?n:gm.UNKNOWN,o(new ym(n,e.message))):o(new ym(gm.UNKNOWN,"Server responded with status "+a.getStatus())):o(new ym(gm.UNAVAILABLE,"Connection failed."));break;default:Sm()}}finally{wm("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},US.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new nm,i=sm();t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},this.Fi(t.initMessageHeaders,e),vo()||yo()||0<=po().indexOf("Electron/")||0<=(e=po()).indexOf("MSIE ")||0<=e.indexOf("Trident/")||0<=po().indexOf("MSAppHost/")||go()||(t.httpHeadersOverwriteParam="$httpHeaders"),wm("Connection","Creating WebChannel: "+(n=n.join("")),t);var o=r.createWebChannel(n,t),a=!1,s=!1,u=new MS({Ei:function(t){s?wm("Connection","Not sending because WebChannel is closed:",t):(a||(wm("Connection","Opening WebChannel transport."),o.open(),a=!0),wm("Connection","WebChannel sending:",t),o.send(t))},Ti:function(){return o.close()}});return(t=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))})(o,hm.EventType.OPEN,(function(){s||wm("Connection","WebChannel transport opened.")})),t(o,hm.EventType.CLOSE,(function(){s||(s=!0,wm("Connection","WebChannel transport closed"),u.Vi())})),t(o,hm.EventType.ERROR,(function(t){s||(s=!0,Tm("Connection","WebChannel transport errored:",t),u.Vi(new ym(gm.UNAVAILABLE,"The operation could not be completed")))})),t(o,hm.EventType.MESSAGE,(function(t){var e,n,r,i;s||(Cm(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(wm("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=ow[r];if(void 0!==t)return dw(t)}(),i=n.message,void 0===t&&(t=gm.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),s=!0,u.Vi(new ym(t,i)),o.close()):(wm("Connection","WebChannel received:",e),u.Si(e)))})),t(i,lm.STAT_EVENT,(function(t){10===t.stat?wm("Connection","Detected buffering proxy"):11===t.stat&&wm("Connection","Detected no buffering proxy")})),setTimeout((function(){u.Pi()}),0),u},US);function US(t){var e=this;return(e=CS.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.autoDetectLongPolling=t.autoDetectLongPolling,e}function qS(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}function VS(t){this.Ei=t.Ei,this.Ti=t.Ti}function BS(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}function KS(){}function zS(){this.li=new PS,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}function WS(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new pw(Nm),this.started=!1,this.Os=[],n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),this.storage=this.window.localStorage,this.currentUser=i,this.$s=TS(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new PS),this.Ls=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Qs="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.xs)}function HS(){this.activeTargetIds=Aw}function GS(t,e){this.clientId=t,this.onlineState=e}function QS(t,e){this.clientId=t,this.activeTargetIds=e}function YS(t,e,n){this.targetId=t,this.state=e,this.error=n}function XS(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function $S(){return"undefined"!=typeof window?window:null}function JS(){return"undefined"!=typeof document?document:null}function ZS(t){return new Hw(t,!0)}function tC(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return $i(o,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return TC(this)?(wm("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return $i(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return(e=t).$r.add(4),[4,gC(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,vC(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new uC(n,r)}var eC,nC,rC,iC=(pC.prototype.reset=function(){this.qi=0},pC.prototype.Ki=function(){this.qi=this.Bi},pC.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);0<i&&wm("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},pC.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},pC.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},pC.prototype.Wi=function(){return(Math.random()-.5)*this.qi},pC),oC=(dC.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},dC.prototype.er=function(){return 2===this.state},dC.prototype.start=function(){3!==this.state?this.auth():this.nr()},dC.prototype.stop=function(){return $i(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},dC.prototype.sr=function(){this.state=0,this.Zi.reset()},dC.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},dC.prototype.cr=function(t){this.ur(),this.stream.send(t)},dC.prototype.rr=function(){return $i(this,void 0,void 0,(function(){return Ji(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},dC.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},dC.prototype.close=function(t,e){return $i(this,void 0,void 0,(function(){return Ji(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===gm.RESOURCE_EXHAUSTED?(Im(e.toString()),Im("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===gm.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},dC.prototype.ar=function(){},dC.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new ym(gm.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},dC.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},dC.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return $i(t,void 0,void 0,(function(){return Ji(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},dC.prototype.dr=function(t){return wm("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},dC.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(wm("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},Yi(fC,rC=W=dC),fC.prototype.wr=function(t){return this.Hi.$i("Listen",t)},fC.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:Sm(),r=e.targetChange.targetIds||[],i=(a=e.targetChange.resumeToken,t.I?(Cm(void 0===a||"string"==typeof a),Wm.fromBase64String(a||"")):(Cm(void 0===a||a instanceof Uint8Array),Wm.fromUint8Array(a||new Uint8Array))),o=(s=e.targetChange.cause)&&(u=void 0===(c=s).code?gm.UNKNOWN:dw(c.code),new ym(u,c.message||"")),a=new Lw(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime,r=Zw(t,n.document.name),i=Yw(n.document.updateTime);var s=new _b({mapValue:{fields:n.document.fields}}),u=(o=Ib.newFoundDocument(r,i,s),n.targetIds||[]),c=n.removedTargetIds||[];a=new xw(u,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=Zw(t,n.document),i=n.readTime?Yw(n.readTime):xm.min(),s=Ib.newNoDocument(r,i),o=n.removedTargetIds||[],a=new xw([],o,s.key,s);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=Zw(t,n.document),i=n.removedTargetIds||[],a=new xw([],i,r,null);else{if(!("filter"in e))return Sm();e.filter,(e=e.filter).targetId,r=new iw(n=e.count||0),i=e.targetId,a=new Dw(i,r)}return a}(this.R,t);return t=function(t){return"targetChange"in t?(t=t.targetChange).targetIds&&t.targetIds.length||!t.readTime?xm.min():Yw(t.readTime):xm.min()}(t),this.listener._r(e,t)},fC.prototype.mr=function(t){var e,n,r,i,o={};o.database=nI(this.R),o.addTarget=(e=this.R,(r=Ob(r=(n=t).target)?{documents:uI(e,r)}:{query:cI(e,r)}).targetId=n.targetId,0<n.resumeToken.approximateByteSize()?r.resumeToken=Qw(e,n.resumeToken):0<n.snapshotVersion.compareTo(xm.min())&&(r.readTime=Gw(e,n.snapshotVersion.toTimestamp())),r),this.R,i=t,(t=null==(t=function(){switch(i.purpose){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Sm()}}())?null:{"goog-listen-tags":t})&&(o.labels=t),this.cr(o)},fC.prototype.yr=function(t){var e={};e.database=nI(this.R),e.removeTarget=t,this.cr(e)},fC),aC=(Yi(hC,nC=W),Object.defineProperty(hC.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),hC.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,nC.prototype.start.call(this)},hC.prototype.ar=function(){this.gr&&this.Er([])},hC.prototype.wr=function(t){return this.Hi.$i("Write",t)},hC.prototype.onMessage=function(t){if(Cm(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(Cm(void 0!==r),n.map((function(t){return n=r,(t=(e=t).updateTime?Yw(e.updateTime):Yw(n)).isEqual(xm.min())&&(t=Yw(n)),new V_(t,e.transformResults||[]);var e,n}))):[]),n=Yw(t.commitTime);return this.listener.Tr(n,e)}var r;return Cm(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},hC.prototype.Ar=function(){var t={};t.database=nI(this.R),this.cr(t)},hC.prototype.Er=function(t){var e=this;t={streamToken:this.lastStreamToken,writes:t.map((function(t){return aI(e.R,t)}))},this.cr(t)},hC),sC=(Yi(lC,eC=function(){}),lC.prototype.br=function(){if(this.Rr)throw new ym(gm.FAILED_PRECONDITION,"The client has already been terminated.")},lC.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===gm.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ym(gm.UNKNOWN,t.toString())}))},lC.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===gm.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ym(gm.UNKNOWN,t.toString())}))},lC.prototype.terminate=function(){this.Rr=!0},lC),uC=(cC.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},cC.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,1<=this.vr&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},cC.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},cC.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},cC.prototype.Cr=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.",this.Vr?(Im(t),this.Vr=!1):wm("OnlineStateTracker",t)},cC.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},cC);function cC(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}function lC(t,e,n){var r=this;return(r=eC.call(this)||this).credentials=t,r.Hi=e,r.R=n,r.Rr=!1,r}function hC(t,e,n,r,i){var o=this;return(o=nC.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).R=r,o.gr=!1,o}function fC(t,e,n,r,i){var o=this;return(o=rC.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).R=r,o}function dC(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new iC(t,e)}function pC(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}function vC(t){return $i(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:if(!TC(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function gC(t){return $i(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function yC(t,e){t.Or.has(e.targetId)||(t.Or.set(e.targetId,e),IC(t)?wC(t):RC(t).er()&&bC(t,e))}function mC(t,e){var n=t;t=RC(n),n.Or.delete(e),t.er()&&_C(n,e),0===n.Or.size&&(t.er()?t.ir():TC(n)&&n.Br.set("Unknown"))}function bC(t,e){t.qr.U(e.targetId),RC(t).mr(e)}function _C(t,e){t.qr.U(e),RC(t).yr(e)}function wC(t){t.qr=new Mw({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),RC(t).start(),t.Br.Sr()}function IC(t){return TC(t)&&!RC(t).tr()&&0<t.Or.size}function TC(t){return 0===t.$r.size}function EC(t){t.qr=void 0}function SC(t,e,n){return $i(this,void 0,void 0,(function(){var r,i;return Ji(this,(function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof Lw&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return $i(this,void 0,void 0,(function(){var n,r,i,o;return Ji(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.Or.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.Or.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),wm("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,CC(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof xw?t.qr.X(e):e instanceof Dw?t.qr.rt(e):t.qr.et(e),n.isEqual(xm.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,zE(t.localStore)];case 8:return i=o.sent(),0<=n.compareTo(i)?[4,(s=n,(u=(a=t).qr.ut(s)).targetChanges.forEach((function(t,e){var n;0<t.resumeToken.approximateByteSize()&&(n=a.Or.get(e))&&a.Or.set(e,n.withResumeToken(t.resumeToken,s))})),u.targetMismatches.forEach((function(t){var e=a.Or.get(t);e&&(a.Or.set(t,e.withResumeToken(Wm.EMPTY_BYTE_STRING,e.snapshotVersion)),_C(a,t),e=new hT(e.target,t,1,e.sequenceNumber),bC(a,e))})),a.remoteSyncer.applyRemoteEvent(u))]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return wm("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,CC(t,i)];case 12:return o.sent(),[3,13];case 13:return[2]}var a,s,u}))}))}function CC(t,e,n){return $i(this,void 0,void 0,(function(){var r=this;return Ji(this,(function(i){switch(i.label){case 0:if(!ZI(e))throw e;return t.$r.add(1),[4,gC(t)];case 1:return i.sent(),t.Br.set("Offline"),n=n||function(){return zE(t.localStore)},t.asyncQueue.enqueueRetryable((function(){return $i(r,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return wm("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,vC(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function kC(t,e){return e().catch((function(n){return CC(t,n,e)}))}function OC(t){return $i(this,void 0,void 0,(function(){var e,n,r,i;return Ji(this,(function(o){switch(o.label){case 0:n=xC(e=t),r=0<e.kr.length?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!(TC(e)&&e.kr.length<10))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,(a=e.localStore,s=r,(u=a).persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===s&&(s=-1),u._n.getNextMutationBatchAfterBatchId(t,s)})))];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e),(t=xC(t)).er()&&t.pr&&t.Er(e.mutations)}(e,i),[3,6]);case 4:return i=o.sent(),[4,CC(e,i)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return NC(e)&&AC(e),[2]}var a,s,u}))}))}function NC(t){return TC(t)&&!xC(t).tr()&&0<t.kr.length}function AC(t){xC(t).start()}function PC(t,e){return $i(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return n=t,e?(n.$r.delete(2),[4,vC(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,gC(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function RC(t){var e,n,r,i=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:function(t){return $i(this,void 0,void 0,(function(){return Ji(this,(function(e){return t.Or.forEach((function(e,n){bC(t,e)})),[2]}))}))}.bind(null,t),Ri:function(t,e){return $i(this,void 0,void 0,(function(){return Ji(this,(function(n){return EC(t),IC(t)?(t.Br.Nr(e),wC(t)):t.Br.set("Unknown"),[2]}))}))}.bind(null,t),_r:SC.bind(null,t)},e.br(),new oC(n,e.Hi,e.credentials,e.R,r)),t.Mr.push((function(e){return $i(i,void 0,void 0,(function(){return Ji(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),IC(t)?wC(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),EC(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function xC(t){var e,n,r,i=this;return t.Qr||(t.Qr=(e=t.datastore,n=t.asyncQueue,r={Ii:function(t){return $i(this,void 0,void 0,(function(){return Ji(this,(function(e){return xC(t).Ar(),[2]}))}))}.bind(null,t),Ri:function(t,e){return $i(this,void 0,void 0,(function(){return Ji(this,(function(n){switch(n.label){case 0:return e&&xC(t).pr?[4,function(t,e){return $i(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return fw(r=e.code)&&r!==gm.ABORTED?(n=t.kr.shift(),xC(t).sr(),[4,kC(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,OC(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return NC(t)&&AC(t),[2]}}))}))}.bind(null,t),Ir:function(t){return $i(this,void 0,void 0,(function(){var e,n,r,i;return Ji(this,(function(o){for(e=xC(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}.bind(null,t),Tr:function(t,e,n){return $i(this,void 0,void 0,(function(){var r,i;return Ji(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=lT.from(r,e,n),[4,kC(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,OC(t)];case 2:return o.sent(),[2]}}))}))}.bind(null,t)},e.br(),new aC(n,e.Hi,e.credentials,e.R,r)),t.Mr.push((function(e){return $i(i,void 0,void 0,(function(){return Ji(this,(function(n){switch(n.label){case 0:return e?(t.Qr.sr(),[4,OC(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:n.sent(),0<t.kr.length&&(wm("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Qr}var DC=(LC.createAndSchedule=function(t,e,n,r,i){return(i=new LC(t,e,Date.now()+n,r,i)).start(n),i},LC.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},LC.prototype.skipDelay=function(){return this.handleDelayElapsed()},LC.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ym(gm.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},LC.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},LC.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},LC);function LC(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new VI,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}function jC(t,e){if(Im("AsyncQueue",e+": "+t),ZI(t))return new ym(gm.UNAVAILABLE,e+": "+t);throw t}function MC(){this.queries=new dE(y_,g_),this.onlineState="Unknown",this.Gr=new Set}var FC=(zC.emptySet=function(t){return new zC(t.comparator)},zC.prototype.has=function(t){return null!=this.keyedMap.get(t)},zC.prototype.get=function(t){return this.keyedMap.get(t)},zC.prototype.first=function(){return this.sortedSet.minKey()},zC.prototype.last=function(){return this.sortedSet.maxKey()},zC.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},zC.prototype.indexOf=function(t){return(t=this.keyedMap.get(t))?this.sortedSet.indexOf(t):-1},Object.defineProperty(zC.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),zC.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},zC.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},zC.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},zC.prototype.isEqual=function(t){if(!(t instanceof zC))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},zC.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},zC.prototype.copy=function(t,e){var n=new zC;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n},zC),UC=(KC.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);!n||0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Sm()},KC.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},KC),qC=(BC.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach((function(t){i.push({type:0,doc:t})})),new BC(t,e,FC.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(BC.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),BC.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&g_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},BC),VC=function(){this.Wr=void 0,this.listeners=[]};function BC(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}function KC(){this.Kr=new pw(ab.comparator)}function zC(t){this.comparator=t?function(e,n){return t(e,n)||ab.comparator(e.key,n.key)}:function(t,e){return ab.comparator(t.key,e.key)},this.keyedMap=Cw,this.sortedSet=new pw(this.comparator)}function WC(t,e){return $i(this,void 0,void 0,(function(){var n,r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:if(n=t,r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new VC),!i)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=s.sent(),[3,4];case 3:return a=jC(a=s.sent(),"Initialization of query '"+m_(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&GC(n),[2]}}))}))}function HC(t,e){return $i(this,void 0,void 0,(function(){var n,r,i,o,a;return Ji(this,(function(s){return n=t,r=e.query,i=!1,(o=n.queries.get(r))&&0<=(a=o.listeners.indexOf(e))&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function GC(t){t.Gr.forEach((function(t){t.next()}))}var QC=(ek.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new qC(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},ek.prototype.onError=function(t){this.Jr.error(t)},ek.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},ek.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},ek.prototype.Zr=function(t){if(0<t.docChanges.length)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},ek.prototype.no=function(t){t=qC.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},ek),YC=(tk.prototype.io=function(){return"metadata"in this.payload},tk),XC=(ZC.prototype.qn=function(t){return Zw(this.R,t)},ZC.prototype.Un=function(t){return t.metadata.exists?oI(this.R,t.document,!1):Ib.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},ZC.prototype.Qn=Yw,ZC),$C=(JC.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},JC.prototype.co=function(t){for(var e=new Map,n=new XC(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||Nw()).add(a);e.set(c,l)}}return e},JC.prototype.complete=function(){return $i(this,void 0,void 0,(function(){var t,e,n,r;return Ji(this,(function(i){switch(i.label){case 0:return[4,function(t,e,n,r){return $i(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,d;return Ji(this,(function(p){switch(p.label){case 0:for(i=t,o=Nw(),a=Tw,s=kw,u=0,c=n;u<c.length;u++)l=c[u],h=e.qn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.Un(l)),s=s.insert(h,e.Qn(l.metadata.readTime));return f=i.$n.newChangeBuffer({trackRemovals:!0}),[4,GE(i,p_(s_(Vm.fromString("__bundle__/docs/"+r))))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return HE(t,f,a,xm.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}(this.localStore,new XC(this.R),this.documents,this.ro.id)];case 1:t=i.sent(),e=this.co(this.documents),n=0,r=this.queries,i.label=2;case 2:return n<r.length?(r=r[n],[4,function(t,e,n){return void 0===n&&(n=Nw()),$i(this,void 0,void 0,(function(){var r,i;return Ji(this,(function(o){switch(o.label){case 0:return[4,GE(t,p_(ST(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=t).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Yw(e.readTime);return 0<=r.snapshotVersion.compareTo(o)?i.Qe.saveNamedQuery(t,e):(o=r.withResumeToken(Wm.EMPTY_BYTE_STRING,o),i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)})))}))]}}))}))}(this.localStore,r,e.get(r.name))]):[3,5];case 3:i.sent(),i.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new RE(Object.assign({},this.progress),t))]}}))}))},JC);function JC(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=nk(t)}function ZC(t){this.R=t}function tk(t,e){this.payload=t,this.byteLength=e}function ek(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}function nk(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var rk=function(t){this.key=t},ik=function(t){this.key=t},ok=(Object.defineProperty(lk.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),lk.prototype._o=function(t,e){var n=this,r=e?e.mo:new UC,i=(e||this).fo,o=(e||this).mutatedKeys,a=i,s=!1,u=u_(this.query)&&i.size===this.query.limit?i.last():null,c=c_(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=b_(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations);e=!1,l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),e=!0):n.yo(l,h)||(r.track({type:2,doc:h}),e=!0,(u&&0<n.lo(h,u)||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),e=!0):l&&!h&&(r.track({type:1,doc:l}),e=!0,(u||c)&&(s=!0)),e&&(o=h?(a=a.add(h),d?o.add(t):o.delete(t)):(a=a.delete(t),o.delete(t)))})),u_(this.query)||c_(this.query))for(;a.size>this.query.limit;){var l=u_(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},lk.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},lk.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return i=t.type,o=e.type,n(i)-n(o)||r.lo(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Sm()}}var i,o})),this.po(n);var a=e?this.Eo():[];return e=(n=0===this.ho.size&&this.current?1:0)!==this.ao,this.ao=n,0!==o.length||e?{snapshot:new qC(this.query,t.fo,i,o,t.mutatedKeys,0==n,e,!1),To:a}:{To:a}},lk.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new UC,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},lk.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},lk.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},lk.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Nw(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new ik(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new rk(t))})),n},lk.prototype.Ao=function(t){return this.uo=t.Bn,this.ho=Nw(),t=this._o(t.documents),this.applyChanges(t,!0)},lk.prototype.Ro=function(){return qC.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},lk),ak=function(t,e,n){this.query=t,this.targetId=e,this.view=n},sk=function(t){this.key=t,this.bo=!1},uk=(Object.defineProperty(ck.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),ck);function ck(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new dE(y_,g_),this.Vo=new Map,this.So=new Set,this.Do=new pw(ab.comparator),this.Co=new Map,this.No=new nS,this.xo={},this.Fo=new Map,this.ko=QT.Yt(),this.onlineState="Unknown",this.Oo=void 0}function lk(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Nw(),this.mutatedKeys=Nw(),this.lo=__(t),this.fo=new FC(this.lo)}function hk(t,e,n,r){return $i(this,void 0,void 0,(function(){var i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return $i(this,void 0,void 0,(function(){var i,o;return Ji(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,YE(t.localStore,e.query,!1).then((function(t){return t=t.documents,e.view._o(t,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(wk(t,e.targetId,o.To),o.snapshot)]}}))}))}(t,e,n,r)},[4,YE(t.localStore,e,!0)];case 1:return o=s.sent(),a=new ok(e,o.Bn),i=a._o(o.documents),o=Rw.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),o=a.applyChanges(i,t.isPrimaryClient,o),wk(t,n,o.To),a=new ak(e,n,a),[2,(t.Po.set(e,a),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),o.snapshot)]}}))}))}function fk(t,e,n){return $i(this,void 0,void 0,(function(){var r,i;return Ji(this,(function(o){switch(o.label){case 0:i=Ak(t),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,(c=i.localStore,l=e,f=c,d=Rm.now(),p=l.reduce((function(t,e){return t.add(e.key)}),Nw()),f.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return f.Mn.pn(t,p).next((function(e){h=e;for(var n=[],r=0,i=l;r<i.length;r++){var o=i[r],a=function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field);null!=(a=E_(o.transform,a||null))&&(n=null==n?_b.empty():n).set(o.field,a)}return n||null}(o,h.get(o.key));null!=a&&n.push(new J_(o.key,a,function t(e){var n=[];return Mm(e.fields||{},(function(e,r){var i=new Km([e]);if(bb(r))if(0===(r=t(r.mapValue).fields).length)n.push(i);else for(var o=0,a=r;o<a.length;o++){var s=a[o];n.push(i.child(s))}else n.push(i)})),new zm(n)}(a.toProto().mapValue),K_.exists(!0)))}return f._n.addMutationBatch(t,d,n,l)}))})).then((function(t){return t.applyToLocalDocumentSet(h),{batchId:t.batchId,changes:h}})))];case 2:return r=o.sent(),i.sharedClientState.addPendingMutation(r.batchId),a=i,s=r.batchId,u=n,c=(c=(c=a.xo[a.currentUser.toKey()])||new pw(Nm)).insert(s,u),a.xo[a.currentUser.toKey()]=c,[4,Tk(i,r.changes)];case 3:return o.sent(),[4,OC(i.remoteStore)];case 4:return o.sent(),[3,6];case 5:return i=jC(i=o.sent(),"Failed to persist write"),n.reject(i),[3,6];case 6:return[2]}var a,s,u,c,l,h,f,d,p}))}))}function dk(t,e){return $i(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:n=t,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,WE(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){(e=n.Co.get(e))&&(Cm(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),0<t.addedDocuments.size?e.bo=!0:0<t.modifiedDocuments.size?Cm(e.bo):0<t.removedDocuments.size&&(Cm(e.bo),e.bo=!1))})),[4,Tk(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,eE(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function pk(t,e,n){var r;((t=t).isPrimaryClient&&0===n||!t.isPrimaryClient&&1===n)&&(r=[],t.Po.forEach((function(t,n){(n=n.view.zr(e)).snapshot&&r.push(n.snapshot)})),function(t,e){t.onlineState=e;var n=!1;t.queries.forEach((function(t,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].zr(e)&&(n=!0)})),n&&GC(t)}(t.eventManager,e),r.length&&t.vo._r(r),t.onlineState=e,t.isPrimaryClient&&t.sharedClientState.setOnlineState(e))}function vk(t,e,n){return $i(this,void 0,void 0,(function(){var r,i;return Ji(this,(function(o){switch(o.label){case 0:r=t,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=r.localStore,s=e,(u=a).persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,s).next((function(n){return Cm(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),mk(r,e,n),yk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Tk(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,eE(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var a,s,u}))}))}function gk(t,e){return $i(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:TC((n=t).remoteStore)||wm("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(a=n.localStore).persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return a._n.getHighestUnacknowledgedBatchId(t)}))];case 2:return-1===(r=o.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return i=jC(i=o.sent(),"Initialization of waitForPendingWrites() operation failed"),e.reject(i),[3,4];case 4:return[2]}var a}))}))}function yk(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function mk(t,e,n){var r=t,i=r.xo[r.currentUser.toKey()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i)}function bk(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||_k(t,e)}))}function _k(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(mC(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Ik(t))}function wk(t,e,n){for(var r,i,o,a=0,s=n;a<s.length;a++){var u=s[a];u instanceof rk?(t.No.addReference(u.key,e),r=t,o=void 0,i=(o=(i=u).key).path.canonicalString(),r.Do.get(o)||r.So.has(i)||(wm("SyncEngine","New document in limbo: "+o),r.So.add(i),Ik(r))):u instanceof ik?(wm("SyncEngine","Document no longer in limbo: "+u.key),t.No.removeReference(u.key,e),t.No.containsKey(u.key)||_k(t,u.key)):Sm()}}function Ik(t){for(;0<t.So.size&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ab(Vm.fromString(e));e=t.ko.next(),t.Co.set(e,new sk(n)),t.Do=t.Do.insert(n,e),yC(t.remoteStore,new hT(p_(s_(n.path)),e,2,dm.o))}}function Tk(t,e,n){return $i(this,void 0,void 0,(function(){var r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return i=[],o=[],a=[],(r=t).Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.$o(s,e,n).then((function(t){t&&(r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t),t=DE.Pn(s.targetId,t),o.push(t))})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return $i(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Ji(this,(function(c){switch(c.label){case 0:n=t,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return BI.forEach(e,(function(e){return BI.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return BI.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return c.sent(),[3,4];case 3:if(!ZI(r=c.sent()))throw r;return wm("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)u=o[i],a=u.targetId,u.fromCache||(s=n.Fn.get(a),u=s.snapshotVersion,u=s.withLastLimboFreeSnapshotVersion(u),n.Fn=n.Fn.insert(a,u));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Ek(t,e){return $i(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return(n=t).currentUser.isEqual(e)?[3,3]:(wm("SyncEngine","User change. New user:",e.toKey()),[4,BE(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new ym(gm.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Tk(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function Sk(t,e,n,r){return $i(this,void 0,void 0,(function(){var i,o;return Ji(this,(function(a){switch(a.label){case 0:return[4,(s=(i=t).localStore,u=e,l=(c=s)._n,c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):BI.resolve(null)}))})))];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,OC(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(mk(i,e,r||null),yk(i,e),i.localStore._n.Gt(e)):Sm(),a.label=4;case 4:return[4,Tk(i,o)];case 5:return a.sent(),[3,7];case 6:wm("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}var s,u,c,l}))}))}function Ck(t,e){return $i(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return Ji(this,(function(l){switch(l.label){case 0:return Nk(n=t),Ak(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,kk(n,r.toArray())]);case 1:return i=l.sent(),n.Oo=!0,[4,PC(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],yC(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return bk(n,e),QE(n.localStore,e,!0)})),mC(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,kk(n,u)];case 5:return l.sent(),(h=n).Co.forEach((function(t,e){mC(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new pw(ab.comparator),n.Oo=!1,[4,PC(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function kk(t,e){return $i(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,d;return Ji(this,(function(p){switch(p.label){case 0:n=t,r=[],i=[],o=0,a=e,p.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,GE(n.localStore,p_(c[0]))]:[3,7]):[3,13];case 2:u=p.sent(),l=0,h=c,p.label=3;case 3:return l<h.length?(f=h[l],f=n.Po.get(f),[4,function(t,e){return $i(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return[4,YE((n=t).localStore,e.query,!0)];case 1:return r=i.sent(),r=e.view.Ao(r),[2,(n.isPrimaryClient&&wk(n,e.targetId,r.To),r)]}}))}))}(n,f)]):[3,6];case 4:(f=p.sent()).snapshot&&i.push(f.snapshot),p.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,XE(n.localStore,s)];case 8:return d=p.sent(),[4,GE(n.localStore,d)];case 9:return u=p.sent(),[4,hk(n,Ok(d),s,!1)];case 10:p.sent(),p.label=11;case 11:r.push(u),p.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Ok(t){return a_(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Nk(t){return t.remoteStore.remoteSyncer.applyRemoteEvent=dk.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(t,e){var n=t;if((t=n.Co.get(e))&&t.bo)return Nw().add(t.key);var r=Nw();if(!(e=n.Vo.get(e)))return r;for(var i=0,o=e;i<o.length;i++){var a=o[i];a=n.Po.get(a),r=r.unionWith(a.view.wo)}return r}.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=function(t,e,n){return $i(this,void 0,void 0,(function(){var r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return(r=t).sharedClientState.updateQueryState(e,"rejected",n),a=r.Co.get(e),(i=a&&a.key)?(o=(o=new pw(ab.comparator)).insert(i,Ib.newNoDocument(i,xm.min())),a=Nw().add(i),a=new Pw(xm.min(),new Map,new ww(Nm),o,a),[4,dk(r,a)]):[3,2];case 1:return s.sent(),r.Do=r.Do.remove(i),r.Co.delete(e),Ik(r),[3,4];case 2:return[4,QE(r.localStore,e,!1).then((function(){return bk(r,e,n)})).catch(eE)];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))}.bind(null,t),t.vo._r=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query;if(s=n.queries.get(s)){for(var u=0,c=s.listeners;u<c.length;u++)c[u].Hr(a)&&(r=!0);s.Wr=a}}r&&GC(n)}.bind(null,t.eventManager),t.vo.Mo=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.eventManager),t}function Ak(t){return t.remoteStore.remoteSyncer.applySuccessfulWrite=function(t,e){return $i(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:n=t,r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,KE(n.localStore,e)];case 2:return i=o.sent(),mk(n,r,null),yk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Tk(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,eE(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vk.bind(null,t),t}function Pk(t,e,n){var r=t;(function(t,e,n){return $i(this,void 0,void 0,(function(){var r,i,o,a,s;return Ji(this,(function(u){switch(u.label){case 0:return u.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=u.sent(),[4,(h=t.localStore,d=h,p=Yw((f=r).createTime),d.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return d.Qe.getBundleMetadata(t,f.id)})).then((function(t){return!!t&&0<=t.createTime.compareTo(p)})))];case 2:return u.sent()?[4,e.close()]:[3,4];case 3:return[2,(u.sent(),void n._completeWith({taskState:"Success",documentsLoaded:r.totalDocuments,bytesLoaded:r.totalBytes,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}))];case 4:return n._updateProgress(nk(r)),i=new $C(r,t.localStore,e.R),[4,e.Lo()];case 5:o=u.sent(),u.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=u.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:o=u.sent(),u.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=u.sent(),[4,Tk(t,s.wn,void 0)];case 12:return u.sent(),[4,(h=t.localStore,c=r,(l=h).persistence.runTransaction("Save bundle","readwrite",(function(t){return l.Qe.saveBundleMetadata(t,c)})))];case 13:return u.sent(),n._completeWith(s.progress),[3,15];case 14:return Tm("SyncEngine","Loading bundle failed with "+(s=u.sent())),n._failWith(s),[3,15];case 15:return[2]}var c,l,h,f,d,p}))}))})(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Rk,xk,Dk=(Vk.prototype.initialize=function(t){return $i(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return this.R=ZS(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},Vk.prototype.Uo=function(t){return null},Vk.prototype.Qo=function(t){return VE(this.persistence,new LE,t.initialUser,this.R)},Vk.prototype.qo=function(t){return new uS(lS.bs,this.R)},Vk.prototype.Bo=function(t){return new xS},Vk.prototype.terminate=function(){return $i(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},Vk),Lk=(Yi(qk,xk=Dk),qk.prototype.initialize=function(t){return $i(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return[4,xk.prototype.initialize.call(this,t)];case 1:return e.sent(),[4,JE(this.localStore)];case 2:return e.sent(),[4,this.Ko.initialize(this,t)];case 3:return e.sent(),[4,Ak(this.Ko.syncEngine)];case 4:return e.sent(),[4,OC(this.Ko.remoteStore)];case 5:return e.sent(),[2]}}))}))},qk.prototype.Qo=function(t){return VE(this.persistence,new LE,t.initialUser,this.R)},qk.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new iE(e,t.asyncQueue)},qk.prototype.qo=function(t){var e=PE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?FT.withCacheSize(this.cacheSizeBytes):FT.DEFAULT;return new kE(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,$S(),JS(),this.R,this.sharedClientState,!!this.forceOwnership)},qk.prototype.Bo=function(t){return new xS},qk),jk=(Yi(Uk,Rk=Lk),Uk.prototype.initialize=function(t){return $i(this,void 0,void 0,(function(){var e,n=this;return Ji(this,(function(r){switch(r.label){case 0:return[4,Rk.prototype.initialize.call(this,t)];case 1:return r.sent(),e=this.Ko.syncEngine,this.sharedClientState instanceof RS?(this.sharedClientState.syncEngine={ui:Sk.bind(null,e),ai:function(t,e,n,r){return $i(this,void 0,void 0,(function(){var i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return(i=t).Oo?(wm("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,$E(i.localStore)];case 3:return o=s.sent(),a=Pw.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Tk(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,QE(i.localStore,e,!0)];case 6:return s.sent(),bk(i,e,r),[3,8];case 7:Sm(),s.label=8;case 8:return[2]}}))}))}.bind(null,e),hi:function(t,e,n){return $i(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l;return Ji(this,(function(h){switch(h.label){case 0:if(!(r=Nk(t)).Oo)return[3,10];i=0,o=e,h.label=1;case 1:return i<o.length?(o=o[i],r.Vo.has(o)?(wm("SyncEngine","Adding an already active target "+o),[3,5]):[4,XE(r.localStore,o)]):[3,6];case 2:return a=h.sent(),[4,GE(r.localStore,a)];case 3:return s=h.sent(),[4,hk(r,Ok(a),s.targetId,!1)];case 4:h.sent(),yC(r.remoteStore,s),h.label=5;case 5:return i++,[3,1];case 6:u=function(t){return Ji(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,QE(r.localStore,t,!1).then((function(){mC(r.remoteStore,t),bk(r,t)})).catch(eE)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},c=0,l=n,h.label=7;case 7:return c<l.length?(l=l[c],[5,u(l)]):[3,10];case 8:h.sent(),h.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))}.bind(null,e),fn:function(t){return t.localStore.persistence.fn()}.bind(null,e),ci:function(t){return $i(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){return[2,$E((e=t).localStore).then((function(t){return Tk(e,t)}))]}))}))}.bind(null,e)},[4,this.sharedClientState.start()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[4,this.persistence.He((function(t){return $i(n,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return[4,Ck(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return r.sent(),[2]}}))}))},Uk.prototype.Bo=function(t){var e=$S();if(!RS.yt(e))throw new ym(gm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=PE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new RS(e,t.asyncQueue,n,t.clientId,t.initialUser)},Uk),Mk=(Fk.prototype.initialize=function(t,e){return $i(this,void 0,void 0,(function(){var n=this;return Ji(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return pk(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ek.bind(null,this.syncEngine),[4,PC(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},Fk.prototype.createEventManager=function(t){return new MC},Fk.prototype.createDatastore=function(t){var e=ZS(t.databaseInfo.databaseId),n=(n=t.databaseInfo,new FS(n));return t=t.credentials,new sC(t,n,e)},Fk.prototype.createRemoteStore=function(t){var e=this;return new tC(this.localStore,this.datastore,t.asyncQueue,(function(t){return pk(e.syncEngine,t,0)}),t=new(LS.yt()?LS:DS))},Fk.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){return o=new uk(t,e,n,r,i,o),a&&(o.Oo=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},Fk.prototype.terminate=function(){return function(t){return $i(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return e=t,wm("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,gC(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},Fk);function Fk(){}function Uk(t,e){var n=this;return(n=Rk.call(this,t,e,!1)||this).Ko=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function qk(t,e,n){var r=this;return(r=xk.call(this)||this).Ko=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function Vk(){this.synchronizeTabs=!1}function Bk(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return $i(this,void 0,void 0,(function(){var r;return Ji(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return $i(this,void 0,void 0,(function(){return Ji(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Kk=(Jk.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},Jk.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},Jk.prototype.Wo=function(){this.muted=!0},Jk.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},Jk),zk=($k.prototype.close=function(){return this.Go.cancel()},$k.prototype.getMetadata=function(){return $i(this,void 0,void 0,(function(){return Ji(this,(function(t){return[2,this.metadata.promise]}))}))},$k.prototype.Lo=function(){return $i(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},$k.prototype.Ho=function(){return $i(this,void 0,void 0,(function(){var t,e,n;return Ji(this,(function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(t=r.sent())?[2,null]:(n=this.zo.decode(t),e=Number(n),isNaN(e)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(e)]);case 2:return n=r.sent(),[2,new YC(JSON.parse(n),t.length+e)]}}))}))},$k.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},$k.prototype.Jo=function(){return $i(this,void 0,void 0,(function(){var t,e;return Ji(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},$k.prototype.Xo=function(t){return $i(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},$k.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},$k.prototype.tc=function(){return $i(this,void 0,void 0,(function(){var t,e;return Ji(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},$k),Wk=(Xk.prototype.lookup=function(t){return $i(this,void 0,void 0,(function(){var e,n=this;return Ji(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new ym(gm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return $i(this,void 0,void 0,(function(){var n,r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return r=nI((n=t).R)+"/documents",i={documents:e.map((function(t){return Jw(n.R,t)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return i=s.sent(),o=new Map,i.forEach((function(t){var e;e=n.R,t="found"in(t=t)?function(t,e){Cm(!!e.found),e.found.name,e.found.updateTime;var n=Zw(t,e.found.name);return t=Yw(e.found.updateTime),e=new _b({mapValue:{fields:e.found.fields}}),Ib.newFoundDocument(n,t,e)}(e,t):"missing"in t?function(t,e){return Cm(!!e.missing),Cm(!!e.readTime),t=Zw(t,e.missing),e=Yw(e.readTime),Ib.newNoDocument(t,e)}(e,t):Sm(),o.set(t.key.toString(),t)})),a=[],[2,(e.forEach((function(t){Cm(!!(t=o.get(t.toString()))),a.push(t)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},Xk.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},Xk.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},Xk.prototype.delete=function(t){this.write(new uw(t,this.precondition(t))),this.writtenDocs.add(t.toString())},Xk.prototype.commit=function(){return $i(this,void 0,void 0,(function(){var t,e=this;return Ji(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){n=ab.fromPath(n),e.mutations.push(new cw(n,e.precondition(n)))})),[4,function(t,e){return $i(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:return r=nI((n=t).R)+"/documents",i={writes:e.map((function(t){return aI(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},Xk.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Sm();e=xm.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ym(gm.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},Xk.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?K_.updateTime(e):K_.none()},Xk.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(this.writtenDocs.has(t.toString())||!e)return K_.exists(!0);if(e.isEqual(xm.min()))throw new ym(gm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return K_.updateTime(e)},Xk.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},Xk.prototype.ensureCommitNotCalled=function(){},Xk),Hk=(Yk.prototype.run=function(){this.nc()},Yk.prototype.nc=function(){var t=this;this.Zi.ji((function(){return $i(t,void 0,void 0,(function(){var t,e,n=this;return Ji(this,(function(r){return t=new Wk(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},Yk.prototype.sc=function(t){try{var e=this.updateFunction(t);return!rb(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},Yk.prototype.ic=function(t){var e=this;0<this.ec&&this.rc(t)?(--this.ec,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},Yk.prototype.rc=function(t){return"FirebaseError"===t.name&&("aborted"===(t=t.code)||"failed-precondition"===t||!fw(t))},Yk),Gk=(Qk.prototype.getConfiguration=function(){return $i(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},Qk.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then((function(){return e.credentialListener(e.user)}))},Qk.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ym(gm.FAILED_PRECONDITION,"The client has already been terminated.")},Qk.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new VI;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return $i(t,void 0,void 0,(function(){var t;return Ji(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:n.sent(),n.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=jC(t=n.sent(),"Failed to shutdown persistence"),e.reject(t),[3,6];case 6:return[2]}}))}))})),e.promise},Qk);function Qk(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=hS.UNAUTHENTICATED,this.clientId=km.u(),this.credentialListener=function(){},this.receivedInitialUser=new VI,this.credentials.setChangeListener((function(t){wm("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()}))}function Yk(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new iC(this.asyncQueue,"transaction_retry")}function Xk(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}function $k(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new VI,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}function Jk(t){this.observer=t,this.muted=!1}function Zk(t,e){return $i(this,void 0,void 0,(function(){var n,r,i=this;return Ji(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),wm("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable((function(){return $i(i,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return[4,BE(e.localStore,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function tO(t,e){return $i(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,eO(t)];case 1:return n=i.sent(),wm("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(n){return t.asyncQueue.enqueueRetryable((function(){return function(t,e){return $i(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return(n=t).asyncQueue.verifyOperationInProgress(),wm("RemoteStore","RemoteStore received new credentials"),r=TC(n),n.$r.add(3),[4,gC(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,vC(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,n)}))})),t.onlineComponents=e,[2]}}))}))}function eO(t){return $i(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(wm("FirestoreClient","Using default OfflineComponentProvider"),[4,Zk(t,new Dk)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function nO(t){return $i(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(wm("FirestoreClient","Using default OnlineComponentProvider"),[4,tO(t,new Mk)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function rO(t){return eO(t).then((function(t){return t.persistence}))}function iO(t){return eO(t).then((function(t){return t.localStore}))}function oO(t){return nO(t).then((function(t){return t.remoteStore}))}function aO(t){return nO(t).then((function(t){return t.syncEngine}))}function sO(t){return $i(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return[4,nO(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=function(t,e){return $i(this,void 0,void 0,(function(){var n,r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return n=Nk(t),(a=n.Po.get(e))?(r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),i=a.view.Ro(),[3,4]):[3,1];case 1:return[4,GE(n.localStore,p_(e))];case 2:return o=s.sent(),a=n.sharedClientState.addLocalQueryTarget(o.targetId),r=o.targetId,[4,hk(n,e,r,"current"===a)];case 3:i=s.sent(),n.isPrimaryClient&&yC(n.remoteStore,o),s.label=4;case 4:return[2,i]}}))}))}.bind(null,e.syncEngine),n.onUnlisten=function(t,e){return $i(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:return r=(n=t).Po.get(e),1<(i=n.Vo.get(r.targetId)).length?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!g_(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,QE(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),mC(n.remoteStore,r.targetId),bk(n,r.targetId)})).catch(eE)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return bk(n,r.targetId),[4,QE(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}.bind(null,e.syncEngine),n)]}}))}))}function uO(t,e,n){var r=this;void 0===n&&(n={});var i=new VI;return t.asyncQueue.enqueueAndForget((function(){return $i(r,void 0,void 0,(function(){var r;return Ji(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Kk({next:function(o){e.enqueueAndForget((function(){return HC(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new ym(gm.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new ym(gm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new QC(s_(n.path),o,{includeMetadataChanges:!0,so:!0});return WC(t,a)},[4,sO(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function cO(t,e,n){var r=this;void 0===n&&(n={});var i=new VI;return t.asyncQueue.enqueueAndForget((function(){return $i(r,void 0,void 0,(function(){var r;return Ji(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Kk({next:function(n){e.enqueueAndForget((function(){return HC(t,a)})),n.fromCache&&"server"===r.source?i.reject(new ym(gm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new QC(n,o,{includeMetadataChanges:!0,so:!0});return WC(t,a)},[4,sO(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function lO(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t}var hO=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},fO=(Object.defineProperty(IO.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),IO.prototype.isEqual=function(t){return t instanceof IO&&t.projectId===this.projectId&&t.database===this.database},IO),dO=new Map,pO=(wO.prototype.getToken=function(){return Promise.resolve(null)},wO.prototype.invalidateToken=function(){},wO.prototype.setChangeListener=function(t){(this.changeListener=t)(hS.UNAUTHENTICATED)},wO.prototype.removeChangeListener=function(){this.changeListener=null},wO),vO=(_O.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(wm("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Cm("string"==typeof n.accessToken),new lO(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},_O.prototype.invalidateToken=function(){this.forceRefresh=!0},_O.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},_O.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},_O.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Cm(null===t||"string"==typeof t),new hS(t)},_O),gO=(Object.defineProperty(bO.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),bO),yO=(mO.prototype.getToken=function(){return Promise.resolve(new gO(this.ac,this.hc,this.lc))},mO.prototype.setChangeListener=function(t){t(hS.FIRST_PARTY)},mO.prototype.removeChangeListener=function(){},mO.prototype.invalidateToken=function(){},mO);function mO(t,e,n){this.ac=t,this.hc=e,this.lc=n}function bO(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=hS.FIRST_PARTY}function _O(t){var e=this;this.oc=null,this.currentUser=hS.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then((function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)}),(function(){})))}function wO(){this.changeListener=null}function IO(t,e){this.projectId=t,this.database=e||"(default)"}function TO(t,e,n){if(!n)throw new ym(gm.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function EO(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ym(gm.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function SO(t,e,n,r){if(!0===e&&!0===r)throw new ym(gm.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function CO(t){if(!ab.isDocumentKey(t))throw new ym(gm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function kO(t){if(ab.isDocumentKey(t))throw new ym(gm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function OO(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":Sm();if(t instanceof Array)return"an array";var e=function(){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}();return e?"a custom "+e+" object":"an object"}function NO(t,e){if((t="_delegate"in t?t._delegate:t)instanceof e)return t;if(e.name===t.constructor.name)throw new ym(gm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");throw t=OO(t),new ym(gm.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function AO(t,e){if(e<=0)throw new ym(gm.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var PO,RO=(VO.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},VO),xO=(Object.defineProperty(qO.prototype,"app",{get:function(){if(!this._app)throw new ym(gm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(qO.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(qO.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),qO.prototype._setSettings=function(t){if(this._settingsFrozen)throw new ym(gm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new RO(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new pO;switch(t.type){case"gapi":var e=t.client;return Cm(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new yO(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ym(gm.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},qO.prototype._getSettings=function(){return this._settings},qO.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},qO.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},qO.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},qO.prototype._terminate=function(){return(t=dO.get(this))&&(wm("ComponentProvider","Removing Datastore"),dO.delete(this),t.terminate()),Promise.resolve();var t},qO),DO=(Object.defineProperty(UO.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(UO.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(UO.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(UO.prototype,"parent",{get:function(){return new jO(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),UO.prototype.withConverter=function(t){return new UO(this.firestore,t,this._key)},UO),LO=(FO.prototype.withConverter=function(t){return new FO(this.firestore,t,this._query)},FO),jO=(Yi(MO,PO=LO),Object.defineProperty(MO.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(MO.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(MO.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new DO(this.firestore,null,new ab(t))},enumerable:!1,configurable:!0}),MO.prototype.withConverter=function(t){return new MO(this.firestore,t,this._path)},MO);function MO(t,e,n){var r=this;return(r=PO.call(this,t,e,s_(n))||this)._path=n,r.type="collection",r}function FO(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}function UO(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}function qO(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new RO({}),this._settingsFrozen=!1,t instanceof fO?(this._databaseId=t,this._credentials=new pO):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ym(gm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fO(t.options.projectId)}(t),this._credentials=new vO(e))}function VO(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ym(gm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ym(gm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,SO("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function BO(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Go(t),TO("collection","path",e),t instanceof xO)return kO(n=Vm.fromString.apply(Vm,eo([e],r))),new jO(t,null,n);if(!(t instanceof DO||t instanceof jO))throw new ym(gm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return kO(n=Vm.fromString.apply(Vm,eo([t.path],r)).child(Vm.fromString(e))),new jO(t.firestore,null,n)}function KO(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Go(t),TO("doc","path",e=1===arguments.length?km.u():e),t instanceof xO)return CO(n=Vm.fromString.apply(Vm,eo([e],r))),new DO(t,null,new ab(n));if(!(t instanceof DO||t instanceof jO))throw new ym(gm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return CO(n=t._path.child(Vm.fromString.apply(Vm,eo([e],r)))),new DO(t.firestore,t instanceof jO?t.converter:null,new ab(n))}function zO(t,e){return t=Go(t),e=Go(e),(t instanceof DO||t instanceof jO)&&(e instanceof DO||e instanceof jO)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function WO(t,e){return t=Go(t),e=Go(e),t instanceof LO&&e instanceof LO&&t.firestore===e.firestore&&g_(t._query,e._query)&&t.converter===e.converter}var HO=(Object.defineProperty(GO.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),GO.prototype.enqueueAndForget=function(t){this.enqueue(t)},GO.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},GO.prototype.enterRestrictedMode=function(){var t;this.wc||(this.wc=!0,(t=JS())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec))},GO.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise((function(t){})):this.Ic(t)},GO.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.dc.push(t),e.Ac()}))},GO.prototype.Ac=function(){return $i(this,void 0,void 0,(function(){var t,e=this;return Ji(this,(function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!ZI(t=n.sent()))throw t;return wm("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:0<this.dc.length&&this.Zi.ji((function(){return e.Ac()})),n.label=5;case 5:return[2]}}))}))},GO.prototype.Ic=function(t){var e=this,n=this.fc.then((function(){return e.yc=!0,t().catch((function(t){throw e.mc=t,e.yc=!1,Im("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",r=n.stack?n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack:r)),t;var n,r})).then((function(t){return e.yc=!1,t}))}));return this.fc=n},GO.prototype.enqueueAfterDelay=function(t,e,n){var r=this;return this.Tc(),-1<this.gc.indexOf(t)&&(e=0),n=DC.createAndSchedule(this,t,e,n,(function(t){return r.Rc(t)})),this._c.push(n),n},GO.prototype.Tc=function(){this.mc&&Sm()},GO.prototype.verifyOperationInProgress=function(){},GO.prototype.bc=function(){return $i(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}}))}))},GO.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},GO.prototype.Pc=function(t){var e=this;return this.bc().then((function(){e._c.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()}))},GO.prototype.Vc=function(t){this.gc.push(t)},GO.prototype.Rc=function(t){t=this._c.indexOf(t),this._c.splice(t,1)},GO);function GO(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new iC(this,"async_queue_retry"),this.Ec=function(){var e=JS();e&&wm("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=JS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}function QO(t){return function(){if("object"==typeof t&&null!==t)for(var e=t,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return 1}}()}var YO,XO=(ZO.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},ZO.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},ZO.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},ZO.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},ZO.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},ZO.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},ZO),$O=(Yi(JO,YO=xO),JO.prototype._terminate=function(){return this._firestoreClient||eN(this),this._firestoreClient.terminate()},JO);function JO(t,e){var n=this;return(n=YO.call(this,t,e)||this).type="firestore",n._queue=new HO,n._persistenceKey="name"in t?t.name:"[DEFAULT]",n}function ZO(){this._progressObserver={},this._taskCompletionResolver=new VI,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function tN(t){return t._firestoreClient||eN(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function eN(t){var e,n,r,i=t._freezeSettings();e=t._databaseId,n=(null===(r=t._app)||void 0===r?void 0:r.options.appId)||"",r=t._persistenceKey,i=new hO(e,n,r,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling),t._firestoreClient=new Gk(t._credentials,t._queue,i)}function nN(t,e,n){var r=this,i=new VI;return t.asyncQueue.enqueue((function(){return $i(r,void 0,void 0,(function(){var r;return Ji(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Zk(t,n)];case 1:return o.sent(),[4,tO(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(a=r=o.sent()).name?a.code===gm.FAILED_PRECONDITION||a.code===gm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var a}))}))})).then((function(){return i.promise}))}function rN(t){if(t._initialized||t._terminated)throw new ym(gm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var iN=(vN.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},vN),oN=(pN.fromBase64String=function(t){try{return new pN(Wm.fromBase64String(t))}catch(t){throw new ym(gm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},pN.fromUint8Array=function(t){return new pN(Wm.fromUint8Array(t))},pN.prototype.toBase64=function(){return this._byteString.toBase64()},pN.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},pN.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},pN.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},pN),aN=function(t){this._methodName=t},sN=(Object.defineProperty(dN.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(dN.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),dN.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},dN.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},dN.prototype._compareTo=function(t){return Nm(this._lat,t._lat)||Nm(this._long,t._long)},dN),uN=/^__.*__$/,cN=(fN.prototype.toMutation=function(t,e){return null!==this.fieldMask?new J_(t,this.data,this.fieldMask,e,this.fieldTransforms):new $_(t,this.data,e,this.fieldTransforms)},fN),lN=(hN.prototype.toMutation=function(t,e){return new J_(t,this.data,this.fieldMask,e,this.fieldTransforms)},hN);function hN(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function fN(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function dN(t,e){if(!isFinite(t)||t<-90||90<t)throw new ym(gm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new ym(gm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}function pN(t){this._byteString=t}function vN(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ym(gm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Km(t)}function gN(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Sm()}}var yN=(Object.defineProperty(_N.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(_N.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),_N.prototype.Cc=function(t){return new _N(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},_N.prototype.Nc=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t);return(e=this.Cc({path:e,xc:!1})).Fc(t),e},_N.prototype.kc=function(t){var e;return t=null===(e=this.path)||void 0===e?void 0:e.child(t),(t=this.Cc({path:t,xc:!1})).Sc(),t},_N.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},_N.prototype.$c=function(t){return YN(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},_N.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},_N.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},_N.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(gN(this.Dc)&&uN.test(t))throw this.$c('Document fields cannot begin and end with "__"')},_N),mN=(bN.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new yN({Dc:t,methodName:e,Lc:n,path:Km.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},bN);function bN(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||ZS(t)}function _N(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}function wN(t){var e=t._freezeSettings(),n=ZS(t._databaseId);return new mN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function IN(t,e,n,r,i,o){void 0===o&&(o={});var a,s,u=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);if(WN("Data must be an object, but it was:",u,r),r=KN(r,u),o.merge)a=new zm(u.fieldMask),s=u.fieldTransforms;else if(o.mergeFields){for(var c=[],l=0,h=o.mergeFields;l<h.length;l++){var f=HN(e,h[l],n);if(!u.contains(f))throw new ym(gm.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");XN(c,f)||c.push(f)}a=new zm(c),s=u.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,s=u.fieldTransforms;return new cN(new _b(r),a,s)}var TN,EN=(Yi(SN,TN=aN),SN.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw 1===t.Dc?t.$c(this._methodName+"() can only appear at the top level of your update data"):t.$c(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},SN.prototype.isEqual=function(t){return t instanceof SN},SN);function SN(){return null!==TN&&TN.apply(this,arguments)||this}function CN(t,e,n){return new yN({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var kN,ON,NN,AN,PN=(Yi(FN,AN=aN),FN.prototype._toFieldTransform=function(t){return new B_(t.path,new k_)},FN.prototype.isEqual=function(t){return t instanceof FN},FN),RN=(Yi(MN,NN=aN),MN.prototype._toFieldTransform=function(t){var e=CN(this,t,!0),n=this.qc.map((function(t){return BN(t,e)}));return n=new O_(n),new B_(t.path,n)},MN.prototype.isEqual=function(t){return this===t},MN),xN=(Yi(jN,ON=aN),jN.prototype._toFieldTransform=function(t){var e=CN(this,t,!0),n=this.qc.map((function(t){return BN(t,e)}));return n=new x_(n),new B_(t.path,n)},jN.prototype.isEqual=function(t){return this===t},jN),DN=(Yi(LN,kN=aN),LN.prototype._toFieldTransform=function(t){var e=new M_(t.R,T_(t.R,this.Uc));return new B_(t.path,e)},LN.prototype.isEqual=function(t){return this===t},LN);function LN(t,e){var n=this;return(n=kN.call(this,t)||this).Uc=e,n}function jN(t,e){var n=this;return(n=ON.call(this,t)||this).qc=e,n}function MN(t,e){var n=this;return(n=NN.call(this,t)||this).qc=e,n}function FN(){return null!==AN&&AN.apply(this,arguments)||this}function UN(t,e,n,r){var i=t.Bc(1,e,n);WN("Data must be an object, but it was:",i,r);var o=[],a=_b.empty();return Mm(r,(function(t,r){var s=QN(e,t,n);r=Go(r),t=i.kc(s),r instanceof EN?o.push(s):null!=(t=BN(r,t))&&(o.push(s),a.set(s,t))})),r=new zm(o),new lN(a,r,i.fieldTransforms)}function qN(t,e,n,r,i,o){var a=t.Bc(1,e,n),s=[HN(e,r,n)],u=[i];if(o.length%2!=0)throw new ym(gm.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(HN(e,o[c])),u.push(o[c+1]);for(var l,h,f,d=[],p=_b.empty(),v=s.length-1;0<=v;--v)XN(d,s[v])||(l=s[v],h=Go(h=u[v]),f=a.kc(l),h instanceof EN?d.push(l):null!=(f=BN(h,f))&&(d.push(l),p.set(l,f)));return i=new zm(d),new lN(p,i,a.fieldTransforms)}function VN(t,e,n,r){return void 0===r&&(r=!1),BN(n,t.Bc(r?4:3,e))}function BN(t,e){if(zN(t=Go(t)))return WN("Unsupported field value:",e,t),KN(t,e);if(t instanceof aN)return function(t,e){if(!gN(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");(t=t._toFieldTransform(e))&&e.fieldTransforms.push(t)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=BN(o[i],e.Oc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e)}return function(t,e){if(null===(t=Go(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return T_(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Rm.fromDate(t);return{timestampValue:Gw(e.R,n)}}if(t instanceof Rm)return n=new Rm(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Gw(e.R,n)};if(t instanceof sN)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof oN)return{bytesValue:Qw(e.R,t._byteString)};if(t instanceof DO){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Xw(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+OO(t))}(t,e)}function KN(t,e){var n={};return Fm(t)?e.path&&0<e.path.length&&e.fieldMask.push(e.path):Mm(t,(function(t,r){null!=(r=BN(r,e.Nc(t)))&&(n[t]=r)})),{mapValue:{fields:n}}}function zN(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Rm||t instanceof sN||t instanceof oN||t instanceof DO||t instanceof aN)}function WN(t,e,n){if(!zN(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))throw"an object"===(n=OO(n))?e.$c(t+" a custom object"):e.$c(t+" "+n);var r}function HN(t,e,n){if((e=Go(e))instanceof iN)return e._internalPath;if("string"==typeof e)return QN(t,e);throw YN("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var GN=new RegExp("[~\\*/\\[\\]]");function QN(e,n,r){if(0<=n.search(GN))throw YN("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(iN.bind.apply(iN,eo([void 0],n.split(".")))))._internalPath}catch(t){throw YN("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function YN(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i;return e="Function "+e+"() called with invalid data",n&&(e+=" (via `toFirestore()`)"),n="",(o||a)&&(n+=" (found",o&&(n+=" in field "+r),a&&(n+=" in document "+i),n+=")"),new ym(gm.INVALID_ARGUMENT,(e+=". ")+t+n)}function XN(t,e){return t.some((function(t){return t.isEqual(e)}))}var $N,JN=(Object.defineProperty(eA.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(eA.prototype,"ref",{get:function(){return new DO(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),eA.prototype.exists=function(){return null!==this._document},eA.prototype.data=function(){if(this._document){if(this._converter){var t=new ZN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},eA.prototype.get=function(t){if(this._document&&null!==(t=this._document.data.field(nA("DocumentSnapshot.get",t))))return this._userDataWriter.convertValue(t)},eA),ZN=(Yi(tA,$N=JN),tA.prototype.data=function(){return $N.prototype.data.call(this)},tA);function tA(){return null!==$N&&$N.apply(this,arguments)||this}function eA(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}function nA(t,e){return"string"==typeof e?QN(t,e):(e instanceof iN?e:e._delegate)._internalPath}var rA,iA,oA=(fA.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},fA),aA=(Yi(hA,iA=JN),hA.prototype.exists=function(){return iA.prototype.exists.call(this)},hA.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new sA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},hA.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document&&null!==(t=this._document.data.field(nA("DocumentSnapshot.get",t))))return this._userDataWriter.convertValue(t,e.serverTimestamps)},hA),sA=(Yi(lA,rA=aA),lA.prototype.data=function(t){return void 0===t&&(t={}),rA.prototype.data.call(this,t)},lA),uA=(Object.defineProperty(cA.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(cA.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(cA.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),cA.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new sA(n._firestore,n._userDataWriter,r.key,r,new oA(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},cA.prototype.docChanges=function(t){if((t=!!(t=void 0===t?{}:t).includeMetadataChanges)&&this._snapshot.excludesMetadataChanges)throw new ym(gm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new sA(t._firestore,t._userDataWriter,e.doc.key,e.doc,new oA(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new sA(t._firestore,t._userDataWriter,e.doc.key,e.doc,new oA(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Sm()}}(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},cA);function cA(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new oA(r.hasPendingWrites,r.fromCache),this.query=n}function lA(){return null!==rA&&rA.apply(this,arguments)||this}function hA(t,e,n,r,i,o){var a=this;return(a=iA.call(this,t,e,n,r,o)||this)._firestore=t,a._firestoreImpl=t,a.metadata=i,a}function fA(t,e){this.hasPendingWrites=t,this.fromCache=e}function dA(t,e){return t instanceof aA&&e instanceof aA?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof uA&&e instanceof uA&&t._firestore===e._firestore&&WO(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function pA(t){if(c_(t)&&0===t.explicitOrderBy.length)throw new ym(gm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function vA(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r]._apply(t);return t}var gA,yA,mA,bA,_A,wA=(Yi(AA,_A=kn=function(){}),AA.prototype._apply=function(t){var e=wN(t.firestore);return e=function(t,e,n,r,i,o){if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new ym(gm.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){xA(o,i);for(var a=[],s=0,u=o;s<u.length;s++){var c=u[s];a.push(RA(n,t,c))}l={arrayValue:{values:a}}}else l=RA(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||xA(o,i),l=VN(e,"where",o,"in"===i||"not-in"===i);var l=Ab.create(r,i,l);return function(t,e){if(e.g()){var n=h_(t);if(null!==n&&!n.isEqual(e.field))throw new ym(gm.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");null!==(n=l_(t))&&DA(0,e.field,n)}if(null!==(t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}())))throw t===e.op?new ym(gm.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new ym(gm.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,l),l}(t._query,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc),new LO(t.firestore,t.converter,(e=(t=t._query).filters.concat([e]),new o_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},AA),IA=(Yi(NA,bA=kn),NA.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new ym(gm.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ym(gm.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new n_(e,n);return e=r,null!==l_(n=t)||null!==(t=h_(n))&&DA(0,t,e.field),r}(t._query,this.Qc,this.Wc);return new LO(t.firestore,t.converter,(e=(t=t._query).explicitOrderBy.concat([e]),new o_(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},NA),TA=(Yi(OA,mA=kn),OA.prototype._apply=function(t){return new LO(t.firestore,t.converter,v_(t._query,this.Gc,this.zc))},OA),EA=(Yi(kA,yA=kn),kA.prototype._apply=function(t){var e=PA(t,this.type,this.Hc,this.Jc);return new LO(t.firestore,t.converter,(t=t._query,e=e,new o_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},kA),SA=(Yi(CA,gA=kn),CA.prototype._apply=function(t){var e=PA(t,this.type,this.Hc,this.Jc);return new LO(t.firestore,t.converter,(t=t._query,e=e,new o_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},CA);function CA(t,e,n){var r=this;return(r=gA.call(this)||this).type=t,r.Hc=e,r.Jc=n,r}function kA(t,e,n){var r=this;return(r=yA.call(this)||this).type=t,r.Hc=e,r.Jc=n,r}function OA(t,e,n){var r=this;return(r=mA.call(this)||this).type=t,r.Gc=e,r.zc=n,r}function NA(t,e){var n=this;return(n=bA.call(this)||this).Qc=t,n.Wc=e,n.type="orderBy",n}function AA(t,e,n){var r=this;return(r=_A.call(this)||this).Qc=t,r.Kc=e,r.jc=n,r.type="where",r}function PA(t,e,n,r){if(n[0]=Go(n[0]),n[0]instanceof JN)return function(t,n,r,i){if(!r)throw new ym(gm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");for(var o=[],a=0,s=d_(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(pb(n,r.key));else{var c=r.data.field(u.field);if(eb(c))throw new ym(gm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c)throw u=u.field.canonicalString(),new ym(gm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.");o.push(c)}}return new Xb(o,i)}(t._query,t.firestore._databaseId,n[0]._document,r);var i=wN(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new ym(gm.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new ym(gm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!f_(t)&&-1!==c.indexOf("/"))throw new ym(gm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Vm.fromString(c));if(!ab.isDocumentKey(l))throw new ym(gm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");l=new ab(l),s.push(pb(e,l))}else c=VN(n,r,c),s.push(c)}return new Xb(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function RA(t,e,n){if("string"==typeof(n=Go(n))){if(""===n)throw new ym(gm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!f_(e)&&-1!==n.indexOf("/"))throw new ym(gm.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");if(e=e.path.child(Vm.fromString(n)),!ab.isDocumentKey(e))throw new ym(gm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return pb(t,new ab(e))}if(n instanceof DO)return pb(t,n._key);throw new ym(gm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+OO(n)+".")}function xA(t,e){if(!Array.isArray(t)||0===t.length)throw new ym(gm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new ym(gm.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function DA(t,e,n){if(!n.isEqual(e))throw new ym(gm.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function LA(){}function jA(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}LA.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ub(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Zm(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(tb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Sm()}},LA.prototype.convertObject=function(t,e){var n=this,r={};return Mm(t.fields||{},(function(t,i){r[t]=n.convertValue(i,e)})),r},LA.prototype.convertGeoPoint=function(t){return new sN(Zm(t.latitude),Zm(t.longitude))},LA.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},LA.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){return eb(e=e.mapValue.fields.__previous_value__)?t(e):e}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(nb(t));default:return null}},LA.prototype.convertTimestamp=function(t){return t=Jm(t),new Rm(t.seconds,t.nanos)},LA.prototype.convertDocumentKey=function(t,e){var n=Vm.fromString(t);return Cm(yI(n)),t=new fO(n.get(1),n.get(3)),n=new ab(n.popFirst(5)),t.isEqual(e)||Im("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n};var MA,FA=(Yi(VA,MA=W=LA),VA.prototype.convertBytes=function(t){return new oN(t)},VA.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),new DO(this.firestore,null,t)},VA),UA=(qA.prototype.set=function(t,e,n){return this._verifyNotCommitted(),e=jA((t=BA(t,this._firestore)).converter,e,n),n=IN(this._dataReader,"WriteBatch.set",t._key,e,null!==t.converter,n),this._mutations.push(n.toMutation(t._key,K_.none())),this},qA.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return this._verifyNotCommitted(),t=BA(t,this._firestore),e="string"==typeof(e=Go(e))||e instanceof iN?qN(this._dataReader,"WriteBatch.update",t._key,e,n,r):UN(this._dataReader,"WriteBatch.update",t._key,e),this._mutations.push(e.toMutation(t._key,K_.exists(!0))),this},qA.prototype.delete=function(t){return this._verifyNotCommitted(),t=BA(t,this._firestore),this._mutations=this._mutations.concat(new uw(t._key,K_.none())),this},qA.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,0<this._mutations.length?this._commitHandler(this._mutations):Promise.resolve()},qA.prototype._verifyNotCommitted=function(){if(this._committed)throw new ym(gm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},qA);function qA(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=wN(t)}function VA(t){var e=this;return(e=MA.call(this)||this).firestore=t,e}function BA(t,e){if((t=Go(t)).firestore!==e)throw new ym(gm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var KA,zA=(Yi(WA,KA=W),WA.prototype.convertBytes=function(t){return new oN(t)},WA.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),new DO(this.firestore,null,t)},WA);function WA(t){var e=this;return(e=KA.call(this)||this).firestore=t,e}function HA(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=NO(t,DO);var o=NO(t.firestore,$O),a=wN(o);return QA(o,[("string"==typeof(e=Go(e))||e instanceof iN?qN(a,"updateDoc",t._key,e,n,r):UN(a,"updateDoc",t._key,e)).toMutation(t._key,K_.exists(!0))])}function GA(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=Go(t);var r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||QO(e[i])||(r=e[i],i++);var o,a,s,u,c,l,h={includeMetadataChanges:r.includeMetadataChanges};return QO(e[i])&&(o=e[i],e[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),e[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),e[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),t instanceof DO?(s=NO(t.firestore,$O),u=s_(t._key.path),l={next:function(n){e[i]&&e[i](YA(s,t,n))},error:e[i+1],complete:e[i+2]}):(a=NO(t,LO),s=NO(a.firestore,$O),u=a._query,c=new zA(s),l={next:function(t){e[i]&&e[i](new uA(s,c,a,t))},error:e[i+1],complete:e[i+2]},pA(t._query)),function(t,e,n){var r=this,i=new Kk(l),o=new QC(e,i,n);return t.asyncQueue.enqueueAndForget((function(){return $i(r,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return e=WC,[4,sO(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}}))}))})),function(){i.Wo(),t.asyncQueue.enqueueAndForget((function(){return $i(r,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return e=HC,[4,sO(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}}))}))}))}}(tN(s),u,h)}function QA(t,e){return function(t,e){var n=this,r=new VI;return t.asyncQueue.enqueueAndForget((function(){return $i(n,void 0,void 0,(function(){var n;return Ji(this,(function(i){switch(i.label){case 0:return n=fk,[4,aO(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(tN(t),e)}function YA(t,e,n){var r=n.docs.get(e._key),i=new zA(t);return new aA(t,i,e._key,r,new oA(n.hasPendingWrites,n.fromCache),e.converter)}var XA,$A=(ZA.prototype.get=function(t){var e=this,n=BA(t,this._firestore),r=new FA(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Sm();if((t=t[0]).isFoundDocument())return new JN(e._firestore,r,t.key,t,n.converter);if(t.isNoDocument())return new JN(e._firestore,r,n._key,null,n.converter);throw Sm()}))},ZA.prototype.set=function(t,e,n){return e=jA((t=BA(t,this._firestore)).converter,e,n),n=IN(this._dataReader,"Transaction.set",t._key,e,null!==t.converter,n),this._transaction.set(t._key,n),this},ZA.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t=BA(t,this._firestore),e="string"==typeof(e=Go(e))||e instanceof iN?qN(this._dataReader,"Transaction.update",t._key,e,n,r):UN(this._dataReader,"Transaction.update",t._key,e),this._transaction.update(t._key,e),this},ZA.prototype.delete=function(t){return t=BA(t,this._firestore),this._transaction.delete(t._key),this},Yi(JA,XA=ZA),JA.prototype.get=function(t){var e=this,n=BA(t,this._firestore),r=new zA(this._firestore);return XA.prototype.get.call(this,t).then((function(t){return new aA(e._firestore,r,n._key,t._document,new oA(!1,!1),n.converter)}))},JA);function JA(t,e){var n=this;return(n=XA.call(this,t,e)||this)._firestore=t,n}function ZA(t,e){this._firestore=t,this._transaction=e,this._dataReader=wN(t)}function tP(){if("undefined"==typeof Uint8Array)throw new ym(gm.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function eP(){if("undefined"==typeof atob)throw new ym(gm.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var nP,rP=(lP.fromBase64String=function(t){return eP(),new lP(oN.fromBase64String(t))},lP.fromUint8Array=function(t){return tP(),new lP(oN.fromUint8Array(t))},lP.prototype.toBase64=function(){return eP(),this._delegate.toBase64()},lP.prototype.toUint8Array=function(){return tP(),this._delegate.toUint8Array()},lP.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},lP.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},lP),iP=(cP.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){rN(t=NO(t,$O));var n=tN(t),r=t._freezeSettings();return nN(n,t=new Mk,new Lk(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},cP.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){rN(t=NO(t,$O));var e=tN(t),n=t._freezeSettings();return nN(e,t=new Mk,new jk(t,n.cacheSizeBytes))}(t._delegate)},cP.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new ym(gm.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new VI;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return $i(e,void 0,void 0,(function(){var e;return Ji(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return $i(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return zI.yt()?(e=t+"main",[4,zI.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(PE(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},cP),oP=(Object.defineProperty(uP.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),uP.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},uP.prototype.useEmulator=function(t,e){var n,r;r=t,t=e,"firestore.googleapis.com"!==(e=(n=NO(n=this._delegate,xO))._getSettings()).host&&e.host!==r&&Tm("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},e),{host:r+":"+t,ssl:!1}))},uP.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return $i(e,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return[4,rO(t)];case 1:return e=r.sent(),[4,oO(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),(i=n).$r.delete(0),vC(i))]}var i}))}))}))}(tN(NO(this._delegate,$O)))},uP.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return $i(e,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return[4,rO(t)];case 1:return e=r.sent(),[4,oO(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return $i(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return(e=t).$r.add(0),[4,gC(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(tN(NO(this._delegate,$O)))},uP.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&SO("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},uP.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},uP.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},uP.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new VI;return t.asyncQueue.enqueueAndForget((function(){return $i(e,void 0,void 0,(function(){var e;return Ji(this,(function(r){switch(r.label){case 0:return e=gk,[4,aO(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(tN(NO(this._delegate,$O)))},uP.prototype.onSnapshotsInSync=function(t){return t=t,function(t,e){var n=this,r=new Kk(e);return t.asyncQueue.enqueueAndForget((function(){return $i(n,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return e=function(t,e){t.Gr.add(e),e.next()},[4,sO(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return $i(n,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return e=function(t,e){t.Gr.delete(e)},[4,sO(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(tN(NO(this._delegate,$O)),QO(t)?t:{next:t})},Object.defineProperty(uP.prototype,"app",{get:function(){if(!this.Xc)throw new ym(gm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),uP.prototype.collection=function(t){try{return new NP(this,BO(this._delegate,t))}catch(t){throw bP(t,"collection()","Firestore.collection()")}},uP.prototype.doc=function(t){try{return new yP(this,KO(this._delegate,t))}catch(t){throw bP(t,"doc()","Firestore.doc()")}},uP.prototype.collectionGroup=function(t){try{return new CP(this,function(t,e){if(t=NO(t,xO),TO("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new ym(gm.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new LO(t,null,(e=e,new o_(Vm.emptyPath(),e)))}(this._delegate,t))}catch(t){throw bP(t,"collectionGroup()","Firestore.collectionGroup()")}},uP.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new VI;return t.asyncQueue.enqueueAndForget((function(){return $i(n,void 0,void 0,(function(){var n;return Ji(this,(function(i){switch(i.label){case 0:return[4,nO(t).then((function(t){return t.datastore}))];case 1:return n=i.sent(),new Hk(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(tN(e=this._delegate),(function(r){return r=new $A(e,r),t(new hP(n,r))}))},uP.prototype.batch=function(){var t=this;return tN(this._delegate),new fP(new UA(this._delegate,(function(e){return QA(t._delegate,e)})))},uP.prototype.loadBundle=function(t){throw new ym(gm.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},uP.prototype.namedQuery=function(t){throw new ym(gm.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},uP),aP=(Yi(sP,nP=W),sP.prototype.convertBytes=function(t){return new rP(new oN(t))},sP.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),yP.Zc(t,this.firestore,null)},sP);function sP(t){var e=this;return(e=nP.call(this)||this).firestore=t,e}function uP(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof fO||(this.Xc=t)}function cP(){}function lP(t){this._delegate=t}var hP=(gP.prototype.get=function(t){var e=this,n=jP(t);return this._delegate.get(n).then((function(t){return new EP(e._firestore,new aA(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},gP.prototype.set=function(t,e,n){return t=jP(t),n?(EO("Transaction.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},gP.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=jP(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,eo([o,e,n],r)),this},gP.prototype.delete=function(t){return t=jP(t),this._delegate.delete(t),this},gP),fP=(vP.prototype.set=function(t,e,n){return t=jP(t),n?(EO("WriteBatch.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},vP.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=jP(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,eo([o,e,n],r)),this},vP.prototype.delete=function(t){return t=jP(t),this._delegate.delete(t),this},vP.prototype.commit=function(){return this._delegate.commit()},vP),dP=(pP.prototype.fromFirestore=function(t,e){return t=new sA(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null),this._delegate.fromFirestore(new SP(this._firestore,t),null!=e?e:{})},pP.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},pP.tu=function(t,e){var n=pP.eu,r=n.get(t);return r||(r=new WeakMap,n.set(t,r)),(n=r.get(e))||(n=new pP(t,new aP(t),e),r.set(e,n)),n},pP);function pP(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}function vP(t){this._delegate=t}function gP(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new aP(t)}dP.eu=new WeakMap;var yP=(mP.nu=function(t,e,n){if(t.length%2!=0)throw new ym(gm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new mP(e,new DO(e._delegate,n,new ab(t)))},mP.Zc=function(t,e,n){return new mP(e,new DO(e._delegate,n,t))},Object.defineProperty(mP.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(mP.prototype,"parent",{get:function(){return new NP(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(mP.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),mP.prototype.collection=function(t){try{return new NP(this.firestore,BO(this._delegate,t))}catch(t){throw bP(t,"collection()","DocumentReference.collection()")}},mP.prototype.isEqual=function(t){return(t=Go(t))instanceof DO&&zO(this._delegate,t)},mP.prototype.set=function(t,e){e=EO("DocumentReference.set",e);try{return function(t,e,n){t=NO(t,DO);var r=NO(t.firestore,$O);return e=jA(t.converter,e,n),QA(r,[IN(wN(r),"setDoc",t._key,e,null!==t.converter,n).toMutation(t._key,K_.none())])}(this._delegate,t,e)}catch(t){throw bP(t,"setDoc()","DocumentReference.set()")}},mP.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?HA(this._delegate,t):HA.apply(void 0,eo([this._delegate,t,e],n))}catch(t){throw bP(t,"updateDoc()","DocumentReference.update()")}},mP.prototype.delete=function(){return QA(NO((t=this._delegate).firestore,$O),[new uw(t._key,K_.none())]);var t},mP.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=_P(e),i=wP(e,(function(e){return new EP(t.firestore,new aA(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return GA(this._delegate,r,i)},mP.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=NO(t,DO);var e=NO(t.firestore,$O),n=tN(e),r=new zA(e);return function(t,e){var n=this,r=new VI;return t.asyncQueue.enqueueAndForget((function(){return $i(n,void 0,void 0,(function(){var n;return Ji(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return $i(this,void 0,void 0,(function(){var r,i;return Ji(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(a=e,(s=t).persistence.runTransaction("read document","readonly",(function(t){return s.Mn.mn(t,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new ym(gm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=jC(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var a,s}))}))},[4,iO(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new aA(e,r,t._key,n,new oA(null!==n&&n.hasLocalMutations,!0),t.converter)}))}:"server"===(null==t?void 0:t.source)?function(t){t=NO(t,DO);var e=NO(t.firestore,$O);return uO(tN(e),t._key,{source:"server"}).then((function(n){return YA(e,t,n)}))}:function(t){t=NO(t,DO);var e=NO(t.firestore,$O);return uO(tN(e),t._key).then((function(n){return YA(e,t,n)}))})(this._delegate).then((function(t){return new EP(e.firestore,new aA(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},mP.prototype.withConverter=function(t){return new mP(this.firestore,t?this._delegate.withConverter(dP.tu(this.firestore,t)):this._delegate.withConverter(null))},mP);function mP(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new aP(t)}function bP(t,e,n){return t.message=t.message.replace(e,n),t}function _P(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!QO(r))return r}return{}}function wP(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=QO(t[0])?t[0]:QO(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var IP,TP,EP=(Object.defineProperty(LP.prototype,"ref",{get:function(){return new yP(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(LP.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(LP.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(LP.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),LP.prototype.data=function(t){return this._delegate.data(t)},LP.prototype.get=function(t,e){return this._delegate.get(t,e)},LP.prototype.isEqual=function(t){return dA(this._delegate,t._delegate)},LP),SP=(Yi(DP,TP=EP),DP.prototype.data=function(t){return this._delegate.data(t)},DP),CP=(xP.prototype.where=function(t,e,n){try{return new xP(this.firestore,vA(this._delegate,(r=n,i=e,o=nA("where",t),new wA(o,i,r))))}catch(t){throw bP(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},xP.prototype.orderBy=function(t,e){try{return new xP(this.firestore,vA(this._delegate,(n=void 0===e?"asc":e,r=nA("orderBy",t),new IA(r,n))))}catch(t){throw bP(t,/(orderBy|where)\(\)/,"Query.$1()")}var n,r},xP.prototype.limit=function(t){try{return new xP(this.firestore,vA(this._delegate,(AO("limit",e=t),new TA("limit",e,"F"))))}catch(t){throw bP(t,"limit()","Query.limit()")}var e},xP.prototype.limitToLast=function(t){try{return new xP(this.firestore,vA(this._delegate,(AO("limitToLast",e=t),new TA("limitToLast",e,"L"))))}catch(t){throw bP(t,"limitToLast()","Query.limitToLast()")}var e},xP.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new xP(this.firestore,vA(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new EA("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw bP(t,"startAt()","Query.startAt()")}},xP.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new xP(this.firestore,vA(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new EA("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw bP(t,"startAfter()","Query.startAfter()")}},xP.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new xP(this.firestore,vA(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new SA("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw bP(t,"endBefore()","Query.endBefore()")}},xP.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new xP(this.firestore,vA(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new SA("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw bP(t,"endAt()","Query.endAt()")}},xP.prototype.isEqual=function(t){return WO(this._delegate,t._delegate)},xP.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=NO(t,LO);var e=NO(t.firestore,$O),n=tN(e),r=new zA(e);return function(t,e){var n=this,r=new VI;return t.asyncQueue.enqueueAndForget((function(){return $i(n,void 0,void 0,(function(){var n;return Ji(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return $i(this,void 0,void 0,(function(){var r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,YE(t,e,!0)];case 1:return o=a.sent(),r=new ok(e,o.Bn),i=r._o(o.documents),i=r.applyChanges(i,!1),n.resolve(i.snapshot),[3,3];case 2:return i=a.sent(),o=jC(i,"Failed to execute query '"+e+" against cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,iO(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new uA(e,r,t,n)}))}:"server"===(null==t?void 0:t.source)?function(t){t=NO(t,LO);var e=NO(t.firestore,$O),n=tN(e),r=new zA(e);return cO(n,t._query,{source:"server"}).then((function(n){return new uA(e,r,t,n)}))}:function(t){t=NO(t,LO);var e=NO(t.firestore,$O),n=tN(e),r=new zA(e);return pA(t._query),cO(n,t._query).then((function(n){return new uA(e,r,t,n)}))})(this._delegate).then((function(t){return new OP(e.firestore,new uA(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},xP.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=_P(e),i=wP(e,(function(e){return new OP(t.firestore,new uA(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return GA(this._delegate,r,i)},xP.prototype.withConverter=function(t){return new xP(this.firestore,t?this._delegate.withConverter(dP.tu(this.firestore,t)):this._delegate.withConverter(null))},xP),kP=(Object.defineProperty(RP.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(RP.prototype,"doc",{get:function(){return new SP(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(RP.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(RP.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),RP),OP=(Object.defineProperty(PP.prototype,"query",{get:function(){return new CP(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(PP.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(PP.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(PP.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(PP.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new SP(t._firestore,e)}))},enumerable:!1,configurable:!0}),PP.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new kP(e._firestore,t)}))},PP.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new SP(n._firestore,r))}))},PP.prototype.isEqual=function(t){return dA(this._delegate,t._delegate)},PP),NP=(Yi(AP,IP=CP),Object.defineProperty(AP.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(AP.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(AP.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new yP(this.firestore,t):null},enumerable:!1,configurable:!0}),AP.prototype.doc=function(t){try{return new yP(this.firestore,void 0===t?KO(this._delegate):KO(this._delegate,t))}catch(t){throw bP(t,"doc()","CollectionReference.doc()")}},AP.prototype.add=function(t){var e,n,r,i=this;return n=t,t=NO((e=this._delegate).firestore,$O),r=KO(e),n=jA(e.converter,n),QA(t,[IN(wN(e.firestore),"addDoc",r._key,n,null!==e.converter,{}).toMutation(r._key,K_.exists(!1))]).then((function(){return r})).then((function(t){return new yP(i.firestore,t)}))},AP.prototype.isEqual=function(t){return zO(this._delegate,t._delegate)},AP.prototype.withConverter=function(t){return new AP(this.firestore,t?this._delegate.withConverter(dP.tu(this.firestore,t)):this._delegate.withConverter(null))},AP);function AP(t,e){var n=this;return(n=IP.call(this,t,e)||this).firestore=t,n._delegate=e,n}function PP(t,e){this._firestore=t,this._delegate=e}function RP(t,e){this._firestore=t,this._delegate=e}function xP(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new aP(t)}function DP(){return null!==TP&&TP.apply(this,arguments)||this}function LP(t,e){this._firestore=t,this._delegate=e}function jP(t){return NO(t,DO)}function MP(t){this._delegate=t}function FP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(iN.bind.apply(iN,eo([void 0],t)))}FP.documentId=function(){return new FP(Km.keyField().canonicalString())},FP.prototype.isEqual=function(t){return(t=Go(t))instanceof iN&&this._delegate._internalPath.isEqual(t._internalPath)},kn=FP,MP.serverTimestamp=function(){var t=new PN("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new MP(t)},MP.delete=function(){var t=new EN("deleteField");return t._methodName="FieldValue.delete",new MP(t)},MP.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new RN("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new MP(n)},MP.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xN("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new MP(n)},MP.increment=function(t){return(t=new DN("increment",t))._methodName="FieldValue.increment",new MP(t)},MP.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)};var UP,qP,VP={Firestore:oP,GeoPoint:sN,Timestamp:Rm,Blob:rP,Transaction:hP,WriteBatch:fP,DocumentReference:yP,DocumentSnapshot:EP,Query:CP,QueryDocumentSnapshot:SP,QuerySnapshot:OP,CollectionReference:NP,FieldPath:kn,FieldValue:W=MP,setLogLevel:function(t){mm.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(UP=Ia).INTERNAL.registerComponent(new Qo("firestore",(function(t){var e=t.getProvider("app").getImmediate();return e=e,t=t.getProvider("auth-internal"),new oP(e,new $O(e,t),new iP)}),"PUBLIC").setServiceProps(Object.assign({},VP))),UP.registerVersion("@firebase/firestore","2.2.5"),(qP=oP).prototype.loadBundle=function(t){return e=this._delegate,n=t,r=tN(e=NO(e,$O)),t=new XO,function(t,e,r){var i,o=this,a=(i=n,e=ZS(e),i=function(t){if(t instanceof Uint8Array)return Bk(t,void 0);if(t instanceof ArrayBuffer)return Bk(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new zk(i,e));t.asyncQueue.enqueueAndForget((function(){return $i(o,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return e=Pk,[4,aO(t)];case 1:return e.apply(void 0,[n.sent(),a,r]),[2]}}))}))}))}(r,e._databaseId,t),t;var e,n,r},qP.prototype.namedQuery=function(t){var e=this,n=this._delegate;return t=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return $i(n,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Qe.getNamedQuery(t,e)}))},[4,iO(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(tN(n=NO(n,$O)),t).then((function(t){return t?new LO(n,null,t.query):null})).then((function(t){return t?new CP(e,t):null}))};var BP,KP={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},zP=(Yi(WP,BP=Error),WP);function WP(t,e,n){return e=BP.call(this,e)||this,Object.setPrototypeOf(e,WP.prototype),e.code=t,e.details=n,e}var HP=(GP.prototype.getAuthToken=function(){return $i(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},GP.prototype.getInstanceIdToken=function(){return $i(this,void 0,void 0,(function(){return Ji(this,(function(t){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},GP.prototype.getContext=function(){return $i(this,void 0,void 0,(function(){var t,e;return Ji(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},GP);function GP(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}function QP(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var YP=(XP.prototype.encode=function(t){var e=this;if(null==t)return null;if("number"==typeof(t=t instanceof Number?t.valueOf():t)&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return QP(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},XP.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?QP(t,(function(t){return e.decode(t)})):t},XP);function XP(){}var $P,JP,ZP,tR=(Object.defineProperty(eR.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),eR.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},eR.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},eR.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},eR.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},eR.prototype.postJSON=function(t,e,n){return $i(this,void 0,void 0,(function(){var r,i;return Ji(this,(function(o){switch(o.label){case 0:n["Content-Type"]="application/json",o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 2:return r=o.sent(),[3,4];case 3:return o.sent(),[2,{status:0,json:null}];case 4:i=null,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,r.json()];case 6:return i=o.sent(),[3,8];case 7:return o.sent(),[3,8];case 8:return[2,{status:r.status,json:i}]}}))}))},eR.prototype.call=function(t,e,n){return $i(this,void 0,void 0,(function(){var r,i,o,a,s;return Ji(this,(function(u){switch(u.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(a=u.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,c=s,h=new Promise((function(t,e){l=setTimeout((function(){e(new zP("deadline-exceeded","deadline-exceeded"))}),c)})),s=(a={timer:l,promise:h}).timer,a=a.promise,[4,Promise.race([nR(s,this.postJSON(r,i,o)),a,nR(s,this.cancelAllRequests)])];case 2:if(!(a=u.sent()))throw new zP("cancelled","Firebase Functions instance was deleted.");if(s=function(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!KP[s])return new zP("internal","internal");r=KP[s],i=s}"string"==typeof(s=a.message)&&(i=s),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new zP(r,i,o)}(a.status,a.json,this.serializer))throw s;if(!a.json)throw new zP("internal","Response is not valid JSON object.");if(void 0===(s=void 0===(s=a.json.data)?a.json.result:s))throw new zP("internal","Response is missing data field.");return[2,{data:this.serializer.decode(s)}]}var c,l,h}))}))},eR);function eR(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new YP,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new HP(e,n),this.cancelAllRequests=new Promise((function(t){o.deleteService=function(){return t()}}));try{var a=new URL(r);this.customDomain=a.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}function nR(t,e){return $i(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}function rR(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function iR(t,e,n){var r,i=new Promise((function(i,o){rR(r=t[e].apply(t,n)).then(i,o)}));return i.request=r,i}function oR(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function aR(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return iR(this[e],r,arguments)})}))}function sR(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function uR(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return t=this[e],(n=iR(t,r,arguments)).then((function(t){if(t)return new lR(t,n.request)}));var t,n})}))}function cR(t){this._index=t}function lR(t,e){this._cursor=t,this._request=e}function hR(t){this._store=t}function fR(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function dR(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new fR(n)}function pR(t){this._db=t}function vR(t,e,n){var r=(e=iR(indexedDB,"open",[t,e])).request;return r&&(r.onupgradeneeded=function(t){n&&n(new dR(r.result,t.oldVersion,r.transaction))}),e.then((function(t){return new pR(t)}))}function gR(t){return iR(indexedDB,"deleteDatabase",[t])}$P=Ia,JP=fetch.bind(self),ZP={Functions:tR},$P.INTERNAL.registerComponent(new Qo("functions",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate();return e=t.getProvider("auth-internal"),t=t.getProvider("messaging"),new tR(r,e,t,n,JP)}),"PUBLIC").setServiceProps(ZP).setMultipleInstances(!0)),Ia.registerVersion("@firebase/functions","0.6.7"),oR(cR,"_index",["name","keyPath","multiEntry","unique"]),aR(cR,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),uR(cR,"_index",IDBIndex,["openCursor","openKeyCursor"]),oR(lR,"_cursor",["direction","key","primaryKey","value"]),aR(lR,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(lR.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,n),rR(e._request).then((function(t){if(t)return new lR(t,e._request)}))}))})})),hR.prototype.createIndex=function(){return new cR(this._store.createIndex.apply(this._store,arguments))},hR.prototype.index=function(){return new cR(this._store.index.apply(this._store,arguments))},oR(hR,"_store",["name","keyPath","indexNames","autoIncrement"]),aR(hR,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),uR(hR,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),sR(hR,"_store",IDBObjectStore,["deleteIndex"]),fR.prototype.objectStore=function(){return new hR(this._tx.objectStore.apply(this._tx,arguments))},oR(fR,"_tx",["objectStoreNames","mode"]),sR(fR,"_tx",IDBTransaction,["abort"]),dR.prototype.createObjectStore=function(){return new hR(this._db.createObjectStore.apply(this._db,arguments))},oR(dR,"_db",["name","version","objectStoreNames"]),sR(dR,"_db",IDBDatabase,["deleteObjectStore","close"]),pR.prototype.transaction=function(){return new fR(this._db.transaction.apply(this._db,arguments))},oR(pR,"_db",["name","version","objectStoreNames"]),sR(pR,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[hR,cR].forEach((function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var e=(r=arguments,Array.prototype.slice.call(r)),n=e[e.length-1],r=this._store||this._index,i=r[t].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[cR,hR].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})}));var yR="w:0.4.25",mR=((kn={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',kn["not-registered"]="Firebase Installation is not registered.",kn["installation-not-found"]="Firebase Installation not found.",kn["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',kn["app-offline"]="Could not process request. Application offline.",kn["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",new So("installations","Installations",W=kn));function bR(t){return t instanceof To&&t.code.includes("request-failed")}function _R(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+(t=t.projectId)+"/installations"}function wR(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function IR(t,e){return $i(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,e.json()];case 1:return n=(n=r.sent()).error,[2,mR.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}}))}))}function TR(t){return t=t.apiKey,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ER(t,e){return e=e.refreshToken,(t=TR(t)).append("Authorization","FIS_v2 "+e),t}function SR(t){return $i(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return 500<=(e=n.sent()).status&&e.status<600?[2,t()]:[2,e]}}))}))}function CR(t){return new Promise((function(e){setTimeout(e,t)}))}var kR=/^[cdef][\w-]{21}$/;function OR(){try{var t=new Uint8Array(17);return(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16,t=function(t){return btoa(String.fromCharCode.apply(String,eo([],to(t)))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22),kR.test(t)?t:""}catch(t){return""}}function NR(t){return t.appName+"!"+t.appId}var AR=new Map;function PR(t,e){RR(t=NR(t),e),function(t,e){var n=DR();n&&n.postMessage({key:t,fid:e}),LR()}(t,e)}function RR(t,e){var n,r,i=AR.get(t);if(i)try{for(var o=Zi(i),a=o.next();!a.done;a=o.next())(0,a.value)(e)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var xR=null;function DR(){return!xR&&"BroadcastChannel"in self&&((xR=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){RR(t.data.key,t.data.fid)}),xR}function LR(){0===AR.size&&xR&&(xR.close(),xR=null)}var jR,MR="firebase-installations-store",FR=null;function UR(){return FR=FR||vR("firebase-installations-database",1,(function(t){0===t.oldVersion&&t.createObjectStore(MR)}))}function qR(t,e){return $i(this,void 0,void 0,(function(){var n,r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return n=NR(t),[4,UR()];case 1:return i=a.sent(),r=i.transaction(MR,"readwrite"),[4,(i=r.objectStore(MR)).get(n)];case 2:return o=a.sent(),[4,i.put(e,n)];case 3:return a.sent(),[4,r.complete];case 4:return a.sent(),o&&o.fid===e.fid||PR(t,e.fid),[2,e]}}))}))}function VR(t){return $i(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return e=NR(t),[4,UR()];case 1:return[4,(n=(n=r.sent()).transaction(MR,"readwrite")).objectStore(MR).delete(e)];case 2:return r.sent(),[4,n.complete];case 3:return r.sent(),[2]}}))}))}function BR(t,e){return $i(this,void 0,void 0,(function(){var n,r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return n=NR(t),[4,UR()];case 1:return i=s.sent(),r=i.transaction(MR,"readwrite"),[4,(i=r.objectStore(MR)).get(n)];case 2:return o=s.sent(),void 0!==(a=e(o))?[3,4]:[4,i.delete(n)];case 3:return s.sent(),[3,6];case 4:return[4,i.put(a,n)];case 5:s.sent(),s.label=6;case 6:return[4,r.complete];case 7:return s.sent(),!a||o&&o.fid===a.fid||PR(t,a.fid),[2,a]}}))}))}function KR(t){return $i(this,void 0,void 0,(function(){var e,n,r;return Ji(this,(function(i){switch(i.label){case 0:return[4,BR(t,(function(n){return n=WR(n||{fid:OR(),registrationStatus:0}),n=function(t,e){return 0!==e.registrationStatus?1===e.registrationStatus?{installationEntry:e,registrationPromise:function(t){return $i(this,void 0,void 0,(function(){var e,n,r;return Ji(this,(function(i){switch(i.label){case 0:return[4,zR(t)];case 1:e=i.sent(),i.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,CR(100)];case 3:return i.sent(),[4,zR(t)];case 4:return e=i.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,KR(t)];case 6:return r=i.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}}))}))}(t)}:{installationEntry:e}:navigator.onLine?(t=function(t,e){return $i(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,function(t,e){var n=e.fid;return $i(this,void 0,void 0,(function(){var e,r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return e=_R(t),r=TR(t),a={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:yR},i={method:"POST",headers:r,body:JSON.stringify(a)},[4,SR((function(){return fetch(e,i)}))];case 1:return(o=s.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(a=s.sent()).fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:wR(a.authToken)}];case 3:return[4,IR("Create Installation",o)];case 4:throw s.sent()}}))}))}(t,e)];case 1:return n=i.sent(),[2,qR(t,n)];case 2:return bR(r=i.sent())&&409===r.customData.serverCode?[4,VR(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,qR(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()}),{installationEntry:e,registrationPromise:t}):{installationEntry:e,registrationPromise:Promise.reject(mR.create("app-offline"))}}(t,n),e=n.registrationPromise,n.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function zR(t){return BR(t,(function(t){if(!t)throw mR.create("installation-not-found");return WR(t)}))}function WR(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function HR(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return $i(this,void 0,void 0,(function(){var t,i,o,a,s;return Ji(this,(function(u){switch(u.label){case 0:return t=function(t,e){return e=e.fid,_R(t)+"/"+e+"/authTokens:generate"}(n,e),i=ER(n,e),(s=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",s.getPlatformInfoString()),s={installation:{sdkVersion:yR}},o={method:"POST",headers:i,body:JSON.stringify(s)},[4,SR((function(){return fetch(t,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,wR(s=u.sent())];case 3:return[4,IR("Generate Auth Token",a)];case 4:throw u.sent()}}))}))}function GR(t,e){return void 0===e&&(e=!1),$i(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:return[4,BR(t.appConfig,(function(r){if(!YR(r))throw mR.create("not-registered");var i,o=r.authToken;if(e||2!==(i=o).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i)){if(1===o.requestStatus)return n=function(t,e){return $i(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,QR(t.appConfig)];case 1:n=r.sent(),r.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,CR(100)];case 3:return r.sent(),[4,QR(t.appConfig)];case 4:return n=r.sent(),[3,2];case 5:return 0===(n=n.authToken).requestStatus?[2,GR(t,e)]:[2,n]}}))}))}(t,e),r;if(!navigator.onLine)throw mR.create("app-offline");return i=r,o={requestStatus:1,requestTime:Date.now()},o=Xi(Xi({},i),{authToken:o}),n=function(t,e){return $i(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,HR(t,e)];case 1:return n=o.sent(),i=Xi(Xi({},e),{authToken:n}),[4,qR(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!bR(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,VR(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Xi(Xi({},e),{authToken:{requestStatus:0}}),[4,qR(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}return r}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function QR(t){return BR(t,(function(t){if(!YR(t))throw mR.create("not-registered");var e=t.authToken;return 1===(e=e).requestStatus&&e.requestTime+1e4<Date.now()?Xi(Xi({},t),{authToken:{requestStatus:0}}):t}))}function YR(t){return void 0!==t&&2===t.registrationStatus}function XR(t,e){return $i(this,void 0,void 0,(function(){var n,r,i;return Ji(this,(function(o){switch(o.label){case 0:return n=function(t,e){return e=e.fid,_R(t)+"/"+e}(t,e),i=ER(t,e),r={method:"DELETE",headers:i},[4,SR((function(){return fetch(n,r)}))];case 1:return(i=o.sent()).ok?[3,3]:[4,IR("Delete Installation",i)];case 2:throw o.sent();case 3:return[2]}}))}))}function $R(t){return mR.create("missing-app-config-values",{valueName:t})}(jR=Ia).INTERNAL.registerComponent(new Qo("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw $R("App Configuration");if(!t.name)throw $R("App Name");try{for(var r=Zi(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw $R(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return $i(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return[4,KR(t.appConfig)];case 1:return e=r.sent(),n=e.installationEntry,(e.registrationPromise||GR(t)).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),$i(this,void 0,void 0,(function(){return Ji(this,(function(n){switch(n.label){case 0:return[4,function(t){return $i(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return[4,KR(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}(t.appConfig)];case 1:return n.sent(),[4,GR(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return $i(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return[4,BR(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw mR.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw mR.create("app-offline");case 3:return[4,XR(e,n)];case 4:return r.sent(),[4,VR(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){DR();var n=NR(t);(t=AR.get(n))||(t=new Set,AR.set(n,t)),t.add(e)}(n,e),function(){var t,r,i;r=e,i=NR(t=n),(t=AR.get(i))&&(t.delete(r),0===t.size&&AR.delete(i),LR())}}(n,t)}}}),"PUBLIC")),jR.registerVersion("@firebase/installations","0.4.25"),(kn={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',kn["only-available-in-window"]="This method is available in a Window context.",kn["only-available-in-sw"]="This method is available in a service worker context.",kn["permission-default"]="The notification permission was not granted and dismissed instead.",kn["permission-blocked"]="The notification permission was not granted and blocked instead.",kn["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",kn["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",kn["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",kn["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",kn["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",kn["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",kn["token-update-no-token"]="FCM returned no token when updating the user to push.",kn["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",kn["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",kn["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",kn["invalid-vapid-key"]="The public VAPID key must be a string.",kn["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.";var JR,ZR=new So("messaging","Messaging",W=kn),tx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ex="FCM_MSG",nx="google.c.a.c_id";function rx(t){return t=new Uint8Array(t),btoa(String.fromCharCode.apply(String,eo([],to(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(kn=JR=JR||{}).PUSH_RECEIVED="push-received",kn.NOTIFICATION_CLICKED="notification-clicked";var ix="fcm_token_details_db",ox="fcm_token_object_Store";function ax(t){return $i(this,void 0,void 0,(function(){var e,n=this;return Ji(this,(function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map((function(t){return t.name})).includes(ix))return[2,null];r.label=2;case 2:return e=null,[4,vR(ix,5,(function(r){return $i(n,void 0,void 0,(function(){var n,i,o;return Ji(this,(function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(ox)?[4,(o=r.transaction.objectStore(ox)).index("fcmSenderId").get(t)]:[2];case 1:return n=a.sent(),[4,o.clear()];case 2:if(a.sent(),!n)return[2];if(2===r.oldVersion){if(!(i=n).auth||!i.p256dh||!i.endpoint)return[2];e={token:i.fcmToken,createTime:null!==(o=i.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:i.auth,p256dh:i.p256dh,endpoint:i.endpoint,swScope:i.swScope,vapidKey:"string"==typeof i.vapidKey?i.vapidKey:rx(i.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(i=n).fcmToken,createTime:i.createTime,subscriptionOptions:{auth:rx(i.auth),p256dh:rx(i.p256dh),endpoint:i.endpoint,swScope:i.swScope,vapidKey:rx(i.vapidKey)}});return[2]}}))}))}))];case 3:return r.sent().close(),[4,gR(ix)];case 4:return r.sent(),[4,gR("fcm_vapid_details_db")];case 5:return r.sent(),[4,gR("undefined")];case 6:return r.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(e)?e:null]}}))}))}var sx="firebase-messaging-store",ux=null;function cx(){return ux=ux||vR("firebase-messaging-database",1,(function(t){0===t.oldVersion&&t.createObjectStore(sx)}))}function lx(t){return $i(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return e=fx(t),[4,cx()];case 1:return[4,r.sent().transaction(sx).objectStore(sx).get(e)];case 2:return(e=r.sent())?[2,e]:[3,3];case 3:return[4,ax(t.appConfig.senderId)];case 4:return(n=r.sent())?[4,hx(t,n)]:[3,6];case 5:return r.sent(),[2,n];case 6:return[2]}}))}))}function hx(t,e){return $i(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return n=fx(t),[4,cx()];case 1:return[4,(r=(r=i.sent()).transaction(sx,"readwrite")).objectStore(sx).put(e,n)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2,e]}}))}))}function fx(t){return t.appConfig.appId}function dx(t,e){return $i(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return[4,vx(t)];case 1:n={method:"DELETE",headers:n=i.sent()},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(px(t.appConfig)+"/"+e,n)];case 3:return[4,i.sent().json()];case 4:if((n=i.sent()).error)throw r=n.error.message,ZR.create("token-unsubscribe-failed",{errorInfo:r});return[3,6];case 5:throw r=i.sent(),ZR.create("token-unsubscribe-failed",{errorInfo:r});case 6:return[2]}}))}))}function px(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+(t=t.projectId)+"/registrations"}function vx(t){var e=t.appConfig,n=t.installations;return $i(this,void 0,void 0,(function(){var t;return Ji(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function gx(t){var e=t.p256dh,n=t.auth;return e={web:{endpoint:t.endpoint,auth:n,p256dh:e}},(t=t.vapidKey)!==tx&&(e.web.applicationPubKey=t),e}function yx(t,e,n){return $i(this,void 0,void 0,(function(){var r,i,o;return Ji(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw ZR.create("permission-blocked");return[4,function(t,e){return $i(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/");for(var e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(e)})]}}))}))}(e,n)];case 1:return o=a.sent(),[4,lx(t)];case 2:return r=a.sent(),i={vapidKey:n,swScope:e.scope,endpoint:o.endpoint,auth:rx(o.getKey("auth")),p256dh:rx(o.getKey("p256dh"))},r?[3,3]:[2,bx(t,i)];case 3:if(s=r.subscriptionOptions,c=(u=i).vapidKey===s.vapidKey,l=u.endpoint===s.endpoint,h=u.auth===s.auth,s=u.p256dh===s.p256dh,c&&l&&h&&s)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,dx(t,r.token)];case 5:return a.sent(),[3,7];case 6:return o=a.sent(),console.warn(o),[3,7];case 7:return[2,bx(t,i)];case 8:return Date.now()>=r.createTime+6048e5?[2,function(t,e,n){return $i(this,void 0,void 0,(function(){var r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,function(t,e){return $i(this,void 0,void 0,(function(){var n,r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return[4,vx(t)];case 1:n=a.sent(),r=gx(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(px(t.appConfig)+"/"+e.token,r)];case 3:return[4,a.sent().json()];case 4:return i=a.sent(),[3,6];case 5:throw o=a.sent(),ZR.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw o=i.error.message,ZR.create("token-update-failed",{errorInfo:o});if(!i.token)throw ZR.create("token-update-no-token");return[2,i.token]}}))}))}(e,t)];case 1:return r=a.sent(),i=Xi(Xi({},t),{token:r,createTime:Date.now()}),[4,hx(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,mx(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}({token:r.token,createTime:Date.now(),subscriptionOptions:i},t,e)]:[2,r.token];case 9:return[2]}var s,u,c,l,h}))}))}function mx(t,e){return $i(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,lx(t)];case 1:return(n=r.sent())?[4,dx(t,n.token)]:[3,4];case 2:return r.sent(),[4,function(t){return $i(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return e=fx(t),[4,cx()];case 1:return[4,(n=(n=r.sent()).transaction(sx,"readwrite")).objectStore(sx).delete(e)];case 2:return r.sent(),[4,n.complete];case 3:return r.sent(),[2]}}))}))}(t)];case 3:r.sent(),r.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(n=r.sent())?[2,n.unsubscribe()]:[2,!0]}}))}))}function bx(t,e){return $i(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,function(t,e){return $i(this,void 0,void 0,(function(){var n,r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return[4,vx(t)];case 1:n=a.sent(),r=gx(e),r={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(px(t.appConfig),r)];case 3:return[4,a.sent().json()];case 4:return i=a.sent(),[3,6];case 5:throw o=a.sent(),ZR.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw o=i.error.message,ZR.create("token-subscribe-failed",{errorInfo:o});if(!i.token)throw ZR.create("token-subscribe-no-token");return[2,i.token]}}))}))}(t,e)];case 1:return n={token:n=r.sent(),createTime:Date.now(),subscriptionOptions:e},[4,hx(t,n)];case 2:return r.sent(),[2,n.token]}}))}))}function _x(t){return"object"==typeof t&&t&&nx in t}function wx(t){return new Promise((function(e){setTimeout(e,t)}))}var Ix=(Object.defineProperty(Tx.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),Tx.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw ZR.create("invalid-bg-handler");this.bgMessageHandler=t},Tx.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},Tx.prototype.getToken=function(){var t;return $i(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return this.vapidKey?[3,2]:[4,lx(this.firebaseDependencies)];case 1:e=n.sent(),this.vapidKey=null!==(t=null===(t=null==e?void 0:e.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==t?t:tx,n.label=2;case 2:return[2,yx(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},Tx.prototype.deleteToken=function(){return mx(this.firebaseDependencies,self.registration)},Tx.prototype.requestPermission=function(){throw ZR.create("only-available-in-window")},Tx.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw ZR.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw ZR.create("invalid-vapid-key");this.vapidKey=t},Tx.prototype.useServiceWorker=function(){throw ZR.create("only-available-in-window")},Tx.prototype.onMessage=function(){throw ZR.create("only-available-in-window")},Tx.prototype.onTokenRefresh=function(){throw ZR.create("only-available-in-window")},Tx.prototype.onPush=function(t){return $i(this,void 0,void 0,(function(){var e,n,r;return Ji(this,(function(i){switch(i.label){case 0:return(r=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(t))?[4,Ex()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(e=i.sent()).some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=JR.PUSH_RECEIVED;try{for(var i=Zi(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(e,r)]:(n=!1,r.notification?[4,function(t){var e=t.actions,n=Notification.maxActions;return e&&n&&e.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(n=t.title)&&void 0!==n?n:"",t)}(((s=Xi({},(o=r).notification)).data=((a={})[ex]=o,a),s))]:[3,3]);case 2:i.sent(),n=!0,i.label=3;case 3:return!0===n&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(r=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n),(n=e.notification.body)&&(t.notification.body=n),(e=e.notification.image)&&(t.notification.image=e)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n),(e=e.fcmOptions.analytics_label)&&(t.fcmOptions.analyticsLabel=e)}}(e,t),e}(r),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(r):this.bgMessageHandler.next(r)),[4,wx(1e3)]);case 4:return i.sent(),[2]}var o,a,s}))}))},Tx.prototype.onSubChange=function(t){var e;return $i(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return t.newSubscription?[3,2]:[4,mx(this.firebaseDependencies,self.registration)];case 1:return r.sent(),[2];case 2:return[4,lx(this.firebaseDependencies)];case 3:return n=r.sent(),[4,mx(this.firebaseDependencies,self.registration)];case 4:return r.sent(),[4,yx(this.firebaseDependencies,self.registration,null!==(e=null===(e=null==n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==e?e:tx)];case 5:return r.sent(),[2]}}))}))},Tx.prototype.onNotificationClick=function(t){var e;return $i(this,void 0,void 0,(function(){var n,r,i,o,a;return Ji(this,(function(s){switch(s.label){case 0:return(n=null===(e=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===e?void 0:e[ex])?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(r=function(t){var e,n=null!==(e=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=t.notification)||void 0===n?void 0:n.click_action;return n||(_x(t.data)?self.location.origin:null)}(n))?(i=new URL(r,self.location.href),o=new URL(self.location.origin),i.host!==o.host?[2]:[4,function(t){return $i(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return Ji(this,(function(u){switch(u.label){case 0:return[4,Ex()];case 1:e=u.sent();try{for(n=Zi(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(u){a={error:u}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}(i)]):[2]):[2];case 1:return(a=s.sent())?[3,4]:[4,self.clients.openWindow(r)];case 2:return a=s.sent(),[4,wx(3e3)];case 3:return s.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=s.sent(),s.label=6;case 6:return a?(n.messageType=JR.NOTIFICATION_CLICKED,n.isFirebaseMessaging=!0,[2,a.postMessage(n)]):[2]}}))}))},Tx);function Tx(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}function Ex(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var Sx=(Object.defineProperty(Cx.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),Cx.prototype.messageEventListener=function(t){return $i(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===JR.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(i=Object.assign({},e)).messageType,delete i.isFirebaseMessaging,i)):this.onMessageCallback.next(Object.assign({},e))),_x(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}var i}))}))},Cx.prototype.getVapidKey=function(){return this.vapidKey},Cx.prototype.getSwReg=function(){return this.swRegistration},Cx.prototype.getToken=function(t){return $i(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw ZR.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,yx(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},Cx.prototype.updateVapidKey=function(t){return $i(this,void 0,void 0,(function(){return Ji(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=tx),[2]}))}))},Cx.prototype.updateSwReg=function(t){return $i(this,void 0,void 0,(function(){return Ji(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw ZR.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},Cx.prototype.registerDefaultSw=function(){return $i(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=e.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=e.sent(),ZR.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},Cx.prototype.deleteToken=function(){return $i(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,mx(this.firebaseDependencies,this.swRegistration)]}}))}))},Cx.prototype.requestPermission=function(){return $i(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?ZR.create("permission-blocked"):ZR.create("permission-default")}}))}))},Cx.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw ZR.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw ZR.create("invalid-vapid-key");this.vapidKey=t},Cx.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw ZR.create("invalid-sw-registration");if(this.swRegistration)throw ZR.create("use-sw-after-get-token");this.swRegistration=t},Cx.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},Cx.prototype.setBackgroundMessageHandler=function(){throw ZR.create("only-available-in-sw")},Cx.prototype.onBackgroundMessage=function(){throw ZR.create("only-available-in-sw")},Cx.prototype.onTokenRefresh=function(){return function(){}},Cx.prototype.logEvent=function(t,e){return $i(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case JR.NOTIFICATION_CLICKED:return"notification_open";case JR.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e[nx],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},Cx);function Cx(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}function kx(t){return ZR.create("missing-app-config-values",{valueName:t})}function Ox(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}W={isSupported:Ox},Ia.INTERNAL.registerComponent(new Qo("messaging",(function(t){var e=t.getProvider("app").getImmediate();if(t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw kx("App Configuration Object");if(!t.name)throw kx("App Name");var r=t.options;try{for(var i=Zi(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw kx(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")},!Ox())throw ZR.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?Ix:Sx)(t)}),"PUBLIC").setServiceProps(W));var Nx,Ax="firebasestorage.googleapis.com",Px="storageBucket",Rx=(Yi(xx,Nx=To),xx.prototype._codeEquals=function(t){return Dx(t)===this.code},Object.defineProperty(xx.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),xx);function xx(t,e){return(t=Nx.call(this,Dx(t),"Firebase Storage: "+e+" ("+Dx(t)+")")||this).customData={serverResponse:null},t._baseMessage=t.message,Object.setPrototypeOf(t,xx.prototype),t}function Dx(t){return"storage/"+t}function Lx(){return new Rx("unknown","An unknown error occurred, please check the error payload for server response.")}function jx(){return new Rx("canceled","User canceled the upload/download.")}function Mx(){return new Rx("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Fx(t){return new Rx("invalid-argument",t)}function Ux(){return new Rx("app-deleted","The Firebase app was deleted.")}function qx(t){return new Rx("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vx(t,e){return new Rx("invalid-format","String does not match format '"+t+"': "+e)}function Bx(t){throw new Rx("internal-error","Internal error: "+t)}var Kx={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},zx=function(t,e){this.data=t,this.contentType=e||null};function Wx(t,e){switch(t){case Kx.RAW:return new zx(Hx(e));case Kx.BASE64:case Kx.BASE64URL:return new zx(Gx(t,e));case Kx.DATA_URL:return new zx(function(t){return(t=new Yx(t)).base64?Gx(Kx.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Vx(Kx.DATA_URL,"Malformed data URL.")}return Hx(e)}(t.rest)}(e),new Yx(e).contentType)}throw Lx()}function Hx(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Gx(t,e){switch(t){case Kx.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Vx(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Kx.BASE64URL:if(r=-1!==e.indexOf("+"),n=-1!==e.indexOf("/"),r||n)throw Vx(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(e)}catch(e){throw Vx(t,"Invalid character found")}for(var o=new Uint8Array(i.length),a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return o}var Qx,Yx=function(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw Vx(Kx.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)},Xx={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $x(t){switch(t){case"running":case"pausing":case"canceling":return Xx.RUNNING;case"paused":return Xx.PAUSED;case"success":return Xx.SUCCESS;case"canceled":return Xx.CANCELED;case"error":default:return Xx.ERROR}}(kn=Qx=Qx||{})[kn.NO_ERROR=0]="NO_ERROR",kn[kn.NETWORK_ERROR=1]="NETWORK_ERROR",kn[kn.ABORT=2]="ABORT";var Jx=(Zx.prototype.send=function(t,e,n,r){if(this.sent_)throw Bx("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},Zx.prototype.getErrorCode=function(){if(!this.sent_)throw Bx("cannot .getErrorCode() before sending");return this.errorCode_},Zx.prototype.getStatus=function(){if(!this.sent_)throw Bx("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},Zx.prototype.getResponseText=function(){if(!this.sent_)throw Bx("cannot .getResponseText() before sending");return this.xhr_.responseText},Zx.prototype.abort=function(){this.xhr_.abort()},Zx.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},Zx.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},Zx.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},Zx);function Zx(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Qx.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Qx.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Qx.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}var tD=(eD.prototype.createXhrIo=function(){return new Jx},eD);function eD(){}var nD=(Object.defineProperty(rD.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(rD.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),rD.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},rD.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},rD.makeFromBucketSpec=function(t,e){var n;try{n=rD.makeFromUrl(t,e)}catch(e){return new rD(t,"")}if(""===n.path)return n;throw new Rx("invalid-default-bucket","Invalid default bucket '"+t+"'.")},rD.makeFromUrl=function(t,e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=e.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+(e===Ax?"(?:storage.googleapis.com|storage.cloud.google.com)":e)+"/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(t);if(l){n=new rD(l[c.indices.bucket],l[c.indices.path]||""),c.postModify(n);break}}if(null==n)throw new Rx("invalid-url","Invalid URL '"+t+"'.");return n},rD);function rD(t,e){this.bucket=t,this.path_=e}var iD=(oD.prototype.getPromise=function(){return this.promise_},oD.prototype.cancel=function(t){},oD);function oD(t){this.promise_=Promise.reject(t)}function aD(t){return"string"==typeof t||t instanceof String}function sD(t){return uD()&&t instanceof Blob}function uD(){return"undefined"!=typeof Blob}function cD(t,e,n,r){if(r<e)throw Fx("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw Fx("Invalid value for '"+t+"'. Expected "+n+" or less.")}function lD(t,e){var n=e.match(/^(\w+):\/\/.+/);return(null==(null==n?void 0:n[1])?"https://"+e:e)+"/v0"+t}function hD(t){var e,n=encodeURIComponent,r="?";for(e in t)t.hasOwnProperty(e)&&(r=r+(n(e)+"=")+n(t[e])+"&");return r.slice(0,-1)}var fD=(dD.prototype.start_=function(){var t,e,n,r,i,o,a,s,u,c=this;function l(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var a=c.callback_(o,o.getResponseText());void 0!==a?r(a):r()}catch(t){i(t)}else null!==o?((n=Lx()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?Ux:jx)()):i(n=new Rx("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}function h(){return 2===a}function f(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];s||(s=!0,e.apply(null,t))}function d(e){i=setTimeout((function(){i=null,t(p,h())}),e)}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];s||(t||h()||o?f.call.apply(f,eo([null,t],e)):(r<64&&(r*=2),d(1===a?(a=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,s||(null!==i?(t||(a=2),clearTimeout(i),d(0)):t||(a=1)))}this.canceled_?l(0,new pD(!1,null,!0)):this.backoffId_=(t=function(t,e){function n(t){var e=t.loaded;t=t.lengthComputable?t.total:-1,null!==c.progressCallback_&&c.progressCallback_(e,t)}e?t(!1,new pD(!1,null,!0)):(e=c.pool_.createXhrIo(),c.pendingXhr_=e,null!==c.progressCallback_&&e.addUploadProgressListener(n),e.send(c.url_,c.method_,c.body_,c.headers_).then((function(e){null!==c.progressCallback_&&e.removeUploadProgressListener(n),c.pendingXhr_=null;var r=e.getErrorCode()===Qx.NO_ERROR,i=e.getStatus();r&&!c.isRetryStatusCode_(i)?(i=-1!==c.successCodes_.indexOf(i),t(!0,new pD(i,e))):(e=e.getErrorCode()===Qx.ABORT,t(!1,new pD(!1,null,e)))})))},e=l,n=this.timeout_,i=null,u=s=o=!(r=1),d(a=0),setTimeout((function(){o=!0,v(!0)}),n),v)},dD.prototype.getPromise=function(){return this.promise_},dD.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},dD.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t);return t=-1!==this.additionalRetryCodes_.indexOf(t),e||n||t},dD);function dD(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}var pD=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function vD(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(uD())return new Blob(t);throw new Rx("unsupported-environment","This browser doesn't seem to support creating Blobs")}var gD=(yD.prototype.size=function(){return this.size_},yD.prototype.type=function(){return this.type_},yD.prototype.slice=function(t,e){if(sD(this.data_)){var n=this.data_;return null===(r=t,i=e,i=(n=n).webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null)?null:new yD(i)}var r,i;return new yD(new Uint8Array(this.data_.buffer,t,e-t),!0)},yD.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(uD()){var n=t.map((function(t){return t instanceof yD?t.data_:t}));return new yD(vD.apply(null,n))}n=t.map((function(t){return aD(t)?Wx(Kx.RAW,t).data:t.data_}));var r=0;n.forEach((function(t){r+=t.byteLength}));var i=new Uint8Array(r),o=0;return n.forEach((function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]})),new yD(i,!0)},yD.prototype.uploadData=function(){return this.data_},yD);function yD(t,e){var n=0,r="";sD(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}function mD(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function bD(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function _D(t,e){return e}var wD=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||_D},ID=null;function TD(){if(ID)return ID;var t=[];t.push(new wD("bucket")),t.push(new wD("generation")),t.push(new wD("metageneration")),t.push(new wD("name","fullPath",!0));var e=new wD("name");return e.xform=function(t,e){return!aD(e=e)||e.length<2?e:bD(e)},t.push(e),(e=new wD("size")).xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new wD("timeCreated")),t.push(new wD("updated")),t.push(new wD("md5Hash",null,!0)),t.push(new wD("cacheControl",null,!0)),t.push(new wD("contentDisposition",null,!0)),t.push(new wD("contentEncoding",null,!0)),t.push(new wD("contentLanguage",null,!0)),t.push(new wD("contentType",null,!0)),t.push(new wD("metadata","customMetadata",!0)),ID=t}function ED(t,e,n){return null===(e=mD(e))?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath;return r=new nD(n,r),e._makeStorageReference(r)}})}(r,t),r}(t,e,n)}function SD(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var CD="prefixes",kD=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function OD(t){if(!t)throw Lx()}function ND(t,e){return function(n,r){return OD(null!==(r=ED(t,r,e))),r}}function AD(t,e){return function(n,r){return OD(null!==(r=function(t,e,n){return null===(n=mD(n))?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[CD])for(var i=0,o=n[CD];i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new nD(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=t._makeStorageReference(new nD(e,l.name)),r.items.push(s)}return r}(t,e,n)}(t,e,r))),r}}function PD(t){return function(e,n){var r,i=401===e.getStatus()?new Rx("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(r=t.bucket,new Rx("quota-exceeded","Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,new Rx("unauthorized","User does not have permission to access '"+i+"'.")):n;return i.serverResponse=n.serverResponse,i}}function RD(t){var e=PD(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(n=t.path,i=new Rx("object-not-found","Object '"+n+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function xD(t,e,n){var r=lD(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime;return(i=new kD(r,"GET",ND(t,n),i)).errorHandler=RD(e),i}function DD(t,e,n){return(n=Object.assign({},n)).fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}var LD=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function jD(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){OD(!1)}return OD(!!n&&-1!==(e||["active"]).indexOf(n)),n}var MD=function(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(t=t,this.next=t.next,this.error=t.error,this.complete=t.complete)};function FD(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var UD=(qD.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},qD.prototype._shouldDoResumable=function(t){return 262144<t.size()},qD.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},qD.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},qD.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=DD(e,r,i);return i={name:a.fullPath},o=lD(o,t.host),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},n=SD(a,n),t=t.maxUploadRetryTime,(t=new kD(o,"POST",(function(t){var e;jD(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){OD(!1)}return OD(aD(e)),e}),t)).urlParams=i,t.headers=r,t.body=n,t.errorHandler=PD(e),t}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata);e=t._ref.storage._makeRequest(n,e),(t._request=e).getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},qD.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){return t=t.maxUploadRetryTime,(t=new kD(n,"POST",(function(t){var e=jD(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){OD(!1)}n||OD(!1);var i=Number(n);return OD(!isNaN(i)),new LD(i,r.size(),"final"===e)}),t)).headers={"X-Goog-Upload-Command":"query"},t.errorHandler=PD(e),t}(t._ref.storage,t._ref._location,e,t._blob);n=t._ref.storage._makeRequest(r,n),(t._request=n).getPromise().then((function(e){t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},qD.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new LD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,a,s){var u=new LD(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Rx("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;if(0<i&&(l=Math.min(l,i)),i=(a=u.current)+l,c={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},null===(a=r.slice(a,i)))throw Mx();return i=e.maxUploadRetryTime,(i=new kD(n,"POST",(function(t,n){var i=jD(t,["active","final"]),a=u.current+l,s=r.size();return n="final"===i?ND(e,o)(t,n):null,new LD(a,s,"final"===i,n)}),i)).headers=c,i.body=a.uploadData(),i.progressCallback=s||null,i.errorHandler=PD(t),i}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(i){return t._error=i,void t._transition("error")}i=t._ref.storage._makeRequest(o,i),(t._request=i).getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},qD.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},qD.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=xD(t._ref.storage,t._ref._location,t._mappings);e=t._ref.storage._makeRequest(n,e),(t._request=e).getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},qD.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=DD(e,r,i);if(i="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+SD(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",s="\r\n--"+s+"--",null===(r=gD.getBlob(i,r,s)))throw Mx();return s={name:u.fullPath},u=lD(o,t.host),o=t.maxUploadRetryTime,(o=new kD(u,"POST",ND(t,n),o)).urlParams=s,o.headers=a,o.body=r.uploadData(),o.errorHandler=PD(e),o}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata);e=t._ref.storage._makeRequest(n,e),(t._request=e).getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},qD.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},qD.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=jx(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},qD.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(qD.prototype,"snapshot",{get:function(){var t=$x(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),qD.prototype.on=function(t,e,n,r){var i=this,o=new MD(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},qD.prototype.then=function(t,e){return this._promise.then(t,e)},qD.prototype.catch=function(t){return this.then(null,t)},qD.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},qD.prototype._removeObserver=function(t){-1!==(t=this._observers.indexOf(t))&&this._observers.splice(t,1)},qD.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},qD.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch($x(this._state)){case Xx.SUCCESS:FD(this._resolve.bind(null,this.snapshot))();break;case Xx.CANCELED:case Xx.ERROR:FD(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},qD.prototype._notifyObserver=function(t){switch($x(this._state)){case Xx.RUNNING:case Xx.PAUSED:t.next&&FD(t.next.bind(t,this.snapshot))();break;case Xx.SUCCESS:t.complete&&FD(t.complete.bind(t))();break;case Xx.CANCELED:case Xx.ERROR:t.error&&FD(t.error.bind(t,this._error))();break;default:t.error&&FD(t.error.bind(t,this._error))()}},qD.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},qD.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},qD.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},qD);function qD(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=TD(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}var VD=(BD.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},BD.prototype._newRef=function(t,e){return new BD(t,e)},Object.defineProperty(BD.prototype,"root",{get:function(){var t=new nD(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(BD.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(BD.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(BD.prototype,"name",{get:function(){return bD(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(BD.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(BD.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);return null===t?null:(t=new nD(this._location.bucket,t),new BD(this._service,t))},enumerable:!1,configurable:!0}),BD.prototype._throwIfRoot=function(t){if(""===this._location.path)throw qx(t)},BD);function BD(t,e){this._service=t,this._location=e instanceof nD?e:nD.makeFromUrl(e,t.host)}function KD(t,e){return $i(this,void 0,void 0,(function(){var n,r;return Ji(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&cD("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=e||{},o=t.storage,a=t._location,s=r.pageToken,u=r.maxResults,c={},a.isRoot?c.prefix="":c.prefix=a.path+"/",0<"/".length&&(c.delimiter="/"),s&&(c.pageToken=s),u&&(c.maxResults=u),s=lD(a.bucketOnlyServerUrl(),o.host),u=o.maxOperationRetryTime,(u=new kD(s,"GET",AD(o,a.bucket),u)).urlParams=c,u.errorHandler=PD(a),[2,t.storage._makeRequest(u,n).getPromise()]}var o,a,s,u,c}))}))}function zD(t){return $i(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=n.sent(),r=t.storage,i=t._location,o=TD(),a=lD(i.fullServerUrl(),r.host),s=r.maxOperationRetryTime,(s=new kD(a,"GET",function(t,e){return function(n,r){var i=ED(t,r,e);return OD(null!==i),function(t,e,n){if(null===(e=mD(e)))return null;if(!aD(e.downloadTokens))return null;if(0===(e=e.downloadTokens).length)return null;var r=encodeURIComponent;return e.split(",").map((function(e){var i=t.bucket,o=t.fullPath;return lD("/b/"+r(i)+"/o/"+r(o),n)+hD({alt:"media",token:e})}))[0]}(i,r,t.host)}}(r,o),s)).errorHandler=RD(i),[2,t.storage._makeRequest(s,e).getPromise().then((function(t){if(null===t)throw new Rx("no-download-url","The given file does not have any download URLs.");return t}))]}var r,i,o,a,s}))}))}function WD(t,e){var n;return n=t._location.path,e=(e=e).split("/").filter((function(t){return 0<t.length})).join("/"),e=0===n.length?e:n+"/"+e,e=new nD(t._location.bucket,e),new VD(t.storage,e)}function HD(t){return/^[A-Za-z]+:\/\//.test(t)}function GD(t,e){if(e&&HD(e)){if(t instanceof YD)return new VD(t,e);throw Fx("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof YD){var r=e;if(null==r._bucket)throw new Rx("no-default-bucket","No default bucket found. Did you set the '"+Px+"' property when initializing the app?");return r=new VD(r,r._bucket),null!=n?t(r,n):r}if(void 0===n)return e;if(n.includes(".."))throw Fx('`path` param cannot contain ".."');return WD(e,n)}(t,e)}function QD(t,e){return null==(e=null==e?void 0:e[Px])?null:nD.makeFromBucketSpec(e,t)}var YD=(Object.defineProperty(XD.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=nD.makeFromBucketSpec(this._url,t):this._bucket=QD(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(XD.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){cD("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(XD.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){cD("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),XD.prototype._getAuthToken=function(){return $i(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(t=e.sent()))return[2,t.accessToken];e.label=2;case 2:return[2,null]}}))}))},XD.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},XD.prototype._makeStorageReference=function(t){return new VD(this,t)},XD.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new iD(Ux());var r,i,o,a,s,u,c=(r=t,i=this._appId,o=e,a=this._pool,s=this._firebaseVersion,u=hD(r.urlParams),t=r.url+u,u=e=Object.assign({},r.headers),(i=i)&&(u["X-Firebase-GMPID"]=i),i=e,null!==(o=o)&&0<o.length&&(i.Authorization="Firebase "+o),s=s,e["X-Firebase-Storage-Version"]="webjs/"+(null!=s?s:"AppManager"),new fD(t,r.method,e,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,a));return this._requests.add(c),c.getPromise().then((function(){return n._requests.delete(c)}),(function(){return n._requests.delete(c)})),c},XD);function XD(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Ax,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?nD.makeFromBucketSpec(r,this._host):QD(this._host,this.app.options)}function $D(t,e){return GD(t=Go(t),e)}var JD=(Object.defineProperty(ZD.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(ZD.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(ZD.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(ZD.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),ZD);function ZD(t,e,n){this._delegate=t,this.task=e,this.ref=n}var tL=(Object.defineProperty(eL.prototype,"snapshot",{get:function(){return new JD(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),eL.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new JD(e,n,n._ref))}),e)},eL.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new JD(t,i,i._ref))}:{next:e.next?function(t){return e.next(new JD(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},eL);function eL(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}var nL=(Object.defineProperty(rL.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new iL(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(rL.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new iL(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(rL.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),rL);function rL(t,e){this._delegate=t,this._service=e}var iL=(Object.defineProperty(oL.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(oL.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(oL.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),oL.prototype.toString=function(){return this._delegate.toString()},oL.prototype.child=function(t){return new oL(WD(this._delegate,t),this.storage)},Object.defineProperty(oL.prototype,"root",{get:function(){return new oL(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(oL.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new oL(t,this.storage)},enumerable:!1,configurable:!0}),oL.prototype.put=function(t,e){return this._throwIfRoot("put"),new tL(function(t,e,n){return e=e,n=n,(t=t=Go(t))._throwIfRoot("uploadBytesResumable"),new UD(t,new gD(e),n)}(this._delegate,t,e),this)},oL.prototype.putString=function(t,e,n){return void 0===e&&(e=Kx.RAW),this._throwIfRoot("putString"),t=Wx(e,t),null==(n=Xi({},n)).contentType&&null!=t.contentType&&(n.contentType=t.contentType),new tL(new UD(this._delegate,new gD(t.data,!0),n),this)},oL.prototype.listAll=function(){var t=this;return function(t){var e={prefixes:[],items:[]};return function t(e,n,r){return $i(this,void 0,void 0,(function(){var i,o;return Ji(this,(function(a){switch(a.label){case 0:return[4,KD(e,{pageToken:r})];case 1:return i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(o=n.items).push.apply(o,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))}(Go(this._delegate)).then((function(e){return new nL(e,t.storage)}))},oL.prototype.list=function(t){var e=this;return t=t||void 0,KD(Go(this._delegate),t).then((function(t){return new nL(t,e.storage)}))},oL.prototype.getMetadata=function(){return function(t){return function(t){return $i(this,void 0,void 0,(function(){var e,n;return Ji(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=xD(t.storage,t._location,TD()),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(t=Go(t))}(this._delegate)},oL.prototype.updateMetadata=function(t){return t=t,function(t,e){return $i(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=r.sent(),i=t.storage,o=t._location,a=e,s=TD(),u=lD(o.fullServerUrl(),i.host),c=SD(a,s),a=i.maxOperationRetryTime,(a=new kD(u,"PATCH",ND(i,s),a)).headers={"Content-Type":"application/json; charset=utf-8"},a.body=c,a.errorHandler=RD(o),[2,t.storage._makeRequest(a,n).getPromise()]}var i,o,a,s,u,c}))}))}(Go(this._delegate),t)},oL.prototype.getDownloadURL=function(){return zD(Go(this._delegate))},oL.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return $i(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=n.sent(),r=t.storage,o=lD((i=t._location).fullServerUrl(),r.host),r=r.maxOperationRetryTime,(r=new kD(o,"DELETE",(function(t,e){}),r)).successCodes=[200,204],r.errorHandler=RD(i),[2,t.storage._makeRequest(r,e).getPromise()]}var r,i,o}))}))}(Go(this._delegate))},oL.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw qx(t)},oL);function oL(t,e){this._delegate=t,this.storage=e}var aL,sL,uL=(Object.defineProperty(cL.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(cL.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),cL.prototype.ref=function(t){if(HD(t))throw Fx("ref() expected a child path but got a URL, use refFromURL instead.");return new iL($D(this._delegate,t),this)},cL.prototype.refFromURL=function(t){if(!HD(t))throw Fx("refFromURL() expected a full URL but got a child path, use ref() instead.");try{nD.makeFromUrl(t,this._delegate.host)}catch(t){throw Fx("refFromUrl() expected a valid full URL but got an invalid one.")}return new iL($D(this._delegate,t),this)},cL.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},cL.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},cL.prototype.useEmulator=function(t,e){t=t,e=e,this._delegate.host="http://"+t+":"+e},cL);function cL(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}sL={TaskState:Xx,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:Kx,Storage:YD,Reference:iL},(aL=Ia).INTERNAL.registerComponent(new Qo("storage",(function(t,e){var n=e.instanceIdentifier;return e=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal"),new uL(e,new YD(e,t,new tD,n,Ia.SDK_VERSION))}),"PUBLIC").setServiceProps(sL).setMultipleInstances(!0)),aL.registerVersion("@firebase/storage","0.5.1");var lL,hL,fL="FB-PERF-TRACE-MEASURE",dL="@firebase/performance/config",pL="@firebase/performance/configexpire",vL=(W="Performance",(kn={})["trace started"]="Trace {$traceName} was started before.",kn["trace stopped"]="Trace {$traceName} is not running.",kn["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",kn["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",kn["no window"]="Window is not available.",kn["no app id"]="App id is not available.",kn["no project id"]="Project id is not available.",kn["no api key"]="Api key is not available.",kn["invalid cc log"]="Attempted to queue invalid cc event",kn["FB not default"]="Performance can only start when Firebase app instance is the default one.",kn["RC response not ok"]="RC response is not ok",kn["invalid attribute name"]="Attribute name {$attributeName} is invalid.",kn["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",kn["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",kn["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",new So("performance",W,kn=kn)),gL=new sa(W);gL.logLevel=ea.INFO;var yL,mL=(bL.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},bL.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},bL.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},bL.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},bL.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},bL.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},bL.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!bo()||(gL.info("IndexedDB is not supported by current browswer"),!1):(gL.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},bL.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},bL.getInstance=function(){return lL=void 0===lL?new bL(hL):lL},bL);function bL(t){if(!(this.window=t))throw vL.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function _L(t,e){var n=t.length-e.length;if(n<0||1<n)throw vL.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var wL,IL,TL=(EL.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw vL.create("no app id");return t},EL.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw vL.create("no project id");return t},EL.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw vL.create("no api key");return t},EL.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},EL.getInstance=function(){return yL=void 0===yL?new EL:yL},EL);function EL(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=_L("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=_L("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(W=IL=IL||{})[W.UNKNOWN=0]="UNKNOWN",W[W.VISIBLE=1]="VISIBLE",W[W.HIDDEN=2]="HIDDEN";var SL=["firebase_","google_","ga_"],CL=new RegExp("^[a-zA-Z]\\w*$");function kL(){switch(mL.getInstance().document.visibilityState){case"visible":return IL.VISIBLE;case"hidden":return IL.HIDDEN;default:return IL.UNKNOWN}}var OL=!0;function NL(t){var e,n=function(){var t=mL.getInstance().localStorage;if(t){var e=t.getItem(pL);if(e&&function(t){return Number(t)>Date.now()}(e)){var n=t.getItem(dL);if(n)try{return JSON.parse(n)}catch(t){return}}}}();return n?(PL(n),Promise.resolve()):(e=t,function(){var t=TL.getInstance().installationsService.getToken();return t.then((function(t){})),t}().then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+TL.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+TL.getInstance().getApiKey();return t=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:TL.getInstance().getAppId(),app_version:"0.4.11",sdk_version:"0.0.1"})}),fetch(t).then((function(t){if(t.ok)return t.json();throw vL.create("RC response not ok")}))})).catch((function(){gL.info(AL)})).then(PL).then((function(t){var e=mL.getInstance().localStorage;t&&e&&(e.setItem(dL,JSON.stringify(t)),e.setItem(pL,String(Date.now()+60*TL.getInstance().configTimeToLive*60*1e3)))}),(function(){})))}var AL="Could not fetch config, will use default configs";function PL(t){if(!t)return t;var e=TL.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):OL,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=RL(e.tracesSamplingRate),e.logNetworkAfterSampling=RL(e.networkRequestsSamplingRate),t}function RL(t){return Math.random()<=t}var xL,DL=1;function LL(){return DL=2,xL=xL||function(){var t=mL.getInstance().document;return new Promise((function(e){var n;t&&"complete"!==t.readyState?(n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())},t.addEventListener("readystatechange",n)):e()}))}().then((function(){return(t=TL.getInstance().installationsService.getId()).then((function(t){wL=t})),t;var t})).then(NL).then(jL,jL)}function jL(){DL=3}var ML,FL=3,UL=[],qL=!1;function VL(t,e){(ML=ML||function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!function(t){if(!t.eventTime||!t.message)throw vL.create("invalid cc log");UL=eo(eo([],UL),[t])}({message:t.apply(void 0,e),eventTime:Date.now()})}}(zL))(t,e)}function BL(t){var e=TL.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&mL.getInstance().requiredApisAvailable()&&(t.isAuto&&kL()!==IL.VISIBLE||(3===DL?KL(t):LL().then((function(){return KL(t)}),(function(){return KL(t)}))))}function KL(t){var e;!wL||(e=TL.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return VL(t,1)}),0)}function zL(t,e){return(0===e?function(t){return t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:WL(),network_request_metric:t},JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};return 0!==Object.keys(t.counters).length&&(e.counters=t.counters),t=t.getAttributes(),0!==Object.keys(t).length&&(e.custom_attributes=t),e={application_info:WL(),trace_metric:e},JSON.stringify(e)})(t)}function WL(){return{google_app_id:TL.getInstance().getAppId(),app_instance_id:wL,web_app_info:{sdk_version:"0.4.11",page_url:mL.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=mL.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:kL(),effective_connection_type:function(){var t=mL.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var HL=["_fp","_fcp","_fid"],GL=(QL.prototype.start=function(){if(1!==this.state)throw vL.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},QL.prototype.stop=function(){if(2!==this.state)throw vL.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),BL(this)},QL.prototype.record=function(t,e,n){if(t<=0)throw vL.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw vL.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Xi({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}BL(this)},QL.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},QL.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<HL.indexOf(n))&&n.startsWith("_"))throw vL.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&gL.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},QL.prototype.getMetric=function(t){return this.counters[t]||0},QL.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||40<n.length)&&!SL.some((function(t){return n.startsWith(t)}))&&!!n.match(CL),i=0!==(i=e).length&&i.length<=100;if(r&&i)this.customAttributes[t]=e;else{if(!r)throw vL.create("invalid attribute name",{attributeName:t});if(!i)throw vL.create("invalid attribute value",{attributeValue:e})}},QL.prototype.getAttribute=function(t){return this.customAttributes[t]},QL.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},QL.prototype.getAttributes=function(){return Xi({},this.customAttributes)},QL.prototype.setStartTime=function(t){this.startTimeUs=t},QL.prototype.setDuration=function(t){this.durationUs=t},QL.prototype.calculateTraceMetrics=function(){var t;(t=(t=this.api.getEntriesByName(this.traceMeasure))&&t[0])&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},QL.createOobTrace=function(t,e,n){var r,i=mL.getInstance().getUrl();i&&(r=new QL("_wt_"+i,!0),i=Math.floor(1e3*mL.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find((function(t){return"first-paint"===t.name})))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find((function(t){return"first-contentful-paint"===t.name})))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),BL(r))},QL.createUserTimingTrace=function(t){BL(new QL(t,!1,t))},QL);function QL(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=mL.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||fL+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function YL(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=mL.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=TL.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout((function(){return VL(e,0)}),0)))}function XL(){wL&&(setTimeout((function(){var t,e=mL.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");e.onFirstInputDelay?(t=setTimeout((function(){GL.createOobTrace(n,r),t=void 0}),5e3),e.onFirstInputDelay((function(e){t&&(clearTimeout(t),GL.createOobTrace(n,r,e))}))):GL.createOobTrace(n,r)}),0),setTimeout((function(){for(var t=mL.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)YL(n[e]);t.setupObserver("resource",YL)}),0),setTimeout((function(){for(var t=mL.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)$L(n[e]);t.setupObserver("measure",$L)}),0))}function $L(t){(t=t.name).substring(0,fL.length)!==fL&&GL.createUserTimingTrace(t)}var JL,ZL=(tj.prototype.trace=function(t){return new GL(t)},Object.defineProperty(tj.prototype,"instrumentationEnabled",{get:function(){return TL.getInstance().instrumentationEnabled},set:function(t){TL.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(tj.prototype,"dataCollectionEnabled",{get:function(){return TL.getInstance().dataCollectionEnabled},set:function(t){TL.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),tj);function tj(t){this.app=t,mL.getInstance().requiredApisAvailable()&&_o().then((function(t){t&&(qL||(function t(e){setTimeout((function(){var e,n;if(0!==FL)return UL.length?(n=(e=UL.splice(0,1e3)).map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(e,n){return function(t){var e=TL.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(e).then((function(t){return t.ok||gL.info("Call to Firebase backend failed."),t.json()})).then((function(e){var r=Number(e.nextRequestWaitMillis),i=1e4;isNaN(r)||(i=Math.max(r,i)),e=e.logResponseDetails,Array.isArray(e)&&0<e.length&&"RETRY_REQUEST_LATER"===e[0].responseAction&&(UL=eo(eo([],n),UL),gL.info("Retry transport request later.")),FL=3,t(i)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:TL.getInstance().logSource,log_event:n},e).catch((function(){UL=eo(eo([],e),UL),FL--,gL.info("Tries left: "+FL+"."),t(1e4)}))):t(1e4)}),e)}(5500),qL=!0),LL().then(XL,XL))})).catch((function(t){gL.info("Environment doesn't support IndexedDB: "+t)}))}(JL=Ia).INTERNAL.registerComponent(new Qo("performance",(function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw vL.create("FB not default");if("undefined"==typeof window)throw vL.create("no window");return hL=window,TL.getInstance().firebaseAppInstance=t,TL.getInstance().installationsService=e,new ZL(t)}(t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate())}),"PUBLIC")),JL.registerVersion("@firebase/performance","0.4.11");var ej,nj,rj="https://www.googletagmanager.com/gtag/js";(W=ej=ej||{}).EVENT="event",W.SET="set",W.CONFIG="config",(W=nj=nj||{}).ADD_SHIPPING_INFO="add_shipping_info",W.ADD_PAYMENT_INFO="add_payment_info",W.ADD_TO_CART="add_to_cart",W.ADD_TO_WISHLIST="add_to_wishlist",W.BEGIN_CHECKOUT="begin_checkout",W.CHECKOUT_PROGRESS="checkout_progress",W.EXCEPTION="exception",W.GENERATE_LEAD="generate_lead",W.LOGIN="login",W.PAGE_VIEW="page_view",W.PURCHASE="purchase",W.REFUND="refund",W.REMOVE_FROM_CART="remove_from_cart",W.SCREEN_VIEW="screen_view",W.SEARCH="search",W.SELECT_CONTENT="select_content",W.SELECT_ITEM="select_item",W.SELECT_PROMOTION="select_promotion",W.SET_CHECKOUT_OPTION="set_checkout_option",W.SHARE="share",W.SIGN_UP="sign_up",W.TIMING_COMPLETE="timing_complete",W.VIEW_CART="view_cart",W.VIEW_ITEM="view_item",W.VIEW_ITEM_LIST="view_item_list",W.VIEW_PROMOTION="view_promotion",W.VIEW_SEARCH_RESULTS="view_search_results";var ij=new sa("@firebase/analytics");(W={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",W["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",W["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",W["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",W["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",W["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",W["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",W["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',W["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.';var oj=new So("analytics","Analytics",W=W);function aj(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var sj=new(aj.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},aj.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},aj.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},aj);function uj(t){var e;return $i(this,void 0,void 0,(function(){var n,r,i,o;return Ji(this,(function(a){switch(a.label){case 0:return n=t.appId,o=t.apiKey,o={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":o})},n="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(n,o)];case 1:if(200===(r=a.sent()).status||304===r.status)return[3,6];i="",a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.json()];case 3:return o=a.sent(),null!==(e=o.error)&&void 0!==e&&e.message&&(i=o.error.message),[3,5];case 4:return a.sent(),[3,5];case 5:throw oj.create("config-fetch-failed",{httpStatus:r.status,responseMessage:i});case 6:return[2,r.json()]}}))}))}function cj(t,e,n){return void 0===e&&(e=sj),$i(this,void 0,void 0,(function(){var r,i,o,a,s,u=this;return Ji(this,(function(c){if(a=t.options,r=a.appId,i=a.apiKey,o=a.measurementId,!r)throw oj.create("no-app-id");if(i)return a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new hj,setTimeout((function(){return $i(u,void 0,void 0,(function(){return Ji(this,(function(t){return s.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,function t(e,n,r,i){var o=n.throttleEndTimeMillis,a=n.backoffCount;return void 0===i&&(i=sj),$i(this,void 0,void 0,(function(){var n,s,u,c,l;return Ji(this,(function(h){switch(h.label){case 0:n=e.appId,s=e.measurementId,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,lj(r,o)];case 2:return h.sent(),[3,4];case 3:if(c=h.sent(),s)return ij.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:n,measurementId:s}];throw c;case 4:return h.trys.push([4,6,,7]),[4,uj(e)];case 5:return l=h.sent(),i.deleteThrottleMetadata(n),[2,l];case 6:if(function(t){if(t instanceof To&&t.customData)return 429===(t=Number(t.customData.httpStatus))||500===t||503===t||504===t}(u=h.sent()))return c=503===Number(u.customData.httpStatus)?Ho(a,i.intervalMillis,30):Ho(a,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:a+1},i.setThrottleMetadata(n,l),ij.debug("Calling attemptFetch again in "+c+" millis"),[2,t(e,l,r,i)];if(i.deleteThrottleMetadata(n),s)return ij.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:n,measurementId:s}];throw u;case 7:return[2]}}))}))}({appId:r,apiKey:i,measurementId:o},a,s,e)];if(o)return[2,{measurementId:o,appId:r}];throw oj.create("no-api-key")}))}))}function lj(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(oj.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var hj=(fj.prototype.addEventListener=function(t){this.listeners.push(t)},fj.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},fj);function fj(){this.listeners=[]}var dj,pj,vj={},gj=[],yj={},mj="dataLayer",bj="gtag",_j=!1;function wj(t,e){i=[],go()&&i.push("This is a browser extension environment."),wo()||i.push("Cookies are not available."),0<i.length&&(i=i.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),i=oj.create("invalid-analytics-context",{errorInfo:i}),ij.warn(i.message));var n,r,i,o,a,s,u=t.options.appId;if(!u)throw oj.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw oj.create("no-api-key");ij.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=vj[u])throw oj.create("already-exists",{id:u});return _j||(a=mj,s=[],Array.isArray(window[a])?s=window[a]:window[a]=s,n=vj,r=gj,i=yj,o=mj,a=bj,s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[o].push(arguments)},window[a]&&"function"==typeof window[a]&&(s=window[a]),window[a]=function(t,e,n,r){return function(i,o,a){return $i(this,void 0,void 0,(function(){var s;return Ji(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==ej.EVENT?[3,2]:[4,function(t,e,n,r,i){return $i(this,void 0,void 0,(function(){var o,a,s,u,c,l,h;return Ji(this,(function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(h=i.send_to,Array.isArray(h)||(h=[h]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),s=function(t){var n;if(!(n=(n=a.find((function(e){return e.measurementId===t})))&&e[n.appId]))return o=[],"break";o.push(n)},u=0,c=h;u<c.length&&(l=c[u],"break"!==s(l));u++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(ej.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),ij.error(h),[3,5];case 5:return[2]}}))}))}(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==ej.CONFIG?[3,4]:[4,function(t,e,n,r,i,o){return $i(this,void 0,void 0,(function(){var a,s;return Ji(this,(function(u){switch(u.label){case 0:a=r[i],u.label=1;case 1:return u.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return u.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return(s=(s=u.sent()).find((function(t){return t.measurementId===i})))?[4,e[s.appId]]:[3,6];case 5:u.sent(),u.label=6;case 6:return[3,8];case 7:return s=u.sent(),ij.error(s),[3,8];case 8:return t(ej.CONFIG,i,o),[2]}}))}))}(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(ej.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),ij.error(s),[3,7];case 7:return[2]}}))}))}}(s,n,r,i),a={gtagCore:s,wrappedGtag:window[a]},pj=a.wrappedGtag,dj=a.gtagCore,_j=!0),vj[u]=function(t,e,n,r,i,o){return $i(this,void 0,void 0,(function(){var a,s,u;return Ji(this,(function(c){switch(c.label){case 0:return(a=cj(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&ij.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return ij.error(t)})),e.push(a),s=function(){return $i(this,void 0,void 0,(function(){var t;return Ji(this,(function(e){switch(e.label){case 0:return bo()?[3,1]:(ij.warn(oj.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,_o()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),ij.warn(oj.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){if(t)return r.getId()})),[4,Promise.all([a,s])];case 1:return u=c.sent(),a=u[0],s=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(rj))return r}}()||(l=o,h=a.measurementId,(f=document.createElement("script")).src=rj+"?l="+l+"&id="+h,f.async=!0,document.head.appendChild(f)),i("js",new Date),(u={}).origin="firebase",u.update=!0,u=u,null!=s&&(u.firebase_id=s),i(ej.CONFIG,a.measurementId,u),[2,a.measurementId]}var l,h,f}))}))}(t,gj,yj,e,dj,mj),{app:t,logEvent:function(t,e,n){(function(t,e,n,r,i){return $i(this,void 0,void 0,(function(){var o;return Ji(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(ej.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),o=Xi(Xi({},r),{send_to:o}),t(ej.EVENT,n,o),a.label=3;case 3:return[2]}}))}))})(pj,vj[u],t,e,n).catch((function(t){return ij.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return $i(this,void 0,void 0,(function(){var i;return Ji(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(ej.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(ej.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(pj,vj[u],t,e).catch((function(t){return ij.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return $i(this,void 0,void 0,(function(){var i;return Ji(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(ej.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(ej.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(pj,vj[u],t,e).catch((function(t){return ij.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return $i(this,void 0,void 0,(function(){var i,o,a,s,u;return Ji(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return t(ej.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(ej.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(pj,vj[u],t,e).catch((function(t){return ij.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return $i(this,void 0,void 0,(function(){var n;return Ji(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(vj[u],t).catch((function(t){return ij.error(t)}))},INTERNAL:{delete:function(){return delete vj[u],Promise.resolve()}}}}var Ij,Tj="analytics";(Ij=Ia).INTERNAL.registerComponent(new Qo(Tj,(function(t){return wj(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:function(t){if(_j)throw oj.create("already-initialized");t.dataLayerName&&(mj=t.dataLayerName),t.gtagName&&(bj=t.gtagName)},EventName:nj,isSupported:function(){return $i(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:if(go())return[2,!1];if(!wo())return[2,!1];if(!bo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,_o()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}})),Ij.INTERNAL.registerComponent(new Qo("analytics-internal",(function(t){try{return{logEvent:t.getProvider(Tj).getImmediate().logEvent}}catch(t){throw oj.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),Ij.registerVersion("@firebase/analytics","0.6.9");var Ej=(Sj.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e;return e=n<=t,this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},Sj.prototype.fetch=function(t){return $i(this,void 0,void 0,(function(){var e,n,r;return Ji(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return r=i.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,e)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return n=i.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return i.sent(),[2,n]}}))}))},Sj);function Sj(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}(W={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",W["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",W["registration-api-key"]="Undefined API key. Check Firebase app initialization.",W["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",W["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",W["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",W["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",W["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",W["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",W["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',W["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',W["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",W["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.";var Cj=new So("remoteconfig","Remote Config",W=W),kj=(Oj.prototype.fetch=function(t){return $i(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l;return Ji(this,(function(h){switch(h.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:i=h.sent(),e=i[0],r=i[1],n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",i=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,n={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},r={sdk_version:this.sdkVersion,app_instance_id:e,app_instance_id_token:r,app_id:this.appId,language_code:(f=void 0===f?navigator:f).languages&&f.languages[0]||f.language},r={method:"POST",headers:n,body:JSON.stringify(r)},i=fetch(i,r),r=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),h.label=2;case 2:return h.trys.push([2,5,,6]),[4,Promise.race([i,r])];case 3:return h.sent(),[4,i];case 4:return l=h.sent(),[3,6];case 5:throw r=h.sent(),i="fetch-client-network","AbortError"===r.name&&(i="fetch-timeout"),Cj.create(i,{originalErrorMessage:r.message});case 6:if(o=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];c=void 0,h.label=7;case 7:return h.trys.push([7,9,,10]),[4,l.json()];case 8:return c=h.sent(),[3,10];case 9:throw l=h.sent(),Cj.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:s=c.entries,u=c.state,h.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===u?o=500:"NO_CHANGE"===u?o=304:"NO_TEMPLATE"!==u&&"EMPTY_CONFIG"!==u||(s={}),304!==o&&200!==o)throw Cj.create("fetch-status",{httpStatus:o});return[2,{status:o,eTag:a,config:s}]}var f}))}))},Oj);function Oj(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var Nj=(Aj.prototype.addEventListener=function(t){this.listeners.push(t)},Aj.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},Aj);function Aj(){this.listeners=[]}var Pj=["1","true","t","yes","y","on"],Rj=(xj.prototype.asString=function(){return this._value},xj.prototype.asBoolean=function(){return"static"!==this._source&&0<=Pj.indexOf(this._value.toLowerCase())},xj.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)?0:t},xj.prototype.getSource=function(){return this._source},xj);function xj(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var Dj=(Lj.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ea.DEBUG;break;case"silent":this._logger.logLevel=ea.SILENT;break;default:this._logger.logLevel=ea.ERROR}},Object.defineProperty(Lj.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(Lj.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),Lj.prototype.activate=function(){return $i(this,void 0,void 0,(function(){var t,e;return Ji(this,(function(n){switch(n.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=n.sent(),t=e[0],e=e[1],t&&t.config&&t.eTag&&t.eTag!==e?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return n.sent(),[2,!0]}}))}))},Lj.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},Lj.prototype.fetch=function(){return $i(this,void 0,void 0,(function(){var t,e,n,r=this;return Ji(this,(function(i){switch(i.label){case 0:t=new Nj,setTimeout((function(){return $i(r,void 0,void 0,(function(){return Ji(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=(o=e)instanceof To&&-1!==o.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}var o}))}))},Lj.prototype.fetchAndActivate=function(){return $i(this,void 0,void 0,(function(){return Ji(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},Lj.prototype.getAll=function(){var t=this;return function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Xi(Xi({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},Lj.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},Lj.prototype.getNumber=function(t){return this.getValue(t).asNumber()},Lj.prototype.getString=function(t){return this.getValue(t).asString()},Lj.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new Rj("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new Rj("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new Rj("static"))},Lj);function Lj(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function jj(t,e){return t=t.target.error||void 0,Cj.create(e,{originalErrorMessage:t&&t.message})}var Mj="app_namespace_store",Fj=(Uj.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},Uj.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},Uj.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},Uj.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},Uj.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},Uj.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},Uj.prototype.getActiveConfig=function(){return this.get("active_config")},Uj.prototype.setActiveConfig=function(t){return this.set("active_config",t)},Uj.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},Uj.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},Uj.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},Uj.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},Uj.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},Uj.prototype.get=function(t){return $i(this,void 0,void 0,(function(){var e,n=this;return Ji(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([Mj],"readonly").objectStore(Mj),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(jj(t,"storage-get"))},s.onsuccess=function(t){t=t.target.result,r(t?t.value:void 0)}}catch(o){i(Cj.create("storage-get",{originalErrorMessage:o&&o.message}))}}))]}}))}))},Uj.prototype.set=function(t,e){return $i(this,void 0,void 0,(function(){var n,r=this;return Ji(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([Mj],"readwrite").objectStore(Mj),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(jj(t,"storage-set"))},u.onsuccess=function(){i()}}catch(i){o(Cj.create("storage-set",{originalErrorMessage:i&&i.message}))}}))]}}))}))},Uj.prototype.delete=function(t){return $i(this,void 0,void 0,(function(){var e,n=this;return Ji(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([Mj],"readwrite").objectStore(Mj),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(jj(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(r){i(Cj.create("storage-delete",{originalErrorMessage:r&&r.message}))}}))]}}))}))},Uj.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},Uj);function Uj(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(jj(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(Mj,{keyPath:"compositeKey"})}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var qj=(Vj.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},Vj.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},Vj.prototype.getActiveConfig=function(){return this.activeConfig},Vj.prototype.loadFromStorage=function(){return $i(this,void 0,void 0,(function(){var t,e,n;return Ji(this,(function(r){switch(r.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(t=r.sent())&&(this.lastFetchStatus=t),[4,e];case 2:return(e=r.sent())&&(this.lastSuccessfulFetchTimestampMillis=e),[4,n];case 3:return(n=r.sent())&&(this.activeConfig=n),[2]}}))}))},Vj.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},Vj.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},Vj.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},Vj);function Vj(t){this.storage=t}var Bj=(Kj.prototype.fetch=function(t){return $i(this,void 0,void 0,(function(){var e;return Ji(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},Kj.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return $i(this,void 0,void 0,(function(){var e,i;return Ji(this,(function(o){switch(o.label){case 0:return[4,(a=t.signal,s=n,new Promise((function(t,e){var n=Math.max(s-Date.now(),0),r=setTimeout(t,n);a.addEventListener((function(){clearTimeout(r),e(Cj.create("fetch-throttle",{throttleEndTimeMillis:s}))}))})))];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=o.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return o.sent(),[2,e];case 5:if(!function(t){if(t instanceof To&&t.customData)return 429===(t=Number(t.customData.httpStatus))||500===t||503===t||504===t}(i=o.sent()))throw i;return i={throttleEndTimeMillis:Date.now()+Ho(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(i)];case 6:return o.sent(),[2,this.attemptFetch(t,i)];case 7:return[2]}var a,s}))}))},Kj);function Kj(t,e){this.client=t,this.storage=e}var zj,Wj="@firebase/remote-config";return(zj=Ia).INTERNAL.registerComponent(new Qo("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw Cj.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw Cj.create("registration-project-id");if(!s)throw Cj.create("registration-api-key");if(!u)throw Cj.create("registration-app-id");return n=n||"firebase",e=new Fj(u,r.name,n),t=new qj(e),(o=new sa(Wj)).logLevel=ea.ERROR,u=new kj(i,zj.SDK_VERSION,n,a,s,u),u=new Bj(u,e),u=new Ej(u,e,t,o),(o=new Dj(r,u,t,e,o)).ensureInitialized(),o}),"PUBLIC").setMultipleInstances(!0)),zj.registerVersion(Wj,"0.1.36"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Ia.registerVersion("firebase","8.4.3","cdn"),Ia}()}).call(this,n(17),n(21))},function(t,e,n){"use strict";n(28)}]]);
//# sourceMappingURL=2.d58f8055.chunk.js.map